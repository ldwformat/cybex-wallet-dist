(window.webpackJsonp=window.webpackJsonp||[]).push([[252,2,4,5],{1262:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),s=n(58),o=n(22),i=n(8),c=n(157),l=n(1282),u=n(3),p=n.n(u),m=n(878),d=n(879),h=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},f="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};var b=function(e){var t=e.to,n=e.exact,a=e.strict,s=e.location,o=e.activeClassName,i=e.className,c=e.activeStyle,l=e.style,u=e.isActive,p=e["aria-current"],b=function(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}(e,["to","exact","strict","location","activeClassName","className","activeStyle","style","isActive","aria-current"]),_="object"===(void 0===t?"undefined":f(t))?t.pathname:t,g=_&&_.replace(/([.+*?=^!:${}()[\]|/\\])/g,"\\$1");return r.a.createElement(m.a,{path:g,exact:n,strict:a,location:s,children:function(e){var n=e.location,a=e.match,s=!!(u?u(a,n):a);return r.a.createElement(d.a,h({to:t,className:s?[i,o].filter(function(e){return e}).join(" "):i,style:s?h({},l,c):l,"aria-current":s&&p||null},b))}})};b.propTypes={to:d.a.propTypes.to,exact:p.a.bool,strict:p.a.bool,location:p.a.object,activeClassName:p.a.string,className:p.a.string,activeStyle:p.a.object,style:p.a.object,isActive:p.a.func,"aria-current":p.a.oneOf(["page","step","location","date","time","true"])},b.defaultProps={activeClassName:"active","aria-current":"page"};var _=b,g=n(81),v=n.n(g),y=n(158),E=n(19),w=n(40),k=n(1299),A=n.n(k),C=n(155),O=n(13),x=n.n(O),j=n(16),S=n(114),N=n(45),P=n(2),T=n.n(P),I=n(166),R=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var D=n(1248),M=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleNeverShow=function(e){var t=e.target.checked;return n.setState({neverShow:t}),N.a.neverShow(n.props.modalId,t),e.target.value},n.state={neverShow:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["Component"]),R(t,[{key:"render",value:function(){var e=this.props,t=(e.modalId,e.open),n=(e.locale,e.accountName);return t&&a.createElement(I.a,{modalId:this.props.modalId},a.createElement(T.a,{className:"text-center",component:"h3",content:"cybex.game.title"}),a.createElement("div",{className:"modal-content game-modal"},a.createElement("section",null,a.createElement("img",{src:D,alt:"The badge of Rainbow Cybex"}))),a.createElement("div",{className:"modal-footer"},a.createElement("p",{className:"text-center"},a.createElement("strong",null,n),a.createElement(T.a,{content:"cybex.game.content"}))))}}]),t}(),L=Object(j.connect)(M,{listenTo:function(){return[S.a]},getProps:function(e){var t=e.modalId;return{open:S.a.getState().showingModals.has(t)}}}),F=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var q=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={hover:!1},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["Component"]),F(t,[{key:"render",value:function(){var e=this.props,t=e.account,n=e.image_size,r=t.get("lifetime_referrer_name")===t.get("name");a.createElement("div",{className:"account-image"},a.createElement(A.a,{size:n.width,value:t.get("name")})),this.state.hover,this.props.showQR;return a.createElement("div",{style:{maxWidth:n.width},className:"account-info"+(this.props.my_account?" my-account":"")},this.props.title?a.createElement("h4",null,this.props.title):null,a.createElement(y.a,{size:n,account:t.get("name"),custom_image:null}),a.createElement("p",{className:this.props.titleClass},a.createElement("span",{title:x.a.translate("account.member.lifetime"),className:Object(C.b)("",{lifetime:r})},t.get("name"))),a.createElement(L,{modalId:"thanks_"+t.get("name"),accountName:t.get("name")}))}}]),t}();q.propTypes={account:E.a.ChainAccount.isRequired,title:u.string,image_size:u.object.isRequired,my_account:u.bool},q.defaultProps={title:null,image_size:{height:120,width:120},showQR:!1,titleClass:"account-title"};var B=Object(w.a)(q),W=n(18),U=n(1275),H=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var Y=Object.keys(l.a).slice(0,2),X=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.last_path=null,n._depositClick=function(e){var t=n.props.account;return U.b.showDepositModal(t.get("name"),Y[e])},n._withdrawClick=function(e){U.b.showWithdrawModal("JADE.ETH")},n.state={showAdvanced:e.viewSettings.get("showAdvanced",!1),showQR:e.viewSettings.get("showDepositQR",!1)},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["Component"]),H(t,[{key:"shouldComponentUpdate",value:function(e,t){var n=this.last_path!==window.location.hash;return this.last_path=window.location.hash,n||this.props.account!==e.account||this.props.linkedAccounts!==e.linkedAccounts||this.props.isMyAccount!==e.isMyAccount||t.showAdvanced!==this.state.showAdvanced||t.showQR!==this.state.showQR||t.titleClass!==this.state.titleClass}},{key:"componentWillUnmount",value:function(){v.a.hide()}},{key:"onLinkAccount",value:function(e){e.preventDefault(),s.a.linkAccount(this.props.account.get("name"))}},{key:"onUnlinkAccount",value:function(e){e.preventDefault(),s.a.unlinkAccount(this.props.account.get("name"))}},{key:"_toggleAdvanced",value:function(e){e.preventDefault();var t=!this.state.showAdvanced;this.setState({showAdvanced:t}),W.a.changeViewSetting({showAdvanced:t})}},{key:"_toggleQR",value:function(e){this.setState({showQR:e}),W.a.changeViewSetting({showDepositQR:e})}},{key:"render",value:function(){var e=this.props,t=e.account,n=e.linkedAccounts,r=e.isMyAccount,s=e.passwordLogin,o=t.get("name");r||(n.has(o)?a.createElement("span",{className:"button block-button",onClick:this.onUnlinkAccount.bind(this)},a.createElement(T.a,{content:"account.unfollow"})):a.createElement("span",{className:"button block-button",onClick:this.onLinkAccount.bind(this)},a.createElement(T.a,{content:"account.follow"})));var i=this.state.showAdvanced?a.createElement("span",null,"▼"):a.createElement("span",null,"▲");return a.createElement("div",{className:"grid-block vertical account-left-panel no-padding no-overflow"},a.createElement("div",{className:"grid-block"},a.createElement("div",{className:"grid-content no-padding",style:{overflowX:"hidden"}},a.createElement("div",{className:"regular-padding vertical-center"},a.createElement(B,{account:t.get("id"),image_size:{height:150,width:150},my_account:r,showQR:this.state.showQR,toggleQR:this._toggleQR.bind(this),titleClass:this.state.titleClass})),a.createElement("section",{className:"block-list"},a.createElement("ul",{className:"account-left-menu",style:{marginBottom:0,marginTop:10}},a.createElement("li",null,a.createElement(_,{to:"/account/"+o+"/dashboard/",activeClassName:"active"},a.createElement(T.a,{content:"header.dashboard"}))),a.createElement("li",null,a.createElement(_,{to:"/account/"+o+"/permissions/",activeClassName:"active"},a.createElement(T.a,{content:"account.permissions"}))))),this.props.advancedMode&&[a.createElement("div",{key:"advanceMode",style:{paddingBottom:10,paddingTop:20}},a.createElement("div",{className:"grid-container no-margin advanced-toggle"},a.createElement("a",{onClick:this._toggleAdvanced.bind(this),className:"button outline small block-button",style:{border:"none",textAlign:"left",paddingLeft:"1.75rem"}},a.createElement(T.a,{content:"account.user_issued_assets.advanced"}),a.createElement("span",null," ",i)))),a.createElement("section",{key:"advancedFnList",className:"block-list"},this.state.showAdvanced?a.createElement("ul",{className:"account-left-menu"},a.createElement("li",null,a.createElement(_,{to:"/account/"+o+"/voting/",activeClassName:"active"},a.createElement(T.a,{content:"account.voting"}))),a.createElement("li",null,a.createElement(_,{to:"/account/"+o+"/whitelist/",activeClassName:"active"},a.createElement(T.a,{content:"account.whitelist.title"}))),r?a.createElement("li",null,a.createElement(_,{to:"/account/"+o+"/vesting/",activeClassName:"active"},a.createElement(T.a,{content:"account.vesting.title"}))):null):null),r&&!s&&a.createElement("div",{key:"wallteModeCreateMode",className:"regular-padding vertical-center"},a.createElement("div",{className:"button block-button create-account-button"},a.createElement(d.a,{to:"/create-account/"+(this.props.passwordLogin?"password":"wallet")},a.createElement(T.a,{content:"account.create_new"}))))])))}}]),t}();X.propTypes={account:u.object.isRequired,advancedMode:u.bool.isRequired,linkedAccounts:u.object},X.contextTypes={router:u.object.isRequired},X.defaultProps={advancedMode:!1};var J=X,V=n(159),z=n(1428),K=n(1427),G=n(5),Q=n.n(G),$=n(1255),Z=n(1254),ee=n(1278),te=n(1300),ne=n(235),ae=n(80),re=n(54),se=n.n(re),oe=n(34),ie=n(230),ce=n(17),le=n(23),ue=n(52),pe=n(1498),me=n(287),de=n(1280),he=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var fe=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={amount:0},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["Component"]),he(t,[{key:"onAmountChanged",value:function(e){var t=e.amount,n=e.asset;this.setState({amount:t,asset:n})}},{key:"onSubmit",value:function(){var e=ce.a.get_asset_precision(this.state.asset.get("precision")),t=this.state.amount.replace(/,/g,"");t*=e,ee.a.reserveAsset(t,this.props.assetId,this.props.account.get("id")),this.props.onClose()}},{key:"render",value:function(){var e=this.props.assetId;return a.createElement("form",{className:"grid-block vertical full-width-content"},a.createElement(T.a,{component:"h3",content:"modal.reserve.title"}),a.createElement("div",{className:"grid-container ",style:{paddingTop:"2rem"}},a.createElement("div",{className:"content-block"},a.createElement(de.a,{label:"modal.reserve.amount",amount:this.state.amount,onChange:this.onAmountChanged.bind(this),asset:e,assets:[e],display_balance:a.createElement(me.a,{balance:this.props.account.getIn(["balances",e])}),tabIndex:1})),a.createElement("div",{className:"content-block button-group"},a.createElement("input",{type:"submit",className:"button success",onClick:this.onSubmit.bind(this),value:x.a.translate("modal.reserve.submit"),tabIndex:2}),a.createElement("div",{className:"button",onClick:this.props.onClose,tabIndex:3},x.a.translate("cancel")))))}}]),t}(),be=n(187),_e=n(9),ge=n(4),ve=n(10),ye=n(133),Ee=n(1266),we=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var ke=function(e,t,n,a){return new(n||(n=Promise))(function(r,s){function o(e){try{c(a.next(e))}catch(e){s(e)}}function i(e){try{c(a.throw(e))}catch(e){s(e)}}function c(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(o,i)}c((a=a.apply(e,t||[])).next())})},Ae=Object(C.a)("CrowdFundActions"),Ce=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return we(e,[{key:"queryAllCrowdFunds",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,n=arguments[2];return ke(this,void 0,void 0,regeneratorRuntime.mark(function a(){var r,s,o;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return r="1.16."+e.toString(),a.next=3,ge.a.instance().db_api().exec("list_crowdfund_objects",[r,t]);case 3:if(s=(s=a.sent).map(function(e){return Object.assign({},e,{beginMoment:Ee.utc(e.begin)})}),!n){a.next=10;break}return a.next=8,Promise.all([this.queryAccountInitCrowds(n),this.queryAccountPartiCrowds(n)]);case 8:o=a.sent,Ae("AccountCrowd: ",o);case 10:Ae("Query All Funds RES: ",s),this.allFundsFetched({start:e,size:t,res:s});case 12:case"end":return a.stop()}},a,this)}))}},{key:"queryAccountInitCrowds",value:function(e){return ke(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ge.a.instance().db_api().exec("get_crowdfund_objects",[e]);case 2:return n=t.sent,Ae("Query Init RES: ",n),this.accountInitFundsFetched(n),t.abrupt("return",n);case 6:case"end":return t.stop()}},t,this)}))}},{key:"queryAccountPartiCrowds",value:function(e){return ke(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ge.a.instance().db_api().exec("get_crowdfund_contract_objects",[e]);case 2:return n=(n=t.sent).map(function(e){return Object.assign({},e,{whenM:Ee.utc(e.when)})}),Ae("Query Fund RES: ",n),this.accountPartiFundsFetched(n),t.abrupt("return",n);case 7:case"end":return t.stop()}},t,this)}))}},{key:"initCrowdFund",value:function(e){return ke(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object.assign({fee:{asset_id:0,amount:0}},e),(a=ye.a.new_transaction()).add_type_operation("initiate_crowdfund",n),t.prev=3,t.next=6,ve.a.process_transaction(a,null,!0);case 6:return t.abrupt("return",function(e){return e(!0)});case 9:return t.prev=9,t.t0=t.catch(3),t.abrupt("return",function(e){return e(!1)});case 12:case"end":return t.stop()}},t,this,[[3,9]])}))}},{key:"partiCrowd",value:function(e){return ke(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object.assign({fee:{asset_id:0,amount:0}},e),(a=ye.a.new_transaction()).add_type_operation("participate_crowdfund",n),t.prev=3,t.next=6,ve.a.process_transaction(a,null,!0);case 6:return t.abrupt("return",function(e){return e(!0)});case 9:return t.prev=9,t.t0=t.catch(3),t.abrupt("return",function(e){return e(!1)});case 12:case"end":return t.stop()}},t,this,[[3,9]])}))}},{key:"withdrawCrowdFund",value:function(e,t){return ke(this,void 0,void 0,regeneratorRuntime.mark(function n(){var a,r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return a={fee:{amount:0,asset_id:"1.3.0"},buyer:e,crowdfund_contract:t},(r=ye.a.new_transaction()).add_type_operation("withdraw_crowdfund",a),n.prev=3,n.next=6,ve.a.process_transaction(r,null,!0);case 6:return n.abrupt("return",function(e){return e(!0)});case 9:return n.prev=9,n.t0=n.catch(3),n.abrupt("return",function(e){return e(!1)});case 12:case"end":return n.stop()}},n,this,[[3,9]])}))}},{key:"allFundsFetched",value:function(e){return e}},{key:"accountInitFundsFetched",value:function(e){return e}},{key:"accountPartiFundsFetched",value:function(e){return e}}]),e}(),Oe=_e.a.createActions(Ce),xe=n(31),je=n(124),Se=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var Ne=Object(je.a)("CrowdFundStore"),Pe=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={allFunds:Object(G.List)(),initCrowds:[],partiCrowds:[]},e.bindListeners({onAllFundsFetched:Oe.allFundsFetched,onAccountPartiFundsFetched:Oe.accountPartiFundsFetched,onAccountInitFundsFetched:Oe.accountInitFundsFetched}),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,xe["a"]),Se(t,[{key:"onAllFundsFetched",value:function(e){var t=e.res,n=e.start,a=(e.size,this.state.allFunds.take(n));a=a.concat(t),this.setState({allFunds:a}),Ne("onAllFundsFetched: ",this)}},{key:"onAccountInitFundsFetched",value:function(e){this.setState({initCrowds:e}),Ne("onAccountInitFundsFetched: ",this)}},{key:"onAccountPartiFundsFetched",value:function(e){this.setState({partiCrowds:e}),Ne("onAccountPartiFundsFetched: ",this)}}]),t}(),Te=_e.a.createStore(Pe,"CrowdFundStore"),Ie=n(1426),Re=n(110),De=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var Me=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onSubmit=function(e){e.preventDefault();var t=n.state,a=t.u,r=t.t,s=n.props.asset;n.props.onSubmit({t:r,u:a,asset:s})},n.onPeriodChange=function(e){return function(t){n.setState(function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},e,t))}},n.state={u:18e3,t:3600},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["Component"]),De(t,[{key:"render",value:function(){var e=this.props.asset,t=this.state,n=t.u,r=t.t,s=n>0&&r>0;return a.createElement("form",{className:"grid-block vertical full-width-content"},a.createElement("h4",null,e&&e.symbol),a.createElement("div",{className:"grid-container ",style:{paddingTop:"2rem"}},a.createElement("div",{className:"content-block"},a.createElement("label",{htmlFor:"crowdU"},a.createElement(T.a,{component:"span",content:"crowdfund.timeLimit"})),a.createElement(Ie.a,{className:"period-horizontal",defaultPeriod:n,name:"crowdU",onPeriodChange:this.onPeriodChange("u")})),a.createElement("div",{className:"content-block"},a.createElement("label",{htmlFor:"crowdT"},a.createElement(T.a,{component:"span",content:"crowdfund.timeToLock"})),a.createElement(Ie.a,{className:"period-horizontal",defaultPeriod:r,name:"crowdT",onPeriodChange:this.onPeriodChange("t")})),a.createElement("div",{className:"content-block button-group"},a.createElement(T.a,{component:"button",className:Object(Re.a)("button",{disabled:!s}),type:"submit",content:"modal.issue.submit",onClick:this.onSubmit}),a.createElement(T.a,{className:"button",component:"button",onClick:this.props.onClose,content:"cancel"}))))}}]),t}(),Le=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var Fe=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._initCrow=function(e){var t=e.u,n=e.t,a=e.asset;Oe.initCrowdFund({u:t,t:n,owner:a.issuer,asset_id:a.id})},n.state={create:{symbol:"",name:"",description:"",max_supply:1e15,precision:4},issue:{amount:0,to:"",to_id:"",asset_id:"",symbol:""},errors:{symbol:null},isValid:!1,searchTerm:""},n._searchAccounts=Object(le.debounce)(n._searchAccounts,150),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["Component"]),Le(t,[{key:"_checkAssets",value:function(e,t){if(!this.props.account.get("assets").size){var n=e.sort(function(e,t){return e.symbol>t.symbol?1:e.symbol<t.symbol?-1:0}).last();0===e.size||t?(ee.a.getAssetList.defer("A",100),this.setState({assetsFetched:100})):e.size>=this.state.assetsFetched&&(ee.a.getAssetList.defer(n.symbol,100),this.setState({assetsFetched:this.state.assetsFetched+99}))}}},{key:"_checkInitedCrowd",value:function(e){e&&e.get("id")&&Oe.queryAccountInitCrowds(e.get("id"))}},{key:"componentWillReceiveProps",value:function(e){this._checkAssets(e.assets),this.props.account.get("id")!==e.account.get("id")&&this._checkInitedCrowd(e.account),this.props.notification!==e.notification&&(this._checkAssets(this.props.assets,!0),this._checkInitedCrowd(this.props.account))}},{key:"componentWillMount",value:function(){this._checkAssets(this.props.assets,!0),this._checkInitedCrowd(this.props.account)}},{key:"_onIssueInput",value:function(e,t){var n=t.target.id,a=this.state.issue;if("to"===n){this._searchAccounts(t.target.value),a.to=t.target.value;var r=this.props.searchAccounts.findEntry(function(e){return e===t.target.value});a.to_id=r?r[0]:null}else a[e]=t.target.value;this.setState({issue:a})}},{key:"_searchAccounts",value:function(e){s.a.accountSearch(e)}},{key:"_issueAsset",value:function(e,t){var n=this;t.preventDefault(),se.a.publish("issue_asset","close");var a=this.state.issue,r=this.props.assets.get(a.asset_id);a.amount*=ce.a.get_asset_precision(r.precision),ee.a.issueAsset(e,a).then(function(e){e?(oe.b.addNotification({message:"Successfully issued "+ce.a.format_asset(a.amount,n.props.assets.get(a.asset_id)),level:"success",autoDismiss:10}),ChainStore.getAsset(a.asset_id)):oe.b.addNotification({message:"Failed to issue asset",level:"error",autoDismiss:10})})}},{key:"_reserveButtonClick",value:function(e,t){t.preventDefault(),this.setState({reserve:e}),se.a.publish("reserve_asset","open")}},{key:"_reserveAsset",value:function(e,t){t.preventDefault(),se.a.publish("reserve_asset","close");var n=this.state.issue,a=this.props.assets.get(n.asset_id);n.amount*=ce.a.get_asset_precision(a.precision),ee.a.issueAsset(e,n).then(function(e){})}},{key:"_issueButtonClick",value:function(e,t,n,a){a.preventDefault();var r=this.state.issue;r.asset_id=e,r.symbol=t,this.setState({issue:r,assetToIssue:n}),se.a.publish("issue_asset","open")}},{key:"_showInitCrowdModal",value:function(e){this.setState({assetToIssue:e}),se.a.publish("initCrowdModal","open")}},{key:"_editButtonClick",value:function(e,t,n){n.preventDefault(),this.props.history.push("/account/"+t+"/update-asset/"+e)}},{key:"_onAccountSelect",value:function(e){var t=this.state.issue;t.to=e,t.to_id=this.props.account_name_to_id[e],this.setState({issue:t})}},{key:"render",value:function(){var e=this,t=this.props,n=t.account,r=t.account_name,s=(t.searchAccounts,t.assets),o=t.assetsList,i=t.crowdsInited,c=this.state,l=(c.issue,c.errors,c.isValid,c.create,c.assetToIssue),u=i.map(function(e){return e.asset_id}),p=!0;if(!n)return a.createElement(ue.a,{type:"circle"});if(n.notFound&&(p=!1),!p)return a.createElement("div",{className:"grid-block"},a.createElement("h5",null,a.createElement(T.a,{component:"h5",content:"account.errors.not_found",name:r})));o.length&&(s=s.clear(),o.forEach(function(e){e&&(s=s.set(e.get("id"),e.toJS()))}));var m=s.filter(function(e){return e.issuer===n.get("id")}).sort(function(e,t){return parseInt(e.id.substring(4,e.id.length),10)-parseInt(t.id.substring(4,t.id.length),10)}).map(function(t){var n=be.a.parseDescription(t.options.description),s=n.short_name?n.short_name:n.main,o=-1!==u.indexOf(t.id);return s.length>100&&(s=s.substr(0,100)+"..."),a.createElement("tr",{key:t.symbol},a.createElement("td",null,a.createElement(d.a,{to:"/asset/"+t.symbol},t.symbol)),a.createElement("td",{style:{maxWidth:"250px"}},s),a.createElement("td",null,a.createElement(ae.a,{amount:parseInt(t.dynamic.current_supply,10),asset:t.id})),a.createElement("td",null,a.createElement(ae.a,{amount:parseInt(t.options.max_supply,10),asset:t.id})),a.createElement("td",null,t.bitasset_data_id?null:a.createElement("button",{onClick:e._issueButtonClick.bind(e,t.id,t.symbol,t),className:"button outline"},a.createElement(T.a,{content:"transaction.trxTypes.asset_issue"}))),a.createElement("td",null,t.bitasset_data_id?null:a.createElement("button",{onClick:e._reserveButtonClick.bind(e,t.id),className:"button outline"},a.createElement(T.a,{content:"transaction.trxTypes.asset_reserve"}))),a.createElement("td",null,a.createElement("button",{onClick:e._editButtonClick.bind(e,t.symbol,r),className:"button outline"},a.createElement(T.a,{content:"transaction.trxTypes.asset_update"}))),a.createElement("td",null,o?a.createElement(T.a,{component:"button",className:"button disabled outline",content:"transaction.trxTypes.crowd_inited"}):a.createElement("button",{onClick:function(){return e._showInitCrowdModal(t)},className:"button outline"},a.createElement(T.a,{content:"transaction.trxTypes.init_crowd"}))))}).toArray();return a.createElement("div",{className:"grid-content"},a.createElement("div",{className:"content-block generic-bordered-box"},a.createElement("div",{className:"block-content-header"},a.createElement(T.a,{content:"account.user_issued_assets.issued_assets"})),a.createElement("div",{className:"box-content"},a.createElement("table",{className:"table dashboard-table"},a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",null,a.createElement(T.a,{content:"account.user_issued_assets.symbol"})),a.createElement("th",{style:{maxWidth:"200px"}},a.createElement(T.a,{content:"account.user_issued_assets.description"})),a.createElement(T.a,{component:"th",content:"markets.supply"}),a.createElement("th",null,a.createElement(T.a,{content:"account.user_issued_assets.max_supply"})),a.createElement("th",{style:{textAlign:"center"},colSpan:"4"},a.createElement(T.a,{content:"account.perm.action"})))),a.createElement("tbody",null,m)))),a.createElement("div",{className:"content-block"},a.createElement(d.a,{to:"/account/"+r+"/create-asset/"},a.createElement("button",{className:"button outline"},a.createElement(T.a,{content:"transaction.trxTypes.asset_create"})))),a.createElement(ne.a,{id:"issue_asset",overlay:!0},a.createElement("br",null),a.createElement("div",{className:"grid-block vertical"},a.createElement(pe.a,{asset_to_issue:this.state.issue.asset_id,asset:this.state.assetToIssue,onClose:function(){se.a.publish("issue_asset","close")}}))),a.createElement(ne.a,{id:"reserve_asset",overlay:!0},a.createElement("br",null),a.createElement("div",{className:"grid-block vertical"},a.createElement(fe,{assetId:this.state.reserve,account:n,onClose:function(){se.a.publish("reserve_asset","close")}}))),a.createElement(ne.a,{id:"initCrowdModal",overlay:!0},a.createElement("br",null),a.createElement("div",{className:"grid-block vertical"},a.createElement(Me,{onSubmit:function(t){return e._initCrow(t)},onClose:function(){se.a.publish("initCrowdModal","close")},asset:l}))))}}]),t}();Fe.defaultProps={symbol:"",name:"",description:"",max_supply:0,precision:0,crowdsInited:[]},Fe.propTypes={assetsList:E.a.ChainAssetsList,symbol:u.string.isRequired,crowdsInited:u.array.isRequired},Fe=Object(w.a)(Fe);var qe=Object(j.connect)(Fe,{listenTo:function(){return[te.a,Te]},getProps:function(e){var t=Object(G.Map)(),n=Object(G.List)();e.account.get("assets",[]).size?e.account.get("assets",[]).forEach(function(e){n=n.push(e)}):t=te.a.getState().assets;var a=Te.getState().initCrowds;return{assets:t,assetsList:n,notification:ie.a.getState().notification,crowdsInited:a}}}),Be=n(28),We=n.n(Be),Ue=n(288),He=n(1),Ye=n(1287),Xe=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();function Je(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ve(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function ze(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Ke=((Qe=function(e){function t(){return Je(this,t),Ve(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return ze(t,a["Component"]),Xe(t,[{key:"render",value:function(){return 0!==this.props.assets.length&&this.props.value?a.createElement(Ye.a,{isAsset:!0,entries:this.props.assets.map(function(e){return e&&e.get("symbol")}).filter(function(e){return!!e}),values:this.props.assets.reduce(function(e,t){return t&&t.get("symbol")&&(e[t.get("symbol")]=t),e},{}),singleEntry:this.props.assets[0]?a.createElement(ae.a,{asset:this.props.assets[0].get("id"),amount:0,hide_amount:!0}):null,value:"",onChange:this.props.onChange}):null}}]),t}()).propTypes={assets:E.a.ChainAssetsList,value:u.string,onChange:u.func},Qe);Ke=Object(w.a)(Ke);var Ge=function(e){function t(){return Je(this,t),Ve(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return ze(t,a["Component"]),Xe(t,[{key:"getAsset",value:function(){return this.props.asset}},{key:"getError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.assetInput,t=this.props.error;return t||!e||this.getNameType(e)||(t=x.a.translate("explorer.asset.invalid",{name:e})),t}},{key:"getNameType",value:function(e){return e?He.d.is_valid_symbol_error(e,!0)?null:"symbol":null}},{key:"onInputChanged",value:function(e){var t=e.target.value.trim().substr(0,16).toUpperCase();this.props.onChange&&t!==this.props.assetInput&&this.props.onChange(t)}},{key:"onKeyDown",value:function(e){13===e.keyCode&&(this.onFound(e),this.onAction(e))}},{key:"componentDidMount",value:function(){this.props.onFound&&this.props.asset&&this.props.onFound(this.props.asset)}},{key:"componentWillReceiveProps",value:function(e){this.props.onFound&&e.asset!==this.props.asset&&this.props.onFound(e.asset)}},{key:"onFound",value:function(e){e.preventDefault(),!this.props.onFound||this.getError()||this.props.disableActionButton||this.props.asset&&this.props.onFound(this.props.asset)}},{key:"onAssetSelect",value:function(e){e&&(this.props.onFound(e),this.props.onChange(e.get("symbol")))}},{key:"onAction",value:function(e){e.preventDefault(),!this.props.onAction||this.getError()||this.props.disableActionButton||this.props.asset&&this.props.onAction(this.props.asset)}},{key:"render",value:function(){var e=this.props,t=e.disabled,n=e.noLabel,r=this.getError(),s=void 0;t||(this.props.asset?s=this.props.asset.get("symbol"):!r&&this.props.assetInput&&(r=x.a.translate("explorer.asset.not_found",{name:this.props.assetInput})));var o=We()("button",{disabled:!this.props.asset||r||this.props.disableActionButton});return a.createElement("div",{className:this.props.className?this.props.className+" asset-selector":"asset-selector",style:this.props.style},a.createElement("div",{className:"header-area"},r||n?null:a.createElement("label",{className:"right-label"},"  ",a.createElement("span",null,s)),a.createElement(T.a,{component:"label",content:this.props.label})),a.createElement("div",{className:"input-area"},a.createElement("div",{className:"inline-label input-wrapper"},a.createElement("input",{style:this.props.inputStyle,disabled:this.props.disabled,type:"text",value:this.props.assetInput||"",placeholder:x.a.translate("explorer.assets.symbol"),ref:"user_input",onChange:this.onInputChanged.bind(this),onKeyDown:this.onKeyDown.bind(this),tabIndex:this.props.tabIndex}),a.createElement("div",{className:"form-label select floating-dropdown"},this.props.asset?a.createElement(Ke,{ref:this.props.refCallback,value:this.props.asset.get("symbol"),assets:G.List(this.props.assets),onChange:this.onAssetSelect.bind(this)}):null),this.props.children,this.props.onAction?a.createElement("button",{className:o,onClick:this.onAction.bind(this)},a.createElement(T.a,{content:this.props.action_label})):null)),a.createElement("div",{className:"error-area",style:{paddingBottom:"10px"}},a.createElement("span",{style:{wordBreak:"break-all"}},r)))}}]),t}();Ge.propTypes={label:u.string,error:u.string,placeholder:u.string,onChange:u.func,onFound:u.func,assetInput:u.string,asset:E.a.ChainAsset,tabIndex:u.number,disableActionButton:u.string},Ge.defaultProps={disabled:!1};var Qe,$e=Object(w.a)(Ge),Ze=n(59),et=n.n(Ze),tt=n(1276),nt=n(104),at=n.n(nt),rt=n(289),st=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},ot=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();function it(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ct(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function lt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var ut=new et.a(at.a.GRAPHENE_MAX_SHARE_SUPPLY),pt=function(e){function t(e){it(this,t);var n=ct(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={backingAsset:e.backingAsset.get("symbol"),error:null},n}return lt(t,a["Component"]),ot(t,[{key:"_onInputBackingAsset",value:function(e){this.setState({backingAsset:e.toUpperCase(),error:null})}},{key:"_onFoundBackingAsset",value:function(e){e&&("1.3.0"===e.get("id")||e.get("bitasset_data_id")&&!e.getIn(["bitasset","is_prediction_market"])?e.get("precision")!==parseInt(this.props.assetPrecision,10)?this.setState({error:x.a.translate("account.user_issued_assets.error_precision",{asset:this.props.assetSymbol})}):this.props.onUpdate("short_backing_asset",e.get("id")):this.setState({error:x.a.translate("account.user_issued_assets.error_invalid")}))}},{key:"render",value:function(){var e=this.props.bitasset_opts,t=this.state.error;return a.createElement("div",{className:"small-12 grid-content"},a.createElement("label",null,a.createElement(T.a,{content:"account.user_issued_assets.feed_lifetime_sec"}),a.createElement("input",{type:"number",value:e.feed_lifetime_sec/60,onChange:this.props.onUpdate.bind(this,"feed_lifetime_sec")})),a.createElement("label",null,a.createElement(T.a,{content:"account.user_issued_assets.minimum_feeds"}),a.createElement("input",{type:"number",value:e.minimum_feeds,onChange:this.props.onUpdate.bind(this,"minimum_feeds")})),a.createElement("label",null,a.createElement(T.a,{content:"account.user_issued_assets.force_settlement_delay_sec"}),a.createElement("input",{type:"number",value:e.force_settlement_delay_sec/60,onChange:this.props.onUpdate.bind(this,"force_settlement_delay_sec")})),a.createElement("label",null,a.createElement(T.a,{content:"account.user_issued_assets.force_settlement_offset_percent"}),a.createElement("input",{type:"number",value:e.force_settlement_offset_percent/at.a.GRAPHENE_1_PERCENT,onChange:this.props.onUpdate.bind(this,"force_settlement_offset_percent")})),a.createElement("label",null,a.createElement(T.a,{content:"account.user_issued_assets.maximum_force_settlement_volume"}),a.createElement("input",{type:"number",value:e.maximum_force_settlement_volume/at.a.GRAPHENE_1_PERCENT,onChange:this.props.onUpdate.bind(this,"maximum_force_settlement_volume")})),a.createElement("div",{className:"grid-block no-margin small-12"},a.createElement($e,{label:"account.user_issued_assets.backing",onChange:this._onInputBackingAsset.bind(this),asset:this.state.backingAsset,assetInput:this.state.backingAsset,tabIndex:1,style:{width:"100%",paddingRight:"10px"},onFound:this._onFoundBackingAsset.bind(this)}),t?a.createElement("div",{className:"content-block has-error"},t):null))}}]),t}();pt.propTypes={backingAsset:E.a.ChainAsset.isRequired,isUpdate:u.bool},pt.defaultProps={isUpdate:!1},pt=Object(w.a)(pt);var mt=function(e){function t(e){it(this,t);var n=ct(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state=n.resetState(e),n}return lt(t,a["Component"]),ot(t,[{key:"resetState",value:function(e){ce.a.get_asset_precision(4),ce.a.get_asset_precision(e.core.get("precision"));var t=this._getPermissions({isBitAsset:!1}),n=t.flagBooleans,a=t.permissionBooleans;He.b.getAsset("1.3.0").get("symbol");return{update:{symbol:"",precision:4,max_supply:1e5,max_market_fee:0,vesting_period:30,market_fee_percent:0,description:{main:""}},errors:{max_supply:null},isValid:!1,flagBooleans:n,permissionBooleans:a,isBitAsset:!1,isVestingAsset:!1,is_prediction_market:!1,core_exchange_rate:{quote:{asset_id:null,amount:1},base:{asset_id:"1.3.0",amount:1}},bitasset_opts:{feed_lifetime_sec:86400,minimum_feeds:7,force_settlement_delay_sec:86400,force_settlement_offset_percent:1*at.a.GRAPHENE_1_PERCENT,maximum_force_settlement_volume:20*at.a.GRAPHENE_1_PERCENT,short_backing_asset:"1.3.0"},marketInput:""}}},{key:"_getPermissions",value:function(e){return{flagBooleans:be.a.getFlagBooleans(0,e.isBitAsset),permissionBooleans:be.a.getFlagBooleans("all",e.isBitAsset)}}},{key:"_createAsset",value:function(e){e.preventDefault();var t=this.state,n=t.update,a=t.flagBooleans,r=t.permissionBooleans,s=t.core_exchange_rate,o=t.isBitAsset,i=t.is_prediction_market,c=t.bitasset_opts,l=t.isVestingAsset,u=this.props.account,p=be.a.getFlags(a,o),m=be.a.getPermissions(r,o);this.state.marketInput!==n.description.market&&(n.description.market="");var d=JSON.stringify(n.description),h=st({},n);l||delete h.vesting_period,ee.a.createAsset(u.get("id"),h,p,m,s,o,i,c,d).then(function(e){console.log("... AssetActions.createAsset(account_id, update)",u.get("id"),n,p,m)})}},{key:"_hasChanged",value:function(){return!ce.a.are_equal_shallow(this.state,this.resetState(this.props))}},{key:"_reset",value:function(e){e.preventDefault(),this.setState(this.resetState(this.props))}},{key:"_forcePositive",value:function(e){return parseFloat(e)<0?"0":e}},{key:"_onUpdateDescription",value:function(e,t){var n=this.state.update,a=!0;switch(e){case"condition":if(t.target.value.length>60)return void(a=!1);n.description[e]=t.target.value;break;case"short_name":if(t.target.value.length>32)return void(a=!1);n.description[e]=t.target.value;break;case"market":n.description[e]=t;break;case"visible":n.description[e]=!n.description[e];break;default:n.description[e]=t.target.value}a&&(this.forceUpdate(),this._validateEditFields(n))}},{key:"onChangeBitAssetOpts",value:function(e,t){var n=this.state.bitasset_opts;switch(e){case"force_settlement_offset_percent":case"maximum_force_settlement_volume":n[e]=parseFloat(t.target.value)*at.a.GRAPHENE_1_PERCENT;break;case"minimum_feeds":n[e]=parseInt(t.target.value,10);break;case"feed_lifetime_sec":case"force_settlement_delay_sec":console.log(t.target.value,parseInt(60*parseFloat(t.target.value),10)),n[e]=parseInt(60*parseFloat(t.target.value),10);break;case"short_backing_asset":n[e]=t;break;default:n[e]=t.target.value}this.forceUpdate()}},{key:"_onPeriodChange",value:function(e,t){var n=this.state,a=n.update;n.errors;a[e]=this._forcePositive(t),this._validateEditFields(a),this.setState({update:a})}},{key:"_onUpdateInput",value:function(e,t){var n=this.state,a=n.update,r=n.errors,s=!1,o=ce.a.get_asset_precision(this.state.update.precision),i=t.target,c=i.selectionStart,l=i.value;switch(e){case"market_fee_percent":a[e]=this._forcePositive(i.value);break;case"max_market_fee":if(new et.a(l).times(o).gt(ut))return r.max_market_fee="The number you tried to enter is too large",this.setState({errors:r});i.value=ce.a.limitByPrecision(i.value,this.state.update.precision),a[e]=i.value;break;case"precision":a[e]=this._forcePositive(i.value);break;case"max_supply":s=!0,new RegExp(/[[:digit:]]/).test(i.value)||(i.value=i.value.replace(/[^0-9.]/g,"")),"."==i.value.charAt(0)&&(i.value="0."),i.value.charAt(i.value.length)!=i.value.search(".")&&i.value.substr(1),i.value=ce.a.limitByPrecision(i.value,this.state.update.precision),a[e]=i.value;break;case"symbol":s=!0;var u=i.value.toUpperCase(),p=new RegExp("^[.A-Z]+$");if(""!==u&&!p.test(u))break;He.b.getAsset(u),a[e]=this._forcePositive(u);break;default:a[e]=i.value}this.setState({update:a},function(){if(s){var t=c-(l.length-a[e].length);i.setSelectionRange(t,t)}}),this._validateEditFields(a)}},{key:"_validateEditFields",value:function(e,t){var n={max_supply:null};n.symbol=He.d.is_valid_symbol_error(e.symbol),He.b.getAsset(e.symbol)&&(n.symbol=x.a.translate("account.user_issued_assets.exists"));try{n.max_supply=e.max_supply<=0?x.a.translate("account.user_issued_assets.max_positive"):new et.a(e.max_supply).times(Math.pow(10,e.precision)).gt(ut)?x.a.translate("account.user_issued_assets.too_large"):null}catch(e){console.log("err:",e),n.max_supply=x.a.translate("account.user_issued_assets.too_large")}var a=!n.symbol&&!n.max_supply;this.state.isVestingAsset&&(a=a&&e.vesting_period>0),this.setState({isValid:a,errors:n})}},{key:"_onFlagChange",value:function(e){var t=this.state.flagBooleans;t[e]=!t[e],this.setState({flagBooleans:t})}},{key:"_onPermissionChange",value:function(e){var t=this.state.permissionBooleans;t[e]=!t[e],this.setState({permissionBooleans:t})}},{key:"_onInputCoreAsset",value:function(e,t){"quote"===e?this.setState({quoteAssetInput:t}):"base"===e&&this.setState({baseAssetInput:t})}},{key:"_onFoundCoreAsset",value:function(e,t){if(t){var n=this.state.core_exchange_rate;n[e].asset_id=t.get("id"),this.setState({core_exchange_rate:n}),this._validateEditFields({max_supply:this.state.max_supply,core_exchange_rate:n})}}},{key:"_onInputMarket",value:function(e){this.setState({marketInput:e})}},{key:"_onFoundMarketAsset",value:function(e){e&&this._onUpdateDescription("market",e.get("symbol"))}},{key:"_onCoreRateChange",value:function(e,t){var n=void 0,a=void 0;if("quote"===e)n=ce.a.limitByPrecision(t.target.value,this.state.update.precision),a=null;else{if(!(t&&"amount"in t))return;n=""==t.amount?"0":ce.a.limitByPrecision(t.amount.toString().replace(/,/g,""),this.props.core.get("precision")),a=t.asset.get("id")}this.state.core_exchange_rate[e]={amount:n,asset_id:a},this.forceUpdate()}},{key:"_onToggleBitAsset",value:function(){this.state.update;this.state.isBitAsset=!this.state.isBitAsset,this.state.isBitAsset||(this.state.is_prediction_market=!1);var e=this._getPermissions(this.state),t=e.flagBooleans,n=e.permissionBooleans;this.state.flagBooleans=t,this.state.permissionBooleans=n,this.forceUpdate()}},{key:"_onToggleVestingAsset",value:function(){this.setState(function(e){return{isVestingAsset:!e.isVestingAsset}})}},{key:"_onTogglePM",value:function(){this.state.is_prediction_market=!this.state.is_prediction_market,this.state.update.precision=this.props.core.get("precision"),this.state.core_exchange_rate.base.asset_id=this.props.core.get("id"),this.forceUpdate()}},{key:"render",value:function(){var e=this.props,t=e.globalObject,n=e.core,r=this.state,s=r.errors,o=r.isValid,i=r.update,c=r.flagBooleans,l=r.permissionBooleans,u=r.core_exchange_rate,p=r.is_prediction_market,m=r.isBitAsset,d=r.isVestingAsset,h=r.bitasset_opts,f=i.symbol.length,b="N/A";3===f?b=a.createElement(ae.a,{amount:Object(rt.c)("asset_create",["symbol3"],t),asset:"1.3.0"}):4===f?b=a.createElement(ae.a,{amount:Object(rt.c)("asset_create",["symbol4"],t),asset:"1.3.0"}):f>4&&(b=a.createElement(ae.a,{amount:Object(rt.c)("asset_create",["long_symbol"],t),asset:"1.3.0"}));var _=[],g=function(e,t,n){return a.createElement("table",{key:"table_"+e,className:"table"},a.createElement("tbody",null,a.createElement("tr",null,a.createElement("td",{style:{border:"none",width:"80%"}},a.createElement(T.a,{content:"account.user_issued_assets."+e}),":"),a.createElement("td",{style:{border:"none"}},a.createElement("div",{className:"switch",style:{marginBottom:"10px"},onClick:t},a.createElement("input",{type:"checkbox",checked:n}),a.createElement("label",null))))))};for(var v in l)l[v]&&"charge_market_fee"!==v&&_.push(g(v,this._onFlagChange.bind(this,v),c[v]));_.push(g("visible",this._onUpdateDescription.bind(this,"visible"),!i.description.visible&&!1===i.description.visible));var y=[];for(var E in l)y.push(a.createElement("table",{key:"table_"+E,className:"table"},a.createElement("tbody",null,a.createElement("tr",null,a.createElement("td",{style:{border:"none",width:"80%"}},a.createElement(T.a,{content:"account.user_issued_assets."+E}),":"),a.createElement("td",{style:{border:"none"}},a.createElement("div",{className:"switch",style:{marginBottom:"10px"},onClick:this._onPermissionChange.bind(this,E)},a.createElement("input",{type:"checkbox",checked:l[E],onChange:function(){}}),a.createElement("label",null)))))));return a.createElement("div",{className:"grid-block"},a.createElement("div",{className:"grid-content"},a.createElement(T.a,{component:"h3",content:"header.create_asset"}),a.createElement(tt.b,{setting:"overviewTab",segmented:!1,className:"overview-tabs with-shadow",style:{width:"100%"},contentClass:"grid-block shrink small-vertical medium-horizontal full-container",tabsClass:"account-overview no-padding bordered-header content-block"},a.createElement(tt.a,{title:"account.user_issued_assets.primary"},a.createElement("div",{className:"small-12 grid-content"},a.createElement("h3",null,a.createElement(T.a,{content:"account.user_issued_assets.primary"})),a.createElement("label",null,a.createElement(T.a,{content:"account.user_issued_assets.symbol"}),a.createElement("input",{type:"text",value:i.symbol,onChange:this._onUpdateInput.bind(this,"symbol")})),s.symbol?a.createElement("p",{className:"grid-content has-error"},s.symbol):null,a.createElement("label",null,a.createElement(T.a,{content:"account.user_issued_assets.max_supply"})," ",i.symbol?a.createElement("span",null,"(",i.symbol,")"):null,a.createElement("input",{type:"text",value:i.max_supply,onChange:this._onUpdateInput.bind(this,"max_supply")})),s.max_supply?a.createElement("p",{className:"grid-content has-error"},s.max_supply):null,a.createElement("label",null,a.createElement(T.a,{content:"account.user_issued_assets.decimals"}),a.createElement("input",{min:"0",max:"8",step:"1",type:"range",value:i.precision,onChange:this._onUpdateInput.bind(this,"precision")})),a.createElement("p",null,i.precision),a.createElement("div",{style:{marginBottom:10},className:"txtlabel cancel"},a.createElement(T.a,{content:"account.user_issued_assets.precision_warning"})),d&&a.createElement("div",{className:"form-group grid-block grid-x-padding full-container"},a.createElement(T.a,{component:"span",htmlFor:"vestingPeriod",className:"left-label small-12 medium-12",content:"account.user_issued_assets.vesting_period"}),a.createElement(Ie.a,{className:"period-horizontal",defaultPeriod:this.state.update.vesting_period,name:"create",onPeriodChange:this._onPeriodChange.bind(this,"vesting_period")})),a.createElement("div",{className:"grid-block full-container switch-container"},a.createElement(T.a,{component:"div",className:"small-3",content:"account.user_issued_assets.mpa"}),a.createElement("div",{className:"small-9 text-right"},a.createElement("div",{className:"switch"},a.createElement("input",{id:"isBitAsset",type:"checkbox",checked:m,onChange:this._onToggleBitAsset.bind(this)}),a.createElement("label",{htmlFor:"isBitAsset"})))),m&&a.createElement("div",{className:"grid-block full-container switch-container"},a.createElement(T.a,{component:"div",className:"small-3",content:"account.user_issued_assets.pm"}),a.createElement("div",{className:"small-9 text-right"},a.createElement("div",{className:"switch"},a.createElement("input",{id:"predictionMarket",type:"checkbox",checked:p,onChange:this._onTogglePM.bind(this)}),a.createElement("label",{htmlFor:"predictionMarket"})))),a.createElement(T.a,{component:"h3",content:"account.user_issued_assets.core_exchange_rate"}),a.createElement("label",null,a.createElement("div",{className:"grid-block no-margin"},s.quote_asset?a.createElement("p",{className:"grid-content has-error"},s.quote_asset):null,s.base_asset?a.createElement("p",{className:"grid-content has-error"},s.base_asset):null,a.createElement("div",{className:"grid-block no-margin small-12 medium-6"},a.createElement("div",{className:"amount-selector",style:{width:"100%",paddingRight:"10px"}},a.createElement(T.a,{component:"label",className:"left-label",content:"account.user_issued_assets.quote"}),a.createElement("div",{className:"inline-label"},a.createElement("input",{type:"text",placeholder:"0.0",onChange:this._onCoreRateChange.bind(this,"quote"),value:u.quote.amount})))),a.createElement("div",{className:"grid-block no-margin small-12 medium-6"},a.createElement(de.a,{label:"account.user_issued_assets.base",amount:u.base.amount,onChange:this._onCoreRateChange.bind(this,"base"),asset:u.base.asset_id,assets:[u.base.asset_id],placeholder:"0.0",tabIndex:1,style:{width:"100%"}}))),a.createElement("div",null,a.createElement("h5",null,a.createElement(T.a,{content:"exchange.price"}),a.createElement("span",null,":"," ",ce.a.format_number(ce.a.get_asset_price(u.quote.amount*ce.a.get_asset_precision(i.precision),{precision:i.precision},u.base.amount*ce.a.get_asset_precision(n),n),2+(parseInt(i.precision,10)||8))),a.createElement("span",null," ",i.symbol,"/",n.get("symbol"))))),a.createElement("div",null,a.createElement(T.a,{content:"account.user_issued_assets.cer_warning_1",component:"label",className:"has-error"}),a.createElement(T.a,{content:"account.user_issued_assets.cer_warning_2",component:"p"})))),a.createElement(tt.a,{title:"account.user_issued_assets.description"},a.createElement("div",{className:"small-12 grid-content"},a.createElement(T.a,{component:"h3",content:"account.user_issued_assets.description"}),a.createElement("label",null,a.createElement("textarea",{style:{height:"7rem"},rows:"1",value:i.description.main,onChange:this._onUpdateDescription.bind(this,"main")})),a.createElement(T.a,{component:"h3",content:"account.user_issued_assets.short"}),a.createElement("label",null,a.createElement("input",{type:"text",rows:"1",value:i.description.short_name,onChange:this._onUpdateDescription.bind(this,"short_name")})),a.createElement(T.a,{component:"h3",content:"account.user_issued_assets.market"}),a.createElement($e,{label:"account.user_issued_assets.name",onChange:this._onInputMarket.bind(this),asset:this.state.marketInput,assetInput:this.state.marketInput,style:{width:"100%",paddingRight:"10px"},onFound:this._onFoundMarketAsset.bind(this)}),p?a.createElement("div",null,a.createElement(T.a,{component:"h3",content:"account.user_issued_assets.condition"}),a.createElement("label",null,a.createElement("input",{type:"text",rows:"1",value:i.description.condition,onChange:this._onUpdateDescription.bind(this,"condition")})),a.createElement(T.a,{component:"h3",content:"account.user_issued_assets.expiry"}),a.createElement("label",null,a.createElement("input",{type:"date",value:i.description.expiry,onChange:this._onUpdateDescription.bind(this,"expiry")}))):null)),m?a.createElement(tt.a,{title:"account.user_issued_assets.bitasset_opts"},a.createElement(pt,{bitasset_opts:h,onUpdate:this.onChangeBitAssetOpts.bind(this),backingAsset:h.short_backing_asset,assetPrecision:i.precision,assetSymbol:i.symbol})):null,a.createElement(tt.a,{title:"account.permissions"},a.createElement("div",{className:"small-12 grid-content"},a.createElement("div",{style:{maxWidth:800}},a.createElement(Ue.a,{path:"components/AccountAssetCreate",section:"permissions"})),y)),a.createElement(tt.a,{title:"account.user_issued_assets.flags"},a.createElement("div",{className:"small-12 grid-content"},a.createElement("div",{style:{maxWidth:800}},a.createElement(Ue.a,{path:"components/AccountAssetCreate",section:"flags"})),l.charge_market_fee?a.createElement("div",null,a.createElement(T.a,{component:"h3",content:"account.user_issued_assets.market_fee"}),a.createElement("table",{className:"table"},a.createElement("tbody",null,a.createElement("tr",null,a.createElement("td",{style:{border:"none",width:"80%"}},a.createElement(T.a,{content:"account.user_issued_assets.charge_market_fee"}),":"),a.createElement("td",{style:{border:"none"}},a.createElement("div",{className:"switch",style:{marginBottom:"10px"},onClick:this._onFlagChange.bind(this,"charge_market_fee")},a.createElement("input",{type:"checkbox",checked:c.charge_market_fee}),a.createElement("label",null)))))),a.createElement("div",{className:We()({disabled:!c.charge_market_fee})},a.createElement("label",null,a.createElement(T.a,{content:"account.user_issued_assets.market_fee"})," ","(%)",a.createElement("input",{type:"number",value:i.market_fee_percent,onChange:this._onUpdateInput.bind(this,"market_fee_percent")})),a.createElement("label",null,a.createElement(T.a,{content:"account.user_issued_assets.max_market_fee"})," ","(",i.symbol,")",a.createElement("input",{type:"number",value:i.max_market_fee,onChange:this._onUpdateInput.bind(this,"max_market_fee")})),s.max_market_fee?a.createElement("p",{className:"grid-content has-error"},s.max_market_fee):null)):null,a.createElement("h3",null,a.createElement(T.a,{content:"account.user_issued_assets.flags"})),_))),a.createElement("hr",null),a.createElement("div",{style:{paddingTop:"0.5rem"}},a.createElement("button",{className:We()("button",{disabled:!o}),onClick:this._createAsset.bind(this)},a.createElement(T.a,{content:"header.create_asset"})),a.createElement("button",{className:"button outline",onClick:this._reset.bind(this),value:x.a.translate("account.perm.reset")},a.createElement(T.a,{content:"account.perm.reset"})),a.createElement("br",null),a.createElement("br",null),a.createElement("p",null,a.createElement(T.a,{content:"account.user_issued_assets.approx_fee"}),":"," ",b))))}}]),t}();mt.propTypes={core:E.a.ChainAsset.isRequired,globalObject:E.a.ChainObject.isRequired},mt.defaultProps={globalObject:"2.0.0",core:"1.3.0"},mt=Object(w.a)(mt);var dt=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var ht=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["Component"]),dt(t,[{key:"getFee",value:function(){return Object(rt.c)(this.props.opType,this.props.options,this.props.globalObject)}},{key:"render",value:function(){var e=this.props,t=e.opType,n=e.options,r=e.globalObject;if(!t||!n||!r)return null;var s=Object(rt.c)(t,n,r);return a.createElement(ae.a,{amount:s,asset:"1.3.0"})}}]),t}();ht.propTypes={globalObject:E.a.ChainObject.isRequired,opType:u.string,options:u.array},ht.defaultProps={globalObject:"2.0.0",options:[]};var ft=Object(w.a)(ht,{keep_updating:!0}),bt=n(286),_t=n(1288),gt=n(1268),vt=n(1272),yt=n(93),Et=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var wt=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.state={listType:e.assetWhiteListType,accountTable:-1===e.assetWhiteListType.indexOf("market"),listTypes:["whitelist_authorities","blacklist_authorities","whitelist_markets","blacklist_markets"],assetInput:null,asset_id:null},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["Component"]),Et(t,[{key:"renderAccountTables",value:function(){var e=this,t=this.state.listType;return this.props.whiteListEnabled?a.createElement("div",null,a.createElement("table",{className:"table dashboard-table"},a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",null,a.createElement(T.a,{content:"explorer.account.title"})),a.createElement("th",null,a.createElement(T.a,{content:"account.perm.remove_text"})))),a.createElement("tbody",null,this.props[t].map(function(n){return a.createElement("tr",{key:n},a.createElement("td",null,a.createElement(gt.a,{account:n})),a.createElement("td",{className:"clickable",onClick:e.props.onChangeList.bind(e,t,"remove",n)},a.createElement(yt.a,{name:"cross-circle",className:"icon-14px"})))}))),a.createElement("div",{style:{paddingTop:"2rem"}},a.createElement(_t.a,{label:"account.whitelist."+t,accountName:this.props.authority_name,account:this.props.authority_name,onChange:this.props.onAccountNameChanged.bind(this,"authority_name"),onAccountChanged:this.props.onAccountChanged.bind(this,"new_authority_id"),error:null,tabIndex:1,action_label:"account.perm.confirm_add",onAction:this.props.onChangeList.bind(this,t,"add",this.props.new_authority_id)}))):a.createElement("div",null,a.createElement(T.a,{className:"txtlabel cancel",component:"p",content:"explorer.asset.whitelist.enable_flag"}))}},{key:"_onAssetChange",value:function(e){this.setState({assetInput:e})}},{key:"_onAssetFound",value:function(e){this.setState({asset_id:e?e.get("id"):null})}},{key:"renderMarketTable",value:function(){var e=this,t=this.state.listType;return a.createElement("div",null,a.createElement("table",{className:"table dashboard-table"},a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",null,a.createElement(T.a,{content:"explorer.asset.title"})),a.createElement("th",null,a.createElement(T.a,{content:"account.perm.remove_text"})))),a.createElement("tbody",null,this.props[t].map(function(n){return a.createElement("tr",{key:n},a.createElement("td",null,a.createElement(vt.a,{asset:n})),a.createElement("td",{className:"clickable",onClick:e.props.onChangeList.bind(e,t,"remove",n)},a.createElement(yt.a,{name:"cross-circle",className:"icon-14px"})))}))),a.createElement("div",{style:{paddingTop:"2rem"}},a.createElement($e,{label:"explorer.asset.whitelist."+t,onChange:this._onAssetChange.bind(this),asset:this.state.assetInput,assetInput:this.state.assetInput,tabIndex:1,style:{width:"100%"},onFound:this._onAssetFound.bind(this),action_label:"account.perm.confirm_add",onAction:this.props.onChangeList.bind(this,t,"add",this.state.asset_id)})))}},{key:"_onSwitchType",value:function(e){this.setState({listType:e,accountTable:-1===e.indexOf("market")}),W.a.changeViewSetting({assetWhiteListType:e})}},{key:"render",value:function(){var e=this,t=this.state.accountTable,n=this.state.listTypes.indexOf(this.state.listType);return a.createElement("div",{className:"small-12 large-8 grid-content"},a.createElement("div",null,a.createElement("div",{className:"hide-selector",style:{paddingBottom:"2rem"}},this.state.listTypes.map(function(t,r){return a.createElement("div",{key:t,className:We()("inline-block",{inactive:n!==r}),onClick:e._onSwitchType.bind(e,t)},a.createElement(T.a,{content:"explorer.asset.whitelist."+t}))})),t?this.renderAccountTables():this.renderMarketTable(),this.props.children))}}]),t}(),kt=Object(j.connect)(wt,{listenTo:function(){return[i.b]},getProps:function(){return{assetWhiteListType:i.b.getState().viewSettings.get("assetWhiteListType","whitelist_authorities")}}}),At=n(1253),Ct=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ot=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();function xt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function St(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Nt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Pt=new et.a(at.a.GRAPHENE_MAX_SHARE_SUPPLY),Tt=function(e){function t(e){jt(this,t);var n=St(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state=n.resetState(e),n}return Nt(t,a["Component"]),Ot(t,[{key:"resetState",value:function(e){var t=e.asset.toJS(),n=void 0!==t.bitasset_data_id,a=ce.a.get_asset_precision(t.precision),r=ce.a.get_asset_precision(e.core.get("precision")),s=new et.a(t.options.max_market_fee).div(a).toString(),o=new et.a(t.options.max_supply).div(a).toString(),i=t.options.core_exchange_rate;i.quote.amount=i.quote.asset_id===t.id?new et.a(i.quote.amount).div(a).toString():new et.a(i.quote.amount).div(r).toString(),i.base.amount=i.base.asset_id===t.id?new et.a(i.base.amount).div(a).toString():new et.a(i.base.amount).div(r).toString();var c=be.a.getFlagBooleans(t.options.flags,n),l=be.a.getFlagBooleans(t.options.issuer_permissions,n);t.options.market_fee_percent/=100;var u=He.b.getAsset(i.quote.asset_id).get("symbol"),p=He.b.getAsset(i.base.asset_id).get("symbol");return{update:{max_supply:o,max_market_fee:s,market_fee_percent:t.options.market_fee_percent,description:be.a.parseDescription(t.options.description)},core_exchange_rate:i,issuer:t.issuer,new_issuer_account_id:null,issuer_account_name:null,new_funder_account:e.account.get("id"),funder_account_name:e.account.get("name"),asset_to_update:t.id,errors:{max_supply:null},new_authority_id:null,authority_name:null,isValid:!0,flagBooleans:c,permissionBooleans:l,isBitAsset:n,coreRateQuoteAssetName:u,quoteAssetInput:u,coreRateBaseAssetName:p,baseAssetInput:p,fundPoolAmount:0,claimFeesAmount:0,bitasset_opts:n?t.bitasset.options:null,original_bitasset_opts:n?e.asset.getIn(["bitasset","options"]).toJS():null,marketInput:"",whitelist_authorities:e.asset.getIn(["options","whitelist_authorities"]),blacklist_authorities:e.asset.getIn(["options","blacklist_authorities"]),whitelist_markets:e.asset.getIn(["options","whitelist_markets"]),blacklist_markets:e.asset.getIn(["options","blacklist_markets"])}}},{key:"_updateAsset",value:function(e){var t=this;e.preventDefault();var n=this.state,a=n.update,r=n.issuer,s=n.new_issuer_account_id,o=n.core_exchange_rate,i=n.flagBooleans,c=n.permissionBooleans,l=n.isBitAsset,u=n.bitasset_opts,p=n.original_bitasset_opts,m=be.a.getFlags(i);128&this.props.asset.getIn(["options","flags"])&&!(128&this.props.asset.getIn(["options","issuer_permissions"]))&&(m+=128);var d=be.a.getPermissions(c,l);this.state.marketInput!==a.description.market&&(a.description.market="");var h=JSON.stringify(a.description),f={whitelist_authorities:this.state.whitelist_authorities,blacklist_authorities:this.state.blacklist_authorities,whitelist_markets:this.state.whitelist_markets,blacklist_markets:this.state.blacklist_markets};ee.a.updateAsset(r,s,a,o,this.props.asset,m,d,l,u,p,h,f).then(function(){console.log("... AssetActions.updateAsset(account_id, update)",r,s,t.props.asset.get("id"),a),setTimeout(function(){He.b.getAsset(t.props.asset.get("id"))},3e3)})}},{key:"_hasChanged",value:function(){return!ce.a.are_equal_shallow(this.state,this.resetState(this.props))}},{key:"_reset",value:function(e){e.preventDefault(),this.setState(this.resetState(this.props))}},{key:"_forcePositive",value:function(e){return parseFloat(e)<0?"0":e}},{key:"_onUpdateDescription",value:function(e,t){var n=this.state.update,a=!0;switch(e){case"condition":if(t.target.value.length>60)return void(a=!1);n.description[e]=t.target.value;break;case"short_name":if(t.target.value.length>32)return void(a=!1);n.description[e]=t.target.value;break;case"market":n.description[e]=t;break;case"visible":n.description[e]=!n.description[e];break;default:n.description[e]=t.target.value}a&&(this.forceUpdate(),this._validateEditFields(n))}},{key:"onChangeBitAssetOpts",value:function(e,t){var n=this.state.bitasset_opts;switch(e){case"force_settlement_offset_percent":case"maximum_force_settlement_volume":n[e]=parseFloat(t.target.value)*at.a.GRAPHENE_1_PERCENT;break;case"feed_lifetime_sec":case"force_settlement_delay_sec":console.log(t.target.value,parseInt(60*parseFloat(t.target.value),10)),n[e]=parseInt(60*parseFloat(t.target.value),10);break;case"short_backing_asset":n[e]=t;break;default:n[e]=parseInt(t.target.value,10)}this.forceUpdate()}},{key:"_onUpdateInput",value:function(e,t){var n=this.state.update,a=!0,r=ce.a.get_asset_precision(this.props.asset.get("precision"));switch(e){case"market_fee_percent":n[e]=this._forcePositive(t.target.value);break;case"max_market_fee":var s=t.amount.replace(/,/g,"");if(new et.a(s).times(r).gt(Pt))return a=!1,this.setState({errors:{max_market_fee:"The number you tried to enter is too large"}});n[e]=ce.a.limitByPrecision(s,this.props.asset.get("precision"));break;case"max_supply":var o=t.amount.replace(/,/g,"");n[e]=ce.a.limitByPrecision(o,this.props.asset.get("precision"));break;default:n[e]=t.target.value}a&&(this.setState({update:n}),this._validateEditFields(n))}},{key:"_validateEditFields",value:function(e){var t=e.core_exchange_rate,n=this.props,a=n.asset,r=n.core,s={max_supply:null,quote_asset:null,base_asset:null},o=this.props.asset.get("precision");try{s.max_supply=e.max_supply<=0?x.a.translate("account.user_issued_assets.max_positive"):new et.a(parseInt(e.max_supply,10)).times(Math.pow(10,o)).gt(Pt)?x.a.translate("account.user_issued_assets.too_large"):null}catch(e){console.log("err:",e),s.max_supply=x.a.translate("account.user_issued_assets.too_large")}t&&(t.quote.asset_id!==a.get("id")&&t.base.asset_id!==a.get("id")&&(s.quote_asset=x.a.translate("account.user_issued_assets.need_asset",{name:a.get("symbol")})),t.quote.asset_id!==r.get("id")&&t.base.asset_id!==r.get("id")&&(s.base_asset=x.a.translate("account.user_issued_assets.need_asset",{name:r.get("symbol")})));var i=!s.max_supply&&!s.base_asset&&!s.quote_asset;this.setState({isValid:i,errors:s})}},{key:"_onCoreRateChange",value:function(e,t){t.amount=""==t.amount?"0":t.amount.replace(/,/g,""),t.amount=ce.a.limitByPrecision(t.amount,"quote"===e?this.props.asset.get("precision"):this.props.core.get("precision")),this.state.core_exchange_rate[e]={amount:t.amount,asset_id:t.asset.get("id")},this.forceUpdate()}},{key:"onAccountChanged",value:function(e,t){this.setState(xt({},e,t?t.get("id"):null))}},{key:"onAccountNameChanged",value:function(e,t){this.setState(xt({},e,t))}},{key:"_onInputCoreAsset",value:function(e,t){"quote"===e?this.setState({quoteAssetInput:t}):"base"===e&&this.setState({baseAssetInput:t})}},{key:"_onFoundCoreAsset",value:function(e,t){if(t){var n=this.state.core_exchange_rate;n[e].asset_id=t.get("id"),this.setState({core_exchange_rate:n}),this._validateEditFields({max_supply:this.state.max_supply,core_exchange_rate:n})}}},{key:"_onInputMarket",value:function(e){this.setState({marketInput:e})}},{key:"_onFoundMarketAsset",value:function(e){e&&this._onUpdateDescription("market",e.get("symbol"))}},{key:"_onFlagChange",value:function(e){var t=this.state.flagBooleans;t[e]=!t[e],this.setState({flagBooleans:t})}},{key:"_onPermissionChange",value:function(e){var t=this.state.permissionBooleans;t[e]=!t[e],this.setState({permissionBooleans:t})}},{key:"_onPoolInput",value:function(e){this.setState({fundPoolAmount:e.amount})}},{key:"_onFundPool",value:function(){ee.a.fundPool(this.state.new_funder_account,this.props.core,this.props.asset,this.state.fundPoolAmount.replace(/,/g,""))}},{key:"_onClaimInput",value:function(e){this.setState({claimFeesAmount:e.amount})}},{key:"_onClaimFees",value:function(){ee.a.claimPoolFees(this.props.account.get("id"),this.props.asset,this.state.claimFeesAmount.replace(/,/g,""))}},{key:"onChangeList",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"add",n=arguments[2],a=this.state[e];"add"!==t||a.includes(n)?"remove"===t&&a.includes(n)&&(a=a.remove(a.indexOf(n))):a=a.push(n),this.setState(xt({},e,a))}},{key:"render",value:function(){var e,t=this.props,n=t.account,r=t.asset,s=t.core,o=this.state,i=o.errors,c=o.isValid,l=o.update,u=o.core_exchange_rate,p=o.flagBooleans,m=o.permissionBooleans,d=o.fundPoolAmount,h=o.claimFeesAmount,f=o.isBitAsset,b=o.bitasset_opts,_=r.get("symbol");e=a.createElement(ft,{opType:"asset_update"});var g=He.b.getAsset(u.quote.asset_id),v=ce.a.get_asset_precision(g.get("precision")),y=He.b.getAsset(u.base.asset_id),E=ce.a.get_asset_precision(y.get("precision")),w=parseFloat(u.quote.amount)*v,k=parseFloat(u.base.amount)*E,A=be.a.getFlagBooleans(r.getIn(["options","issuer_permissions"]),void 0!==r.get("bitasset")),C=[],O=function(e,t,n){return a.createElement("table",{key:"table_"+e,className:"table"},a.createElement("tbody",null,a.createElement("tr",null,a.createElement("td",{style:{border:"none",width:"80%"}},a.createElement(T.a,{content:"account.user_issued_assets."+e}),":"),a.createElement("td",{style:{border:"none"}},a.createElement("div",{className:"switch",style:{marginBottom:"10px"},onClick:t},a.createElement("input",{type:"checkbox",checked:n}),a.createElement("label",null))))))};for(var x in A)A[x]&&"charge_market_fee"!==x&&C.push(O(x,this._onFlagChange.bind(this,x),p[x]));C.push(O("visible",this._onUpdateDescription.bind(this,"visible"),!l.description.visible&&!1===l.description.visible));var j=[];for(var S in A)j.push(a.createElement("table",{key:"table_"+S,className:"table"},a.createElement("tbody",null,a.createElement("tr",null,a.createElement("td",{style:{border:"none",width:"80%"}},a.createElement(T.a,{content:"account.user_issued_assets."+S}),":"),a.createElement("td",{style:{border:"none"}},a.createElement("div",{className:"switch",style:{marginBottom:"10px"},onClick:this._onPermissionChange.bind(this,S)},a.createElement("input",{type:"checkbox",checked:m[S],onChange:function(){}}),a.createElement("label",null)))))));var N=a.createElement("div",{style:{paddingTop:"0.5rem"}},a.createElement("hr",null),a.createElement("button",{className:We()("button",{disabled:!c}),onClick:this._updateAsset.bind(this)},a.createElement(T.a,{content:"header.update_asset"})),a.createElement("button",{className:"button outline",onClick:this._reset.bind(this)},a.createElement(T.a,{content:"account.perm.reset"})),a.createElement("br",null),a.createElement("br",null),a.createElement("p",null,a.createElement(T.a,{content:"account.user_issued_assets.approx_fee"}),":"," ",e)),P=0;if(n){var I=n.getIn(["balances","1.3.0"]);if(I){var R=He.b.getObject(I);R&&(P=R.get("balance"))}}var D=a.createElement("span",null,a.createElement(T.a,{component:"span",content:"transfer.available"}),": ",a.createElement(ae.a,{amount:P,asset:"1.3.0"})),M=r.getIn(["dynamic","accumulated_fees"]),L=h>0&&ce.a.get_asset_precision(r.get("precision"))*h<=M,F=a.createElement("span",null,a.createElement(T.a,{component:"span",content:"transfer.available"}),": ",a.createElement(ae.a,{amount:M,asset:r.get("id")})),q=!1;"1.3.0"!==g.get("id")&&"1.3.0"!==y.get("id")||g.get("id")!==r.get("id")&&y.get("id")!==r.get("id")||(q=!0);var B=r.getIn(["bitasset","is_prediction_market"]);return a.createElement("div",{className:"grid-block"},a.createElement("div",{className:"grid-content"},a.createElement("h3",null,a.createElement(T.a,{content:"header.update_asset"}),": ",_),a.createElement(tt.b,{setting:"updateAssetTab",contentClass:"grid-block shrink small-vertical medium-horizontal"},a.createElement(tt.a,{title:"account.user_issued_assets.primary"},a.createElement("div",{className:"small-12 large-8 grid-content"},a.createElement("h3",null,a.createElement(T.a,{content:"account.user_issued_assets.primary"})),a.createElement("label",null,a.createElement(T.a,{content:"account.user_issued_assets.precision"}),a.createElement("span",null,": ",r.get("precision"))),a.createElement("br",null),a.createElement("label",null,a.createElement(de.a,{label:"account.user_issued_assets.max_supply",amount:l.max_supply,onChange:this._onUpdateInput.bind(this,"max_supply"),asset:r.get("id"),assets:[r.get("id")],placeholder:"0.0",tabIndex:1})),i.max_supply?a.createElement("p",{className:"grid-content has-error"},i.max_supply):null,a.createElement(T.a,{component:"h3",content:"account.user_issued_assets.core_exchange_rate"}),a.createElement("label",null,a.createElement("div",{className:"grid-block no-margin"},q?null:a.createElement("div",{className:"grid-block no-margin small-12 medium-6"},a.createElement($e,{label:"account.user_issued_assets.quote_name",onChange:this._onInputCoreAsset.bind(this,"quote"),asset:this.state.quoteAssetInput,assetInput:this.state.quoteAssetInput,tabIndex:1,style:{width:"100%",paddingRight:"10px"},onFound:this._onFoundCoreAsset.bind(this,"quote")})),q?null:a.createElement("div",{className:"grid-block no-margin small-12 medium-6"},a.createElement($e,{label:"account.user_issued_assets.base_name",onChange:this._onInputCoreAsset.bind(this,"base"),asset:this.state.baseAssetInput,assetInput:this.state.baseAssetInput,tabIndex:1,style:{width:"100%",paddingLeft:"10px"},onFound:this._onFoundCoreAsset.bind(this,"base")})),i.quote_asset?a.createElement("p",{className:"grid-content has-error"},i.quote_asset):null,i.base_asset?a.createElement("p",{className:"grid-content has-error"},i.base_asset):null,a.createElement("div",{className:"grid-block no-margin small-12 medium-6"},a.createElement(de.a,{label:"account.user_issued_assets.quote",amount:u.quote.amount,onChange:this._onCoreRateChange.bind(this,"quote"),asset:u.quote.asset_id,assets:[u.quote.asset_id],placeholder:"0.0",tabIndex:1,style:{width:"100%",paddingRight:"10px"}})),a.createElement("div",{className:"grid-block no-margin small-12 medium-6"},a.createElement(de.a,{label:"account.user_issued_assets.base",amount:u.base.amount,onChange:this._onCoreRateChange.bind(this,"base"),asset:u.base.asset_id,assets:[u.base.asset_id],placeholder:"0.0",tabIndex:1,style:{width:"100%",paddingLeft:"10px"}}))),a.createElement("div",null,a.createElement("h5",null,a.createElement(T.a,{content:"exchange.price"}),":"," ",a.createElement(bt.a,{style:{fontWeight:"bold"},quote_amount:w,quote_asset:u.quote.asset_id,base_asset:u.base.asset_id,base_amount:k})))),a.createElement("div",null,a.createElement(T.a,{content:"account.user_issued_assets.cer_warning_1",component:"label",className:"has-error"}),a.createElement(T.a,{content:"account.user_issued_assets.cer_warning_2",component:"p"})),N)),a.createElement(tt.a,{title:"account.whitelist.title"},a.createElement(kt,{whiteListEnabled:p.white_list,whitelist_authorities:this.state.whitelist_authorities,blacklist_authorities:this.state.blacklist_authorities,whitelist_markets:this.state.whitelist_markets,blacklist_markets:this.state.blacklist_markets,new_authority_id:this.state.new_authority_id,authority_name:this.state.authority_name,onAccountNameChanged:this.onAccountNameChanged.bind(this),onAccountChanged:this.onAccountChanged.bind(this),onChangeList:this.onChangeList.bind(this)},N)),a.createElement(tt.a,{title:"account.user_issued_assets.description"},a.createElement("div",{className:"small-12 large-8 grid-content"},a.createElement(T.a,{component:"h3",content:"account.user_issued_assets.description"}),a.createElement("label",null,a.createElement("textarea",{style:{height:"7rem"},rows:"1",value:l.description.main||"",onChange:this._onUpdateDescription.bind(this,"main")})),a.createElement(T.a,{component:"h3",content:"account.user_issued_assets.short"}),a.createElement("label",null,a.createElement("input",{type:"text",rows:"1",value:l.description.short_name||"",onChange:this._onUpdateDescription.bind(this,"short_name")})),a.createElement(T.a,{component:"h3",content:"account.user_issued_assets.market"}),a.createElement($e,{label:"account.user_issued_assets.name",onChange:this._onInputMarket.bind(this),asset:this.state.marketInput,assetInput:this.state.marketInput,style:{width:"100%",paddingRight:"10px"},onFound:this._onFoundMarketAsset.bind(this)}),B?a.createElement("div",null,a.createElement(T.a,{component:"h3",content:"account.user_issued_assets.condition"}),a.createElement("label",null,a.createElement("input",{type:"text",rows:"1",value:l.description.condition,onChange:this._onUpdateDescription.bind(this,"condition")})),a.createElement(T.a,{component:"h3",content:"account.user_issued_assets.expiry"}),a.createElement("label",null,a.createElement("input",{type:"date",value:l.description.expiry,onChange:this._onUpdateDescription.bind(this,"expiry")}))):null,N)),f?a.createElement(tt.a,{title:"account.user_issued_assets.bitasset_opts"},a.createElement("div",{className:"small-12 large-8 grid-content"},a.createElement(pt,{bitasset_opts:b,onUpdate:this.onChangeBitAssetOpts.bind(this),backingAsset:b.short_backing_asset,assetPrecision:r.get("precision"),assetSymbol:r.get("symbol")}),N)):null,a.createElement(tt.a,{title:"account.user_issued_assets.update_owner"},a.createElement("div",{className:"small-12 large-8 grid-content"},a.createElement(T.a,{component:"h3",content:"account.user_issued_assets.update_owner"}),a.createElement("div",{style:{paddingBottom:"1rem"}},a.createElement(_t.a,{label:"account.user_issued_assets.current_issuer",accountName:n.get("name"),account:n.get("name"),error:null,tabIndex:1})),a.createElement(_t.a,{label:"account.user_issued_assets.new_issuer",accountName:this.state.issuer_account_name,onChange:this.onAccountNameChanged.bind(this,"issuer_account_name"),onAccountChanged:this.onAccountChanged.bind(this,"new_issuer_account_id"),account:this.state.issuer_account_name,error:null,tabIndex:1}),N)),a.createElement(tt.a,{title:"account.permissions"},a.createElement("div",{className:"small-12 large-8 grid-content"},a.createElement(Ue.a,{path:"components/AccountAssetCreate",section:"permissions"}),a.createElement("p",{className:"grid-content has-error"},a.createElement(T.a,{content:"account.user_issued_assets.perm_warning"})),j,N)),a.createElement(tt.a,{title:"account.user_issued_assets.flags"},a.createElement("div",{className:"small-12 large-8 grid-content"},a.createElement(Ue.a,{path:"components/AccountAssetCreate",section:"flags"}),A.charge_market_fee?a.createElement("div",null,a.createElement(T.a,{component:"h3",content:"account.user_issued_assets.market_fee"}),a.createElement("table",{className:"table"},a.createElement("tbody",null,a.createElement("tr",null,a.createElement("td",{style:{border:"none",width:"80%"}},a.createElement(T.a,{content:"account.user_issued_assets.charge_market_fee"}),":"),a.createElement("td",{style:{border:"none"}},a.createElement("div",{className:"switch",style:{marginBottom:"10px"},onClick:this._onFlagChange.bind(this,"charge_market_fee")},a.createElement("input",{type:"checkbox",onChange:function(){},checked:p.charge_market_fee}),a.createElement("label",null)))))),a.createElement("div",{className:We()({disabled:!p.charge_market_fee})},a.createElement("label",null,a.createElement(T.a,{content:"account.user_issued_assets.market_fee"})," ","(%)",a.createElement("input",{type:"number",value:l.market_fee_percent,onChange:this._onUpdateInput.bind(this,"market_fee_percent")})),a.createElement("label",null,a.createElement(de.a,{label:"account.user_issued_assets.max_market_fee",amount:l.max_market_fee,onChange:this._onUpdateInput.bind(this,"max_market_fee"),asset:r.get("id"),assets:[r.get("id")],placeholder:"0.0",tabIndex:1})),i.max_market_fee?a.createElement("p",{className:"grid-content has-error"},i.max_market_fee):null)):null,a.createElement("h3",null,a.createElement(T.a,{content:"account.user_issued_assets.flags"})),C,N)),a.createElement(tt.a,{title:"explorer.asset.fee_pool.title"},a.createElement("div",{className:"small-12 large-8 grid-content"},a.createElement(T.a,{component:"h3",content:"transaction.trxTypes.asset_fund_fee_pool"}),a.createElement(T.a,{component:"p",content:"explorer.asset.fee_pool.fund_text",asset:r.get("symbol"),core:s.get("symbol")}),a.createElement("div",{style:{paddingBottom:"1rem"}},a.createElement(T.a,{content:"explorer.asset.fee_pool.pool_balance"}),a.createElement("span",null,": "),a.createElement(ae.a,{amount:r.getIn(["dynamic","fee_pool"]),asset:"1.3.0"})),a.createElement(_t.a,{label:"transaction.funding_account",accountName:this.state.funder_account_name,onChange:this.onAccountNameChanged.bind(this,"funder_account_name"),onAccountChanged:this.onAccountChanged.bind(this,"new_funder_account"),account:this.state.funder_account_name,error:null,tabIndex:1}),a.createElement(de.a,{label:"transfer.amount",display_balance:D,amount:d,onChange:this._onPoolInput.bind(this),asset:"1.3.0",assets:["1.3.0"],placeholder:"0.0",tabIndex:2,style:{width:"100%",paddingLeft:"10px"}}),a.createElement("div",{style:{paddingTop:"0.5rem"}},a.createElement("hr",null),a.createElement("button",{className:We()("button",{disabled:d<=0}),onClick:this._onFundPool.bind(this)},a.createElement(T.a,{content:"transaction.trxTypes.asset_fund_fee_pool"})),a.createElement("button",{className:"button outline",onClick:this._reset.bind(this)},a.createElement(T.a,{content:"account.perm.reset"})),a.createElement("br",null),a.createElement("br",null),a.createElement("p",null,a.createElement(T.a,{content:"account.user_issued_assets.approx_fee"}),":"," ",a.createElement(ft,{opType:"asset_fund_fee_pool"}))),a.createElement(T.a,{component:"h3",content:"transaction.trxTypes.asset_claim_fees"}),a.createElement(T.a,{component:"p",content:"explorer.asset.fee_pool.claim_text",asset:r.get("symbol")}),a.createElement("div",{style:{paddingBottom:"1rem"}},a.createElement(T.a,{content:"explorer.asset.fee_pool.unclaimed_issuer_income"}),": ",a.createElement(ae.a,{amount:r.getIn(["dynamic","accumulated_fees"]),asset:r.get("id")})),a.createElement(de.a,{label:"transfer.amount",display_balance:F,amount:h,onChange:this._onClaimInput.bind(this),asset:r.get("id"),assets:[r.get("id")],placeholder:"0.0",tabIndex:1,style:{width:"100%",paddingLeft:"10px"}}),a.createElement("div",{style:{paddingTop:"0.5rem"}},a.createElement("hr",null),a.createElement("button",{className:We()("button",{disabled:!L}),onClick:this._onClaimFees.bind(this)},a.createElement(T.a,{content:"explorer.asset.fee_pool.claim_fees"})),a.createElement("button",{className:"button outline",onClick:this._reset.bind(this)},a.createElement(T.a,{content:"account.perm.reset"})),a.createElement("br",null),a.createElement("br",null)))))))}}]),t}();Tt.propTypes={asset:E.a.ChainAsset.isRequired,core:E.a.ChainAsset.isRequired},Tt.defaultProps={core:"1.3.0"},Tt=Object(w.a)(Tt);var It=function(e){function t(){return jt(this,t),St(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Nt(t,a["Component"]),Ot(t,[{key:"render",value:function(){var e=this.props.match.params.asset;return a.createElement(Tt,Ct({asset:e},this.props))}}]),t}(),Rt=Object(At.a)(It),Dt=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var Mt=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["Component"]),Dt(t,[{key:"render",value:function(){var e=this.props.stat_object.toJS();return a.createElement("tbody",null,a.createElement("tr",null,a.createElement("td",null,a.createElement(T.a,{content:"account.member.fees_paid"})," "),a.createElement("td",null,a.createElement(ae.a,{amount:parseFloat(e.lifetime_fees_paid),asset:"1.3.0"}))))}}]),t}();Mt.propTypes={stat_object:E.a.ChainObject.isRequired};var Lt=Object(w.a)(Mt,{keep_updating:!0}),Ft=n(1279),qt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Bt=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();function Wt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ut(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Ht(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Yt=function(e){function t(){return Wt(this,t),Ut(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Ht(t,a["Component"]),Bt(t,[{key:"render",value:function(){var e=this.props.dprops;return a.createElement(Ue.a,qt({},this.props,{path:"components/AccountMembership",section:"fee-division",nextMaintenanceTime:{time:e.get("next_maintenance_time")}}))}}]),t}();Yt.propTypes={dprops:E.a.ChainObject.isRequired},Yt.defaultProps={dprops:"2.1.0"},Yt=Object(w.a)(Yt);var Xt=function(e){function t(){return Wt(this,t),Ut(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Ht(t,a["Component"]),Bt(t,[{key:"upgradeAccount",value:function(e,t,n){n.preventDefault(),s.a.upgradeAccount(e,t)}},{key:"componentWillMount",value:function(){V.a.getFinalFeeAsset(this.props.account,"account_upgrade")}},{key:"render",value:function(){var e=this.props,t=e.gprops,n=e.core_asset,r=this.props.account.toJS(),s=He.b.getAccount(r.lifetime_referrer,!1);s&&(r.lifetime_referrer_name=s.get("name"));var o=He.b.getAccount(r.referrer,!1);o&&(r.referrer_name=o.get("name"));var i=He.b.getAccount(r.registrar,!1);i&&(r.registrar_name=i.get("name"));var c=r.name,l=r.network_fee_percentage/100,u=r.lifetime_referrer_fee_percentage/100,p=100-l-u,m=p*r.referrer_rewards_percentage/1e4,h=100-m-u-l,f=t.getIn(["parameters","current_fees","parameters",8,1,"membership_lifetime_fee"])*t.getIn(["parameters","current_fees","scale"])/1e4,b=(t.getIn(["parameters","current_fees","parameters",8,1,"membership_annual_fee"]),t.getIn(["parameters","current_fees","scale"]),He.b.getAccountMemberStatus(this.props.account)),_="account.member."+b,g=null;"annual"===b&&(g=a.createElement("span",null,"(",a.createElement(T.a,{content:"account.member.expires"})," ",a.createElement(Ft.a,{time:r.membership_expiration_date}),")"));var v=r.membership_expiration_date;return"1969-12-31T23:59:59"===v?v="Never":"1970-01-01T00:00:00"===v&&(v="N/A"),a.createElement("div",{className:"grid-content",style:{overflowX:"hidden"}},a.createElement("div",{className:"content-block no-margin"},a.createElement("h3",null,a.createElement(T.a,{content:_})," ",g),"lifetime"===b?null:a.createElement("div",null,a.createElement("div",{className:"large-6 medium-8"},a.createElement(Ue.a,{path:"components/AccountMembership",section:"lifetime",feesCashback:100-l,price:{amount:f,asset:n}}),a.createElement("div",{className:"button no-margin",onClick:this.upgradeAccount.bind(this,r.id,!0)},a.createElement(T.a,{content:"account.member.upgrade_lifetime"}))," ","   ",null),a.createElement("br",null),a.createElement("hr",null))),a.createElement("div",{className:"content-block no-margin"},a.createElement("div",{className:"no-margin grid-block vertical large-horizontal"},a.createElement("div",{className:"no-margin grid-block large-5"},a.createElement("div",{className:"grid-content"},a.createElement("h4",null,a.createElement(T.a,{content:"account.member.fee_allocation"})),a.createElement("table",{className:"table key-value-table"},a.createElement("tbody",null,a.createElement("tr",null,a.createElement("td",null,a.createElement(T.a,{content:"account.member.network_percentage"})),a.createElement("td",null,l,"%")),a.createElement("tr",null,a.createElement("td",null,a.createElement(T.a,{content:"account.member.lifetime_referrer"})," ","  (",a.createElement(d.a,{to:"account/"+r.lifetime_referrer_name+"/overview"},r.lifetime_referrer_name),")"),a.createElement("td",null,u,"%")),a.createElement("tr",null,a.createElement("td",null,a.createElement(T.a,{content:"account.member.registrar"}),"   (",a.createElement(d.a,{to:"account/"+r.registrar_name+"/overview"},r.registrar_name),")"),a.createElement("td",null,h,"%")),a.createElement("tr",null,a.createElement("td",null,a.createElement(T.a,{content:"account.member.referrer"}),"   (",a.createElement(d.a,{to:"account/"+r.referrer_name+"/overview"},r.referrer_name),")"),a.createElement("td",null,m,"%")),a.createElement("tr",null,a.createElement("td",null,a.createElement(T.a,{content:"account.member.membership_expiration"})," "),a.createElement("td",null,v)))),a.createElement("h4",{style:{paddingTop:"1rem"}},a.createElement(T.a,{content:"account.member.fees_cashback"})),a.createElement("table",{className:"table key-value-table"},a.createElement(Lt,{stat_object:r.statistics})))),a.createElement("div",{className:"grid-block large-7"},a.createElement("div",{className:"grid-content"},a.createElement(Yt,{account:c,networkFee:l,referrerFee:m,registrarFee:h,lifetimeFee:u,referrerTotalFee:p,maintenanceInterval:t.getIn(["parameters","maintenance_interval"]),vestingThreshold:{amount:t.getIn(["parameters","cashback_vesting_threshold"]),asset:n},vestingPeriod:t.getIn(["parameters","cashback_vesting_period_seconds"])/60/60/24}))))))}}]),t}();Xt.propTypes={account:E.a.ChainAccount.isRequired,gprops:E.a.ChainObject.isRequired,core_asset:E.a.ChainAsset.isRequired},Xt.defaultProps={gprops:"2.0.0",core_asset:"1.3.0"};var Jt=Xt=Object(w.a)(Xt),Vt=n(35),zt=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();function Kt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Gt(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Qt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var $t=function(e){function t(){return Kt(this,t),Gt(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Qt(t,a["Component"]),zt(t,[{key:"_onClaim",value:function(e,t){var n=this;t.preventDefault(),Vt.a.claimVestingBalance(this.props.account.id,this.props.vb,e).then(function(){"function"==typeof n.props.handleChanged&&n.props.handleChanged()})}},{key:"render",value:function(){var e=this.props.vb;if(!this.props.vb)return null;var t=void 0,n=void 0,r=void 0,s=void 0,o=void 0;return e&&(o=e.balance.amount,t=He.b.getAsset(e.balance.asset_id),r=e.policy[1].coin_seconds_earned,s=0===(n=e.policy[1].vesting_seconds)?1:r/(n*o)),t&&o?a.createElement("div",{className:"",style:{paddingBottom:"1rem"}},a.createElement(T.a,{component:"h5",content:"account.vesting.balance_number",id:e.id}),a.createElement("table",{className:"table key-value-table"},a.createElement("tbody",null,a.createElement("tr",null,a.createElement("td",null,a.createElement(T.a,{content:"account.member.cashback"})),a.createElement("td",null,a.createElement(ae.a,{amount:e.balance.amount,asset:e.balance.asset_id}))),a.createElement("tr",null,a.createElement("td",null,a.createElement(T.a,{content:"account.member.earned"})),a.createElement("td",null,ce.a.format_number(ce.a.get_asset_amount(r/86400,t),0)," ",a.createElement(T.a,{content:"account.member.coindays"}))),a.createElement("tr",null,a.createElement("td",null,a.createElement(T.a,{content:"account.member.required"})),a.createElement("td",null,ce.a.format_number(ce.a.get_asset_amount(e.balance.amount*n/86400,t),0)," ",a.createElement(T.a,{content:"account.member.coindays"}))),a.createElement("tr",null,a.createElement("td",null,a.createElement(T.a,{content:"account.member.remaining"})),a.createElement("td",null,ce.a.format_number(n*(1-s)/86400||0,2)," days")),a.createElement("tr",null,a.createElement("td",null,a.createElement(T.a,{content:"account.member.available"})),a.createElement("td",null,ce.a.format_number(100*s,2),"% /"," ",a.createElement(ae.a,{amount:s*e.balance.amount,asset:t.get("id")}))),a.createElement("tr",null,a.createElement("td",{colSpan:"2",style:{textAlign:"right"}},a.createElement("button",{onClick:this._onClaim.bind(this,!1),className:"button outline"},a.createElement(T.a,{content:"account.member.claim"}))))))):null}}]),t}(),Zt=function(e){function t(){Kt(this,t);var e=Gt(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={vbs:null},e}return Qt(t,a["Component"]),zt(t,[{key:"componentWillMount",value:function(){this.retrieveVestingBalances.call(this,this.props.account.get("id"))}},{key:"componentWillUpdate",value:function(e){var t=e.account.get("id");t!==this.props.account.get("id")&&this.retrieveVestingBalances.call(this,t)}},{key:"retrieveVestingBalances",value:function(e){var t=this;e=e||this.props.account.get("id"),ge.a.instance().db_api().exec("get_vesting_balances",[e]).then(function(e){t.setState({vbs:e})}).catch(function(e){console.log("error:",e)})}},{key:"render",value:function(){var e=this,t=this.state.vbs;if(!t||!this.props.account||!this.props.account.get("vesting_balances"))return null;var n=this.props.account.toJS(),r=t.map(function(t){if(t.balance.amount)return a.createElement($t,{key:t.id,vb:t,account:n,handleChanged:e.retrieveVestingBalances.bind(e)})}).filter(function(e){return!!e});return a.createElement("div",{className:"grid-content",style:{overflowX:"hidden"}},a.createElement(T.a,{content:"account.vesting.explain",component:"p"}),r.length?r:a.createElement("h4",{style:{paddingTop:"1rem"}},a.createElement(T.a,{content:"account.vesting.no_balances"})))}}]),t}();Zt.VestingBalance=$t;var en=Zt,tn=n(134),nn=n(39),an=n(44),rn=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var sn=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state=n._getInitialState(),n.onPasswordEnter=n.onPasswordEnter.bind(n),n.onKeyDown=n.onKeyDown.bind(n),n.onCancel=n.onCancel.bind(n),n.onClose=n.onClose.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["Component"]),rn(t,[{key:"_getInitialState",value:function(){return{isShowQrcode:!1,keyString:null}}},{key:"show",value:function(){se.a.publish(this.props.modalId,"open")}},{key:"onCancel",value:function(){se.a.publish(this.props.modalId,"close"),this.onClose()}},{key:"onClose",value:function(){this.refs.password_input&&(this.refs.password_input.value=""),this.setState(this._getInitialState())}},{key:"onPasswordEnter",value:function(e){e.preventDefault();var t=this.refs.password_input.value,n=this.props.keyValue;if(null!=t&&""!=t){if(void 0!==n&&null!=n&&""!=n){var a=He.a.fromSeed(t).encryptToHex(n);this.setState({isShowQrcode:!0,keyString:a})}}else this.setState({isShowQrcode:!0,keyString:n})}},{key:"onKeyDown",value:function(e){13===e.keyCode&&this.onPasswordEnter(e)}},{key:"render",value:function(){var e=this,t=null;return this.state.isShowQrcode&&(t={textAlign:"center"}),a.createElement(ne.a,{onClose:this.onClose,id:this.props.modalId,ref:"modal",overlay:!0,overlayClose:!1},a.createElement("div",{className:"text-center"},a.createElement("div",{style:{margin:"1.5rem 0"}},a.createElement(T.a,{component:"h4",content:"modal.qrcode.title"})),a.createElement("form",{className:"full-width",style:{margin:"0 3.5rem"},onSubmit:this.onPasswordEnter,noValidate:!0},a.createElement("div",{className:"form-group"},this.state.isShowQrcode?a.createElement("section",{style:t},a.createElement(A.a,{size:256,value:this.state.keyString})):a.createElement("section",null,a.createElement("label",{className:"left-label"},a.createElement(T.a,{unsafe:!0,content:"modal.qrcode.input_message"})),a.createElement("input",{name:"password",type:"text",onFocus:function(){e.refs.password_input.setAttribute("type","password")},ref:"password_input",autoComplete:"off",onKeyDown:this.onKeyDown}))),a.createElement("div",{style:t},a.createElement("div",{className:"button-group"},0==this.state.isShowQrcode?a.createElement("button",{className:"button","data-place":"bottom","data-html":!0,onClick:this.onPasswordEnter},a.createElement(T.a,{content:"modal.ok"})):null,a.createElement("button",{className:"button","data-place":"bottom","data-html":!0,onClick:this.onCancel},a.createElement(T.a,{content:"cancel"})))))))}}]),t}();sn.propTypes={modalId:u.string.isRequired,keyValue:u.string},sn.defaultProps={modalId:"qr_code_password_modal"};var on=sn,cn=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var ln=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state=e._getInitialState(),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["Component"]),cn(t,[{key:"_getInitialState",value:function(){return{wif:null}}},{key:"reset",value:function(){this.setState(this._getInitialState())}},{key:"componentDidMount",value:function(){var e=this,t="key_view_modal"+this.props.pubkey;se.a.subscribe(t,function(n,a){n===t&&"close"===a&&e.reset()})}},{key:"render",value:function(){var e="key_view_modal"+this.props.pubkey,t=an.a.getState().keys;if(!t.has(this.props.pubkey))return a.createElement("span",null,this.props.children);var r=t.get(this.props.pubkey);return a.createElement("span",null,a.createElement("a",{onClick:this.onOpen.bind(this)},this.props.children),a.createElement(ne.a,{ref:e,id:e,overlay:!0,overlayClose:!1},a.createElement("h3",null,a.createElement(T.a,{content:"account.perm.key_viewer"})),a.createElement("div",{className:"grid-block vertical"},a.createElement("div",{className:"content-block"},a.createElement("div",{className:"grid-content"},a.createElement("label",null,a.createElement(T.a,{content:"account.perm.public"})),this.props.pubkey),a.createElement("br",null),a.createElement("div",{className:"grid-block grid-content"},a.createElement("label",null,a.createElement(T.a,{content:"account.perm.private"})),a.createElement("div",null,this.state.wif?a.createElement("span",null,a.createElement("p",{style:{fontWeight:600}},this.state.wif),a.createElement("div",{className:"button-group"},a.createElement("div",{className:"button",onClick:this.onHide.bind(this)},"hide"),a.createElement("div",{className:"clickable",onClick:this.showQrCode.bind(this)},a.createElement("img",{style:{height:50},src:n(1247)})))):a.createElement("span",null,a.createElement("div",{className:"button",onClick:this.onShow.bind(this)},a.createElement(T.a,{content:"account.perm.show"}))))),a.createElement("br",null),a.createElement("div",{className:"grid-block grid-content"},a.createElement("label",null,a.createElement(T.a,{content:"account.perm.brain"})),null==r.brainkey_sequence?"Non-deterministic":r.brainkey_sequence),a.createElement("br",null),r.import_account_names&&r.import_account_names.length?a.createElement("div",{className:"grid-block grid-content"},a.createElement("label",null,a.createElement(T.a,{content:"account.perm.from"})),r.import_account_names.join(", "),a.createElement("br",null)):null)),a.createElement("div",{className:"button-group"},a.createElement("div",{onClick:this.onClose.bind(this),className:" button"},a.createElement(T.a,{content:"transfer.close"})))),a.createElement(on,{ref:"qrmodal",keyValue:this.state.wif}))}},{key:"onOpen",value:function(){var e="key_view_modal"+this.props.pubkey;se.a.publish(e,"open")}},{key:"onClose",value:function(){this.reset();var e="key_view_modal"+this.props.pubkey;se.a.publish(e,"close")}},{key:"onShow",value:function(){var e=this;nn.a.unlock().then(function(){var t=ve.a.getPrivateKey(e.props.pubkey);e.setState({wif:t.toWif()})})}},{key:"onHide",value:function(){this.setState({wif:null})}},{key:"showQrCode",value:function(){this.refs.qrmodal.show()}}]),t}();ln.propTypes={pubkey:u.string.isRequired};var un=ln,pn=n(131),mn=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();function dn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function hn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function fn(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var bn=function(e){function t(){return dn(this,t),hn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return fn(t,a["Component"]),mn(t,[{key:"shouldComponentUpdate",value:function(e){return!ce.a.are_equal_shallow(e,this.props)}},{key:"_lookUpPubKeyForAddress",value:function(e){return pn.a.getState().addresses.get(e)}},{key:"render",value:function(){var e=void 0,t=void 0,n=void 0,r="_accounts",s=this.props.pubkey,o=an.a.getState().keys,i=!1;return this.props.account?(e=this.props.account.get("name"),t=this.props.account.get("id"),n=a.createElement(d.a,{to:"/account/"+e+"/permissions"},e)):s?(e=t=s,n=a.createElement(un,{pubkey:s},s),r="_keys",i=o.has(s)):this.props.address&&(s=this._lookUpPubKeyForAddress(this.props.address),t=this.props.address,n=s?a.createElement(un,{pubkey:s},s):this.props.address,r="_addresses",i=o.has(s)),a.createElement("tr",{key:e},a.createElement("td",null,this.props.account?a.createElement(y.a,{size:{height:30,width:30},account:e}):s?a.createElement("div",{className:"account-image"},a.createElement(un,{pubkey:s},a.createElement(yt.a,{name:"key",size:"4x"}))):null),a.createElement("td",{className:i?"my-key":""},n),a.createElement("td",null,this.props.weights[t]),a.createElement("td",null,a.createElement("button",{className:"button outline",onClick:this.props.onRemoveItem.bind(this,t,r)},a.createElement(T.a,{content:"account.votes.remove_witness"}))))}}]),t}();bn.propTypes={account:u.object,pubkey:u.string,address:u.string,onRemoveItem:u.func.isRequired,weights:u.object};var _n=function(e){function t(e){dn(this,t);var n=hn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={selected_item:null,item_name_input:"",weight_input:"",error:null},n.onItemChange=n.onItemChange.bind(n),n.onItemAccountChange=n.onItemAccountChange.bind(n),n.onAddItem=n.onAddItem.bind(n),n}return fn(t,a["Component"]),mn(t,[{key:"onItemChange",value:function(e){this.setState({item_name_input:e})}},{key:"onItemAccountChange",value:function(e){var t=this;if(this.setState({selected_item:e,error:null}),e&&this.props.validateAccount){var n=this.props.validateAccount(e);if(null===n)return;"string"==typeof n?this.setState({error:n}):n.then(function(e){return t.setState({error:e})})}}},{key:"onWeightChanged",value:function(e){var t=e.target.value.trim();this.setState({weight_input:parseInt(t)})}},{key:"onAddItem",value:function(e){if(e){this.setState({selected_item:null,item_name_input:"",weight_input:"",error:null});var t="string"==typeof e?e:e.get("id");this.props.onAddItem(t,this.state.weight_input)}}},{key:"onWeightKeyDown",value:function(e){13===e.keyCode&&this.state.weight_input&&this.state.selected_item&&this.onAddItem(this.state.selected_item)}},{key:"render",value:function(){var e=this,t=0,n=this.props.accounts.filter(function(e){return!!e}).sort(function(e,t){return e.get("name")>t.get("name")?1:e.get("name")<t.get("name")?-1:0}).map(function(n){return a.createElement(bn,{key:t++,account:n,weights:e.props.weights,onRemoveItem:e.props.onRemoveItem})}),r=this.props.keys.map(function(n){return a.createElement(bn,{key:t++,pubkey:n,weights:e.props.weights,onRemoveItem:e.props.onRemoveItem})}),s=this.props.addresses.map(function(n){return a.createElement(bn,{key:t++,address:n,weights:e.props.weights,onRemoveItem:e.props.onRemoveItem})}),o=this.state.error;!o&&this.state.selected_item&&-1!==this.props.accounts.indexOf(this.state.selected_item)&&(o=x.a.translate("account.perm.warning3")),!o&&this.state.item_name_input&&-1!==this.props.keys.indexOf(this.state.item_name_input)&&(o=x.a.translate("account.perm.warning4"));var i=["10%","70%","30%","10%"];return a.createElement("div",null,a.createElement(_t.a,{label:this.props.label,error:o,placeholder:this.props.placeholder,account:this.state.item_name_input,accountName:this.state.item_name_input,onChange:this.onItemChange,onAccountChanged:this.onItemAccountChange,onAction:this.onAddItem,action_label:"account.votes.add_witness",tabIndex:this.props.tabIndex,allowPubKey:!0,disableActionButton:!this.state.weight_input,allowUppercase:!0},a.createElement("input",{value:this.state.weight_input,onChange:this.onWeightChanged.bind(this),className:"weight-input",type:"number",autoComplete:"off",placeholder:x.a.translate("account.perm.weight"),onKeyDown:this.onWeightKeyDown.bind(this),tabIndex:this.props.tabIndex+1})),a.createElement("div",{style:{paddingTop:"2rem"}},a.createElement("table",{className:"table"},a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",{style:{width:i[0]}}),a.createElement("th",{style:{width:i[1]}},a.createElement(T.a,{content:"account.perm.acct_or_key"})),a.createElement("th",{style:{width:i[2]}},a.createElement(T.a,{content:"account.perm.weight"})),a.createElement("th",{style:{width:i[3]}},a.createElement(T.a,{content:"account.perm.action"})))),a.createElement("tbody",null,n,r,s))))}}]),t}();_n.propTypes={accounts:E.a.ChainObjectsList,onAddItem:u.func.isRequired,onRemoveItem:u.func.isRequired,validateAccount:u.func,label:u.string.isRequired,placeholder:u.string,tabIndex:u.number,weights:u.object};var gn=Object(w.a)(_n,{keep_updating:!0}),vn=n(82),yn=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var En={0:"low",4:"medium",5:"high"},wn=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleChange=n.handleChange.bind(n),n.onKeyDown=n.onKeyDown.bind(n),n.state={value:"",error:null,wrong:!1,doesnt_match:!1,loading:e.checkStrength},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["Component"]),yn(t,[{key:"value",value:function(){return this.state.value||""}},{key:"clear",value:function(){this.setState({value:""}),this.passwordInput.value="",this.props.confirmation&&(this.confirmationInput.value="")}},{key:"focus",value:function(){this.passwordInput.focus()}},{key:"valid",value:function(){return!(this.state.error||this.state.wrong||this.state.doesnt_match)&&this.state.value.length>=this.props.passwordLength}},{key:"componentDidMount",value:function(){var e=this;this.props.checkStrength&&n.e(262).then(n.t.bind(null,1264,7)).then(function(t){e.pw=t.default,e.setState({loading:!1})})}},{key:"handleChange",value:function(e){var t=!this.props.confirmation||this.confirmationInput.value,n=this.passwordInput.value,a=!!this.props.confirmation&&(t&&n!==t),r={valid:!this.state.error&&!this.state.wrong&&!(this.props.confirmation&&a)&&t&&n.length>=this.props.passwordLength&&(!this.props.validatePattern||this.props.validatePattern.test(n)),value:n,doesnt_match:a};this.props.onChange&&this.props.onChange(r),this.setState(r)}},{key:"onKeyDown",value:function(e){this.props.onEnter&&13===e.keyCode&&this.props.onEnter(e)}},{key:"render",value:function(){var e=this,t=null,n=null;this.props.showErrorMsg&&(this.state.wrong||this.props.wrongPassword)?t=a.createElement("div",{style:{marginTop:"1em"}},a.createElement(T.a,{content:"wallet.pass_incorrect"})):this.state.error&&(t=a.createElement("div",null,this.state.error)),!this.props.noValidation&&this.props.validatePattern&&!t&&this.state.value.length>0&&!this.props.validatePattern.test(this.state.value)&&(t=a.createElement("div",null,a.createElement(T.a,{content:"wallet.pass_length",minLength:this.props.passwordLength}))),this.state.doesnt_match&&(n=a.createElement("div",null,a.createElement(T.a,{content:"wallet.confirm_error"})));var r=We()("form-group",{"has-error":t}),s=We()("form-group",{"has-error":this.state.doesnt_match});this.confirmationInput&&this.confirmationInput.value&&this.state.doesnt_match;var o=0,i=void 0;return this.props.checkStrength&&this.pw&&(o=this.state.value.length>100?{score:4}:this.pw(this.state.value||""),i=Math.min(5,o.score+Math.floor(this.state.value.length/(1.5*this.props.passwordLength)))),a.createElement("div",{className:"account-selector"},a.createElement("div",{className:r},this.props.noLabel?null:a.createElement("label",{className:"left-label"},a.createElement(T.a,{content:"wallet.enter_password"})),a.createElement(vn.h,{style:this.props.isSimple?{}:{fontSize:"1.25rem",height:"3.66667em",marginBottom:this.props.checkStrength?0:null},id:"accountNameTip",icon:this.props.isSimple?null:"lock",iconStyle:this.props.isSimple?{}:{transform:"scale(0.8)"},name:"password",type:"password",inputRef:function(t){return e.passwordInput=t},autoComplete:"off",valueFromOuter:!0,value:this.props.value||this.state.value,onChange:this.handleChange,onKeyDown:this.onKeyDown}),this.props.checkStrength?this.pw?[a.createElement("progress",{key:"passwordStrengthIndicator",style:{height:10,width:"100%"},className:En[i]||En[0],value:i,max:"5"}),this.passwordInput&&this.passwordInput.value&&a.createElement("div",{key:"passwordIndicator",className:En[i]||En[0]},a.createElement(T.a,{content:"wallet.password_strength"}),a.createElement(T.a,{content:"wallet.strength_"+(En[i]||En[0])}),this.props.showStrengthTip&&i<4&&a.createElement(T.a,{style:{paddingLeft:"1em"},className:"txtlabel warning",content:"wallet.strength_tip"}))]:a.createElement(ue.a,null):null,t),this.props.confirmation?a.createElement("div",{className:s},a.createElement("label",{className:"left-label"},a.createElement(T.a,{content:"wallet.confirm_password"})),a.createElement(vn.h,{icon:this.props.isSimple?null:"lock",name:"confirm_password",type:"password",inputRef:function(t){return e.confirmationInput=t},iconStyle:this.props.isSimple?{}:{transform:"scale(0.8)"},style:this.props.isSimple?{}:{fontSize:"1.25rem",height:"3.66667em"},autoComplete:"off",onChange:this.handleChange}),n):null)}}]),t}();wn.propTypes={onChange:u.func,onEnter:u.func,confirmation:u.bool,wrongPassword:u.bool,noValidation:u.bool,noLabel:u.bool,passwordLength:u.number,checkStrength:u.bool,showErrorMsg:u.bool,isSimple:u.bool,showStrengthTip:u.bool},wn.defaultProps={confirmation:!1,wrongPassword:!1,noValidation:!1,noLabel:!1,validatePattern:!1,passwordLength:8,showErrorMsg:!0,checkStrength:!1,showStrengthTip:!1,isSimple:!1};var kn=wn,An=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var Cn=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={validPassword:!1,pass:null,generatedPassword:"P"+He.o.get_random_key().toWif().toString()},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["Component"]),An(t,[{key:"onSubmit",value:function(){}},{key:"onPasswordChange",value:function(e){var t=e.valid,n=this.props.account.get("name"),a=t?ve.a.generateKeyFromPassword(n,"active",e.value).pubKey:null,r=t?ve.a.generateKeyFromPassword(n,"owner",e.value).pubKey:null,s=t?ve.a.generateKeyFromPassword(n,"active",e.value).pubKey:null;this.setState({validPassword:e.valid,pass:e.value}),this.props.onSetPasswordKeys({active:a,owner:r,memo:s})}},{key:"checkKeyUse",value:function(e,t){return!!e&&("memo"===t?e===this.props.memoKey:this.props[t+"Keys"].reduce(function(t,n){return n===e||t},!1))}},{key:"_onUseKey",value:function(e){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1])this.props["active"===e?"onRemoveActive":"onRemoveOwner"](this.props[e],"_keys");else if(this.props[e]){var t={active:this.props.account.getIn(["active","weight_threshold"]),owner:this.props.account.getIn(["owner","weight_threshold"])};console.log("key",this.props[e],"weights",t,"weight of role:",t[e]),this.props["active"===e?"onAddActive":"owner"===e?"onAddOwner":"onSetMemo"](this.props[e],t[e])}}},{key:"render",value:function(){var e=this.checkKeyUse(this.props.active&&this.props.active,"active"),t=this.checkKeyUse(this.props.owner&&this.props.owner,"owner"),n=this.checkKeyUse(this.props.memo&&this.props.memo,"memo"),r=x.a.translate("account.perm.use_text"),s=x.a.translate("account.perm.remove_text");return a.createElement("div",null,a.createElement("p",{style:{maxWidth:"800px"}},a.createElement(T.a,{content:"account.perm.password_model_1"})),a.createElement("p",{style:{maxWidth:"800px"}},a.createElement(T.a,{content:"wallet.password_model_1"})),a.createElement("p",{style:{maxWidth:"800px"}},a.createElement(T.a,{unsafe:!0,content:"wallet.password_model_2"})),a.createElement("div",{className:"divider"}),a.createElement("form",{style:{maxWidth:"40rem"},onSubmit:this.onSubmit.bind(this),noValidate:!0},a.createElement("label",{className:"left-label"},a.createElement(T.a,{content:"wallet.generated"})),a.createElement("p",null,this.state.generatedPassword),a.createElement("p",{style:{fontWeight:"bold"}},a.createElement(T.a,{content:"account.perm.password_model_2"})),a.createElement(kn,{ref:"password",confirmation:!0,onChange:this.onPasswordChange.bind(this),noLabel:!0,passwordLength:12})),a.createElement("table",{className:"table"},a.createElement("tbody",null,a.createElement("tr",{className:e?"in-use":""},a.createElement("td",null,a.createElement(T.a,{content:"account.perm.new_active"}),":"),a.createElement("td",null,this.props.active),a.createElement("td",{className:"text-right"},a.createElement("div",{className:"button",onClick:this._onUseKey.bind(this,"active",e)},e?s:r))),a.createElement("tr",{className:t?"in-use":""},a.createElement("td",null,a.createElement(T.a,{content:"account.perm.new_owner"}),":"),a.createElement("td",null,this.props.owner),a.createElement("td",{className:"text-right"},a.createElement("div",{className:"button",onClick:this._onUseKey.bind(this,"owner",t)},t?s:r))),a.createElement("tr",{className:n?"in-use":""},a.createElement("td",null,a.createElement(T.a,{content:"account.perm.new_memo"}),":"),a.createElement("td",null,this.props.memo),a.createElement("td",{className:"text-right"},a.createElement("div",{className:"button",style:{visibility:n?"hidden":""},onClick:this._onUseKey.bind(this,"memo",n)},r))))),n?a.createElement("p",{style:{maxWidth:"800px",paddingTop:10},className:"has-error"},a.createElement(T.a,{content:"account.perm.memo_warning"})):null)}}]),t}(),On=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var xn=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["Component"]),On(t,[{key:"isValidPubKey",value:function(e){return!!He.i.fromPublicKeyString(e)}},{key:"onInputChanged",value:function(e){var t=e.target.value.trim();this.props.onChange(t)}},{key:"onKeyDown",value:function(e){13===e.keyCode&&this.onAction(e)}},{key:"onAction",value:function(e){e.preventDefault(),this.props.onAction&&this.state.valid&&!this.props.disableActionButton&&this.props.onAction(e)}},{key:"render",value:function(){var e=this.props.error;e||!this.props.value||this.isValidPubKey(this.props.value)||(e="Not a valid public key");var t=We()("button",{disabled:e||this.props.disableActionButton}),n=an.a.getState().keys,r=this.isValidPubKey(this.props.value)&&n.has(this.props.value);return a.createElement("div",{className:"pubkey-input no-overflow"},a.createElement("div",{className:"content-area"},a.createElement("div",{className:"header-area"},!e&&this.props.value&&this.isValidPubKey(this.props.value)?a.createElement("label",{className:"right-label"},a.createElement(T.a,{content:"account.perm.valid_pub"})):null,a.createElement(T.a,{className:"left-label",component:"label",content:this.props.label})),a.createElement("div",{className:"input-area"},a.createElement("span",{className:"inline-label"},a.createElement("div",{className:"account-image"},a.createElement(un,{pubkey:this.props.value},a.createElement(yt.a,{name:"key",size:"4x"}))),a.createElement("input",{type:"text",className:r?"my-key":"",value:this.props.value,placeholder:this.props.placeholder||counterpart.translate("account.public_key"),ref:"user_input",onChange:this.onInputChanged.bind(this),onKeyDown:this.onKeyDown.bind(this),tabIndex:this.props.tabIndex}),this.props.onAction?a.createElement("button",{className:t,onClick:this.onAction.bind(this)},a.createElement(T.a,{content:this.props.action_label})):null)),a.createElement("div",{className:"error-area has-error"},a.createElement("span",null,e))))}}]),t}();xn.propTypes={label:u.string.isRequired,value:u.string,error:u.string,placeholder:u.string,onChange:u.func,onAction:u.func,tabIndex:u.number,disableActionButton:u.bool};var jn=xn,Sn=n(1302),Nn=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var Pn=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={known:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["Component"]),Nn(t,[{key:"componentDidMount",value:function(){N.a.showModal(this.props.id)}},{key:"render",value:function(){var e=this.props,t=e.title,n=e.contents;return e.open?a.createElement(I.a,{modalId:this.props.id},a.createElement("h4",{className:"modal-header"},t),n.map(function(e){return a.createElement("p",{key:e},e)})):null}}]),t}(),Tn=Object(j.connect)(Pn,{listenTo:function(){return[S.a]},getProps:function(e){var t=e.id;return{open:S.a.getState().showingModals.has(t)}}}),In=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var Rn=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={isOwner:!1},n.onPublish=n.onPublish.bind(n),n.onReset=n.onReset.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["Component"]),In(t,[{key:"componentWillMount",value:function(){this.updateAccountData(this.props.account),V.a.getFinalFeeAsset(this.props.account,"account_update")}},{key:"componentWillReceiveProps",value:function(e){e.account!==this.props.account&&this.updateAccountData(e.account)}},{key:"permissionsFromImmutableObj",value:function(e){var t=e.get("weight_threshold"),n=e.get("account_auths"),a=e.get("key_auths"),r=e.get("address_auths"),s=n.map(function(e){return e.get(0)}),o=a.map(function(e){return e.get(0)}),i=r.map(function(e){return e.get(0)}),c=n.reduce(function(e,t){return e[t.get(0)]=t.get(1),e},{});return c=a.reduce(function(e,t){return e[t.get(0)]=t.get(1),e},c),{threshold:t,accounts:s,keys:o,addresses:i,weights:c=r.reduce(function(e,t){return e[t.get(0)]=t.get(1),e},c)}}},{key:"permissionsToJson",value:function(e,t,n,a,r){var s={weight_threshold:e};return s.account_auths=t.sort(ce.a.sortID).map(function(e){return[e,r[e]]}).toJS(),s.key_auths=n.sort(ce.a.sortID).map(function(e){return[e,r[e]]}).toJS(),s.address_auths=a.sort(ce.a.sortID).map(function(e){return[e,r[e]]}).toJS(),s}},{key:"updateAccountData",value:function(e){var t=this.permissionsFromImmutableObj(e.get("active")),n=this.permissionsFromImmutableObj(e.get("owner")),a=e.get("options").get("memo_key"),r={active_accounts:t.accounts,active_keys:t.keys,active_addresses:t.addresses,owner_accounts:n.accounts,owner_keys:n.keys,owner_addresses:n.addresses,active_weights:t.weights,owner_weights:n.weights,active_threshold:t.threshold,owner_threshold:n.threshold,memo_key:a,prev_active_accounts:t.accounts,prev_active_keys:t.keys,prev_active_addresses:t.addresses,prev_owner_accounts:n.accounts,prev_owner_keys:n.keys,prev_owner_addresses:n.addresses,prev_active_weights:t.weights,prev_owner_weights:n.weights,prev_active_threshold:t.threshold,prev_owner_threshold:n.threshold,prev_memo_key:a};this.setState(r)}},{key:"isChanged",value:function(){var e=this.state;return e.active_accounts!==e.prev_active_accounts||e.active_keys!==e.prev_active_keys||e.active_addresses!==e.prev_active_addresses||e.owner_accounts!==e.prev_owner_accounts||e.owner_keys!==e.prev_owner_keys||e.owner_addresses!==e.prev_owner_addresses||e.active_threshold!==e.prev_active_threshold||e.owner_threshold!==e.prev_owner_threshold||e.memo_key!==e.prev_memo_key}},{key:"didChange",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state;if("memo"===e)return t.memo_key!==t.prev_memo_key;var n=!1;return["_keys","_active_addresses","_accounts","_threshold"].forEach(function(a){var r=e+a;t[r]!==t["prev_"+r]&&(n=!0)}),n}},{key:"onPublish",value:function(){var e=this.state,t=this.props.account.toJS();t.fee={amount:0,asset_id:V.a.getFinalFeeAsset(t.id,"account_update")};var n={account:t.id};this.didChange("active")&&(n.active=this.permissionsToJson(e.active_threshold,e.active_accounts,e.active_keys,e.active_addresses,e.active_weights)),(this.didChange("owner")||this.state.isOwner)&&(n.owner=this.permissionsToJson(e.owner_threshold,e.owner_accounts,e.owner_keys,e.owner_addresses,e.owner_weights)),e.memo_key&&this.didChange("memo")&&this.isValidPubKey(e.memo_key)&&(n.new_options=this.props.account.get("options").toJS(),n.new_options.memo_key=e.memo_key),tn.a.updateAccount(n)}},{key:"isValidPubKey",value:function(e){return!!He.i.fromPublicKeyString(e)}},{key:"onReset",value:function(){var e=this.state;this.setState({active_accounts:e.prev_active_accounts,active_keys:e.prev_active_keys,active_addresses:e.prev_active_addresses,owner_accounts:e.prev_owner_accounts,owner_keys:e.prev_owner_keys,owner_addresses:e.prev_owner_addresses,active_weights:e.prev_active_weights,owner_weights:e.prev_owner_weights,active_threshold:e.prev_active_threshold,owner_threshold:e.prev_owner_threshold,memo_key:e.prev_memo_key})}},{key:"onAddItem",value:function(e,t,n){var a={},r=e+(ce.a.is_object_id(t)?"_accounts":"_keys");a[r]=this.state[r].push(t),this.state[e+"_weights"][t]=n,this.setState(a)}},{key:"onRemoveItem",value:function(e,t,n){console.log("onRemoveItem",e,t,n);var a={},r=e+n;a[r]=this.state[r].filter(function(e){return e!==t}),this.setState(a)}},{key:"onThresholdChanged",value:function(e,t){var n=parseInt(t.target.value.trim()),a={};a[e]=n,this.setState(a)}},{key:"validateAccount",value:function(e,t){return null}},{key:"sumUpWeights",value:function(e,t,n,a){var r=e.reduce(function(e,t){return e+a[t]},0);return r=t.reduce(function(e,t){return e+a[t]},r),n.reduce(function(e,t){return e+a[t]},r)}},{key:"onMemoKeyChanged",value:function(e){this.setState({memo_key:e})}},{key:"onSetPasswordKeys",value:function(e){var t={};(arguments.length>1&&void 0!==arguments[1]?arguments[1]:["active","owner","memo"]).forEach(function(n){t["password_"+n]=e[n]}),this.setState(t)}},{key:"render",value:function(){var e=this,t=void 0,n=void 0,r=x.a.translate("account.perm.warning_title"),s=x.a.translate("account.perm.warning_content"),o=this.state,i=o.active_accounts,c=o.active_keys,l=o.active_addresses,u=o.active_weights,p=this.state,m=p.owner_accounts,d=p.owner_keys,h=p.owner_addresses,f=p.owner_weights,b=this.state.active_threshold>0?this.state.active_threshold:0,_=this.sumUpWeights(i,c,l,u);this.didChange("active")&&_<b&&(t=x.a.translate("account.perm.warning1",{weights_total:_,threshold:b})),b=this.state.owner_threshold>0?this.state.owner_threshold:0,_=this.sumUpWeights(m,d,h,f),this.didChange("owner")&&_<b&&(n=x.a.translate("account.perm.warning2",{weights_total:_,threshold:b}));var g="button"+(!t&&!n&&this.isChanged()&&this.isValidPubKey(this.state.memo_key)?"":" disabled"),v="button outline"+(this.isChanged()?"":" disabled"),y=Q.a.Set();return y=y.add(this.props.account.get("id")),a.createElement("div",{className:"grid-content"},a.createElement("div",{className:"generic-bordered-box"},a.createElement(Tn,{id:"permissionWarning",title:r,contents:[s]}),a.createElement(tt.b,{setting:"permissionsTabs",segmented:!1,className:"overview-tabs with-shadow",style:{width:"100%"},contentClass:"grid-content no-overflow",tabsClass:"account-overview no-padding bordered-header content-block"},a.createElement(tt.a,{title:"account.perm.active"},a.createElement(Ue.a,{style:{maxWidth:"800px"},path:"components/AccountPermActive"}),a.createElement("form",{className:"threshold"},a.createElement("label",{className:"horizontal"},a.createElement(T.a,{content:"account.perm.threshold"}),"    ",a.createElement("input",{type:"number",placeholder:"0",size:"5",value:this.state.active_threshold,onChange:this.onThresholdChanged.bind(this,"active_threshold"),autoComplete:"off",tabIndex:1}))),a.createElement(gn,{label:"account.perm.add_permission_label",accounts:i,keys:c,weights:u,addresses:l,validateAccount:this.validateAccount.bind(this,"active"),onAddItem:this.onAddItem.bind(this,"active"),onRemoveItem:this.onRemoveItem.bind(this,"active"),placeholder:x.a.translate("account.perm.account_name_or_key"),tabIndex:2}),a.createElement("br",null),t?a.createElement("div",{className:"content-block has-error"},t):null,a.createElement("div",null,a.createElement("label",{className:"inline-block",style:{position:"relative",top:-10,margin:0},"data-place":"bottom","data-tip":x.a.translate("tooltip.sign_owner")},a.createElement("span",null,a.createElement(T.a,{content:"account.perm.sign_owner"}),":  ")),a.createElement("div",{className:"switch",onClick:function(){e.setState({isOwner:!e.state.isOwner})}},a.createElement("input",{type:"checkbox",checked:this.state.isOwner}),a.createElement("label",null)))),a.createElement(tt.a,{title:"account.perm.owner"},a.createElement(Ue.a,{style:{maxWidth:"800px"},path:"components/AccountPermOwner"}),a.createElement("form",{className:"threshold"},a.createElement("label",{className:"horizontal"},a.createElement(T.a,{content:"account.perm.threshold"}),"    ",a.createElement("input",{type:"number",placeholder:"0",size:"5",value:this.state.owner_threshold,onChange:this.onThresholdChanged.bind(this,"owner_threshold"),autoComplete:"off",tabIndex:4}))),a.createElement(gn,{label:"account.perm.add_permission_label",accounts:m,keys:d,weights:f,addresses:h,validateAccount:this.validateAccount.bind(this,"owner"),onAddItem:this.onAddItem.bind(this,"owner"),onRemoveItem:this.onRemoveItem.bind(this,"owner"),placeholder:x.a.translate("account.perm.account_name_or_key"),tabIndex:5}),a.createElement("br",null),n?a.createElement("div",{className:"content-block has-error"},n):null),a.createElement(tt.a,{title:"account.perm.memo_key"},a.createElement(Ue.a,{style:{maxWidth:"800px"},path:"components/AccountPermMemo"}),a.createElement(jn,{ref:"memo_key",value:this.state.memo_key,label:"account.perm.memo_public_key",placeholder:"Public Key",onChange:this.onMemoKeyChanged.bind(this),tabIndex:7})),a.createElement(tt.a,{title:"account.perm.password_model"},a.createElement(Cn,{active:this.state.password_active,owner:this.state.password_owner,memo:this.state.password_memo,onSetPasswordKeys:this.onSetPasswordKeys.bind(this),account:this.props.account,activeKeys:this.state.active_keys,ownerKeys:this.state.owner_keys,memoKey:this.state.memo_key,onAddActive:this.onAddItem.bind(this,"active"),onRemoveActive:this.onRemoveItem.bind(this,"active"),onAddOwner:this.onAddItem.bind(this,"owner"),onRemoveOwner:this.onRemoveItem.bind(this,"owner"),onSetMemo:this.onMemoKeyChanged.bind(this)}))),a.createElement("div",{className:"divider"}),a.createElement("div",{style:{paddingTop:20}},a.createElement("button",{style:{fontSize:"1.2rem"},className:g,onClick:this.onPublish,tabIndex:8},a.createElement(T.a,{content:"account.perm.publish"})),a.createElement("button",{className:v,onClick:this.onReset,tabIndex:9},a.createElement(T.a,{content:"account.perm.reset"})))),a.createElement(Sn.a,{accountsList:y,limit:25,compactView:!1,filter:"account_update",style:{paddingTop:"2rem",paddingBottom:"2rem"}}))}}]),t}(),Dn=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var Mn="-----BEGIN Cybex SIGNED MESSAGE-----",Ln="-----END Cybex SIGNED MESSAGE-----",Fn=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={tabsm_memo_key:n.props.account.get("options").get("memo_key"),tabsm_memo:"",tabsm_memo_signed:"",tabvm_memo:"",tabvm_verified:null,tabvm_memo_verified:null,tabvm_flag_verifyonchange:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["Component"]),Dn(t,[{key:"parseMemo",value:function(e){var t=void 0,n=void 0,a=void 0,r=void 0;try{t=(n=(t=e.split(Mn)[1]).split("-----BEGIN META-----"))[0].trim(),n=(a=n[1].split("-----BEGIN SIGNATURE-----"))[0].trim(),a=a[1].split(Ln)[0].trim(),r=t+"\n"+n}catch(e){throw new Error(x.a.translate("account.signedmessages.invalidformat"))}var s=void 0,o=void 0,i=void 0,c=void 0;if(n)try{s=(s=n.split("account="))[1].split("\n")[0].trim(),o=(o=n.split("memokey="))[1].split("\n")[0].trim(),i=(i=n.split("block="))[1].split("\n")[0].trim(),c=(c=n.split("timestamp="))[1].split("\n")[0].trim()}catch(e){throw new Error(x.a.translate("account.signedmessages.invalidformat"))}var l=He.b.getAccount(s);if(null==l)throw new Error(x.a.translate("account.signedmessages.invaliduser"));var u=l.get("options").get("memo_key");if(o!==u)throw new Error(x.a.translate("account.signedmessages.keymismatch"));return{content:t,meta:{account:s,key:u,block:i,timestamp:c},signed:r,signature:a}}},{key:"_tabSMSignAction",value:function(e){var t=this;e.preventDefault(),Promise.resolve(nn.a.unlock()).then(function(){if(t.state.tabsm_memo)try{var e=t.state.tabsm_memo,n=t.state.tabsm_memo_key;/111111111111111111111/.test(n)&&(n=null);var a=void 0;if(e&&n&&!(a=ve.a.getPrivateKey(n)))throw new Error(x.a.translate("account.signedmessages.invalidkey"));var r=He.b.getObject("2.1.0").get("last_irreversible_block_num"),s=new Date,o="account="+t.props.account.get("name")+"\nmemokey="+t.state.tabsm_memo_key+"\nblock="+r+"\ntimestamp="+s.toUTCString(),i=e+"\n"+o;t._tabSMPopMessage(x.a.translate("account.signedmessages.signing"),0),setTimeout(function(){try{var r=He.k.signBuffer(i,a,n),s=Mn+"\n"+e+"\n-----BEGIN META-----\n"+o+"\n-----BEGIN SIGNATURE-----\n"+r.toHex()+"\n"+Ln;t.setState({tabsm_memo_signed:s,tabsm_message:""})}catch(e){t._tabSMPopMessage(e.message),t.setState({tabsm_memo_signed:null})}},0)}catch(e){t._tabSMPopMessage(e.message)}})}},{key:"_tabSMHandleChange",value:function(e){this.setState({tabsm_memo:e.target.value})}},{key:"_tabSMHandleChangeKey",value:function(e){this.setState({tabsm_memo_key:e})}},{key:"_tabSMCopyToClipBoard",value:function(e){if(""!==e.target.value){e.target.focus(),e.target.select();try{var t=document.execCommand("copy");this._tabSMPopMessage(t?x.a.translate("account.signedmessages.copysuccessful"):x.a.translate("account.signedmessages.copyunsuccessful"))}catch(e){this._tabSMPopMessage(x.a.translate("account.signedmessages.copyunsuccessful"))}}}},{key:"_tabSMPopMessage",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e3;this.setState({tabsm_message:e}),""!==e&&n>0&&setTimeout(function(){t.setState({tabsm_message:""})},n)}},{key:"_tabVMAction",value:function(e){var t=this;e.preventDefault(),this.setState({tabvm_memo_verified:null,tabvm_verified:!1}),this.state.tabvm_memo&&(this._tabVMPopMessage(x.a.translate("account.signedmessages.verifying"),0),setTimeout(function(){try{var e=t.parseMemo(t.state.tabvm_memo),n=!1;try{n=He.k.fromHex(e.signature).verifyBuffer(e.signed,He.i.fromPublicKeyString(e.meta.key))}catch(e){throw new Error(x.a.translate("account.signedmessages.errorverifying"))}if(!n)throw new Error(x.a.translate("account.signedmessages.invalidsignature"));t.setState({tabvm_memo_verified:e,tabvm_verified:n,tabvm_message:""})}catch(e){t._tabVMPopMessage(e.message),t.setState({tabvm_memo_verified:null,tabvm_verified:!1})}},0))}},{key:"_tabVMHandleChange",value:function(e){this.setState({tabvm_memo:e.target.value,tabvm_verified:!1,tabvm_memo_verified:null}),this.state.tabvm_flag_verifyonchange&&this._tabVMAction(e)}},{key:"_tabVMPopMessage",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e3;this.setState({tabvm_message:e}),""!==e&&n>0&&setTimeout(function(){t.setState({tabvm_message:""})},n)}},{key:"_tabVMToggleVerifyOnChange",value:function(){this.setState({tabvm_flag_verifyonchange:!this.state.tabvm_flag_verifyonchange})}},{key:"render",value:function(){return a.createElement("div",{className:"grid-content"},a.createElement("div",{className:"generic-bordered-box"},a.createElement(tt.b,{tabsClass:"bordered-header no-padding",setting:"accountSignedMessagesTab",contentClass:"grid-content shrink small-vertical medium-horizontal no-padding"},a.createElement(tt.a,{title:"account.signedmessages.signmessage"},a.createElement("div",{className:"grid-content",style:{overflowX:"hidden"}},a.createElement("div",{className:"content-block no-margin"},a.createElement("h3",null,a.createElement(T.a,{content:"account.signedmessages.signmessage"}))),a.createElement(jn,{ref:"memo_key",value:this.state.tabsm_memo_key,label:"account.perm.memo_public_key",placeholder:"Public Key",tabIndex:7,onChange:this._tabSMHandleChangeKey.bind(this),disableActionButton:!0}),a.createElement("br",null),a.createElement("textarea",{rows:"10",value:this.state.tabsm_memo,onChange:this._tabSMHandleChange.bind(this),placeholder:x.a.translate("account.signedmessages.entermessage")}),a.createElement("span",null,a.createElement("button",{className:"button",onClick:this._tabSMSignAction.bind(this)},a.createElement(T.a,{content:"account.signedmessages.sign"})),a.createElement("text",{style:{color:"gray"}},this.state.tabsm_message)),a.createElement("br",null),a.createElement("br",null),a.createElement("textarea",{rows:"14",value:this.state.tabsm_memo_signed,style:{editable:!1},placeholder:x.a.translate("account.signedmessages.automaticcreation"),onClick:this._tabSMCopyToClipBoard.bind(this)}))),a.createElement(tt.a,{title:"account.signedmessages.verifymessage"},a.createElement("div",{className:"grid-content",style:{overflowX:"hidden"}},a.createElement("div",{className:"content-block no-margin"},a.createElement("h3",null,a.createElement(T.a,{content:"account.signedmessages.verifymessage"})),a.createElement("div",{style:{float:"right",marginTop:"0.1em",marginBottom:"0.5em"}},a.createElement("table",null,a.createElement("tr",null,a.createElement("td",null,a.createElement("label",null,a.createElement(T.a,{content:"account.signedmessages.verifyonchange"}))),a.createElement("td",null,a.createElement("div",{className:"switch",onClick:this._tabVMToggleVerifyOnChange.bind(this)},a.createElement("input",{type:"checkbox",checked:this.state.tabvm_flag_verifyonchange,value:x.a.translate("account.signedmessages.verifyonchange")}),a.createElement("label",null))))))),a.createElement("textarea",{rows:"10",value:this.state.tabvm_memo,onChange:this._tabVMHandleChange.bind(this),placeholder:x.a.translate("account.signedmessages.entermessage")}),a.createElement("span",null,a.createElement("button",{className:"button",onClick:this._tabVMAction.bind(this)},a.createElement(T.a,{content:"account.signedmessages.verify"})),a.createElement("text",{style:{color:"gray"}},this.state.tabvm_message),null!==this.state.tabvm_verified&&a.createElement("div",{style:{float:"right"}},"Message is:",a.createElement("div",{style:{backgroundColor:this.state.tabvm_verified?"green":"red"}},a.createElement("label",null,this.state.tabvm_verified?"verified":"not verified"))),this.state.tabvm_verified&&null!==this.state.tabvm_memo_verified&&a.createElement("div",null,a.createElement("br",null),a.createElement("div",{style:{color:"gray"}},"Verified message from"," ",this.state.tabvm_memo_verified.meta.account,", signed on ",this.state.tabvm_memo_verified.meta.timestamp,":",a.createElement("br",null),a.createElement("pre",null,this.state.tabvm_memo_verified.content)))))))))}}]),t}();Fn.propTypes={account:E.a.ChainAccount.isRequired};var qn=Fn=Object(w.a)(Fn),Bn=n(1281),Wn=n.n(Bn),Un=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();function Hn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Yn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Xn(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Jn=function(e){function t(){return Hn(this,t),Yn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Xn(t,a["Component"]),Un(t,[{key:"render",value:function(){var e=this.props,t=e.account,n=e.onRemove;return a.createElement("tr",null,a.createElement("td",null,this.props.index),a.createElement("td",null,t.get("id")),a.createElement("td",null,a.createElement(gt.a,{account:t.get("id")})),n?a.createElement("td",null,a.createElement("button",{onClick:n.bind(this,t.get("id")),className:"button outline"},"Remove")):null)}}]),t}();Jn.propTypes={account:E.a.ChainAccount.isRequired},Jn.defaultProps={tempComponent:"tr"},Jn=Object(w.a)(Jn);var Vn=function(e){function t(){return Hn(this,t),Yn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Xn(t,a["Component"]),Un(t,[{key:"_onRemove",value:function(e,t,n){if(t){var a=this.props.getCurrentState(t),r=ye.a.new_transaction();r.add_type_operation("account_whitelist",{fee:{amount:0,asset_id:"1.3.0"},authorizing_account:this.props.account.get("id"),account_to_list:t,new_listing:a-Wn.a.account_listing[e]}),ve.a.process_transaction(r,null,!0)}}},{key:"render",value:function(){var e=this,t=this.props,n=t.removeButton,r=t.white,s=t.list.map(function(t,s){return a.createElement(Jn,{key:t,onRemove:n?e._onRemove.bind(e,r?"white_listed":"black_listed"):null,account:t,index:s+1})}).toArray(),o=!0;return s.length||(o=!1,s.push(a.createElement("tr",{key:"empty"},a.createElement("td",{style:{padding:"1rem 0"},colSpan:n?4:3},a.createElement(T.a,{content:this.props.emptyText,account:this.props.account.get("name")}))))),a.createElement("table",{className:"table compact dashboard-table"},o?a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",null,"#"),a.createElement("th",null,a.createElement(T.a,{content:"account.id"})),a.createElement("th",null,a.createElement(T.a,{content:"account.name"})),n?a.createElement("th",null):null)):null,a.createElement("tbody",null,s))}}]),t}(),zn=function(e){function t(){Hn(this,t);var e=Yn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={accountName:"",accountToList:null},e}return Xn(t,a["Component"]),Un(t,[{key:"_getCurrentState",value:function(e){var t=this.props.account,n=t.get("whitelisted_accounts")||Q.a.List(),a=t.get("blacklisted_accounts")||Q.a.List(),r=Wn.a.account_listing.no_listing;return n.includes(e)&&(r+=Wn.a.account_listing.white_listed),a.includes(e)&&(r+=Wn.a.account_listing.black_listed),r}},{key:"_onAdd",value:function(e,t){var n=this.state.accountToList,a=this.props.account,r=this._getCurrentState(n);if(n){var s=ye.a.new_transaction();s.add_type_operation("account_whitelist",{fee:{amount:0,asset_id:"1.3.0"},authorizing_account:a.get("id"),account_to_list:n,new_listing:r+Wn.a.account_listing[e]}),ve.a.process_transaction(s,null,!0)}}},{key:"_onAccountFound",value:function(e){console.log("accountFound:",e),this.setState({accountName:e?e.get("name"):null,accountToList:e?e.get("id"):null})}},{key:"_onAccountChanged",value:function(e){console.log("account changed:",e),this.setState({accountName:e,accountToList:null})}},{key:"render",value:function(){var e=this.props.account,t=this.state.accountName;return a.createElement("div",{className:"grid-content"},a.createElement("div",{className:"generic-bordered-box"},a.createElement(tt.b,{setting:"whitelistTab",contentClass:"grid-content shrink small-vertical medium-horizontal no-padding",segmented:!1,className:"overview-tabs with-shadow",style:{width:"100%"},tabsClass:"account-overview no-padding bordered-header content-block"},a.createElement(tt.a,{title:"account.whitelist.title"},a.createElement("div",{style:{paddingBottom:"1rem"},className:"small-12"},a.createElement("div",null,a.createElement(Vn,{emptyText:"account.whitelist.empty",account:e,getCurrentState:this._getCurrentState.bind(this),list:e.get("whitelisted_accounts")||Q.a.List(),removeButton:!0,white:!0})),e.get("whitelisted_accounts")?null:a.createElement("p",{className:"has-error"},"Please note, whitelisting is not working yet due to unresolved backend issue."),a.createElement("div",{style:{padding:"2rem 0"}},a.createElement(_t.a,{label:"account.whitelist.add",accountName:t,onAccountChanged:this._onAccountFound.bind(this),onChange:this._onAccountChanged.bind(this),account:t,tabIndex:2,onAction:this._onAdd.bind(this,"white_listed"),action_label:"account.perm.confirm_add",white:!1})))),a.createElement(tt.a,{title:"account.whitelist.black"},a.createElement("div",{style:{paddingBottom:"1rem"},className:"small-12"},a.createElement("div",null,a.createElement(Vn,{emptyText:"account.whitelist.empty_black",account:e,getCurrentState:this._getCurrentState.bind(this),list:e.get("blacklisted_accounts"),removeButton:!0})),a.createElement("div",{style:{padding:"2rem 0"}},a.createElement(_t.a,{label:"account.whitelist.add_black",accountName:t,onAccountChanged:this._onAccountFound.bind(this),onChange:this._onAccountChanged.bind(this),account:t,tabIndex:2,onAction:this._onAdd.bind(this,"black_listed"),action_label:"account.perm.confirm_add"})))),a.createElement(tt.a,{title:"account.whitelist.white_by"},a.createElement("div",{style:{paddingBottom:"1rem"},className:"small-12"},a.createElement("div",null,a.createElement(Vn,{emptyText:"account.whitelist.empty_white_by",account:e,list:e.get("whitelisting_accounts")})))),a.createElement(tt.a,{title:"account.whitelist.black_by"},a.createElement("div",{style:{paddingBottom:"1rem"},className:"small-12"},a.createElement("div",null,a.createElement(Vn,{emptyText:"account.whitelist.empty_black_by",account:e,list:e.get("blacklisting_accounts")})))))))}}]),t}(),Kn=n(1291),Gn=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var Qn=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["Component"]),Gn(t,[{key:"onApprove",value:function(){var e=[],t=[];this.props.vote_ids.has(this.props.worker.get("vote_against"))&&t.push(this.props.worker.get("vote_against")),this.props.vote_ids.has(this.props.worker.get("vote_for"))||e.push(this.props.worker.get("vote_for")),this.props.onChangeVotes(e,t)}},{key:"onReject",value:function(){var e=[];this.props.vote_ids.has(this.props.worker.get("vote_against"))&&e.push(this.props.worker.get("vote_against")),this.props.vote_ids.has(this.props.worker.get("vote_for"))&&e.push(this.props.worker.get("vote_for")),this.props.onChangeVotes([],e)}},{key:"render",value:function(){var e=this.props.rank,t=this.props.worker.toJS(),n=t.total_votes_for-t.total_votes_against,r=!!this.props.vote_ids.has(t.vote_for)||!this.props.vote_ids.has(t.vote_against)&&null,s=0;t.daily_pay<this.props.rest?s=100:this.props.rest>0&&(s=this.props.rest/t.daily_pay*100);var o=x.a.localize(new Date(t.work_begin_date+"Z"),{type:"date",format:"short_custom"}),i=x.a.localize(new Date(t.work_end_date+"Z"),{type:"date",format:"short_custom"}),c=new Date,l=new Date(t.work_end_date+"Z")<=c,u=new Date(t.work_begin_date+"Z")<=c,p=!l&&n<this.props.voteThreshold||!u;return a.createElement("tr",{className:r?"":"unsupported"},l?null:[a.createElement("td",{style:{textAlign:"right",paddingRight:10,paddingLeft:0}},e),a.createElement("td",{style:{textAlign:"left"},className:"hide-column-small"},t.id)],a.createElement("td",{className:"worker-name",style:{textAlign:"left"}},a.createElement("div",{"data-tip":t.name,className:"inline-block tooltip"},t.name,a.createElement("br",null),a.createElement(gt.a,{account:t.worker_account}))),a.createElement("td",{className:"text-center"},t.url?a.createElement("a",{href:t.url,target:"_blank",rel:"noopener noreferrer"},a.createElement(yt.a,{name:"share"})):"-"),a.createElement("td",{style:{textAlign:"right"},className:"hide-column-small"},a.createElement(ae.a,{amount:n,asset:"1.3.0",decimalOffset:5,hide_asset:!0})),p?a.createElement("td",{style:{textAlign:"right"}},a.createElement(ae.a,{amount:Math.max(0,this.props.voteThreshold-n),asset:"1.3.0",hide_asset:!0,decimalOffset:5})):null,a.createElement("td",null,o," - ",i),l||p?null:a.createElement("td",{style:{textAlign:"right"},className:"hide-column-small"},ce.a.format_number(s,2),"%"),a.createElement("td",{style:{textAlign:"right"},className:"hide-column-small"},a.createElement(Kn.b,{hide_asset:!0,fromAsset:"1.3.0",toAsset:this.props.preferredUnit,amount:t.daily_pay})),l||p?null:a.createElement("td",{style:{textAlign:"right"}},this.props.rest<=0?"0.00":a.createElement(Kn.b,{hide_asset:!0,fromAsset:"1.3.0",toAsset:this.props.preferredUnit,amount:this.props.rest})),a.createElement("td",{className:"clickable",onClick:this.props.proxy?function(){}:this[r?"onReject":"onApprove"].bind(this)},this.props.proxy?a.createElement(yt.a,{name:"locked"}):a.createElement(yt.a,{name:r?"checkmark-circle":"minus-circle"})))}}]),t}();Qn.propTypes={worker:E.a.ChainObject.isRequired,onAddVote:u.func,onRemoveVote:u.func,vote_ids:u.object},Qn.defaultProps={tempComponent:"tr"};var $n=Object(w.a)(Qn),Zn=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();function ea(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ta(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function na(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function aa(e,t){var n="",a=0,r=void 0;return"witness"===e?r=He.b.getWitnessById(t.get("id")):"committee"===e&&(r=He.b.getCommitteeMemberById(t.get("id"))),{url:n=r?r.get("url"):n,votes:a=r?r.get("total_votes"):a,id:r.get("id")}}var ra=function(e){function t(){return ea(this,t),ta(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return na(t,a["Component"]),Zn(t,[{key:"shouldComponentUpdate",value:function(e){return e.account!==this.props.account||e.action!==this.props.action||e.isActive!==this.props.isActive||e.idx!==this.props.idx||e.proxy!==this.props.proxy}},{key:"onAction",value:function(e){this.props.onAction(e)}},{key:"render",value:function(){var e=this.props,t=e.account,n=e.type,r=e.action,s=e.isActive,o=t.get("id"),i=aa(n,t),c=i.url,l=i.votes,u=c&&c.length>0&&-1===c.indexOf("http")?"http://"+c:c,p="remove"===r;return a.createElement("tr",{className:p?"":"unsupported"},a.createElement("td",{style:{textAlign:"right"}},this.props.idx+1),a.createElement("td",{style:{textAlign:"left"}},a.createElement(gt.a,{account:t.get("id")})),a.createElement("td",null,u&&-1!==u.indexOf(".")?a.createElement("a",{href:u,target:"_blank",rel:"noopener noreferrer"},a.createElement(yt.a,{name:"share"})):null),a.createElement("td",null,a.createElement(ae.a,{amount:l,asset:"1.3.0",decimalOffset:5,hide_asset:!0})),a.createElement("td",null,a.createElement(T.a,{content:"account.votes."+(s?"active_short":"inactive")})),a.createElement("td",{style:{textAlign:"center"}},a.createElement(T.a,{content:"settings."+(p?"yes":"no")})),a.createElement("td",{className:this.props.proxy?"":"clickable",onClick:this.props.proxy?function(){}:this.onAction.bind(this,o)},this.props.proxy?a.createElement(yt.a,{name:"locked"}):a.createElement(yt.a,{name:p?"checkmark-circle":"minus-circle"})))}}]),t}();ra.propTypes={account:u.object.isRequired,onAction:u.func.isRequired};var sa=function(e){function t(e){ea(this,t);var n=ta(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={selected_item:null,item_name_input:"",error:null},n.onItemChange=n.onItemChange.bind(n),n.onItemAccountChange=n.onItemAccountChange.bind(n),n.onAddItem=n.onAddItem.bind(n),n}return na(t,a["Component"]),Zn(t,[{key:"onItemChange",value:function(e){this.setState({item_name_input:e})}},{key:"onItemAccountChange",value:function(e){var t=this;if(this.setState({selected_item:e,error:null}),e&&this.props.validateAccount){var n=this.props.validateAccount(e);if(null===n)return;"string"==typeof n?this.setState({error:n}):n.then(function(e){return t.setState({error:e})})}}},{key:"onAddItem",value:function(e){if(e){this.setState({selected_item:null,item_name_input:"",error:null}),this.props.onAddItem(e.get("id"))}}},{key:"render",value:function(){var e=this;if(!this.props.items)return null;var t=this.props.items.filter(function(e){return!!e}).sort(function(t,n){var a=aa(e.props.type,t).votes,r=aa(e.props.type,n).votes;return a!==r?r-a:t.get("name")>n.get("name")?1:t.get("name")<n.get("name")?-1:0}).map(function(t,n){var r=e.props.supported&&e.props.supported.includes(t.get("id"))?"remove":"add",s=e.props.active.includes(aa(e.props.type,t).id);return a.createElement(ra,{idx:n,key:t.get("name"),account:t,type:e.props.type,onAction:"add"===r?e.props.onAddItem:e.props.onRemoveItem,isSelected:-1!==e.props.items.indexOf(t),action:r,isActive:s,proxy:e.props.proxy})}),n=this.state.error;!n&&this.state.selected_item&&-1!==this.props.items.indexOf(this.state.selected_item)&&(n=x.a.translate("account.votes.already"));var r=["10%","20%","40%","20%","10%"];return a.createElement("div",null,this.props.withSelector?a.createElement(_t.a,{style:{maxWidth:"600px"},label:this.props.label,error:n,placeholder:this.props.placeholder,account:this.state.item_name_input,accountName:this.state.item_name_input,onChange:this.onItemChange,onAccountChanged:this.onItemAccountChange,onAction:this.onAddItem,action_label:"account.votes.add_witness",tabIndex:this.props.tabIndex}):null,this.props.title&&t.length?a.createElement("h4",null,this.props.title):null,t.length?a.createElement("table",{className:"table dashboard-table"},a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",{style:{textAlign:"right"}},"#"),a.createElement("th",{style:{textAlign:"left",maxWidth:r[1]}},a.createElement(T.a,{content:"account.votes.name"})),a.createElement("th",{style:{maxWidth:r[2]}},a.createElement(T.a,{content:"account.votes.about"})),a.createElement("th",{style:{maxWidth:r[3]}},a.createElement(T.a,{content:"account.votes.votes"})),a.createElement("th",{style:{maxWidth:r[4]}},a.createElement(T.a,{content:"account.votes.status.title"})),a.createElement("th",{style:{maxWidth:r[0]}},a.createElement(T.a,{content:"account.votes.supported"})),a.createElement("th",{style:{maxWidth:r[5]}},a.createElement(T.a,{content:"account.votes.toggle"})))),a.createElement("tbody",null,t)):null)}}]),t}();sa.propTypes={items:E.a.ChainObjectsList,onAddItem:u.func.isRequired,onRemoveItem:u.func.isRequired,validateAccount:u.func,label:u.string.isRequired,placeholder:u.string,tabIndex:u.number,action:u.string,withSelector:u.bool},sa.defaultProps={action:"remove",withSelector:!0,autosubscribe:!1};var oa=Object(w.a)(sa,{keep_updating:!0}),ia=n(154),ca=n(189),la=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],a=!0,r=!1,s=void 0;try{for(var o,i=e[Symbol.iterator]();!(a=(o=i.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){r=!0,s=e}finally{try{!a&&i.return&&i.return()}finally{if(r)throw s}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),ua=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var pa=((ma=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),a=e.proxy.get("id"),r=e.proxy.get("name");return n.state={proxy_account_id:"1.2.5"===a?"":a,prev_proxy_account_id:"1.2.5"===a?"":a,current_proxy_input:"1.2.5"===a?"":r,witnesses:null,committee:null,vote_ids:G.Set(),proxy_vote_ids:G.Set(),lastBudgetObject:e.initialBudget.get("id"),workerTableIndex:e.viewSettings.get("workerTableIndex",1),all_witnesses:G.List(),all_committee:G.List()},n.onProxyAccountFound=n.onProxyAccountFound.bind(n),n.onPublish=n.onPublish.bind(n),n.onReset=n.onReset.bind(n),n._getVoteObjects=n._getVoteObjects.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["Component"]),ua(t,[{key:"componentWillMount",value:function(){V.a.getFinalFeeAsset(this.props.account,"account_update"),this.getBudgetObject()}},{key:"componentDidMount",value:function(){this.updateAccountData(this.props),this._getVoteObjects(),this._getVoteObjects("committee")}},{key:"componentWillReceiveProps",value:function(e){}},{key:"updateAccountData",value:function(e){var t=this,n=e.account,a=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state).proxy_account_id,r=He.b.getAccount(a),s=n.get("options"),o=r?r.get("options"):null,i=r?r.get("name"):"";"1.2.5"===a&&(a="",i="");var c=s.get("votes").toArray(),l=G.Set(c),u=null,p=G.Set([]);if("1.2.5"!==a&&o){var m=o.get("votes").toArray();p=G.Set(m),u=Object(He.g)(He.b.getObjectByVoteID,m,5e3)}Promise.all([Object(He.g)(He.b.getObjectByVoteID,c,5e3),u]).then(function(e){var n=la(e,2),r=n[0],s=n[1];function o(e){var t=G.List(),n=G.List(),a=G.Set();return e.forEach(function(e){var a=e.get("committee_member_account");a?n=n.push(a):(a=e.get("worker_account"))||(a=e.get("witness_account"))&&(t=t.push(a))}),{witnesses:t,committee:n,workers:a}}var c=o(r),u=c.witnesses,m=c.committee,d=c.workers,h=o(s||[]),f=h.witnesses,b=h.committee,_=h.workers,g={proxy_account_id:a,current_proxy_input:i,witnesses:u,committee:m,workers:d,proxy_witnesses:f,proxy_committee:b,proxy_workers:_,vote_ids:l,proxy_vote_ids:p,prev_witnesses:u,prev_committee:m,prev_workers:d,prev_vote_ids:l};t.setState(g)})}},{key:"isChanged",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state;return e.proxy_account_id!==e.prev_proxy_account_id||e.witnesses!==e.prev_witnesses||e.committee!==e.prev_committee||!G.is(e.vote_ids,e.prev_vote_ids)}},{key:"_getVoteObjects",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"witnesses",n=arguments[1],a=this.state["all_"+t],r="witnesses"===t,s=void 0;if(n)s=parseInt(n[n.length-1].split(".")[2],10);else{n=[];var o=this.props.globalObject.get(r?"active_witnesses":"active_committee_members").last()||"1."+(r?"6":"5")+".1";s=parseInt(o.split(".")[2],10);for(var i=1;i<=s+10;i++)n.push("1."+(r?"6":"5")+"."+i)}Object(He.g)(He.b.getObject,n,5e3,{}).then(function(o){if(e.state["all_"+t]=a.concat(G.List(o.filter(function(e){return!!e}).map(function(e){return e.get(r?"witness_account":"committee_member_account")}))),o[o.length-1]){n=[];for(var i=s+11;i<=s+20;i++)n.push("1."+(r?"6":"5")+"."+i);return e._getVoteObjects(t,n)}e.forceUpdate()})}},{key:"onPublish",value:function(){var e=this,t=this.props.account.toJS(),n={account:t.id},a={memo_key:t.options.memo_key},r=this.state.proxy_account_id;a.voting_account=r||"1.2.5",a.num_witness=this.state.witnesses.size,a.num_committee=this.state.committee.size,n.new_options=a,n.fee={amount:0,asset_id:V.a.getFinalFeeAsset(t.id,"account_update")};var s=this.state.vote_ids,o=this._getWorkerArray(),i=new Date;function c(e,t){return e.includes(t)&&(e=e.delete(t)),e}o.forEach(function(e){e&&(new Date(e.get("work_end_date"))<=i&&(s=c(s,e.get("vote_for"))),s=c(s,e.get("vote_against")))}),Object(He.g)(He.b.getWitnessById,this.state.witnesses.toArray(),4e3).then(function(t){var n=t.map(function(e){return e.get("vote_id")});return Promise.all([Promise.resolve(n),Object(He.g)(He.b.getCommitteeMemberById,e.state.committee.toArray(),4e3)])}).then(function(e){n.new_options.votes=e[0].concat(e[1].map(function(e){return e.get("vote_id")})).concat(s.filter(function(e){return"2"===e.split(":")[0]}).toArray()).sort(function(e,t){var n=e.split(":"),a=t.split(":");return parseInt(n[1],10)-parseInt(a[1],10)}),tn.a.updateAccount(n)})}},{key:"onReset",value:function(){var e=this,t=this.state;this.refs.voting_proxy&&this.refs.voting_proxy.refs.bound_component&&this.refs.voting_proxy.refs.bound_component.onResetProxy(),this.setState({proxy_account_id:t.prev_proxy_account_id,current_proxy_input:t.prev_proxy_input,witnesses:t.prev_witnesses,committee:t.prev_committee,workers:t.prev_workers,vote_ids:t.prev_vote_ids},function(){e.updateAccountData(e.props)})}},{key:"onAddItem",value:function(e,t){var n={};n[e]=this.state[e].push(t),this.setState(n)}},{key:"onRemoveItem",value:function(e,t){var n={};n[e]=this.state[e].filter(function(e){return e!==t}),this.setState(n)}},{key:"onChangeVotes",value:function(e,t){var n={};n.vote_ids=this.state.vote_ids,e.length&&e.forEach(function(e){n.vote_ids=n.vote_ids.add(e)}),t&&t.forEach(function(e){n.vote_ids=n.vote_ids.delete(e)}),this.setState(n)}},{key:"validateAccount",value:function(e,t){return t?"witnesses"===e?Object(He.g)(He.b.getWitnessById,[t.get("id")],3e3).then(function(e){return e[0]?null:"Not a witness"}):"committee"===e?Object(He.g)(He.b.getCommitteeMemberById,[t.get("id")],3e3).then(function(e){return e[0]?null:"Not a committee member"}):null:null}},{key:"onProxyChange",value:function(e){var t=He.b.getAccount(e);(!t||t&&t.get("id")!==this.state.proxy_account_id)&&this.setState({proxy_account_id:"",proxy_witnesses:G.Set(),proxy_committee:G.Set(),proxy_workers:G.Set()}),this.setState({current_proxy_input:e})}},{key:"onProxyAccountFound",value:function(e){var t=this;this.setState({proxy_account_id:e?e.get("id"):""},function(){t.updateAccountData(t.props)})}},{key:"onClearProxy",value:function(){this.setState({proxy_account_id:""})}},{key:"_getTotalVotes",value:function(e){return parseInt(e.get("total_votes_for"),10)-parseInt(e.get("total_votes_against"),10)}},{key:"getBudgetObject",value:function(){var e=this,t=this.state.lastBudgetObject,n=void 0;n=He.b.getObject(t);var a=parseInt(t.split(".")[2],10);if(n){var r=n.get("time");/Z$/.test(r)||(r+="Z");var s=new Date,o=a+Math.floor((s-new Date(r).getTime())/1e3/60/60)-1;if(a>=o)return;var c="2.13."+Math.max(a,o),l=parseInt(c.split(".")[2],10);Object(He.g)(He.b.getObject,[c],void 0,{}).then(function(t){null===la(t,1)[0]?e.setState({lastBudgetObject:"2.13."+(l-1)},e.getBudgetObject):(i.b.setLastBudgetObject(c),e.setState({lastBudgetObject:c}))})}else{var u="2.13."+(a-1);Object(He.g)(He.b.getObject,[u],void 0,{}).then(function(t){null===la(t,1)[0]?e.setState({lastBudgetObject:"2.13."+(a-2)},e.getBudgetObject):(i.b.setLastBudgetObject(u),e.setState({lastBudgetObject:u}))})}}},{key:"_getWorkerArray",value:function(){for(var e=[],t=0;t<100;t++){var n="1.14."+t,a=He.b.getObject(n,!1,!1);if(null===a)break;e.push(a)}return e}},{key:"_setWorkerTableIndex",value:function(e){this.setState({workerTableIndex:e})}},{key:"render",value:function(){var e=this,t=this.state.workerTableIndex,n=this.props.settings.get("unit")||"1.3.0",r=!!this.state.proxy_account_id,s=(We()("button",{disabled:!this.isChanged()}),this.props.globalObject),o=void 0;this.state.lastBudgetObject&&(o=He.b.getObject(this.state.lastBudgetObject));var i=0,c=s?parseInt(s.getIn(["parameters","worker_budget_per_day"]),10):0;o&&(c=Math.min(24*o.getIn(["record","worker_budget"]),c),i=Math.min(24*o.getIn(["record","worker_budget"]),c));var l=new Date,u=this._getWorkerArray(),p=0,m=u.filter(function(e){return!!e&&(new Date(e.get("work_end_date")+"Z")>l&&new Date(e.get("work_begin_date")+"Z")<=l)}).sort(function(t,n){return e._getTotalVotes(n)-e._getTotalVotes(t)}).map(function(t,s){var o=parseInt(t.get("daily_pay"),10);c-=o;var i=t.get("total_votes_for")-t.get("total_votes_against");return c<=0&&!p&&(p=i),p&&i<p?null:a.createElement($n,{preferredUnit:n,rest:c+o,rank:s+1,key:t.get("id"),worker:t.get("id"),vote_ids:e.state[r?"proxy_vote_ids":"vote_ids"],onChangeVotes:e.onChangeVotes.bind(e),proxy:r,voteThreshold:p})}).filter(function(e){return!!e}),d=u.filter(function(e){if(!e)return!1;var t=e.get("total_votes_for")-e.get("total_votes_against");return new Date(e.get("work_end_date")+"Z")>l&&t<p||new Date(e.get("work_begin_date")+"Z")>l}).sort(function(t,n){return e._getTotalVotes(n)-e._getTotalVotes(t)}).map(function(t,s){return a.createElement($n,{preferredUnit:n,rest:0,rank:s+1,key:t.get("id"),worker:t.get("id"),vote_ids:e.state[r?"proxy_vote_ids":"vote_ids"],onChangeVotes:e.onChangeVotes.bind(e),proxy:r,voteThreshold:p})}),h=u.filter(function(e){return!!e&&new Date(e.get("work_end_date"))<=l}).sort(function(t,n){return e._getTotalVotes(n)-e._getTotalVotes(t)}).map(function(t,s){return a.createElement($n,{preferredUnit:n,rest:0,rank:s+1,key:t.get("id"),worker:t.get("id"),vote_ids:e.state[r?"proxy_vote_ids":"vote_ids"],onChangeVotes:e.onChangeVotes.bind(e),proxy:r,voteThreshold:p})}),f=a.createElement("div",null,a.createElement(ca.c,{style:{marginRight:"0.5em"},disabled:!this.isChanged(),type:"primary",size:"small",onClick:this.onPublish},a.createElement(T.a,{content:"account.votes.publish"})),a.createElement(ca.c,{onClick:this.onReset,size:"small",disabled:!this.isChanged()},a.createElement(T.a,{content:"account.perm.reset"}))),b=a.createElement(_t.a,{hideImage:!0,account:this.state.current_proxy_input,accountName:this.state.current_proxy_input,onChange:this.onProxyChange.bind(this),onAccountChanged:this.onProxyAccountFound,tabIndex:1,placeholder:"Proxy not set"},a.createElement("span",{style:{paddingLeft:5,position:"relative",top:-1,display:r?"":"none"}},a.createElement(yt.a,{name:"locked",size:"1x"}))),_=2===t,g=a.createElement("div",{className:"inline-block",style:{display:this.isChanged()?"block":"none",color:"red",padding:"0.85rem",fontSize:"0.9rem"}},a.createElement(T.a,{content:"account.votes.save_finish"}));return a.createElement("div",{className:"grid-content app-tables",ref:"appTables"},a.createElement("div",{className:"content-block small-12"},a.createElement("div",{className:"generic-bordered-box"},a.createElement(tt.b,{setting:"votingTab",className:"overview-tabs",defaultActiveTab:0,segmented:!1,tabsClass:"account-overview no-padding bordered-header content-block",contentClass:"no-padding",actionButtons:f},a.createElement(tt.a,{disabled:!0,title:b,className:"total-value"}),a.createElement(tt.a,{title:"explorer.witnesses.title"},a.createElement("div",{className:We()("content-block")},a.createElement("div",{className:"hide-selector"},a.createElement("div",{className:"new-worker-button"},g)),a.createElement(oa,{type:"witness",label:"account.votes.add_witness_label",items:this.state.all_witnesses,validateAccount:this.validateAccount.bind(this,"witnesses"),onAddItem:this.onAddItem.bind(this,"witnesses"),onRemoveItem:this.onRemoveItem.bind(this,"witnesses"),tabIndex:r?-1:2,supported:this.state[r?"proxy_witnesses":"witnesses"],withSelector:!1,active:s.get("active_witnesses"),proxy:this.state.proxy_account_id}))),a.createElement(tt.a,{title:"explorer.committee_members.title"},a.createElement("div",{className:We()("content-block")},a.createElement("div",{className:"hide-selector"},a.createElement("div",{className:"new-worker-button"},g)),a.createElement(oa,{type:"committee",label:"account.votes.add_committee_label",items:this.state.all_committee,validateAccount:this.validateAccount.bind(this,"committee"),onAddItem:this.onAddItem.bind(this,"committee"),onRemoveItem:this.onRemoveItem.bind(this,"committee"),tabIndex:r?-1:3,supported:this.state[r?"proxy_committee":"committee"],withSelector:!1,active:s.get("active_committee_members"),proxy:this.state.proxy_account_id}))),a.createElement(tt.a,{title:"account.votes.workers_short"},a.createElement("div",{className:"hide-selector"},a.createElement("div",{style:{paddingLeft:10},className:We()("hide-selector-item",{inactive:0!==t}),onClick:this._setWorkerTableIndex.bind(this,0)},x.a.translate("account.votes.new",{count:d.length})),a.createElement("div",{className:We()("hide-selector-item",{inactive:1!==t}),onClick:this._setWorkerTableIndex.bind(this,1)},x.a.translate("account.votes.active",{count:m.length})),h.length?a.createElement("div",{className:We()("hide-selector-item",{inactive:!_}),onClick:_?function(){}:this._setWorkerTableIndex.bind(this,2)},a.createElement(T.a,{content:"account.votes.expired"})):null,a.createElement("div",{className:"new-worker-button flex-flow-end"},a.createElement(ca.b,{preventDefault:!0,link:"/create-worker",style:{padding:"0 1em"}},a.createElement(T.a,{content:"account.votes.create_worker"})))),a.createElement("table",{className:"table dashboard-table"},2===t?null:0===t?a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",null),a.createElement("th",{colSpan:4,style:{textAlign:"left"}},a.createElement(T.a,{content:"account.votes.threshold"})),a.createElement("th",{style:{textAlign:"right"}},a.createElement(ae.a,{decimalOffset:5,hide_asset:!0,amount:p,asset:"1.3.0"})),a.createElement("th",{colSpan:3}))):a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",null),a.createElement("th",{style:{textAlign:"left"}},a.createElement(T.a,{content:"account.votes.total_budget"})," (",a.createElement(ia.a,{name:n}),")"),a.createElement("th",{colSpan:4,className:"hide-column-small"}),a.createElement("th",{style:{textAlign:"right"}},s?a.createElement(Kn.b,{hide_asset:!0,fromAsset:"1.3.0",toAsset:n,amount:i}):null),a.createElement("th",{colSpan:3,className:"hide-column-small"}))),a.createElement("thead",null,a.createElement("tr",null,2===t?null:[a.createElement("th",{key:"voteLine",style:{textAlign:"right"}},a.createElement(T.a,{content:"account.votes.line"})),a.createElement("th",{key:"voteID",style:{textAlign:"left"}},a.createElement(T.a,{content:"explorer.assets.id"}))],a.createElement("th",{style:{textAlign:"left"}},a.createElement(T.a,{content:"account.user_issued_assets.description"})),a.createElement("th",{style:{textAlign:"center"}},a.createElement(T.a,{content:"vesting.detail"})),a.createElement("th",{style:{textAlign:"right"},className:"hide-column-small"},a.createElement(T.a,{content:"account.votes.total_votes"})),0===t?a.createElement("th",{style:{textAlign:"right"}},a.createElement(T.a,{content:"account.votes.missing"})):null,a.createElement("th",null,a.createElement(T.a,{content:"explorer.workers.period"})),2===t||0===t?null:a.createElement("th",{style:{textAlign:"right"},className:"hide-column-small"},a.createElement(T.a,{content:"account.votes.funding"})),a.createElement("th",{style:{textAlign:"right"},className:"hide-column-small"},a.createElement(T.a,{content:"account.votes.daily_pay"}),a.createElement("div",{style:{paddingTop:5,fontSize:"0.8rem"}},"(",a.createElement(ia.a,{name:n}),")")),2===t||0===t?null:a.createElement("th",{style:{textAlign:"right"}},a.createElement(T.a,{content:"explorer.witnesses.budget"}),a.createElement("div",{style:{paddingTop:5,fontSize:"0.8rem"}},"(",a.createElement(ia.a,{name:n}),")")),a.createElement("th",null,a.createElement(T.a,{content:"account.votes.toggle"})))),a.createElement("tbody",null,0===t?d:1===t?m:h)))))))}}]),t}()).propTypes={initialBudget:E.a.ChainObject.isRequired,globalObject:E.a.ChainObject.isRequired,proxy:E.a.ChainAccount.isRequired},ma.defaultProps={globalObject:"2.0.0"},ma);pa=Object(w.a)(pa,{keep_updating:!0,show_loader:!0});var ma,da=function(e){return a.createElement(pa,Object.assign({},e,{initialBudget:i.b.getLastBudgetObject()}))},ha=n(296),fa=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();function ba(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function ga(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var va=function(e){function t(){ba(this,t);var e=_a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={amount:0},e}return ga(t,a["Component"]),fa(t,[{key:"onAmountChanged",value:function(e){var t=e.amount;e.asset;this.setState({amount:t})}},{key:"onSubmit",value:function(e){e.preventDefault(),se.a.publish("settlement_modal","close");var t=ce.a.get_asset_precision(this.props.asset.get("precision")),n=this.state.amount.replace(/,/g,"");n*=t;var a=ye.a.new_transaction();return a.add_type_operation("asset_settle",{fee:{amount:0,asset_id:0},account:this.props.account.get("id"),amount:{amount:n,asset_id:this.props.asset.get("id")}}),ve.a.process_transaction(a,null,!0).then(function(e){return!0}).catch(function(e){return console.error("asset settle error: ",e),!1})}},{key:"render",value:function(){var e=this.props,t=e.asset,n=e.account,r=this.state.amount;if(!t)return null;var s=t.get("id"),o=n.get("balances"),i=null,c=0;o&&o.forEach(function(e){var t=He.b.getObject(e);if(!t.get("balance"))return null;t.get("asset_type")===s&&(i=e,c=t.get("balance"))});var l=ce.a.get_asset_precision(t.get("precision")),u=r?r.replace(/,/g,""):0,p=parseFloat(u)>0&&parseFloat(u)*l<=parseFloat(c)?"button success":"button disabled",m=i?a.createElement("span",null,a.createElement(T.a,{content:"exchange.balance"}),": ",a.createElement(me.a,{balance:i})):null;return a.createElement("form",{className:"grid-block vertical full-width-content"},a.createElement(T.a,{component:"h3",content:"modal.settle.title",asset:t.get("symbol")}),a.createElement("div",{className:"grid-container ",style:{paddingTop:"2rem"}},a.createElement("div",{className:"content-block",style:{maxWidth:"25rem"}},a.createElement(de.a,{label:"modal.settle.amount",amount:r,onChange:this.onAmountChanged.bind(this),display_balance:m,asset:s,assets:[s],tabIndex:1})),a.createElement("div",{className:"content-block"},a.createElement("input",{type:"submit",className:p,onClick:this.onSubmit.bind(this),value:x.a.translate("modal.settle.submit")}))))}}]),t}();va.propTypes={asset:E.a.ChainAsset.isRequired,account:E.a.ChainAccount.isRequired},va=Object(w.a)(va,{keep_updating:!0});var ya=function(e){function t(){return ba(this,t),_a(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return ga(t,a["Component"]),fa(t,[{key:"show",value:function(){se.a.publish("settlement_modal","open")}},{key:"render",value:function(){return a.createElement(ne.a,{id:"settlement_modal",overlay:!0,ref:"settlement_modal"},a.createElement("div",{className:"grid-block vertical"},a.createElement(va,this.props)))}}]),t}(),Ea=n(73),wa=n(122),ka=n(290),Aa=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ca=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();function Oa(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xa(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function ja(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Sa=function(e){function t(e){return Oa(this,t),xa(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return ja(t,ka["a"]),Ca(t,[{key:"componentDidMount",value:function(){v.a.rebuild()}},{key:"shouldComponentUpdate",value:function(e){return function e(t,n,a){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,n,a)}if("value"in r)return r.value;var o=r.get;return void 0!==o?o.call(a):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"shouldComponentUpdate",this).call(this,e)||e.fromAsset!==this.props.fromAsset}},{key:"getValue",value:function(){var e=this.props,t=e.fromAsset,n=e.marketStats,a=e.toAsset,r=void 0,s=t.get("symbol");if(a&&n){var o=a.get("symbol");r=n.get(s+"_"+o)}return r&&r.change?r.change:0}},{key:"render",value:function(){var e=this.getValue(),t=0===parseFloat(e)?"":parseFloat(e)<0?"change-down":"change-up",n=a.createElement(Ea.b,{style:"decimal",value:e,minimumFractionDigits:2,maximumFractionDigits:2});return a.createElement("span",{className:"value "+t},n,"%")}}]),t}();Sa.propTypes={toAsset:E.a.ChainAsset.isRequired,fromAsset:E.a.ChainAsset.isRequired,coreAsset:E.a.ChainAsset.isRequired},Sa.defaultProps={toAsset:"1.3.0",fullPrecision:!1,noDecimals:!1,hide_asset:!1,coreAsset:"1.3.0"},Sa=Object(w.a)(Sa,{keep_updating:!0});var Na=function(e){function t(){return Oa(this,t),xa(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return ja(t,a["Component"]),Ca(t,[{key:"render",value:function(){var e=this.props,t=e.refCallback,n=function(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}(e,["refCallback"]);return a.createElement(Sa,Aa({},n,{ref:t}))}}]),t}();Na=Object(j.connect)(Na,{listenTo:function(){return[wa.a]},getProps:function(){return{marketStats:wa.a.getState().allMarketStats}}});var Pa=n(1290),Ta=n(301),Ia={AccountPermission:function(e,t,n){var a=this;this.id=e.get("id"),this.weight=t,this.threshold=e.getIn([n,"weight_threshold"]),this.accounts=[],this.keys=e.getIn([n,"key_auths"]).map(function(e){return new function(e){var t=this;this.id=e.toJS?e.get(0):e[0],this.weight=e.toJS?e.get(1):e[1],this.isAvailable=function(e){return e.includes?e.includes(t.id):-1!==e.indexOf(t)}}(e)}).toArray(),this.isAvailable=function(e){return e.includes?e.includes(a.id):-1!==e.indexOf(a)},this._sumWeights=function(e){if(a.isNested()||a.isMultiSig()){var t=a.accounts.reduce(function(t,n){return t+(n._sumWeights(e)?n.weight:0)},0);return Math.floor(t/a.threshold)}return a.isAvailable(e)?a.weight:0},this.getStatus=function(e,t){if(a.isNested()){var n=a.accounts.reduce(function(t,n){return t+n._sumWeights(e)},0);return a.keys.length&&(n+=a.sumKeys(t)),n}var r=a._sumWeights(e);return a.isMultiSig()&&(r+=a.sumKeys(t)),r},this.sumKeys=function(e){return a.keys.reduce(function(t,n){return t+(n.isAvailable(e)?n.weight:0)},0)},this.isNested=function(){return a.accounts.length>0},this.isMultiSig=function(){return a.keys.reduce(function(e,t){return e||t.weight<a.threshold},!1)},this.getMissingSigs=function(e){var t=[],n=[];return a.isNested()?n=a.accounts.reduce(function(t,n){return t.concat(n.getMissingSigs(e))},[]):a.isAvailable(e)||t.push(a.id),t.concat(n)},this.getMissingKeys=function(e){var t=[],n=[];return a.keys.length&&(a.isNested()||a.isMultiSig())&&a.keys.forEach(function(n){n.isAvailable(e)||t.push(n.id)}),a.isNested()&&(n=a.accounts.reduce(function(t,n){return t.concat(n.getMissingKeys(e))},[])),t.concat(n)}},listToIDs:function(e){var t=[];return e.forEach(function(e){e&&t.push(e.get?e.get("id"):e)}),t},unravel:function(e,t){var n=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(a<3){var r=He.b.getAccount(e.id);r&&r.getIn([t,"account_auths"]).size&&r.getIn([t,"account_auths"]).forEach(function(r){var s=He.b.getAccount(r.get(0));s&&e.accounts.push(n.unravel(new n.AccountPermission(s,r.get(1),t),t,a+1))})}return e},unnest:function(e,t){var n=this,a=[];return e.forEach(function(e){var r=He.b.getAccount(e),s=n.unravel(new n.AccountPermission(r,null,t),t);a.push(s)}),a},flatten_auths:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Q.a.List();return e.size?(e.forEach(function(e){t.includes(e.get(0))||(t=t.push(e.get(0)))}),t):t}},Ra=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Da=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();function Ma(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function La(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Fa(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var qa=function(e){function t(){return Ma(this,t),La(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Fa(t,a["Component"]),Da(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.account,r=t.available,s=t.availableKeys,o=t.permission,i=t.threshold,c=o.isAvailable(r),l=o.isNested(),u=o.isMultiSig(),p=[],m=i&&i>10?ce.a.get_percentage(o.weight,this.props.threshold):o.weight,d=o&&o.threshold>10?ce.a.get_percentage(o.getStatus(r,s),o.threshold)+" / 100%":o.getStatus(r,s)+" / "+o.threshold;return p.push(a.createElement("div",{key:n.get("id"),style:{textAlign:"left",width:"100%",clear:"both",paddingBottom:5}},a.createElement("div",{className:"inline-block",style:{paddingLeft:5*this.props.indent+"%"}},a.createElement(gt.a,{subpage:"permissions",account:n.get("id")}),!l&&m?(m&&2===m.length?"  ":"")+"("+m+") ":null),a.createElement("div",{className:"float-right",style:{paddingLeft:20,marginRight:10}},l||u?a.createElement("span",{className:c?"success-text":""},d):a.createElement("span",null,c?a.createElement(yt.a,{name:"checkmark-circle",size:"1x",className:"success"}):a.createElement(yt.a,{name:"cross-circle",size:"1x",className:"error"}))))),(l||u)&&(o.accounts.forEach(function(t){p.push(a.createElement(Ba,{key:t.id,indent:e.props.indent+1,account:t.id,accounts:t.accounts,permission:t,available:r,availableKeys:s,threshold:o.threshold}))}),o.keys.length&&o.keys.forEach(function(t){p.push(a.createElement(Wa,{key:t.id,permission:t,available:s,indent:e.props.indent+1}))})),a.createElement("div",null,p)}}]),t}();qa.propTypes={account:E.a.ChainAccount.isRequired,accounts:E.a.ChainAccountsList,indent:u.number.isRequired},qa.defaultProps={indent:0};var Ba=Object(w.a)(qa),Wa=function(e){function t(){return Ma(this,t),La(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Fa(t,a["Component"]),Da(t,[{key:"render",value:function(){var e=this.props,t=e.available,n=e.permission,r=n.isAvailable(t),s=[];return s.push(a.createElement("div",{key:n.id,style:{textAlign:"left",width:"100%",paddingBottom:5}},a.createElement("div",{className:"inline-block",style:{paddingLeft:5*this.props.indent+"%"}},a.createElement("span",null,n.id.substr(0,20-4*this.props.indent),"... (",n.weight,")")),a.createElement("div",{className:"float-right",style:{paddingLeft:20,marginRight:10}},a.createElement("span",null,r?a.createElement(yt.a,{name:"checkmark-circle",size:"1x",className:"success"}):a.createElement(yt.a,{name:"cross-circle",size:"1x",className:"error"}))))),a.createElement("div",null,s)}}]),t}();Wa.propTypes={indent:u.number.isRequired},Wa.defaultProps={indent:0};var Ua=function(e){function t(){return Ma(this,t),La(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Fa(t,a["Component"]),Da(t,[{key:"render",value:function(){var e=this.props,t=e.requiredPermissions,n=e.available,r=e.availableKeys,s=(e.type,[]);return t.forEach(function(e){s.push(a.createElement(Ba,{key:e.id,account:e.id,accounts:e.accounts,permission:e,available:n,availableKeys:r}))}),a.createElement("div",null,s)}}]),t}(),Ha=function(e){function t(){Ma(this,t);var e=La(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={requiredPermissions:[]},e._updateState=e._updateState.bind(e),e}return Fa(t,a["Component"]),Da(t,[{key:"componentWillMount",value:function(){this._updateState(),He.b.subscribe(this._updateState)}},{key:"componentWillUnmount",value:function(){He.b.unsubscribe(this._updateState)}},{key:"_updateState",value:function(){var e=Ia.listToIDs(this.props.required),t=Ia.listToIDs(this.props.available);this.setState({requiredPermissions:Ia.unnest(e,this.props.type),required:e,available:t})}},{key:"render",value:function(){var e=this.props,t=e.type,n=(e.proposal,e.added),r=e.removed,s=e.availableKeys,o=this.state,i=o.requiredPermissions,c=o.required,l=o.available;return l=Object(le.cloneDeep)(l),s=s.toJS(),n&&(l.push(n),s.push(n)),r&&(-1!==l.indexOf(r)&&l.splice(l.indexOf(r),1),-1!==s.indexOf(r)&&s.splice(s.indexOf(r),1)),a.createElement(Ua,{type:t,added:n,removed:r,required:c,available:l,availableKeys:s,requiredPermissions:i})}}]),t}();Ha.propTypes={required:E.a.ChainAccountsList,available:E.a.ChainAccountsList},Ha.defaultProps={type:"active",added:null,removed:null},Ha=Object(w.a)(Ha,{keep_updating:!0});var Ya=function(e){function t(){return Ma(this,t),La(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Fa(t,a["Component"]),Da(t,[{key:"render",value:function(){var e=this.props,t=e.proposal,n=e.type,r=t.get("available_"+n+"_approvals"),s=t.get("available_key_approvals"),o=t.get("required_"+n+"_approvals");return a.createElement(Ha,Ra({},this.props,{required:o,available:r,availableKeys:s}))}}]),t}();Ya.propTypes={proposal:E.a.ChainObject.isRequired,type:u.string.isRequired},Ya.defaultProps={type:"active",added:null};var Xa=Object(w.a)(Ya,{keep_updating:!0}),Ja=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Va=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();function za(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ka(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Ga(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Qa=function(e){function t(e){za(this,t);var n=Ka(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.state={active:null,key:null,owner:null,payee:null},n}return Ga(t,a["Component"]),Va(t,[{key:"onActiveAccount",value:function(e,t,n,a){var r={};t[a]?(r.key=a,r[n]=null):a?(r[n]=e[a],r.key=null):(r[n]=null,r.key=null),this.setState(r)}},{key:"_onProposalAction",value:function(e){var t=this,n=e.toJS(),a=this.state,r=a.active,s=(a.key,a.owner,{fee_paying_account:a.payee||r,proposal:n.id,active_approvals_to_add:[],active_approvals_to_remove:[],owner_approvals_to_add:[],owner_approvals_to_remove:[],key_approvals_to_add:[],key_approvals_to_remove:[]}),o="approve"===this.props.action,i=[];["active","owner","key"].forEach(function(e){var a=t.state[e];if(a){var r=-1!==n["available_"+e+"_approvals"].indexOf(a);(o&&!r||!o&&r)&&("approve"===t.props.action?(s[e+"_approvals_to_add"]=[a],"key"===e&&i.push(a)):"reject"===t.props.action&&(s[e+"_approvals_to_remove"]=[a],"key"===e&&i.push(a)))}});var c=ye.a.new_transaction();c.add_type_operation("proposal_update",s),ve.a.process_transaction(c,null,!0,i),se.a.publish(this.props.modalId,"close")}},{key:"onChangePayee",value:function(e){var t=He.b.getAccount(e);t&&this.setState({payee:t.get("id")})}},{key:"onCancel",value:function(){se.a.publish(this.props.modalId,"close")}},{key:"render",value:function(){var e=this.props,t=e.proposal,n=e.type,r=[],s={},i="approve"===this.props.action;this.props.accounts.length&&this.props.accounts.forEach(function(e){(i?e&&!t.get("available_"+n+"_approvals").includes(e.get("id")):e&&t.get("available_"+n+"_approvals").includes(e.get("id")))&&(s[e.get("name")]=e.get("id"),r.push(e.get("name")))});var c=[],l={};this.props.keys.length&&this.props.keys.forEach(function(e){o.a.isMyKey(e)&&!t.get("available_key_approvals").includes(e)&&(l[e]=!0,c.push(e))});var u=o.a.getMyAccounts();return a.createElement("form",{className:"grid-block vertical full-width-content"},a.createElement("div",{className:"grid-container"},a.createElement("div",{className:"content-block"},a.createElement("h4",null,i?"Add approval":"Remove approval")),a.createElement("div",{className:"content-block",style:{paddingRight:"20%"}},a.createElement(Xa,{proposal:t.get("id"),type:n,added:i?this.state.key?this.state.key:this.state[n]||null:null,removed:i?null:this.state.key?this.state.key:this.state[n]||null})),a.createElement("div",{className:"content-block full-width-content"},a.createElement("div",{className:"full-width-content form-group"},a.createElement(T.a,{content:"modal.proposals.pay_with",component:"label"}),a.createElement(Ta.a,{account_names:u,onChange:this.onChangePayee.bind(this)})),r.length||c.length?a.createElement("div",{className:"full-width-content form-group"},a.createElement(T.a,{content:"modal.proposals.approval_"+(i?"add":"remove"),component:"label"}),a.createElement(Ta.a,{account_names:r.concat(c),onChange:this.onActiveAccount.bind(this,s,l,n)})):null,null),a.createElement("div",{className:"content-block"},a.createElement("button",{type:"submit",className:"button",onClick:this._onProposalAction.bind(this,t)},a.createElement(T.a,{content:i?"account.perm.approve":"account.perm.remove"})),a.createElement("div",{onClick:this.onCancel.bind(this),className:" button"},a.createElement(T.a,{content:"account.perm.cancel"})))))}}]),t}();Qa.propTypes={accounts:E.a.ChainAccountsList},Qa=Object(w.a)(Qa);var $a=function(e){function t(){za(this,t);var e=Ka(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._updateState=e._updateState.bind(e),e}return Ga(t,a["Component"]),Va(t,[{key:"componentWillMount",value:function(){this._updateState(),He.b.subscribe(this._updateState)}},{key:"componentWillUnmount",value:function(){He.b.unsubscribe(this._updateState)}},{key:"_updateState",value:function(){var e=this.props,t=e.proposal,n=(e.account,t.get("required_active_approvals").size?"active":"owner"),a=Ia.listToIDs(t.get("required_"+n+"_approvals")),r=Ia.listToIDs(t.get("available_"+n+"_approvals")),s=Ia.listToIDs(t.get("available_key_approvals"));this.setState({requiredPermissions:Ia.unnest(a,n),available:r,availableKeys:s,type:n})}},{key:"render",value:function(){var e=this.props.action,t=this.state,n=t.requiredPermissions,r=t.available,s=t.availableKeys,o=t.type,i=[];n.forEach(function(e){i=i.concat(e.getMissingSigs(r))});var c=[];return n.forEach(function(e){c=c.concat(e.getMissingKeys(s))}),a.createElement(Qa,Ja({},this.props,{type:o,accounts:"approve"===e?i:r,keys:"approve"===e?c:s}))}}]),t}();$a.propTypes={account:E.a.ChainAccount.isRequired,proposal:E.a.ChainObject.isRequired},$a=Object(w.a)($a);var Za=function(e){function t(){za(this,t);var e=Ka(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={open:!1},e}return Ga(t,a["Component"]),Va(t,[{key:"componentDidMount",value:function(){var e=this;se.a.subscribe(this.props.modalId,function(t,n){e.setState({open:"open"===n})})}},{key:"show",value:function(){se.a.publish(this.props.modalId,"open")}},{key:"render",value:function(){var e=this.props,t=e.modalId;e.proposal;return a.createElement(ne.a,{id:t,overlay:!0,ref:t},this.state.open?a.createElement("div",{className:"grid-block vertical"},a.createElement($a,this.props)):null)}}]),t}(),er=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var tr=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["Component"]),er(t,[{key:"_onApproveModal",value:function(e,t){this.refs[e+"_"+t]&&this.refs[e+"_"+t].show()}},{key:"_canApprove",value:function(e,t){return-1!==e.required_active_approvals.indexOf(t)&&-1===e.available_active_approvals.indexOf(t)||-1!==e.required_owner_approvals.indexOf(t)&&-1===e.available_owner_approvals.indexOf(t)}},{key:"_canReject",value:function(e){return e.available_active_approvals.length||e.available_owner_approvals.length}},{key:"render",value:function(){var e=this,t=this.props.account;if(!t)return null;var n=[];t.get("proposals").size&&t.get("proposals").forEach(function(e){var a=He.b.getObject(e);if(a){var r=a.get("proposed_transaction").get("operations");n.push({operations:r,account:t,proposal:a})}});var r=n.sort(function(e,t){return ce.a.sortID(e.proposal.get("id"),t.proposal.get("id"),!0)}).map(function(t){var n=!1,r=t.operations.map(function(e,r){return"1.2.153124"===e.getIn([1,"to"])&&(n=!0),a.createElement(Pa.a,{key:t.proposal.get("id")+"_"+r,expiration:t.proposal.get("expiration_time"),index:r,op:e.toJS(),inverted:!1,hideFee:!1,hideOpLabel:!0,hideDate:!0,proposal:!0,id:t.proposal.get("id")})}).toArray(),s=e._canReject(t.proposal.toJS()),o=t.proposal.get("id"),i=t.proposal.get("required_active_approvals").size?"active":"owner";return a.createElement("tr",{key:o},a.createElement("td",null,r),a.createElement("td",null,a.createElement(Xa,{proposal:t.proposal.get("id"),type:i})),a.createElement("td",null,s?a.createElement("button",{onClick:e._onApproveModal.bind(e,o,"reject"),className:"button outline"},a.createElement(T.a,{content:"proposal.reject"})):null,a.createElement(Za,{ref:o+"_reject",modalId:o+"_reject",account:t.account.get("id"),proposal:o,action:"reject"}),n?a.createElement("div",{"data-tip":x.a.translate("tooltip.propose_scam"),className:" tooltip has-error"},"SCAM"):a.createElement("button",{onClick:e._onApproveModal.bind(e,o,"approve"),className:"button outline"},a.createElement("span",null,a.createElement(T.a,{content:"proposal.approve"}))),a.createElement(Za,{ref:o+"_approve",modalId:o+"_approve",account:t.account.get("id"),proposal:o,action:"approve"})))});return a.createElement("table",{className:"table compact "+this.props.className},a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",null,a.createElement(T.a,{content:"account.votes.info"})),a.createElement("th",null,a.createElement(T.a,{content:"proposal.status"})),a.createElement("th",null,a.createElement(T.a,{content:"proposal.action"})))),a.createElement("tbody",null,r))}}]),t}();tr.propTypes={account:E.a.ChainAccount.isRequired};var nr=Object(w.a)(tr,{keep_updating:!0}),ar=n(1435),rr=n(1283),sr=n(27);var or=n(1274),ir=n(121),cr=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();function lr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ur(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function pr(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var mr=((hr=function(e){function t(e){lr(this,t);var n=ur(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));for(var a in n.priceRefs={},n.valueRefs={},n.changeRefs={},n.sortFunctions={alphabetic:function(e,t,n){return e.key>t.key?this.state.sortDirection||n?1:-1:e.key<t.key?this.state.sortDirection||n?-1:1:0},priceValue:function(e,t){var n=this.priceRefs[e.key],a=this.priceRefs[t.key];if(n&&a){var r=n.getFinalPrice(!0),s=a.getFinalPrice(!0);return!r&&s?1:r&&!s?-1:r||s?this.state.sortDirection?r-s:s-r:this.sortFunctions.alphabetic(e,t,!0)}},totalValue:function(e,t){var n=this.valueRefs[e.key],a=this.valueRefs[t.key];if(n&&a){var r=n.getValue(),s=a.getValue();return!r&&s?1:r&&!s?-1:r||s?this.state.sortDirection?s-r:r-s:this.sortFunctions.alphabetic(e,t,!0)}},changeValue:function(e,t){var n=this.changeRefs[e.key],a=this.changeRefs[t.key];if(n&&a){var r=n.getValue(),s=a.getValue(),o=parseFloat(r)||r,i=parseFloat(s)||s;return void 0===this.state.sortDirection||this.state.sortDirection?o<i:o>i}}},n.state={sortKey:e.viewSettings.get("portfolioSort","totalValue"),sortDirection:e.viewSettings.get("portfolioSortDirection",!0),settleAsset:"1.3.0",showHidden:!1,depositAsset:null,withdrawAsset:null,bridgeAsset:null,alwaysShowAssets:["CYB"]},n.sortFunctions)n.sortFunctions[a]=n.sortFunctions[a].bind(n);return n}return pr(t,a["Component"]),cr(t,[{key:"componentWillMount",value:function(){this._checkMarginStatus()}},{key:"_checkMarginStatus",value:function(){var e=this;(function(e){return new Promise(function(t,n){if(!e||e&&!e.get("call_orders",[]).size)return t(null);Object(He.f)("getObject",e.get("call_orders").toArray()).then(function(e){var n=[];e.forEach(function(e){var t=e.getIn(["call_price","base","asset_id"]),a=e.getIn(["call_price","quote","asset_id"]);-1===n.indexOf(t)&&n.push(t),-1===n.indexOf(a)&&n.push(a)}),Object(He.f)("getAsset",n).then(function(n){var a={};n.forEach(function(e){a[e.get("id")]=e.toJS()});var r={};e.forEach(function(e){var t=a[e.getIn(["call_price","quote","asset_id"])],n=a[e.getIn(["call_price","base","asset_id"])],s=t.bitasset.current_feed.settlement_price;if(s.base.asset_id===s.quote.asset_id)r[t.id]={ratio:null};else{var o=new sr.a({amount:e.get("collateral"),asset_id:n.id,precision:n.precision}),i=new sr.a({amount:e.get("debt"),asset_id:t.id,precision:t.precision}),c=t.bitasset.current_feed.maintenance_collateral_ratio/1e3,l=new sr.c({priceObject:t.bitasset.current_feed.settlement_price,market_base:t.bitasset.current_feed.settlement_price.quote.asset_id,sqr:t.bitasset.current_feed.maximum_short_squeeze_ratio,assets:a}),u={ratio:o.getAmount({real:!0})/(i.getAmount({real:!0})/l.toReal())};if(isNaN(u.ratio))return null;u.ratio<c?u.statusClass="danger":u.ratio<c+.5?u.statusClass="warning":u.statusClass=null,r[t.id]=u}}),t(r)})}).catch(n)})})((arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props).account).then(function(t){var n=null;for(var a in t)n=t[a].statusClass||n;e.setState({globalMarginStatus:n})})}},{key:"componentWillReceiveProps",value:function(e){e.account!==this.props.account&&(this._checkMarginStatus(e),this.priceRefs={},this.valueRefs={},this.changeRefs={},setTimeout(this.forceUpdate.bind(this),500))}},{key:"shouldComponentUpdate",value:function(e,t){return!(ce.a.are_equal_shallow(e.balanceAssets,this.props.balanceAssets)&&ce.a.are_equal_shallow(e.backedCoins,this.props.backedCoins)&&ce.a.are_equal_shallow(e.balances,this.props.balances)&&e.account===this.props.account&&e.isMyAccount===this.props.isMyAccount&&e.settings===this.props.settings&&e.hiddenAssets===this.props.hiddenAssets&&ce.a.are_equal_shallow(t,this.state))}},{key:"_onSettleAsset",value:function(e,t){t.preventDefault(),this.setState({settleAsset:e}),this.refs.settlement_modal.show()}},{key:"_hideAsset",value:function(e,t){W.a.hideAsset(e,t)}},{key:"_showDepositWithdraw",value:function(e,t,n,a){var r=this.props.account;U.b.showDepositModal(r.get("name"),t)}},{key:"_showWithdrawModal",value:function(e,t,n,a){this.props.account;U.b.showWithdrawModal(t)}},{key:"_getSeparator",value:function(e){return e?a.createElement("span",null," | "):null}},{key:"_onNavigate",value:function(e,t){t.preventDefault(),this.props.history.push(e)}},{key:"_renderBalances",value:function(e,t,n){var r=this,s=this.props.core_asset,o=this.props,i=o.settings,c=o.hiddenAssets,l=o.orders,u=i.get("unit")||s.get("symbol"),p=i.get("showAssetPercent",!1),m=function(e,t){var n=e&&e.has("bitasset_data_id"),s="cp_modal_"+e.get("id");return{isBitAsset:n,borrowModal:n?a.createElement(ar.a,{ref:s,quote_asset:e.get("id"),backing_asset:e.getIn(["bitasset","options","short_backing_asset"]),account:t}):null,borrowLink:n?a.createElement("a",{onClick:function(){v.a.hide(),r.refs[s].show()}},a.createElement(yt.a,{name:"dollar",className:"icon-14px"})):null}},h=[];return e.forEach(function(e){var t=He.b.getObject(e);if(t){var n=t.get("asset_type"),o=He.b.getObject(n),i="";if(!o)return null;o.get("symbol");var f="1.3.0"!==o.get("id"),b=u!==s.get("symbol"),_=be.a.parseDescription(o.getIn(["options","description"])).market;-1===(i=o.get("symbol")).indexOf("OPEN.")||_||(_="USD");var g=_||u;f&&g===i&&(g=s.get("symbol")),f?a.createElement(d.a,{to:"/market/"+o.get("symbol")+"_"+g},a.createElement(yt.a,{name:"trade",className:"icon-14px"})):b?a.createElement(d.a,{to:"/market/"+o.get("symbol")+"_"+u},a.createElement(yt.a,{name:"trade",className:"icon-14px"})):"-",a.createElement(d.a,{to:"/transfer?asset="+o.get("id")},a.createElement(yt.a,{name:"transfer",className:"icon-14px"}));var v=m(o,r.props.account);v.isBitAsset,v.borrowModal,v.borrowLink;a.createElement("a",{href:"javascript:;",onClick:r._onSettleAsset.bind(r,o.get("id"))},a.createElement(yt.a,{name:"settle",className:"icon-14px"}));c.includes(n);var y=!!t.get("balance"),E=!!l[n];!!or.d.ADDRESS_TYPES[o.get("symbol")]&&!or.d.ADDRESS_TYPES[o.get("symbol")].isDisabled&&y&&t.get("balance");h.push(a.createElement("tr",{key:o.get("symbol"),style:{maxWidth:"100rem"}},a.createElement("td",{style:{textAlign:"left",paddingLeft:10}},a.createElement(vt.a,{asset:o.get("id")})),a.createElement("td",{style:{textAlign:"right"}},y||E?a.createElement(me.a,{balance:e,hide_asset:!0}):null),a.createElement("td",{style:{textAlign:"right"},className:"column-hide-small"},a.createElement(ka.b,{refCallback:function(e){e&&e.refs.bound_component&&(r.priceRefs[o.get("symbol")]=e.refs.bound_component)},fromAsset:o.get("id"),hide_symbols:!0})),a.createElement("td",{style:{textAlign:"right"},className:"column-hide-small"},a.createElement(Na,{refCallback:function(e){e&&e.refs.bound_component&&(r.changeRefs[o.get("symbol")]=e.refs.bound_component)},fromAsset:o.get("id"),toAsset:u,hide_symbols:!0})),a.createElement("td",{style:{textAlign:"right"},className:"column-hide-small"},y||E?a.createElement(Kn.a,{balance:e,toAsset:u,hide_asset:!0,refCallback:function(e){e&&e.refs.bound_component&&(r.valueRefs[o.get("symbol")]=e.refs.bound_component)}}):null),p?a.createElement("td",{style:{textAlign:"right"}},y?a.createElement(me.a,{balance:e,asPercentage:!0}):null):null))}}),t&&t.filter(function(e){var t=!1;r.props.backedCoins.get("OPEN",[]).forEach(function(n){n&&n.symbol===e&&(t=!0)}),r.props.bridgeCoins.get(e)&&(t=!0);var n=!0;return h.forEach(function(t){t.key===e&&(n=!1)}),n&&t}).forEach(function(e){var t=He.b.getAsset(e);if(t&&r.props.isMyAccount){var o=!c.includes(t.get("id")),i=!!r.props.backedCoins.get("OPEN",[]).find(function(e){return e.symbol===t.get("symbol")}),l="1.3.0"!==t.get("id"),u=be.a.parseDescription(t.getIn(["options","description"])).market;-1===t.get("symbol").indexOf("OPEN.")||u||(u="USD");var p=u||(s?s.get("symbol"):"CYB"),f=l?a.createElement(d.a,{to:"/market/"+t.get("symbol")+"_"+p},a.createElement(yt.a,{name:"trade",className:"icon-14px"})):"-",b=m(t,r.props.account),_=b.isBitAsset,g=b.borrowModal,v=b.borrowLink;(o&&n||!o&&!n)&&h.push(a.createElement("tr",{key:t.get("symbol"),style:{maxWidth:"100rem"}},a.createElement("td",{style:{textAlign:"left",paddingLeft:10}},a.createElement(vt.a,{asset:t.get("id")})),a.createElement("td",null),a.createElement("td",null),a.createElement("td",{className:"column-hide-small",colSpan:2}),a.createElement("td",null,i&&r.props.isMyAccount?a.createElement("span",null,a.createElement("a",{onClick:r._showDepositWithdraw.bind(r,"deposit_modal",e,!1)},a.createElement(yt.a,{name:"deposit",className:"icon-14px"}))):"-"),a.createElement("td",null,"-"),a.createElement("td",{style:{textAlign:"center"}},f),a.createElement("td",null,_?a.createElement("div",{className:"inline-block","data-place":"bottom","data-tip":x.a.translate("tooltip.borrow",{asset:t.get("symbol")})},v,g):"-"),a.createElement("td",null,"-"),a.createElement("td",{style:{textAlign:"center"},className:"column-hide-small","data-place":"bottom","data-tip":x.a.translate("tooltip."+(o?"hide_asset":"show_asset"))},a.createElement("a",{style:{marginRight:0},className:o?"order-cancel":"action-plus",onClick:r._hideAsset.bind(r,t.get("id"),o)},a.createElement(yt.a,{name:o?"cross-circle":"plus-circle",className:"icon-14px"})))))}}),h.sort(this.sortFunctions[this.state.sortKey]),h}},{key:"_toggleHiddenAssets",value:function(){this.setState({showHidden:!this.state.showHidden})}},{key:"_toggleSortOrder",value:function(e){this.state.sortKey===e?(W.a.changeViewSetting({portfolioSortDirection:!this.state.sortDirection}),this.setState({sortDirection:!this.state.sortDirection})):(W.a.changeViewSetting({portfolioSort:e}),this.setState({sortKey:e}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.account,r=t.hiddenAssets,s=t.settings,o=t.orders,i=this.state.showHidden;if(!n)return null;var c=[],l={},u={};n.toJS&&n.has("call_orders")&&(c=n.get("call_orders").toJS());var p=void 0,m=void 0,d=n.get("balances"),h=G.List(),f=G.List();(c.forEach(function(e){var t=He.b.getObject(e);if(t){var n=t.getIn(["call_price","base","asset_id"]);l[n]?l[n]+=parseInt(t.get("collateral"),10):l[n]=parseInt(t.get("collateral"),10);var a=t.getIn(["call_price","quote","asset_id"]);u[a]?u[a]+=parseInt(t.get("debt"),10):u[a]=parseInt(t.get("debt"),10)}}),d)&&((d=d.filter(function(e,t){var n=He.b.getObject(e),a=He.b.getAsset(n.get("asset_type"));return!(!a||Object(ir.a)(a.get("symbol")))&&!(n&&!n.get("balance")&&!o[t])})).forEach(function(e,t){r.includes(t)?f=f.push(e):h=h.push(e)}),p=this._renderBalances(h,this.state.alwaysShowAssets,!0),m=this._renderBalances(f,this.state.alwaysShowAssets));if(!m||!p)return null;var b=h.concat(f),_=(a.createElement(ha.a,{noTip:!0,balances:b,openOrders:o,debt:u,collateral:l,hide_asset:!0}),a.createElement(ha.a,{noTip:!0,balances:b,hide_asset:!0})),g=(a.createElement(ha.a,{noTip:!0,balances:G.List(),openOrders:o,hide_asset:!0}),a.createElement(ha.a,{noTip:!0,balances:G.List(),debt:u,collateral:l,hide_asset:!0}),a.createElement(ha.a,{noTip:!0,balances:G.List(),debt:u,hide_asset:!0}),a.createElement(ha.a,{noTip:!0,balances:G.List(),collateral:l,hide_asset:!0}),s.get("unit")||this.props.core_asset.get("symbol")),v=a.createElement(rr.a,{noLink:!0,string:"account.total",keys:[{type:"asset",value:g,arg:"asset"}]});p&&p.push(a.createElement("tr",{key:"portfolio",className:"total-value"},a.createElement("td",{style:{textAlign:"left",paddingLeft:10}},v),a.createElement("td",null),a.createElement("td",{className:"column-hide-small"}),a.createElement("td",null),a.createElement("td",{className:"column-hide-small",style:{textAlign:"right"}},_)));var y=s.get("showAssetPercent",!1),E=(this.props.backedCoins.get("OPEN",[]).find(function(t){return t.symbol===e.state.depositAsset}),this.props.backedCoins.get("OPEN",[]).find(function(t){return t.symbol===e.state.withdrawAsset}),this.props.bridgeCoins.get(this.state.bridgeAsset),He.b.getAsset(g)),w=E?E.get("symbol"):"";if(E){var k=ce.a.replaceName(w,!!E.get("bitasset_data_id")),A=k.prefix,C=k.name;w=(A||"")+C}a.createElement("span",{style:{visibility:"hidden"}},"H");return a.createElement("div",{className:"app-tables with-shadow",ref:"appTables"},a.createElement("div",{className:"content-block small-12"},a.createElement("div",{className:"generic-bordered-box"},a.createElement(tt.b,{defaultActiveTab:1,segmented:!1,setting:"overviewTab",className:"overview-tabs",contentClass:"no-padding",tabsClass:"account-overview no-padding bordered-header content-block"},a.createElement(tt.a,{title:"account.portfolio",subText:_},a.createElement("table",{className:"table dashboard-table"},a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",{style:{textAlign:"left",paddingLeft:10},className:"clickable",onClick:this._toggleSortOrder.bind(this,"alphabetic")},a.createElement(T.a,{component:"span",content:"account.asset"})),a.createElement("th",{style:{textAlign:"right"}},a.createElement(T.a,{content:"account.qty"})),a.createElement("th",{onClick:this._toggleSortOrder.bind(this,"priceValue"),className:"column-hide-small clickable",style:{textAlign:"right"}},a.createElement(T.a,{content:"exchange.price"})," (",a.createElement(ia.a,{name:g}),")"),a.createElement("th",{onClick:this._toggleSortOrder.bind(this,"changeValue"),className:"column-hide-small clickable",style:{textAlign:"right"}},a.createElement(T.a,{content:"account.hour_24_short"})),a.createElement("th",{onClick:this._toggleSortOrder.bind(this,"totalValue"),style:{textAlign:"right"},className:"column-hide-small clickable"},a.createElement(rr.a,{noLink:!0,string:"account.eq_value_header",keys:[{type:"asset",value:g,arg:"asset"}]})),y?a.createElement("th",{style:{textAlign:"right"}},a.createElement(T.a,{component:"span",content:"account.percent"})):null)),a.createElement("tbody",null,i&&m.length?m:p))),a.createElement(tt.a,{title:"account.activity"},a.createElement(Sn.a,{accountsList:G.fromJS([n.get("id")]),compactView:!1,showMore:!0,fullHeight:!0,limit:15,showFilters:!0,dashboard:!0})),n.get("proposals")&&n.get("proposals").size?a.createElement(tt.a,{title:"explorer.proposals.title",subText:n.get("proposals")?n.get("proposals").size:0},a.createElement(nr,{className:"dashboard-table",account:n.get("id")})):null),a.createElement(ya,{ref:"settlement_modal",asset:this.state.settleAsset,account:n.get("name")}))))}}]),t}()).propTypes={balanceAssets:E.a.ChainAssetsList,core_asset:E.a.ChainAsset.isRequired},hr.defaultProps={core_asset:"1.3.0"},hr);mr=Object(w.a)(mr);var dr=function(e){function t(){return lr(this,t),ur(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return pr(t,a["Component"]),cr(t,[{key:"componentWillMount",value:function(){}},{key:"render",value:function(){var e=this.props.balances.map(function(e){return e&&e.get("asset_type")}).filter(function(e){return!!e}),t=this.props.orders.reduce(function(e,t){if(!t)return e;var n=t.getIn(["sell_price","base","asset_id"]);return e[n]||(e[n]=0),e[n]+=parseInt(t.get("for_sale"),10),e},{});for(var n in t)-1===e.indexOf(n)&&e.push(n);return a.createElement(mr,Object.assign({},this.state,this.props,{orders:t,balanceAssets:G.List(e)}))}}]),t}();dr.propTypes={balances:E.a.ChainObjectsList,orders:E.a.ChainObjectsList},dr.defaultProps={balances:G.List(),orders:G.List()};var hr,fr=Object(w.a)(dr),br=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();function _r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gr(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function vr(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var yr=((Er=function(e){function t(){return _r(this,t),gr(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return vr(t,a["Component"]),br(t,[{key:"componentDidMount",value:function(){this.props.account&&o.a.isMyAccount(this.props.account)&&s.a.setCurrentAccount.defer(this.props.account.get("name")),V.a.getPossibleFees(this.props.account,"transfer")}},{key:"render",value:function(){var e=this,t=this.props,n=t.myAccounts,r=t.linkedAccounts,s=t.account_name,i=t.searchAccounts,c=t.settings,l=t.wallet_locked,u=t.account,p=t.myActiveAccounts,d=t.hiddenAssets,h=(t.history,t.match,t.bridgeCoins),f=t.backedCoins,b=this.props,_=b.depositModal,g=b.withdrawModal,v=o.a.isMyAccount(u),y={account_name:s,myActiveAccounts:p,searchAccounts:i,settings:c,wallet_locked:l,account:u,isMyAccount:v,hiddenAssets:d,backedCoins:f,bridgeCoins:h,contained:!0,balances:u.get("balances",Object(G.List)()).toList(),orders:u.get("orders",Object(G.List)()).toList(),viewSettings:this.props.viewSettings,proxy:u.getIn(["options","voting_account"]),history:this.props.history};return a.createElement("div",{className:"grid-block page-layout"},a.createElement("div",{className:"show-for-medium grid-block shrink left-column no-padding",style:{minWidth:200}},a.createElement(J,{account:u,isMyAccount:v,linkedAccounts:r,myAccounts:n,viewSettings:this.props.viewSettings,advancedMode:c.get("advancedMode"),passwordLogin:c.get("passwordLogin")})),a.createElement("div",{className:"grid-block main-content"},a.createElement("div",{className:"grid-container"},a.createElement(Z.a,null,a.createElement(m.a,{path:"/account/"+s,exact:!0,render:function(){return a.createElement(fr,Object.assign({},y))}}),a.createElement($.a,{from:"/account/"+s+"/overview",to:"/account/"+s}),a.createElement($.a,{from:"/account/"+s+"/dashboard",to:"/account/"+s}),a.createElement(m.a,{path:"/account/"+s+"/assets",exact:!0,render:function(){return a.createElement(qe,Object.assign({},y))}}),a.createElement(m.a,{path:"/account/"+s+"/create-asset",exact:!0,render:function(){return a.createElement(mt,Object.assign({},y))}}),a.createElement(m.a,{path:"/account/"+s+"/update-asset/:asset",exact:!0,render:function(){return a.createElement(Rt,Object.assign({},y))}}),a.createElement(m.a,{path:"/account/"+s+"/member-stats",exact:!0,render:function(){return a.createElement(Jt,Object.assign({},y))}}),a.createElement(m.a,{path:"/account/"+s+"/vesting",exact:!0,render:function(){return a.createElement(en,Object.assign({},y))}}),a.createElement(m.a,{path:"/account/"+s+"/permissions",exact:!0,render:function(){return a.createElement(Rn,Object.assign({},y))}}),a.createElement(m.a,{path:"/account/"+s+"/voting",exact:!0,render:function(){return a.createElement(da,Object.assign({},e.props,y))}}),a.createElement(m.a,{path:"/account/"+s+"/whitelist",exact:!0,render:function(){return a.createElement(zn,Object.assign({},y))}}),a.createElement(m.a,{path:"/account/"+s+"/signedmessages",exact:!0,render:function(){return a.createElement(qn,Object.assign({},y))}})),_&&a.createElement(z.a,{balances:u.get("balances",null),modalId:U.a,fade:!0}),g&&a.createElement(K.a,{balances:u.get("balances",null),account:u,issuer:u.get("id"),modalId:U.c}))))}}]),t}()).propTypes={account:E.a.ChainAccount.isRequired},Er.defaultProps={account:"props.params.account_name"},Er);yr=Object(w.a)(yr,{keep_updating:!0,show_loader:!0});var Er,wr=function(e){function t(){return _r(this,t),gr(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return vr(t,a["Component"]),br(t,[{key:"render",value:function(){var e=this.props.match.params.account_name;return a.createElement(yr,Object.assign({},this.props,{account:e,account_name:e}))}}]),t}();t.default=Object(j.connect)(wr,{listenTo:function(){return[o.a,i.b,c.a,l.b]},getProps:function(e){return{linkedAccounts:o.a.getState().linkedAccounts,searchAccounts:o.a.getState().searchAccounts,settings:i.b.getState().settings,hiddenAssets:i.b.getState().hiddenAssets,wallet_locked:c.a.getState().locked,myAccounts:o.a.getState().myAccounts,myActiveAccounts:o.a.getState().myActiveAccounts,viewSettings:i.b.getState().viewSettings,backedCoins:l.b.getState().backedCoins,bridgeCoins:l.b.getState().bridgeCoins,gatewayDown:l.b.getState().down,depositModal:l.b.getState().modals.get(U.a),withdrawModal:l.b.getState().modals.get(U.c)}}})},1267:function(e,t,n){"use strict";var a=n(1270),r=n(1285),s=n(1447),o=n(1273),i=n(1446),c=n(1445),l={};function u(e){return e.getAttribute("data-ps-id")}t.add=function(e){var t=c();return function(e,t){e.setAttribute("data-ps-id",t)}(e,t),l[t]=new function(e){var t=this;function n(){r.add(e,"ps-focus")}function c(){r.remove(e,"ps-focus")}t.settings=a.clone(s),t.containerWidth=null,t.containerHeight=null,t.contentWidth=null,t.contentHeight=null,t.isRtl="rtl"===o.css(e,"direction"),t.isNegativeScroll=function(){var t,n=e.scrollLeft;return e.scrollLeft=-1,t=e.scrollLeft<0,e.scrollLeft=n,t}(),t.negativeScrollAdjustment=t.isNegativeScroll?e.scrollWidth-e.clientWidth:0,t.event=new i,t.ownerDocument=e.ownerDocument||document,t.scrollbarXRail=o.appendTo(o.e("div","ps-scrollbar-x-rail"),e),t.scrollbarX=o.appendTo(o.e("div","ps-scrollbar-x"),t.scrollbarXRail),t.scrollbarX.setAttribute("tabindex",0),t.event.bind(t.scrollbarX,"focus",n),t.event.bind(t.scrollbarX,"blur",c),t.scrollbarXActive=null,t.scrollbarXWidth=null,t.scrollbarXLeft=null,t.scrollbarXBottom=a.toInt(o.css(t.scrollbarXRail,"bottom")),t.isScrollbarXUsingBottom=t.scrollbarXBottom==t.scrollbarXBottom,t.scrollbarXTop=t.isScrollbarXUsingBottom?null:a.toInt(o.css(t.scrollbarXRail,"top")),t.railBorderXWidth=a.toInt(o.css(t.scrollbarXRail,"borderLeftWidth"))+a.toInt(o.css(t.scrollbarXRail,"borderRightWidth")),o.css(t.scrollbarXRail,"display","block"),t.railXMarginWidth=a.toInt(o.css(t.scrollbarXRail,"marginLeft"))+a.toInt(o.css(t.scrollbarXRail,"marginRight")),o.css(t.scrollbarXRail,"display",""),t.railXWidth=null,t.railXRatio=null,t.scrollbarYRail=o.appendTo(o.e("div","ps-scrollbar-y-rail"),e),t.scrollbarY=o.appendTo(o.e("div","ps-scrollbar-y"),t.scrollbarYRail),t.scrollbarY.setAttribute("tabindex",0),t.event.bind(t.scrollbarY,"focus",n),t.event.bind(t.scrollbarY,"blur",c),t.scrollbarYActive=null,t.scrollbarYHeight=null,t.scrollbarYTop=null,t.scrollbarYRight=a.toInt(o.css(t.scrollbarYRail,"right")),t.isScrollbarYUsingRight=t.scrollbarYRight==t.scrollbarYRight,t.scrollbarYLeft=t.isScrollbarYUsingRight?null:a.toInt(o.css(t.scrollbarYRail,"left")),t.scrollbarYOuterWidth=t.isRtl?a.outerWidth(t.scrollbarY):null,t.railBorderYWidth=a.toInt(o.css(t.scrollbarYRail,"borderTopWidth"))+a.toInt(o.css(t.scrollbarYRail,"borderBottomWidth")),o.css(t.scrollbarYRail,"display","block"),t.railYMarginHeight=a.toInt(o.css(t.scrollbarYRail,"marginTop"))+a.toInt(o.css(t.scrollbarYRail,"marginBottom")),o.css(t.scrollbarYRail,"display",""),t.railYHeight=null,t.railYRatio=null}(e),l[t]},t.remove=function(e){delete l[u(e)],function(e){e.removeAttribute("data-ps-id")}(e)},t.get=function(e){return l[u(e)]}},1268:function(e,t,n){"use strict";var a=n(0),r=n(3),s=n(879),o=n(19),i=n(40),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["Component"]),c(t,[{key:"shouldComponentUpdate",value:function(e){return!e.account.get("name")||!this.props.account.get("name")||e.account.get("name")!==this.props.account.get("name")}},{key:"render",value:function(){var e=this.props.account.get("name");return e?this.props.noLink?a.createElement("span",null,e):a.createElement(s.a,{onClick:this.props.onClick?this.props.onClick:function(){},to:"/account/"+e+"/"+this.props.subpage+"/"},e):a.createElement("span",null,this.props.account.get("id"))}}]),t}();l.propTypes={account:o.a.ChainObject.isRequired,subpage:r.string.isRequired},l.defaultProps={subpage:"overview",autosubscribe:!1},t.a=Object(i.a)(l)},1269:function(e,t,n){"use strict";var a=n(1270),r=n(1285),s=n(1273),o=n(1267),i=n(1271);function c(e,t){return e.settings.minScrollbarLength&&(t=Math.max(t,e.settings.minScrollbarLength)),e.settings.maxScrollbarLength&&(t=Math.min(t,e.settings.maxScrollbarLength)),t}e.exports=function(e){var t,n=o.get(e);n.containerWidth=e.clientWidth,n.containerHeight=e.clientHeight,n.contentWidth=e.scrollWidth,n.contentHeight=e.scrollHeight,e.contains(n.scrollbarXRail)||((t=s.queryChildren(e,".ps-scrollbar-x-rail")).length>0&&t.forEach(function(e){s.remove(e)}),s.appendTo(n.scrollbarXRail,e)),e.contains(n.scrollbarYRail)||((t=s.queryChildren(e,".ps-scrollbar-y-rail")).length>0&&t.forEach(function(e){s.remove(e)}),s.appendTo(n.scrollbarYRail,e)),!n.settings.suppressScrollX&&n.containerWidth+n.settings.scrollXMarginOffset<n.contentWidth?(n.scrollbarXActive=!0,n.railXWidth=n.containerWidth-n.railXMarginWidth,n.railXRatio=n.containerWidth/n.railXWidth,n.scrollbarXWidth=c(n,a.toInt(n.railXWidth*n.containerWidth/n.contentWidth)),n.scrollbarXLeft=a.toInt((n.negativeScrollAdjustment+e.scrollLeft)*(n.railXWidth-n.scrollbarXWidth)/(n.contentWidth-n.containerWidth))):n.scrollbarXActive=!1,!n.settings.suppressScrollY&&n.containerHeight+n.settings.scrollYMarginOffset<n.contentHeight?(n.scrollbarYActive=!0,n.railYHeight=n.containerHeight-n.railYMarginHeight,n.railYRatio=n.containerHeight/n.railYHeight,n.scrollbarYHeight=c(n,a.toInt(n.railYHeight*n.containerHeight/n.contentHeight)),n.scrollbarYTop=a.toInt(e.scrollTop*(n.railYHeight-n.scrollbarYHeight)/(n.contentHeight-n.containerHeight))):n.scrollbarYActive=!1,n.scrollbarXLeft>=n.railXWidth-n.scrollbarXWidth&&(n.scrollbarXLeft=n.railXWidth-n.scrollbarXWidth),n.scrollbarYTop>=n.railYHeight-n.scrollbarYHeight&&(n.scrollbarYTop=n.railYHeight-n.scrollbarYHeight),function(e,t){var n={width:t.railXWidth};t.isRtl?n.left=t.negativeScrollAdjustment+e.scrollLeft+t.containerWidth-t.contentWidth:n.left=e.scrollLeft,t.isScrollbarXUsingBottom?n.bottom=t.scrollbarXBottom-e.scrollTop:n.top=t.scrollbarXTop+e.scrollTop,s.css(t.scrollbarXRail,n);var a={top:e.scrollTop,height:t.railYHeight};t.isScrollbarYUsingRight?t.isRtl?a.right=t.contentWidth-(t.negativeScrollAdjustment+e.scrollLeft)-t.scrollbarYRight-t.scrollbarYOuterWidth:a.right=t.scrollbarYRight-e.scrollLeft:t.isRtl?a.left=t.negativeScrollAdjustment+e.scrollLeft+2*t.containerWidth-t.contentWidth-t.scrollbarYLeft-t.scrollbarYOuterWidth:a.left=t.scrollbarYLeft+e.scrollLeft,s.css(t.scrollbarYRail,a),s.css(t.scrollbarX,{left:t.scrollbarXLeft,width:t.scrollbarXWidth-t.railBorderXWidth}),s.css(t.scrollbarY,{top:t.scrollbarYTop,height:t.scrollbarYHeight-t.railBorderYWidth})}(e,n),n.scrollbarXActive?r.add(e,"ps-active-x"):(r.remove(e,"ps-active-x"),n.scrollbarXWidth=0,n.scrollbarXLeft=0,i(e,"left",0)),n.scrollbarYActive?r.add(e,"ps-active-y"):(r.remove(e,"ps-active-y"),n.scrollbarYHeight=0,n.scrollbarYTop=0,i(e,"top",0))}},1270:function(e,t,n){"use strict";var a=n(1285),r=n(1273),s=t.toInt=function(e){return parseInt(e,10)||0},o=t.clone=function(e){if(e){if(e.constructor===Array)return e.map(o);if("object"==typeof e){var t={};for(var n in e)t[n]=o(e[n]);return t}return e}return null};t.extend=function(e,t){var n=o(e);for(var a in t)n[a]=o(t[a]);return n},t.isEditable=function(e){return r.matches(e,"input,[contenteditable]")||r.matches(e,"select,[contenteditable]")||r.matches(e,"textarea,[contenteditable]")||r.matches(e,"button,[contenteditable]")},t.removePsClasses=function(e){for(var t=a.list(e),n=0;n<t.length;n++){var r=t[n];0===r.indexOf("ps-")&&a.remove(e,r)}},t.outerWidth=function(e){return s(r.css(e,"width"))+s(r.css(e,"paddingLeft"))+s(r.css(e,"paddingRight"))+s(r.css(e,"borderLeftWidth"))+s(r.css(e,"borderRightWidth"))},t.startScrolling=function(e,t){a.add(e,"ps-in-scrolling"),void 0!==t?a.add(e,"ps-"+t):(a.add(e,"ps-x"),a.add(e,"ps-y"))},t.stopScrolling=function(e,t){a.remove(e,"ps-in-scrolling"),void 0!==t?a.remove(e,"ps-"+t):(a.remove(e,"ps-x"),a.remove(e,"ps-y"))},t.env={isWebKit:"WebkitAppearance"in document.documentElement.style,supportsTouch:"ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch,supportsIePointer:null!==window.navigator.msMaxTouchPoints}},1271:function(e,t,n){"use strict";var a,r,s=n(1267),o=function(e){var t=document.createEvent("Event");return t.initEvent(e,!0,!0),t};e.exports=function(e,t,n){if(void 0===e)throw"You must provide an element to the update-scroll function";if(void 0===t)throw"You must provide an axis to the update-scroll function";if(void 0===n)throw"You must provide a value to the update-scroll function";"top"===t&&n<=0&&(e.scrollTop=n=0,e.dispatchEvent(o("ps-y-reach-start"))),"left"===t&&n<=0&&(e.scrollLeft=n=0,e.dispatchEvent(o("ps-x-reach-start")));var i=s.get(e);"top"===t&&n>=i.contentHeight-i.containerHeight&&((n=i.contentHeight-i.containerHeight)-e.scrollTop<=1?n=e.scrollTop:e.scrollTop=n,e.dispatchEvent(o("ps-y-reach-end"))),"left"===t&&n>=i.contentWidth-i.containerWidth&&((n=i.contentWidth-i.containerWidth)-e.scrollLeft<=1?n=e.scrollLeft:e.scrollLeft=n,e.dispatchEvent(o("ps-x-reach-end"))),a||(a=e.scrollTop),r||(r=e.scrollLeft),"top"===t&&n<a&&e.dispatchEvent(o("ps-scroll-up")),"top"===t&&n>a&&e.dispatchEvent(o("ps-scroll-down")),"left"===t&&n<r&&e.dispatchEvent(o("ps-scroll-left")),"left"===t&&n>r&&e.dispatchEvent(o("ps-scroll-right")),"top"===t&&(e.scrollTop=a=n,e.dispatchEvent(o("ps-scroll-y"))),"left"===t&&(e.scrollLeft=r=n,e.dispatchEvent(o("ps-scroll-x")))}},1272:function(e,t,n){"use strict";var a=n(0),r=(n(3),n(879)),s=n(19),o=n(40),i=n(154),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["Component"]),c(t,[{key:"render",value:function(){var e=this.props.asset.get("symbol"),t=a.createElement(i.a,{name:e,noTip:!0});return this.props.noLink?t:a.createElement(r.a,{to:"/asset/"+e+"/"},t)}}]),t}();l.propTypes={asset:s.a.ChainObject.isRequired},t.a=Object(o.a)(l)},1273:function(e,t,n){"use strict";var a={};a.e=function(e,t){var n=document.createElement(e);return n.className=t,n},a.appendTo=function(e,t){return t.appendChild(e),e},a.css=function(e,t,n){return"object"==typeof t?function(e,t){for(var n in t){var a=t[n];"number"==typeof a&&(a=a.toString()+"px"),e.style[n]=a}return e}(e,t):void 0===n?function(e,t){return window.getComputedStyle(e)[t]}(e,t):function(e,t,n){return"number"==typeof n&&(n=n.toString()+"px"),e.style[t]=n,e}(e,t,n)},a.matches=function(e,t){return void 0!==e.matches?e.matches(t):void 0!==e.matchesSelector?e.matchesSelector(t):void 0!==e.webkitMatchesSelector?e.webkitMatchesSelector(t):void 0!==e.mozMatchesSelector?e.mozMatchesSelector(t):void 0!==e.msMatchesSelector?e.msMatchesSelector(t):void 0},a.remove=function(e){void 0!==e.remove?e.remove():e.parentNode&&e.parentNode.removeChild(e)},a.queryChildren=function(e,t){return Array.prototype.filter.call(e.childNodes,function(e){return a.matches(e,t)})},e.exports=a},1274:function(e,t,n){"use strict";var a;n.d(t,"c",function(){return u}),n.d(t,"b",function(){return p}),n.d(t,"a",function(){return m}),n.d(t,"d",function(){return h});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();function s(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i,c={BTC:"https://live.blockcypher.com/btc/tx/#{txid}",USDT:"https://www.omniexplorer.info/tx/#{txid}",ETH:"https://etherscan.io/tx/#{txid}",XRP:"https://xrpcharts.ripple.com/#/transactions/#{txid}",GAS:"https://neoscan.io/transaction/#{txid}",EOS:"https://eosflare.io/tx/#{txid}",LTC:"https://chain.so/tx/LTC/#{txid}",QTUM:"https://explorer.qtum.org/tx/#{txid}"},l={ERC20:"https://etherscan.io/token/#{contract}"},u="https://gateway.cybex.io/gateway",p="https://gateway-query.cybex.io/",m="CybexGateway";!function(e){e[e.ERC20=0]="ERC20",e[e.ETH=1]="ETH",e[e.BTC=2]="BTC",e[e.USDT=3]="USDT",e[e.EOS=4]="EOS",e[e.LTC=5]="LTC",e[e.QTUM=6]="QTUM",e[e.NEO=7]="NEO",e[e.XRP=8]="XRP"}(i||(i={}));var d=function(){function e(t,n,a){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};o(this,e),this.asset=t,this.type=n,this.protocol=a,this.options=r,this.isDisabled=!1,this.contractExplorer=r.contractAddress?this.getExplorerUrlByContract(r.contractAddress):"","JCT"===n&&(this.isDisabled=!0)}return r(e,[{key:"getExplorerUrlByTx",value:function(t){if(!e.ExplorerAddress[this.protocol])return"";try{return(this.options.specificExplorer||e.ExplorerAddress[this.protocol]||"").replace("#{txid}",t)}catch(e){return""}}},{key:"getExplorerUrlByContract",value:function(t){if(!e.ContractAddress[this.protocol])return"";try{return(this.options.specificContractExplorer||e.ContractAddress[this.protocol]).replace("#{contract}",t)}catch(e){return""}}}]),e}();d.ExplorerAddress=(s(a={},i.BTC,c.BTC),s(a,i.USDT,c.USDT),s(a,i.ERC20,c.ETH),s(a,i.ETH,c.ETH),s(a,i.EOS,c.EOS),s(a,i.LTC,c.LTC),s(a,i.QTUM,c.QTUM),s(a,i.XRP,c.XRP),s(a,i.NEO,c.GAS),a),d.ContractAddress=s({},i.ERC20,l.ERC20);var h={GATEWAY_ACCOUNT:"cybex-jadegateway",ADDRESS_TYPES:{"JADE.ETH":new d("JADE.ETH","ETH",i.ETH,{name:"Ethereum"}),"JADE.BTC":new d("JADE.BTC","BTC",i.BTC,{name:"Bitcoin"}),"JADE.LTC":new d("JADE.LTC","LTC",i.LTC,{name:"Litecoin"}),"JADE.EOS":new d("JADE.EOS","EOS",i.EOS,{name:"EOS"}),"JADE.XRP":new d("JADE.XRP","XRP",i.XRP,{name:"Ripple"}),"JADE.USDT":new d("JADE.USDT","USDT",i.USDT,{name:"Tether"}),"JADE.LHT":new d("JADE.LHT","LHT",i.ERC20,{name:"LongHash"}),"JADE.INK":new d("JADE.INK","INK",i.ERC20,{name:"Ink [QTUM]",contractAddress:"0xf4c90e18727c5c76499ea6369c856a6d61d3e92e"}),"JADE.BAT":new d("JADE.BAT","BAT",i.ERC20,{name:"Basic Attention Token",contractAddress:"0x0d8775f648430679a709e98d2b0cb6250d2887ef"}),"JADE.OMG":new d("JADE.OMG","OMG",i.ERC20,{name:"OmiseGO",contractAddress:"0xd26114cd6ee289accf82350c8d8487fedb8a0c07"}),"JADE.SNT":new d("JADE.SNT","SNT",i.ERC20,{name:"Status",contractAddress:"0x744d70fdbe2ba4cf95131626614a1763df805b9e"}),"JADE.NAS":new d("JADE.NAS","NAS",i.ERC20,{name:"Nebulas",contractAddress:"0x5d65d971895edc438f465c17db6992698a52318d"}),"JADE.KNC":new d("JADE.KNC","KNC",i.ERC20,{name:"Kyber Network",contractAddress:"0xdd974d5c2e2928dea5f71b9825b8b646686bd200"}),"JADE.PAY":new d("JADE.PAY","PAY",i.ERC20,{name:"TenX",contractAddress:"0xb97048628db6b661d4c2aa833e95dbe1a905b280"}),"JADE.GET":new d("JADE.GET","GET",i.ERC20,{name:"Global Escrow Token, Themis",contractAddress:"0x60c68a87be1e8a84144b543aacfa77199cd3d024"}),"JADE.MAD":new d("JADE.MAD","MAD",i.ERC20,{name:"MAD Network",contractAddress:"0x5b09a0371c1da44a8e24d36bf5deb1141a84d875"}),"JADE.TCT":new d("JADE.TCT","TCT",i.ERC20,{name:"TokenClub",contractAddress:"0x4824a7b64e3966b0133f4f4ffb1b9d6beb75fff7"}),"JADE.RING":new d("JADE.RING","RING",i.ERC20,{name:"Evolution Land Global Token",contractAddress:"0x9469D013805bFfB7D3DEBe5E7839237e535ec483"}),"JADE.MXC":new d("JADE.MXC","MXC",i.ERC20,{name:"Machine Xchange Coin",contractAddress:"0x5Ca381bBfb58f0092df149bD3D243b08B9a8386e"}),"JADE.CENNZ":new d("JADE.CENNZ","CENNZ",i.ERC20,{name:"Centrality",contractAddress:"0x1122b6a0e00dce0563082b6e2953f3a943855c1f"}),"JADE.NASH":new d("JADE.NASH","NASH",i.ERC20,{name:"NeoWorld Cash",contractAddress:"0x4b94c8567763654101f690cf4d54957206383b75"}),"JADE.NWT":new d("JADE.NWT","NWT",i.ERC20,{name:"NeoWorld Token",contractAddress:"0x179201b6d8f1d984fae733313a5035e20d4f4869"}),"JADE.POLY":new d("JADE.POLY","POLY",i.ERC20,{name:"Polymath",contractAddress:"0x9992eC3cF6A55b00978cdDF2b27BC6882d88D1eC"}),"JADE.MCO":new d("JADE.MCO","MCO",i.ERC20,{name:"Monaco",contractAddress:"0xb63b606ac810a52cca15e44bb630fd42d8d1d83d"}),"JADE.JCT":new d("JADE.JCT","JCT",i.ERC20,{name:"JCT",contractAddress:"0x9288d6b823927f528aea244c5fa71a356b807112"}),"JADE.HER":new d("JADE.HER","HER",i.ERC20,{name:"Herdius",contractAddress:"0x9ae559ac062de221eb5198d90c27e45e85fcaab2"}),"JADE.CTXC":new d("JADE.CTXC","CTXC",i.ERC20,{name:"Cortex",contractAddress:"0xea11755ae41d889ceec39a63e6ff75a02bc1c00d"}),"JADE.NES":new d("JADE.NES","NES",i.ERC20,{name:"Genesis Space",contractAddress:"0xa74ae2d3a4c3f6d9454634fee91dc7aab6724cf9"}),"JADE.PPT":new d("JADE.PPT","PPT",i.ERC20,{name:"Populous",contractAddress:"0xd4fa1460f537bb9085d22c7bccb5dd450ef28e3a"}),"JADE.RHOC":new d("JADE.RHOC","RHOC",i.ERC20,{name:"RChain",contractAddress:"0x168296bb09e24a88805cb9c33356536b980d3fc5"}),"JADE.MKR":new d("JADE.MKR","MKR",i.ERC20,{name:"Maker",contractAddress:"0x9f8f72aa9304c8b593d555f12ef6589cc3a579a2"}),"JADE.FUN":new d("JADE.FUN","FUN",i.ERC20,{name:"FunFair",contractAddress:"0x419d0d8bdd9af5e606ae2232ed285aff190e711b"}),"JADE.MVP":new d("JADE.MVP","MVP",i.ERC20,{name:"Merculet",contractAddress:"0x8a77e40936bbc27e80e9a3f526368c967869c86d"}),"JADE.GNT":new d("JADE.GNT","GNT",i.ERC20,{name:"Golem",contractAddress:"0xa74476443119a942de498590fe1f2454d7d4ac0d"}),"JADE.DPY":new d("JADE.DPY","DPY",i.ERC20,{name:"Delphy",contractAddress:"0x6c2adc2073994fb2ccc5032cc2906fa221e9b391"}),"JADE.GNX":new d("JADE.GNX","GNX",i.ERC20,{name:"Genaro Network",contractAddress:"0x6ec8a24cabdc339a06a172f8223ea557055adaa5"}),"JADE.KEY":new d("JADE.KEY","KEY",i.ERC20,{name:"Bihu KEY",contractAddress:"0x4cd988afbad37289baaf53c13e98e2bd46aaea8c"}),"JADE.MT":new d("JADE.MT","MT",i.ERC20,{name:"MyToken",contractAddress:"0x9b4e2b4b13d125238aa0480dd42b4f6fc71b37cc"}),"JADE.ENG":new d("JADE.ENG","ENG",i.ERC20,{name:"Enigma",contractAddress:"0xf0ee6b27b759c9893ce4f094b49ad28fd15a23e4"})}}},1275:function(e,t,n){"use strict";var a=n(9),r=n(10),s=n(8),o=n(155),i=n(1293),c=n(34),l=n(1274),u=n(1),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var m=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.op=t,this.signer=""}return p(e,[{key:"addSigner",value:function(e){this.signer=e}}]),e}();n.d(t,"a",function(){return b}),n.d(t,"c",function(){return _}),n.d(t,"b",function(){return y});var d=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var h=function(e,t,n,a){return new(n||(n=Promise))(function(r,s){function o(e){try{c(a.next(e))}catch(e){s(e)}}function i(e){try{c(a.throw(e))}catch(e){s(e)}}function c(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(o,i)}c((a=a.apply(e,t||[])).next())})},f=Object(o.a)("GatewayActions"),b="DEPOSIT_MODAL_ID",_="WITHDRAW_MODAL_ID",g=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=[],a=!0,s=!1,o=void 0;try{for(var i,c=e[Symbol.iterator]();!(a=(i=c.next()).done);a=!0){var l=i.value,u=r.a.getPrivateKey(l);if(u&&(n.push(u),n.length>=t))break}}catch(e){s=!0,o=e}finally{try{!a&&c.return&&c.return()}finally{if(s)throw o}}return n},v=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return d(e,[{key:"showDepositModal",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:b;return h(this,void 0,void 0,regeneratorRuntime.mark(function a(){var r;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(r=l.d.ADDRESS_TYPES[t]&&l.d.ADDRESS_TYPES[t].type){a.next=3;break}return a.abrupt("return",c.a.error("No suitable asset for "+t+" to be deposited"));case 3:return a.next=5,this.updateDepositAddress(e,r);case 5:if(a.sent){a.next=8;break}return a.abrupt("return");case 8:this.openModal(n);case 9:case"end":return a.stop()}},a,this)}))}},{key:"showWithdrawModal",value:function(e){return h(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(f("Withdraw: ",e),n=l.d.ADDRESS_TYPES[e]&&l.d.ADDRESS_TYPES[e].type){t.next=4;break}return t.abrupt("return",c.a.error("No suitable asset for "+e+" to be withdrawn"));case 4:return t.next=6,this.updateWithdrawInfo(e,n);case 6:if(t.sent){t.next=9;break}return t.abrupt("return");case 9:this.openModal(_);case 10:case"end":return t.stop()}},t,this)}))}},{key:"updateDepositAddress",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return h(this,void 0,void 0,regeneratorRuntime.mark(function a(){var r,s,o;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return r=void 0,f("Update Deposit Address: ",e,t,n),a.prev=2,a.next=5,Object(i.a)(e,t,n);case 5:s=r=a.sent,o=s.address,f("Address: ",o),a.next=15;break;case 10:return a.prev=10,a.t0=a.catch(2),f(a.t0),c.a.error(a.t0.message),a.abrupt("return",!1);case 15:return this.afterUpdateDepositInfo(r),a.abrupt("return",r);case 17:case"end":return a.stop()}},a,this,[[2,10]])}))}},{key:"updateWithdrawInfo",value:function(e,t){return h(this,void 0,void 0,regeneratorRuntime.mark(function n(){var a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return a=void 0,n.prev=1,n.next=4,Object(i.b)(t);case 4:a=n.sent,f("WithdrawLimit: ",a),n.next=13;break;case 8:return n.prev=8,n.t0=n.catch(1),f(n.t0),c.a.error(n.t0.message),n.abrupt("return",!1);case 13:return this.afterUpdateWithdrawInfo(Object.assign({asset:e},a)),n.abrupt("return",!0);case 15:case"end":return n.stop()}},n,this,[[1,8]])}))}},{key:"queryFundRecords",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:200;return h(this,void 0,void 0,regeneratorRuntime.mark(function r(){var s,o,c,l;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return f("[QueryFundRecord]",e),s=new m({accountName:e.get("name"),offset:n,size:a}),t.accountName===e.get("name")&&t.signer&&s.addSigner(t.signer),r.next=5,Object(i.d)(s);case 5:if(o=r.sent){r.next=15;break}return r.next=9,this.loginGatewayQuery(e);case 9:return c=r.sent,l=c.signer,s.addSigner(l),r.next=14,Object(i.d)(s);case 14:o=r.sent;case 15:o&&this.updateFundRecords(o);case 16:case"end":return r.stop()}},r,this)}))}},{key:"updateFundRecords",value:function(e){return e}},{key:"loginGatewayQuery",value:function(e){return h(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n,a,r,o,c,l,p;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(f("[LoginGatewayQuery]",e),f("[LoginGatewayQuery]",s.b.getSetting("walletLockTimeout")),n=new m({accountName:e.get("name"),expiration:Date.now()+1e3*s.b.getSetting("walletLockTimeout")}),a=u.p.fund_query.fromObject(n.op),e.getIn(["active","weight_threshold"]),r=e.getIn(["active","key_auths"]).filter(function(e){return e.get(1)>=1}).map(function(e){return e.get(0)}).toJS(),o=g(r)[0]){t.next=9;break}throw Error("Privkey Not Found");case 9:return f("[LoginGatewayQuery privKey]",e.getIn(["options","memo_key"]),o),c=u.p.fund_query.toBuffer(a),l=u.k.signBuffer(c,o).toHex(),f("[LoginGatewayQuery Signed]",l),n.addSigner(l),t.next=16,Object(i.c)(n);case 16:return p=t.sent,f("[LoginGatewayQuery LoginRes]",p),p&&this.updateLogin(p),t.abrupt("return",p);case 20:case"end":return t.stop()}},t,this)}))}},{key:"updateLogin",value:function(e){return e}},{key:"afterUpdateWithdrawInfo",value:function(e){return e}},{key:"afterUpdateDepositInfo",value:function(e){return e}},{key:"closeModal",value:function(e){return e}},{key:"openModal",value:function(e){return e}}]),e}(),y=a.a.createActions(v);t.d=y},1276:function(e,t,n){"use strict";n.d(t,"b",function(){return _}),n.d(t,"a",function(){return b});var a=n(0),r=n(3),s=n(2),o=n.n(s),i=n(28),c=n.n(i),l=n(16),u=n(18),p=n(8),m=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();function d(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var b=function(e){function t(){return d(this,t),h(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return f(t,a["Component"]),m(t,[{key:"render",value:function(){var e=this.props,t=e.isActive,n=e.index,r=e.changeTab,s=e.title,i=e.className,l=e.disabled,u=c()({"is-active":t},i);return this.props.collapsed?a.createElement("option",{value:n},"string"==typeof s&&s.indexOf(".")>0?a.createElement(o.a,{className:"tab-title",content:s}):a.createElement("span",{className:"tab-title"},s)):a.createElement("li",{className:u,onClick:l?null:r.bind(this,n)},a.createElement("a",null,"string"==typeof s&&s.indexOf(".")>0?a.createElement(o.a,{className:"tab-title",content:s}):a.createElement("span",{className:"tab-title"},s),this.props.subText?a.createElement("div",{className:"tab-subtext"},this.props.subText):null))}}]),t}();b.propTypes={changeTab:r.func,isActive:r.bool.isRequired,index:r.number.isRequired,className:r.string},b.defaultProps={isActive:!1,index:0,className:""};var _=function(e){function t(e){d(this,t);var n=h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.state={activeTab:e.setting?e.viewSettings.get(e.setting,e.defaultActiveTab):e.defaultActiveTab,width:window.innerWidth},n._setDimensions=n._setDimensions.bind(n),n}return f(t,a["Component"]),m(t,[{key:"componentDidMount",value:function(){this._setDimensions(),window.addEventListener("resize",this._setDimensions,{capture:!1,passive:!0})}},{key:"componentWillReceiveProps",value:function(e){var t=e.viewSettings.get(e.setting);t!==this.props.viewSettings.get(this.props.setting)&&this.setState({activeTab:t})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this._setDimensions)}},{key:"_setDimensions",value:function(){var e=window.innerWidth;e!==this.state.width&&this.setState({width:e})}},{key:"_changeTab",value:function(e){e!==this.state.activeTab&&(this.props.setting&&u.a.changeViewSetting(function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},this.props.setting,e)),this.setState({activeTab:e}),this.props.onChangeTab&&this.props.onChangeTab(e))}},{key:"render",value:function(){var e=this,t=this.props,n=t.children,r=t.contentClass,s=t.tabsClass,i=t.style,l=t.segmented,u=this.state.width<900,p=null,m=[],d=a.Children.map(n,function(t,n){if(!t)return null;if(u&&t.props.disabled)return null;var r=n===e.state.activeTab;return r&&(p=t.props.children),a.cloneElement(t,{collapsed:u,isActive:r,changeTab:e._changeTab.bind(e),index:n})}).filter(function(e){return e&&m.push(e.props.index),null!==e});return p||(p=d[0].props.children),a.createElement("div",{className:c()(this.props.actionButtons?"with-buttons":"",this.props.className)},a.createElement("div",{className:"service-selector"},a.createElement("ul",{style:i,className:c()("button-group no-margin",s,{segmented:l})},u?a.createElement("li",{style:{paddingLeft:10,paddingRight:10,minWidth:"15rem"}},a.createElement("select",{value:this.state.activeTab,style:{marginTop:10,marginBottom:10},className:"cyb-select",onChange:function(t){e._changeTab(parseInt(t.target.value,10))}},d.map(function(e){return a.createElement(o.a,{key:e.key,component:"option",content:e.props.title,value:e.props.index})}))):d,this.props.actionButtons?a.createElement("li",{className:"tabs-action-buttons"},this.props.actionButtons):null)),a.createElement("div",{className:r+" tab-content"},p))}}]),t}();_.propTypes={setting:r.string,defaultActiveTab:r.number,segmented:r.bool},_.defaultProps={active:0,defaultActiveTab:0,segmented:!0,contentClass:"",style:{}},_=Object(l.connect)(_,{listenTo:function(){return[p.b]},getProps:function(){return{viewSettings:p.b.getState().viewSettings}}})},1278:function(e,t,n){"use strict";var a=n(9),r=n(4),s=n(17),o=n(133),i=n(134),c=n(10),l=n(1),u=n(59),p=n.n(u),m=n(121),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var h={},f=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return d(e,[{key:"fundPool",value:function(e,t,n,a){var r=o.a.new_transaction(),i=s.a.get_asset_precision(t.get("precision"));return r.add_type_operation("asset_fund_fee_pool",{fee:{amount:0,asset_id:"1.3.0"},from_account:e,asset_id:n.get("id"),amount:a*i}),function(e){return c.a.process_transaction(r,null,!0).then(function(t){e(!0)}).catch(function(t){console.log("[AssetActions.js:150] ----- fundPool error -----\x3e",t),e(!1)})}}},{key:"claimPoolFees",value:function(e,t,n){var a=o.a.new_transaction(),r=s.a.get_asset_precision(t.get("precision"));return a.add_type_operation("asset_claim_fees",{fee:{amount:0,asset_id:0},issuer:e,amount_to_claim:{asset_id:t.get("id"),amount:n*r}}),function(e){return c.a.process_transaction(a,null,!0).then(function(t){e(!0)}).catch(function(t){console.log("[AssetActions.js:150] ----- claimFees error -----\x3e",t),e(!1)})}}},{key:"createAsset",value:function(e,t,n,a,r,i,u,m,d){console.log("create asset:",t,"flags:",n,"isBitAsset:",i,"bitasset_opts:",m);var h=o.a.new_transaction(),f=s.a.get_asset_precision(t.precision);p.a.config({DECIMAL_PLACES:t.precision});var b=new p.a(t.max_supply).times(f).toString(),_=new p.a(t.max_market_fee||0).times(f).toString(),g=(Date.now(),null);t.vesting_period&&(g=[[1,{vesting_period:1*t.vesting_period}]]);var v=s.a.get_asset_precision(l.b.getAsset(r.base.asset_id).get("precision")),y={fee:{amount:0,asset_id:0},issuer:e,symbol:t.symbol,precision:parseInt(t.precision,10),common_options:{max_supply:b,market_fee_percent:100*t.market_fee_percent||0,max_market_fee:_,issuer_permissions:a,flags:n,core_exchange_rate:{base:{amount:r.base.amount*v,asset_id:r.base.asset_id},quote:{amount:r.quote.amount*f,asset_id:"1.3.1"}},whitelist_authorities:[],blacklist_authorities:[],whitelist_markets:[],blacklist_markets:[],description:d,extensions:g},is_prediction_market:u,extensions:null};return i&&(y.bitasset_opts=m),h.add_type_operation("asset_create",y),function(e){return c.a.process_transaction(h,null,!0).then(function(t){e(!0)}).catch(function(t){console.log("[AssetActions.js:150] ----- createAsset error -----\x3e",t),e(!1)})}}},{key:"updateAsset",value:function(e,t,n,a,r,i,u,m,d,h,f,b){var _=o.a.new_transaction(),g=s.a.get_asset_precision(r.get("precision"));p.a.config({DECIMAL_PLACES:r.get("precision")});var v=new p.a(n.max_supply).times(g).toString(),y=new p.a(n.max_market_fee||0).times(g).toString(),E=l.b.getAsset(a.quote.asset_id),w=s.a.get_asset_precision(E.get("precision")),k=l.b.getAsset(a.base.asset_id),A=s.a.get_asset_precision(k.get("precision")),C=new p.a(a.quote.amount).times(w).toString(),O=new p.a(a.base.amount).times(A).toString();console.log("auths:",b);var x={fee:{amount:0,asset_id:0},asset_to_update:r.get("id"),extensions:r.get("extensions"),issuer:e,new_issuer:t,new_options:{max_supply:v,max_market_fee:y,market_fee_percent:100*n.market_fee_percent,description:f,issuer_permissions:u,flags:i,whitelist_authorities:b.whitelist_authorities.toJS(),blacklist_authorities:b.blacklist_authorities.toJS(),whitelist_markets:b.whitelist_markets.toJS(),blacklist_markets:b.blacklist_markets.toJS(),extensions:r.getIn(["options","extensions"]),core_exchange_rate:{quote:{amount:C,asset_id:a.quote.asset_id},base:{amount:O,asset_id:a.base.asset_id}}}};if(e!==t&&t||delete x.new_issuer,_.add_type_operation("asset_update",x),console.log("bitasset_opts:",d,"original_bitasset_opts:",h),m&&(d.feed_lifetime_sec!==h.feed_lifetime_sec||d.minimum_feeds!==h.minimum_feeds||d.force_settlement_delay_sec!==h.force_settlement_delay_sec||d.force_settlement_offset_percent!==h.force_settlement_offset_percent||d.maximum_force_settlement_volume!==h.maximum_force_settlement_volume||d.short_backing_asset!==h.short_backing_asset)){var j={fee:{amount:0,asset_id:0},asset_to_update:r.get("id"),issuer:e,new_options:d};_.add_type_operation("asset_update_bitasset",j)}return c.a.process_transaction(_,null,!0).then(function(e){return!0}).catch(function(e){return console.log("[AssetActions.js:150] ----- createAsset error -----\x3e",e),!1})}},{key:"issueAsset",value:function(e,t,n,a,r,s){i.a.issue_asset(e,t,n,a,r,s)}},{key:"getAssetList",value:function(e,t){var n=e+"_"+t;return function(a){if(!h[n])return h[n]=!0,a({loading:!0}),r.a.instance().db_api().exec("list_assets",[e,t]).then(function(e){var t=[],s=[];(e=e.filter(function(e){return!Object(m.a)(e.symbol)})).forEach(function(e){l.b._updateObject(e,!1),s.push(e.dynamic_asset_data_id),e.bitasset_data_id&&t.push(e.bitasset_data_id)});var o=r.a.instance().db_api().exec("get_objects",[s]),i=t.length>0?r.a.instance().db_api().exec("get_objects",[t]):null;Promise.all([o,i]).then(function(t){delete h[n],a({assets:e,dynamic:t[0],bitasset_data:t[1],loading:!1})}),a({loading:!1}),delete h[n]})}}},{key:"lookupAsset",value:function(e,t){var n=l.b.getAsset(e);return n?{assets:[n],searchID:t,symbol:e}:function(n){setTimeout(function(){var a=l.b.getAsset(e);a&&n({assets:[a],searchID:t,symbol:e})},200)}}},{key:"reserveAsset",value:function(e,t,n){var a=o.a.new_transaction();return a.add_type_operation("asset_reserve",{fee:{amount:0,asset_id:0},amount_to_reserve:{amount:e,asset_id:t},payer:n,extensions:[]}),c.a.process_transaction(a,null,!0).then(function(e){return!0}).catch(function(e){return console.log("[AssetActions.js:150] ----- reserveAsset error -----\x3e",e),!1})}}]),e}();t.a=a.a.createActions(f)},1279:function(e,t,n){"use strict";var a=n(0),r=n(3),s=n(73),o=n(1),i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var c=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["Component"]),i(t,[{key:"shouldComponentUpdate",value:function(e){return e.time!==this.props.time}},{key:"render",value:function(){var e=this.props,t=e.time,n=e.chain_time?o.b.getEstimatedChainTimeOffset():0;if(!t)return null;"string"!=typeof t||-1!==t.indexOf("+")||/Z$/.test(t)||(t+="Z");var r=Math.round(((new Date).getTime()-new Date(t).getTime()+n)/1e3),i=void 0;return i=r<60?500:r<3600?3e4:18e5,a.createElement("span",{className:"tooltip inline-block "+this.props.className,ref:"timeago_ttip_"+t,"data-tip":new Date(t),"data-place":"bottom"},a.createElement(s.c,{updateInterval:i,value:new Date(t).getTime()+.75*n,initialNow:Date.now()}))}}]),t}();c.propTypes={time:r.any.isRequired,chain_time:r.bool,component:r.element,className:r.string},c.defaultProps={chain_time:!0},t.a=c},1280:function(e,t,n){"use strict";var a=n(0),r=n(3),s=n(2),o=n.n(s),i=n(19),c=n(40),l=n(80),u=n(1287),p=n(5),m=n.n(p),d=n(13),h=n.n(d),f=n(82),b=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var y=function(e){function t(){return _(this,t),g(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return v(t,a["Component"]),b(t,[{key:"render",value:function(){return 0===this.props.assets.length?null:a.createElement(u.a,{entries:this.props.assets.map(function(e){return e&&e.get("symbol")}).filter(function(e){return!!e}),values:this.props.assets.reduce(function(e,t){return t&&t.get("symbol")&&(e[t.get("symbol")]=t),e},{}),singleEntry:this.props.assets[0]?a.createElement(l.a,{asset:this.props.assets[0].get("id"),amount:0,hide_amount:!0}):null,value:this.props.value,onChange:this.props.onChange})}}]),t}();y.propTypes={assets:i.a.ChainAssetsList,value:r.string,onChange:r.func},y=Object(c.a)(y);var E=function(e){function t(){return _(this,t),g(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return v(t,a["Component"]),b(t,[{key:"componentDidMount",value:function(){this.onAssetChange(this.props.asset)}},{key:"formatAmount",value:function(e){return e||(e=""),"number"==typeof e&&(e=e.toString()),e.trim().replace(/,/g,"")}},{key:"_onChange",value:function(e){var t=e.target.value;this.props.onChange({amount:t,asset:this.props.asset})}},{key:"onAssetChange",value:function(e){this.props.onChange({amount:this.props.amount,asset:e})}},{key:"render",value:function(){var e=this.props.error?h.a.translate(this.props.error):this.formatAmount(this.props.amount),t=this.props.isNumber;return a.createElement("div",{className:"amount-selector",style:this.props.style},a.createElement("label",{className:"right-label"},this.props.display_balance),a.createElement("label",{className:"left-label"},a.createElement(o.a,{content:this.props.label}),this.props.labelTooltip&&a.createElement(f.k,{id:this.props.labelTooltip.id},this.props.labelTooltip.component)),a.createElement("div",{className:"inline-label input-wrapper"},t?a.createElement(f.h,{disabled:this.props.disabled,type:"number",valueFromOuter:!0,value:e,size:"small",placeholder:this.props.placeholder,onChange:this._onChange.bind(this),tabIndex:this.props.tabIndex,style:{width:"100%",marginBottom:0}}):a.createElement(f.h,{disabled:this.props.disabled,type:"text",valueFromOuter:!0,size:"small",value:e||"",placeholder:this.props.placeholder,onChange:this._onChange.bind(this),tabIndex:this.props.tabIndex,style:{width:"100%",marginBottom:0}}),a.createElement("div",{className:"form-label select floating-dropdown"},a.createElement(y,{ref:this.props.refCallback,value:this.props.asset.get("symbol"),assets:m.a.List(this.props.assets),onChange:this.onAssetChange.bind(this)}))))}}]),t}();E.propTypes={label:r.string,asset:i.a.ChainAsset.isRequired,assets:r.array,amount:r.any,placeholder:r.string,onChange:r.func.isRequired,tabIndex:r.number,error:r.string},E.defaultProps={disabled:!1},E=Object(c.a)(E),t.a=E},1281:function(e,t){e.exports={account_listing:{no_listing:0,white_listed:1,black_listed:2,white_and_black_listed:3}}},1282:function(e,t,n){"use strict";n.d(t,"a",function(){return d});var a=n(31),r=n(5),s=n(9),o=n(1275),i=n(1274),c=n(124),l=n(55),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var p=new l.a("__graphene__"),m=Object(c.a)("GatewayStore"),d=i.d.ADDRESS_TYPES,h=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={backedCoins:Object(r.Map)({JADE:d}),bridgeCoins:Object(r.Map)(Object(r.fromJS)(p.get("bridgeCoins",{}))),bridgeInputs:["btc","dash","eth","steem"],login:{accountName:"",signer:""},records:{total:0,records:[],offset:0,size:20},down:Object(r.Map)({}),modals:Object(r.Map)(),depositInfo:{},withdrawInfo:{}},e.bindListeners({handleDepositUpdate:o.b.afterUpdateDepositInfo,handleWithdrawUpdate:o.b.afterUpdateWithdrawInfo,handleLogin:o.b.updateLogin,handleRecordsUpdate:o.b.updateFundRecords,openModal:o.b.openModal,closeModal:o.b.closeModal}),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["a"]),u(t,[{key:"handleDepositUpdate",value:function(e){var t=d[e.asset]||{},n=Object.assign({},e,{meta:t});m("Open: ",d,n),this.setState({depositInfo:n})}},{key:"handleWithdrawUpdate",value:function(e){this.setState({withdrawInfo:e})}},{key:"handleLogin",value:function(e){this.setState({login:e})}},{key:"handleRecordsUpdate",value:function(e){e.records.forEach(function(e){e.hash||(e.hash=t.findHash(e))}),this.setState({records:e})}},{key:"openModal",value:function(e){this.setState({modals:this.state.modals.set(e,!0)})}},{key:"closeModal",value:function(e){this.setState({modals:this.state.modals.set(e,!1)})}}]),t}();h.findHash=function(e){return e.details&&e.details.length?e.details[e.details.length-1].hash:null};var f=s.a.createStore(h,"GatewayStore");t.b=f},1283:function(e,t,n){"use strict";var a=n(0),r=(n(3),n(13)),s=n.n(r),o=n(17),i=n(1268),c=n(1272),l=n(879),u=n(80),p=n(286),m=n(154),d=n(1),h=n(5),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var b=function(e,t,n,a){return new(n||(n=Promise))(function(r,s){function o(e){try{c(a.next(e))}catch(e){s(e)}}function i(e){try{c(a.throw(e))}catch(e){s(e)}}function c(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(o,i)}c((a=a.apply(e,t||[])).next())})},_=function(e){return b(void 0,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",new Promise(function t(n){var a=d.b.fetchObject(e,!1,!1);a?n(a):setTimeout(function(){t(n)},30)}));case 1:case"end":return t.stop()}},t,this)}))},g=function(e){return b(void 0,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.abrupt("return",_(e).then(function(e){return e.get("type")?_(e.get("type")).then(function(t){return e.set("tokenType",t)}):e}).then(function(e){return e.get("meta_id")?_(e.get("meta_id")).then(function(t){return e.set("meta",t.set("info",Object(h.Map)(JSON.parse(t.get("info")))))}):e}));case 1:case"end":return t.stop()}},t,this)}))},v=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.state={nft:null},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["PureComponent"]),f(t,[{key:"componentDidMount",value:function(){this.updateNFT(this.props.id)}},{key:"updateNFT",value:function(e){return b(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.t0=this,t.next=3,g(e);case 3:t.t1=t.sent,t.t2={nft:t.t1},t.t0.setState.call(t.t0,t.t2);case 6:case"end":return t.stop()}},t,this)}))}},{key:"render",value:function(){return window.nft=this.state.nft,this.state.nft?a.createElement("span",null,this.state.nft.get("symbol")||s.a.translate("nft_type."+this.state.nft.getIn(["meta","info","type"],"other"),{token:this.state.nft.getIn(["tokenType","symbol"],""),time:this.state.nft.get("expiration")||"",amount:this.state.nft.getIn(["meta","info","info"],{recs_amount:0}).recs_amount})):null}}]),t}(),y=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var E=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["Component"]),y(t,[{key:"shouldComponentUpdate",value:function(e){return!o.a.are_equal_shallow(e.keys,this.props.keys)}},{key:"linkToAccount",value:function(e){var t=this.props.noLink;return e?o.a.is_object_id(e)?a.createElement(i.a,{account:e,noLink:t}):t?a.createElement("span",null,e):a.createElement(l.a,{to:"/account/"+e+"/overview"},e):a.createElement("span",null,"-")}},{key:"linkToAsset",value:function(e){var t=this.props.noLink;return e?o.a.is_object_id(e)?a.createElement(c.a,{asset:e,noLink:t}):t?a.createElement(m.a,{name:e,noTip:!0}):a.createElement(l.a,{to:"/asset/"+e},a.createElement(m.a,{name:e,noTip:!0})):a.createElement("span",null,"-")}},{key:"linkToNFT",value:function(e){return a.createElement(v,{id:e})}},{key:"render",value:function(){var e=this,t=this.props,n=t.string,r=t.params,i=t.keys,c=s.a.translate(n,r),l=o.a.get_translation_parts(c);i.forEach(function(t){if(l.indexOf(t.arg)){var n=void 0;switch(t.type){case"account":n=e.linkToAccount(t.value);break;case"amount":n=a.createElement(u.a,{amount:t.value.amount,asset:t.value.asset_id,decimalOffset:t.decimalOffset});break;case"price":n=a.createElement(p.a,{base_asset:t.value.base.asset_id,base_amount:t.value.base.amount,quote_asset:t.value.quote.asset_id,quote_amount:t.value.quote.amount});break;case"asset":n=e.linkToAsset(t.value);break;case"nft":n=e.linkToNFT(t.value);break;default:n=t.value}l[l.indexOf(t.arg)]=n}});var m=l.map(function(e,t){return a.createElement("span",{key:t},e)});return a.createElement("span",null,m)}}]),t}();t.a=E},1284:function(e,t,n){},1285:function(e,t,n){"use strict";t.add=function(e,t){e.classList?e.classList.add(t):function(e,t){var n=e.className.split(" ");n.indexOf(t)<0&&n.push(t),e.className=n.join(" ")}(e,t)},t.remove=function(e,t){e.classList?e.classList.remove(t):function(e,t){var n=e.className.split(" "),a=n.indexOf(t);a>=0&&n.splice(a,1),e.className=n.join(" ")}(e,t)},t.list=function(e){return e.classList?Array.prototype.slice.apply(e.classList):e.className.split(" ")}},1286:function(e,t,n){"use strict";var a=n(0),r=(n(3),n(44)),s=n(39),o=n(13),i=n.n(o),c=n(93),l=n(16),u=n(157),p=n(17),m=n(81),d=n.n(m),h=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();function f(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var g=function(e){function t(e){f(this,t);var n=b(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._toggleFullText=function(){n.setState(function(e){return{full:!e.full}})},n.state={full:!1},n}return _(t,a["Component"]),h(t,[{key:"shouldComponentUpdate",value:function(e,t){return!p.a.are_equal_shallow(e.memo,this.props.memo)||e.wallet_locked!==this.props.wallet_locked||this.state.full!==t.full}},{key:"_toggleLock",value:function(e){e.preventDefault(),s.a.unlock().then(function(){console.log("unlocked"),d.a.rebuild()})}},{key:"render",value:function(){var e=this.props,t=e.memo,n=e.fullLength;if(!t)return null;var s=r.a.decodeMemo(t),o=s.text,l=s.isMine;if(!o&&l)return a.createElement("div",{className:"memo"},a.createElement("span",null,i.a.translate("transfer.memo_unlock")," "),a.createElement("a",{href:!0,onClick:this._toggleLock.bind(this)},a.createElement(c.a,{name:"locked"})));var u=o;return o&&!n&&!this.state.full&&o.length>35&&(o=o.substr(0,35)+"..."),o?a.createElement("div",{className:"memo",onClick:this._toggleFullText,style:{paddingTop:5,cursor:"help"}},a.createElement("span",{className:"inline-block","data-class":"memo-tip","data-tip":u!==o?u:null,"data-place":"bottom","data-offset":"{'bottom': 10}","data-html":!0},o)):null}}]),t}();g.defaultProps={fullLength:!1};var v=function(e){function t(){return f(this,t),b(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _(t,a["Component"]),h(t,[{key:"render",value:function(){return a.createElement(g,this.props)}}]),t}();t.a=Object(l.connect)(v,{listenTo:function(){return[u.a]},getProps:function(){return{wallet_locked:u.a.getState().locked}}})},1287:function(e,t,n){"use strict";var a=n(0),r=n(17),s=n(121),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var i=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.listener=!1,n.state={active:!1},n.onBodyClick=n.onBodyClick.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["Component"]),o(t,[{key:"componentDidMount",value:function(){this._setListener()}},{key:"shouldComponentUpdate",value:function(e,t){return!r.a.are_equal_shallow(e.entries,this.props.entries)||!r.a.are_equal_shallow(t,this.state)||e.value!==this.props.value}},{key:"_setListener",value:function(){(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props).entries.length>1&&!this.listener&&(this.listener=!0,document.body.addEventListener("click",this.onBodyClick,{capture:!1,passive:!0}))}},{key:"_removeListener",value:function(){document.body.removeEventListener("click",this.onBodyClick),this.listener=!1}},{key:"componentWillReceiveProps",value:function(e){1===e.entries.length?this._removeListener():e.entries.length>1&&this._setListener(e)}},{key:"componentWillUnmount",value:function(){this._removeListener()}},{key:"onBodyClick",value:function(e){var t=e.target,n=!1;do{if(t.classList&&t.classList.contains("dropdown")&&t.id===this.props.id){n=!0;break}}while(t=t.parentNode);n?e.stopPropagation():this.setState({active:!1})}},{key:"onChange",value:function(e,t){t.preventDefault(),t.stopPropagation(),this.props.onChange(e),this.setState({active:!1})}},{key:"_toggleDropdown",value:function(){this.setState({active:!this.state.active})}},{key:"render",value:function(){var e=this,t=this.props,n=t.entries,o=t.value,i=t.isAsset,c=this.state.active;if(0===n.length)return null;if(1==n.length)return a.createElement("div",{className:"dropdown-wrapper inactive"+(this.props.upperCase?" upper-case":"")},a.createElement("div",null,this.props.singleEntry?r.a.replaceName(this.props.singleEntry).name:r.a.replaceName(n[0]).name));var l=n.filter(function(e){return!Object(s.a)(e)}).map(function(t){return a.createElement("li",{className:e.props.upperCase?"upper-case":"",key:t,onClick:e.onChange.bind(e,e.props.values[t])},i?a.createElement("span",null,r.a.replaceName(t).name):a.createElement("span",null,t))});return a.createElement("div",{onClick:this._toggleDropdown.bind(this),className:"dropdown-wrapper"+(c?" active":"")+(this.props.upperCase?" upper-case":"")},a.createElement("div",{style:{paddingRight:15}},o?r.a.replaceName(o).name:a.createElement("span",{className:"hidden"},"A")),a.createElement("ul",{className:"dropdown",style:{overflow:n.length>9?"auto":"hidden"}},l))}}]),t}();i.defaultProps={isAsset:!0},t.a=i},1288:function(e,t,n){"use strict";var a=n(0),r=n(3),s=n(17),o=n(158),i=n(2),c=n.n(i),l=n(1),u=n(19),p=n(40),m=n(28),d=n.n(m),h=n(13),f=n.n(h),b=n(93),_=n(159),g=n(1287),v=n(295),y=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var E=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["Component"]),y(t,[{key:"getAccount",value:function(){return this.props.account}},{key:"getError",value:function(){var e=_.a.isKnownScammer(this.props.accountName),t=this.props.error;return t||!this.props.accountName||this.getNameType(this.props.accountName)||(t=f.a.translate("account.errors.invalid")),e||t}},{key:"getNameType",value:function(e){return e?"#"===e[0]&&s.a.is_object_id("1.2."+e.substring(1))?"id":l.d.is_account_name(e,!0)?"name":this.props.allowPubKey&&l.i.fromPublicKeyString(e)?"pubkey":null:null}},{key:"onInputChanged",value:function(e){var t=e.target.value.trim();this.props.allowUppercase||(t=t.toLowerCase());var n=t.replace("#","").match(/(?:\/account\/)(.*)(?:\/overview)/);n&&(t=n[1]),this.props.onChange&&t!==this.props.accountName&&this.props.onChange(t)}},{key:"onKeyDown",value:function(e){13===e.keyCode&&this.onAction(e)}},{key:"componentDidMount",value:function(){this.props.onAccountChanged&&this.props.account&&this.props.onAccountChanged(this.props.account)}},{key:"componentWillReceiveProps",value:function(e){this.props.onAccountChanged&&e.account&&e.account!==this.props.account&&this.props.onAccountChanged(e.account)}},{key:"onAction",value:function(e){e.preventDefault(),!this.props.onAction||this.getError()||this.props.disableActionButton||(this.props.account?this.props.onAction(this.props.account):"pubkey"===this.getNameType(this.props.accountName)&&this.props.onAction(this.props.accountName))}},{key:"render",value:function(){var e=this.getError(),t=this.getNameType(this.props.accountName),n=void 0;this.props.allowPubKey?"pubkey"===t&&(n="Public Key"):this.props.account?"name"===t?n="#"+this.props.account.get("id").substring(4):"id"===t&&(n=this.props.account.get("name")):!e&&this.props.accountName&&(e=f.a.translate("account.errors.unknown"));var r=null;this.props.account&&(r=f.a.translate("account.member."+l.b.getAccountMemberStatus(this.props.account)));var s=d()("button",{disabled:!(this.props.account||"pubkey"===t)||e||this.props.disableActionButton});return a.createElement("div",{className:"account-selector",style:this.props.style},a.createElement("div",{className:"content-area"},this.props.label?a.createElement("div",{className:"header-area"},e?null:a.createElement("label",{className:"right-label"},a.createElement("span",null,r),"  "," ",a.createElement("span",null,n)),a.createElement(c.a,{className:"left-label",component:"label",content:this.props.label})):null,a.createElement("div",{className:"input-area"},a.createElement("div",{className:"inline-label input-wrapper"},"pubkey"===t?a.createElement("div",{className:"account-image"},a.createElement(b.a,{name:"key",size:"4x"})):this.props.hideImage?null:a.createElement(o.a,{size:{height:this.props.size||80,width:this.props.size||80},style:{display:"flex",alignItems:"center",justifyContent:"center"},account:this.props.account?this.props.account.get("name"):null,custom_image:null}),a.createElement(v.a,{style:{textTransform:"lowercase",fontVariant:"initial",zIndex:"1"},size:this.props.styleSize||"small",type:"text",name:"username",valueFromOuter:!0,value:this.props.accountName||"",placeholder:this.props.placeholder||f.a.translate("account.name"),ref:"user_input",onChange:this.onInputChanged.bind(this),onKeyDown:this.onKeyDown.bind(this)}),this.props.dropDownContent?a.createElement("div",{className:"form-label select floating-dropdown"},a.createElement(g.a,{entries:this.props.dropDownContent,values:this.props.dropDownContent.reduce(function(e,t){return t&&(e[t]=t),e},{}),singleEntry:this.props.dropDownContent[0],value:this.props.dropDownValue||"",onChange:this.props.onDropdownSelect})):null,this.props.children,this.props.onAction?a.createElement("button",{className:s,onClick:this.onAction.bind(this)},a.createElement(c.a,{content:this.props.action_label})):null)),e?a.createElement("div",{className:"error-area"},a.createElement("span",null,e)):null))}}]),t}();E.propTypes={label:r.string,error:r.element,placeholder:r.string,onChange:r.func,onAccountChanged:r.func,onAction:r.func,accountName:r.string,account:u.a.ChainAccount,tabIndex:r.number,disableActionButton:r.bool,allowUppercase:r.bool},E.defaultProps={autosubscribe:!1},t.a=Object(p.a)(E,{keep_updating:!0})},1290:function(e,t,n){"use strict";var a=n(0),r=n(3),s=n(80),i=n(879),c=n(28),l=n.n(c),u=n(2),p=n.n(u),m=n(13),d=n.n(m),h=n(94),f=n(17),b=n(1268),_=n(1272),g=n(40),v=n(286),y=n(1),E=n(1281),w=n.n(E),k=n(1286),A=n(1283),C=n(1289),O=n(106),x=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();function j(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function S(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function N(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var P=y.c.operations;n(1284);var T=Object.keys(P),I=w.a.account_listing,R=function(e){function t(){return j(this,t),S(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return N(t,a["Component"]),x(t,[{key:"shouldComponentUpdate",value:function(e){return e.color!==this.props.color||e.type!==this.props.type}},{key:"render",value:function(){var e=d.a.translate("transaction.trxTypes"),t=l()("label",this.props.color||"info");return a.createElement("span",{className:t},e[T[this.props.type]])}}]),t}(),D=function(e){function t(e){j(this,t);var n=S(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.showDetails=n.showDetails.bind(n),n}return N(t,a["Component"]),x(t,[{key:"showDetails",value:function(e){e.preventDefault(),this.context.router.hsitory.push("/block/"+this.props.block)}},{key:"render",value:function(){var e=this.props,t=(e.block,e.fee),n=e.color,r=e.type,o=(e.hideDate,e.hideFee),i=e.hideOpLabel;t.amount=parseInt(t.amount,10);var c=d.a.localize(new Date(this.props.expiration),{format:"short"});return a.createElement("div",{style:{padding:"5px 0",textAlign:"left"}},i?null:a.createElement("span",{className:"left-td"},a.createElement("a",{href:!0,onClick:this.showDetails},a.createElement(R,{color:n,type:r}))),a.createElement("span",null,this.props.info," ",o?null:a.createElement("span",{className:"facolor-fee"},"(",a.createElement(s.a,{amount:t.amount,asset:t.asset_id})," fee)")),this.props.expiration?a.createElement("div",{style:{paddingTop:5,fontSize:"0.85rem"}},a.createElement("span",null,"#",this.props.id," | "),a.createElement("span",null,a.createElement(p.a,{content:"proposal.expires"}),": ",c)):null)}}]),t}();D.contextTypes={router:r.object.isRequired};var M=function(e){function t(){return j(this,t),S(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return N(t,a["Component"]),x(t,[{key:"linkToAccount",value:function(e){return e?f.a.is_object_id(e)?a.createElement(b.a,{account:e}):a.createElement(i.a,{to:"/account/"+e+"/overview"},e):a.createElement("span",null,"-")}},{key:"linkToAsset",value:function(e){return e?f.a.is_object_id(e)?a.createElement(_.a,{asset:e}):a.createElement(i.a,{to:"/asset/"+e},e):a.createElement("span",null,"-")}},{key:"render",value:function(){var e=this.props,t=e.op,n=e.current,r=e.block,c=null,l="info";switch(T[t[0]]){case"transfer":var u=null;t[1].memo&&(u=a.createElement(k.a,{memo:t[1].memo}));var m=O.a.getState().currentLocale,d=function(e){return e.extensions&&e.extensions.length&&e.extensions[0][1]?e.extensions[0][1].vesting_period:null}(t[1]),b=null===d?"none":C(1e3*d,{language:{zh:"zh_CN",en:"en"}[m],unitMeasures:{y:31536e6,mo:2592e6,w:6048e5,d:864e5,h:36e5,m:6e4,s:1e3}});l="success",t[1].amount.amount=parseFloat(t[1].amount.amount),c=a.createElement("span",{className:"right-td"},a.createElement(A.a,{string:"proposal.transfer",keys:[{type:"account",value:t[1].from,arg:"from"},{type:"amount",value:t[1].amount,arg:"amount"},{type:"account",value:t[1].to,arg:"to"},{value:b,arg:"vesting"}]}),u);break;case"limit_order_create":l="warning";var _=h.a.isAskOp(t[1]);c=a.createElement("span",null,a.createElement(A.a,{string:_?"proposal.limit_order_sell":"proposal.limit_order_buy",keys:[{type:"account",value:t[1].seller,arg:"account"},{type:"amount",value:_?t[1].amount_to_sell:t[1].min_to_receive,arg:"amount"},{type:"price",value:{base:_?t[1].min_to_receive:t[1].amount_to_sell,quote:_?t[1].amount_to_sell:t[1].min_to_receive},arg:"price"}]}));break;case"limit_order_cancel":l="cancel",c=a.createElement("span",null,this.linkToAccount(t[1].fee_paying_account)," ",a.createElement(p.a,{component:"span",content:"proposal.limit_order_cancel"})," #",t[1].order.substring(4));break;case"short_order_cancel":l="cancel",c=a.createElement("span",null,a.createElement(p.a,{component:"span",content:"proposal.short_order_cancel"})," ",t[1].order);break;case"call_order_update":l="warning",c=a.createElement("span",null,a.createElement(A.a,{string:"proposal.call_order_update",keys:[{type:"account",value:t[1].funding_account,arg:"account"},{type:"asset",value:t[1].delta_debt.asset_id,arg:"debtSymbol"},{type:"amount",value:t[1].delta_debt,arg:"debt"},{type:"amount",value:t[1].delta_collateral,arg:"collateral"}]}));break;case"key_create":c=a.createElement("span",null,a.createElement(p.a,{component:"span",content:"proposal.create_key"}));break;case"account_create":c=n===t[1].registrar?a.createElement("span",null,a.createElement(p.a,{component:"span",content:"proposal.reg_account"})," ",this.linkToAccount(t[1].name)):a.createElement("span",null,this.linkToAccount(t[1].name)," ",a.createElement(p.a,{component:"span",content:"proposal.was_reg_account"})," ",this.linkToAccount(t[1].registrar));break;case"account_update":c=a.createElement("span",null,a.createElement(A.a,{string:"proposal.update_account",keys:[{type:"account",value:t[1].account,arg:"account"}]}));break;case"account_whitelist":var E=t[1].new_listing===I.no_listing?"unlisted_by":t[1].new_listing===I.white_listed?"whitelisted_by":"blacklisted_by";c=a.createElement("span",null,a.createElement(g.a.Wrapper,{lister:t[1].authorizing_account,listee:t[1].account_to_list},function(e){var t=e.lister,n=e.listee;return a.createElement(p.a,{component:"span",content:"transaction."+E,lister:t.get("name"),listee:n.get("name")})}));break;case"account_upgrade":c=t[1].upgrade_to_lifetime_member?a.createElement("span",null,this.linkToAccount(t[1].account_to_upgrade),"  ",a.createElement(p.a,{component:"span",content:"proposal.lifetime_upgrade_account"})):a.createElement("span",null,this.linkToAccount(t[1].account_to_upgrade),"  ",a.createElement(p.a,{component:"span",content:"proposal.annual_upgrade_account"}));break;case"account_transfer":c=a.createElement("span",null,a.createElement(p.a,{component:"span",content:"proposal.transfer_account"})," ",this.linkToAccount(t[1].account_id),a.createElement(p.a,{component:"span",content:"proposal.to"})," ",this.linkToAccount(t[1].new_owner));break;case"asset_create":l="warning",c=a.createElement(A.a,{string:"proposal.asset_create",keys:[{type:"account",value:t[1].issuer,arg:"account"}],params:{asset:t[1].symbol}});break;case"asset_update":case"asset_update_bitasset":l="warning",c=a.createElement(A.a,{string:"proposal.asset_update",keys:[{type:"account",value:t[1].issuer,arg:"account"},{type:"asset",value:t[1].asset_to_update,arg:"asset"}]});break;case"asset_update_feed_producers":l="warning",c=a.createElement(A.a,{string:"proposal.feed_producer",keys:[{type:"account",value:t[1].issuer,arg:"account"},{type:"asset",value:t[1].asset_to_update,arg:"asset"}]});break;case"asset_issue":l="warning",t[1].memo&&(u=a.createElement(k.a,{memo:t[1].memo})),t[1].asset_to_issue.amount=parseInt(t[1].asset_to_issue.amount,10),c=a.createElement("span",null,a.createElement(A.a,{string:"proposal.asset_issue",keys:[{type:"account",value:t[1].issuer,arg:"account"},{type:"amount",value:t[1].asset_to_issue,arg:"amount"},{type:"account",value:t[1].issue_to_account,arg:"to"}]}),u);break;case"asset_reserve":c=a.createElement("span",null,a.createElement(A.a,{string:"proposal.asset_reserve",keys:[{type:"account",value:t[1].payer,arg:"account"},{type:"amount",value:t[1].amount_to_reserve,arg:"amount"}]}));break;case"asset_fund_fee_pool":l="warning";var w=y.b.getAsset(t[1].asset_id);w=w?w.get("symbol"):t[1].asset_id,c=a.createElement("span",null,this.linkToAccount(t[1].from_account),"  ",a.createElement(p.a,{component:"span",content:"proposal.fund_pool",asset:w})," ",a.createElement(s.a,{style:{fontWeight:"bold"},amount:t[1].amount,asset:"1.3.0"}));break;case"asset_settle":l="warning",c=a.createElement("span",null,a.createElement(p.a,{component:"span",content:"proposal.asset_settle"})," ",a.createElement(s.a,{style:{fontWeight:"bold"},amount:t[1].amount.amount,asset:t[1].amount.asset_id}));break;case"asset_global_settle":l="warning",c=a.createElement("span",null,a.createElement(p.a,{component:"span",content:"proposal.asset_global_settle"})," ",this.linkToAsset(t[1].asset_to_settle)," ",a.createElement(p.a,{component:"span",content:"proposal.at"})," ",a.createElement(v.a,{style:{fontWeight:"bold"},quote_amount:t[1].settle_price.quote.amount,quote_asset:t[1].settle_price.quote.asset_id,base_asset:t[1].settle_price.base.asset_id,base_amount:t[1].settle_price.base.amount}));break;case"asset_publish_feed":l="warning",c=a.createElement("span",null,this.linkToAccount(t[1].publisher)," ",a.createElement(p.a,{component:"span",content:"proposal.publish_feed"})," ",a.createElement(v.a,{base_asset:t[1].feed.settlement_price.base.asset_id,quote_asset:t[1].feed.settlement_price.quote.asset_id,base_amount:t[1].feed.settlement_price.base.amount,quote_amount:t[1].feed.settlement_price.quote.amount}));break;case"witness_create":c=a.createElement("span",null,a.createElement(p.a,{component:"span",content:"proposal.witness_create"})," ",this.linkToAccount(t[1].witness_account));break;case"witness_update":c=a.createElement("span",null,a.createElement(p.a,{component:"span",content:"proposal.witness_update"})," ",this.linkToAccount(t[1].witness_account));break;case"witness_withdraw_pay":c=n===t[1].witness_account?a.createElement("span",null,a.createElement(p.a,{component:"span",content:"proposal.witness_pay"})," ",a.createElement(s.a,{style:{fontWeight:"bold"},amount:t[1].amount,asset:"1.3.0"}),a.createElement(p.a,{component:"span",content:"proposal.to"})," ",this.linkToAccount(t[1].witness_account)):a.createElement("span",null,a.createElement(p.a,{component:"span",content:"proposal.received"})," ",a.createElement(s.a,{style:{fontWeight:"bold"},amount:t[1].amount,asset:"1.3.0"}),a.createElement(p.a,{component:"span",content:"proposal.from"})," ",this.linkToAccount(t[1].witness_account));break;case"proposal_create":c=a.createElement("span",null,a.createElement(p.a,{component:"span",content:"proposal.proposal_create"}));break;case"proposal_update":c=a.createElement("span",null,a.createElement(p.a,{component:"span",content:"proposal.proposal_update"}));break;case"proposal_delete":c=a.createElement("span",null,a.createElement(p.a,{component:"span",content:"proposal.proposal_delete"}));break;case"withdraw_permission_create":c=a.createElement("span",null,a.createElement(p.a,{component:"span",content:"proposal.withdraw_permission_create"})," ",this.linkToAccount(t[1].withdraw_from_account),a.createElement(p.a,{component:"span",content:"proposal.to"})," ",this.linkToAccount(t[1].authorized_account));break;case"withdraw_permission_update":c=a.createElement("span",null,a.createElement(p.a,{component:"span",content:"proposal.withdraw_permission_update"})," ",this.linkToAccount(t[1].withdraw_from_account),a.createElement(p.a,{component:"span",content:"proposal.to"})," ",this.linkToAccount(t[1].authorized_account));break;case"withdraw_permission_claim":c=a.createElement("span",null,a.createElement(p.a,{component:"span",content:"proposal.withdraw_permission_claim"})," ",this.linkToAccount(t[1].withdraw_from_account),a.createElement(p.a,{component:"span",content:"proposal.to"})," ",this.linkToAccount(t[1].withdraw_to_account));break;case"withdraw_permission_delete":c=a.createElement("span",null,a.createElement(p.a,{component:"span",content:"proposal.withdraw_permission_delete"})," ",this.linkToAccount(t[1].withdraw_from_account),a.createElement(p.a,{component:"span",content:"proposal.to"})," ",this.linkToAccount(t[1].authorized_account));break;case"fill_order":l="success",o=t[1],c=a.createElement("span",null,this.linkToAccount(t[1].account_id)," ",a.createElement(p.a,{component:"span",content:"proposal.paid"})," ",a.createElement(s.a,{style:{fontWeight:"bold"},amount:t[1].pays.amount,asset:t[1].pays.asset_id})," ",a.createElement(p.a,{component:"span",content:"proposal.obtain"})," ",a.createElement(s.a,{style:{fontWeight:"bold"},amount:t[1].receives.amount,asset:t[1].receives.asset_id})," ",a.createElement(p.a,{component:"span",content:"proposal.at"})," ",a.createElement(v.a,{base_asset:o.pays.asset_id,base_amount:o.pays.amount,quote_asset:o.receives.asset_id,quote_amount:o.receives.amount}));break;case"global_parameters_update":c=a.createElement("span",null,a.createElement(p.a,{component:"span",content:"proposal.global_parameters_update"}));break;case"file_write":c=a.createElement("span",null,a.createElement(p.a,{component:"span",content:"proposal.file_write"}));break;case"vesting_balance_create":c=a.createElement("span",null," ",this.linkToAccount(t[1].creator),a.createElement(p.a,{component:"span",content:"proposal.vesting_balance_create"})," ",a.createElement(s.a,{style:{fontWeight:"bold"},amount:t[1].amount.amount,asset:t[1].amount.asset_id})," ",this.linkToAccount(t[1].owner));break;case"vesting_balance_withdraw":c=a.createElement(A.a,{string:"proposal.vesting_balance_withdraw",keys:[{type:"account",value:t[1].owner,arg:"account"},{type:"amount",value:t[1].amount,arg:"amount"}]});break;case"bond_create_offer":c=a.createElement("span",null,a.createElement(p.a,{component:"span",content:"proposal.bond_create_offer"})," ",a.createElement(s.a,{style:{fontWeight:"bold"},amount:t[1].amount.amount,asset:t[1].amount.asset_id}));break;case"bond_cancel_offer":c=a.createElement("span",null,a.createElement(p.a,{component:"span",content:"proposal.bond_cancel_offer"})," ",t[1].offer_id);break;case"bond_accept_offer":n===t[1].lender?c=a.createElement("span",null,a.createElement(p.a,{component:"span",content:"proposal.bond_accept_offer"})," ",a.createElement(s.a,{style:{fontWeight:"bold"},amount:t[1].amount_borrowed.amount,asset:t[1].amount_borrowed.asset_id}),a.createElement(p.a,{component:"span",content:"proposal.to"})," ",this.linkToAccount(t[1].borrower)):n===t[1].borrower&&(c=a.createElement("span",null,a.createElement(p.a,{component:"span",content:"proposal.bond_accept_offer"})," ",a.createElement(s.a,{style:{fontWeight:"bold"},amount:t[1].amount_borrowed.amount,asset:t[1].amount_borrowed.asset_id}),a.createElement(p.a,{component:"span",content:"proposal.from"})," ",this.linkToAccount(t[1].lender)));break;case"bond_claim_collateral":n===t[1].lender?c=a.createElement("span",null,a.createElement(p.a,{component:"span",content:"proposal.bond_pay_collateral"})," ",a.createElement(s.a,{style:{fontWeight:"bold"},amount:t[1].collateral_claimed.amount,asset:t[1].collateral_claimed.asset_id}),a.createElement(p.a,{component:"span",content:"proposal.to"})," ",this.linkToAccount(t[1].claimer)):n===t[1].claimer&&(c=a.createElement("span",null,a.createElement(p.a,{component:"span",content:"proposal.bond_claim_collateral"})," ",a.createElement(s.a,{style:{fontWeight:"bold"},amount:t[1].collateral_claimed.amount,asset:t[1].collateral_claimed.asset_id}),a.createElement(p.a,{component:"span",content:"proposal.from"})," ",this.linkToAccount(t[1].lender)));break;case"worker_create":c=a.createElement("span",null,a.createElement(p.a,{component:"span",content:"proposal.create_worker"})," ",a.createElement(s.a,{style:{fontWeight:"bold"},amount:t[1].daily_pay,asset:"1.3.0"}));break;case"balance_claim":l="success",t[1].total_claimed.amount=parseInt(t[1].total_claimed.amount,10),c=a.createElement("span",null,this.linkToAccount(t[1].deposit_to_account)," ",a.createElement(g.a.Wrapper,{asset:t[1].total_claimed.asset_id},function(e){var n=e.asset;return a.createElement(p.a,{component:"span",content:"proposal.balance_claim",balance_amount:f.a.format_asset(t[1].total_claimed.amount,n),balance_id:t[1].balance_to_claim.substring(5)})}));break;case"committee_member_create":c=a.createElement("span",null,a.createElement(p.a,{component:"span",content:"proposal.committee_member_create"})," ",this.linkToAccount(t[1].committee_member_account));break;case"transfer_to_blind":c=a.createElement("span",null,this.linkToAccount(t[1].from)," ",a.createElement(p.a,{component:"span",content:"proposal.sent"})," ",a.createElement(s.a,{style:{fontWeight:"bold"},amount:t[1].amount.amount,asset:t[1].amount.asset_id}));break;case"transfer_from_blind":c=a.createElement("span",null,this.linkToAccount(t[1].to)," ",a.createElement(p.a,{component:"span",content:"proposal.received"})," ",a.createElement(s.a,{style:{fontWeight:"bold"},amount:t[1].amount.amount,asset:t[1].amount.asset_id}));break;case"asset_claim_fees":l="success",t[1].amount_to_claim.amount=parseInt(t[1].amount_to_claim.amount,10),c=a.createElement("span",null,this.linkToAccount(t[1].issuer)," ",a.createElement(g.a.Wrapper,{asset:t[1].amount_to_claim.asset_id},function(e){var n=e.asset;return a.createElement(p.a,{component:"span",content:"proposal.asset_claim_fees",balance_amount:f.a.format_asset(t[1].amount_to_claim.amount,n),asset:n.get("symbol")})}));break;case"committee_member_update_global_parameters":c=a.createElement("span",null,a.createElement(A.a,{string:"proposal.committee_member_update_global_parameters",keys:[{type:"account",value:"1.2.0",arg:"account"}]}));break;case"custom":c=a.createElement("span",null,a.createElement(p.a,{component:"span",content:"proposal.custom"}));break;case"override_transfer":c=a.createElement(A.a,{string:"proposal.override_transfer",keys:[{type:"account",value:t[1].issuer,arg:"issuer"},{type:"account",value:t[1].from,arg:"from"},{type:"account",value:t[1].to,arg:"to"},{type:"amount",value:t[1].amount,arg:"amount"}]});break;default:console.log("unimplemented op:",t),c=a.createElement("span",null,a.createElement(i.a,{to:"/block/"+r},"#",r))}if(this.props.csvExportMode){var x=y.b.getObject("2.0.0"),j=y.b.getObject("2.1.0"),S=f.a.calc_block_time(r,x,j);return a.createElement("div",{key:this.props.key},a.createElement("div",null,S?S.toLocaleString():""),a.createElement("div",null,T[t[0]]),a.createElement("div",null,c),a.createElement("div",null,a.createElement(s.a,{amount:parseInt(t[1].fee.amount,10),asset:t[1].fee.asset_id})))}return(c?a.createElement(D,{index:this.props.index,id:this.props.id,block:r,type:t[0],color:l,fee:t[1].fee,hideDate:this.props.hideDate,hideFee:this.props.hideFee,hideOpLabel:this.props.hideOpLabel,info:c,expiration:this.props.expiration}):null)||a.createElement("div",null)}}]),t}();M.defaultProps={op:[],current:"",block:null,hideDate:!1,hideFee:!1,hideOpLabel:!1,csvExportMode:!1},M.propTypes={op:r.array.isRequired,current:r.string,block:r.number,hideDate:r.bool,hideFee:r.bool,csvExportMode:r.bool},t.a=M},1291:function(e,t,n){"use strict";n.d(t,"b",function(){return k}),n.d(t,"a",function(){return A});var a=n(0),r=(n(3),n(80)),s=n(19),o=n(40),i=n(17),c=n(16),l=n(122),u=n(2),p=n.n(u),m=n(13),d=n.n(m),h=n(81),f=n.n(h),b=n(290),_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},g=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function E(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var w=function(e){function t(e){return v(this,t),y(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return E(t,b["a"]),g(t,[{key:"componentDidMount",value:function(){f.a.rebuild()}},{key:"shouldComponentUpdate",value:function(e){return function e(t,n,a){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var s=Object.getPrototypeOf(t);return null===s?void 0:e(s,n,a)}if("value"in r)return r.value;var o=r.get;return void 0!==o?o.call(a):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"shouldComponentUpdate",this).call(this,e)||e.toAsset!==this.props.toAsset||e.fromAsset!==this.props.fromAsset||e.amount!==this.props.amount}},{key:"getValue",value:function(){var e=this.props,t=e.amount,n=e.toAsset,a=e.fromAsset,r=e.fullPrecision,s=e.marketStats,o=e.coreAsset,c=n.get("id"),l=n.get("symbol"),u=a.get("id"),p=a.get("symbol");if(r||(t=i.a.get_asset_amount(t,a)),o&&s){var m=o.get("symbol");s.get(l+"_"+m),s.get(p+"_"+m)}var d="1.3.0"===u&&"1.3.0"===c?i.a.convertPrice(a,n,u,c):(s.get(p+"_"+l)||{}).price||null;return d?i.a.convertValue(d,t,a,n):null}},{key:"render",value:function(){var e=this.props,t=e.amount,n=e.toAsset,s=e.fromAsset,o=e.fullPrecision,c=n.get("id");n.get("symbol");o||(t=i.a.get_asset_amount(t,s));var l=this.getValue();return l||0===l?a.createElement(r.a,{hide_asset:this.props.hide_asset,noPrefix:!0,amount:l,asset:c,decimalOffset:0}):a.createElement("div",{className:"tooltip inline-block","data-place":"bottom","data-tip":d.a.translate("tooltip.no_price"),style:{fontSize:"0.9rem"}},a.createElement(p.a,{content:"account.no_price"}))}}]),t}();w.propTypes={toAsset:s.a.ChainAsset.isRequired,fromAsset:s.a.ChainAsset.isRequired,coreAsset:s.a.ChainAsset.isRequired},w.defaultProps={toAsset:"1.3.0",fullPrecision:!0,noDecimals:!1,hide_asset:!1,coreAsset:"1.3.0"},w=Object(o.a)(w,{keep_updating:!0});var k=function(e){function t(){return v(this,t),y(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return E(t,a["Component"]),g(t,[{key:"render",value:function(){var e=this.props,t=e.refCallback,n=function(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}(e,["refCallback"]);return a.createElement(w,_({},n,{ref:t}))}}]),t}();k=Object(c.connect)(k,{listenTo:function(){return[l.a]},getProps:function(){return{marketStats:l.a.getState().allMarketStats}}});var A=function(e){function t(){return v(this,t),y(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return E(t,a["Component"]),g(t,[{key:"render",value:function(){var e=this.props.balance,t=!!e.getIn(["balance","amount"]),n=Number(t?e.getIn(["balance","amount"]):e.get("balance")),r=t?e.getIn(["balance","asset_id"]):e.get("asset_type");return isNaN(n)?a.createElement("span",null,"--"):a.createElement(k,{refCallback:this.props.refCallback,hide_asset:this.props.hide_asset,amount:n,fromAsset:r,noDecimals:!0,toAsset:this.props.toAsset})}}]),t}();A.propTypes={balance:s.a.ChainObject.isRequired},A=Object(o.a)(A,{keep_updating:!0})},1292:function(e,t,n){"use strict";var a=n(0),r=(n(3),n(1450)),s=n.n(r),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var i=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={animateEnter:!1},e.timer=null,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["Component"]),o(t,[{key:"componentDidMount",value:function(){this.enableAnimation()}},{key:"resetAnimation",value:function(){this.setState({animateEnter:!1}),this.enableAnimation()}},{key:"enableAnimation",value:function(){var e=this;this.timer=setTimeout(function(){e.timer&&e.setState({animateEnter:!0})},2e3)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timer),this.timer=null}},{key:"render",value:function(){return this.props.children?a.createElement(s.a,{className:this.props.className,component:this.props.component,transitionName:this.props.transitionName,transitionEnterTimeout:this.props.enterTimeout,transitionEnter:this.state.animateEnter,transitionLeave:!1},this.props.children):a.createElement(this.props.component)}}]),t}();i.defaultProps={component:"span",enterTimeout:2e3},t.a=i},1293:function(e,t,n){"use strict";n.d(t,"a",function(){return y}),n.d(t,"b",function(){return E}),n.d(t,"e",function(){return w}),n.d(t,"d",function(){return k}),n.d(t,"c",function(){return A});var a=n(1274),r=n(155),s=n(1452),o=n.n(s),i=n(1429),c=n(1425),l=n(1430),u=h(["\n    mutation GenNewAddress($accountName: String!, $asset: String!) {\n      newDepositAddress(accountName: $accountName, asset: $asset) {\n        address\n        accountName\n        asset\n        type\n        createAt\n      }\n    }\n  "],["\n    mutation GenNewAddress($accountName: String!, $asset: String!) {\n      newDepositAddress(accountName: $accountName, asset: $asset) {\n        address\n        accountName\n        asset\n        type\n        createAt\n      }\n    }\n  "]),p=h(["\n    query GetAddress($accountName: String!, $asset: String!) {\n      getDepositAddress(accountName: $accountName, asset: $asset) {\n        address\n        accountName\n        asset\n        type\n        createAt\n        projectInfo {\n          projectName\n          logoUrl\n          contractAddress\n          contractExplorerUrl\n        }\n      }\n    }\n  "],["\n    query GetAddress($accountName: String!, $asset: String!) {\n      getDepositAddress(accountName: $accountName, asset: $asset) {\n        address\n        accountName\n        asset\n        type\n        createAt\n        projectInfo {\n          projectName\n          logoUrl\n          contractAddress\n          contractExplorerUrl\n        }\n      }\n    }\n  "]),m=h(["\n    query WithdrawInfo($type: String!) {\n      withdrawInfo(type: $type) {\n        fee\n        minValue\n        precision\n        asset\n        type\n        gatewayAccount\n      }\n    }\n  "],["\n    query WithdrawInfo($type: String!) {\n      withdrawInfo(type: $type) {\n        fee\n        minValue\n        precision\n        asset\n        type\n        gatewayAccount\n      }\n    }\n  "]),d=h(["\n    query VerifyAddress(\n      $asset: String!\n      $accountName: String!\n      $address: String!\n    ) {\n      verifyAddress(\n        asset: $asset\n        accountName: $accountName\n        address: $address\n      ) {\n        valid\n        asset\n      }\n    }\n  "],["\n    query VerifyAddress(\n      $asset: String!\n      $accountName: String!\n      $address: String!\n    ) {\n      verifyAddress(\n        asset: $asset\n        accountName: $accountName\n        address: $address\n      ) {\n        valid\n        asset\n      }\n    }\n  "]);function h(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var f=function(e,t,n,a){return new(n||(n=Promise))(function(r,s){function o(e){try{c(a.next(e))}catch(e){s(e)}}function i(e){try{c(a.throw(e))}catch(e){s(e)}}function c(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(o,i)}c((a=a.apply(e,t||[])).next())})},b=Object(r.a)("GatewayService"),_=new Headers;_.append("Content-Type","application/x-www-form-urlencoded");var g=new c.a({uri:a.c}),v=new i.a({link:g,cache:new l.a});function y(e,t,n){return f(this,void 0,void 0,regeneratorRuntime.mark(function a(){var r,s;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(b("Get Deposit: ",e,t,n),r=o()(u),s=o()(p),!n){a.next=9;break}return a.next=6,O("mutate",{mutation:r,variables:{accountName:e,asset:t}},"newDepositAddress");case 6:a.t0=a.sent,a.next=12;break;case 9:return a.next=11,O("query",{query:s,variables:{accountName:e,asset:t}},"getDepositAddress");case 11:a.t0=a.sent;case 12:return a.abrupt("return",a.t0);case 13:case"end":return a.stop()}},a,this)}))}function E(e){return f(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=o()(m),t.next=3,O("query",{query:n,variables:{type:e}},"withdrawInfo");case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}},t,this)}))}function w(e,t,n){return f(this,void 0,void 0,regeneratorRuntime.mark(function a(){var r;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return r=o()(d),a.next=3,O("query",{query:r,variables:{asset:n,accountName:t,address:e}},"verifyAddress");case 3:return a.abrupt("return",a.sent);case 4:case"end":return a.stop()}},a,this)}))}function k(e){return f(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C("records",e).then(function(e){return e.data});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)}))}function A(e){return f(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C("login",e).then(function(e){return e.data});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)}))}function C(e,t){return f(this,void 0,void 0,regeneratorRuntime.mark(function n(){var r,s;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return(r=new Headers).append("Content-Type","application/json"),s={headers:r,method:"POST",body:JSON.stringify(t)},n.next=5,fetch(""+a.b+e,s).then(function(e){return e.json()}).catch(function(e){return{code:400,error:e.message}});case 5:return n.abrupt("return",n.sent);case 6:case"end":return n.stop()}},n,this)}))}function O(e,t,n){return f(this,void 0,void 0,regeneratorRuntime.mark(function a(){return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if("newDepositAddress"!==n){a.next=3;break}return a.next=3,v.resetStore();case 3:return a.prev=3,a.next=6,v[e](t);case 6:return a.t0=n,a.abrupt("return",a.sent.data[a.t0]);case 10:throw a.prev=10,a.t1=a.catch(3),console.error("GatewayError: ",a.t1),a.t1;case 14:case"end":return a.stop()}},a,this,[[3,10]])}))}},1294:function(e,t,n){"use strict";var a=n(0),r=n(3),s=n(80),o=n(879),i=n(28),c=n.n(i),l=n(2),u=n.n(l),p=n(13),m=n.n(p),d=n(17),h=n(40),f=n(19),b=n(1279),_=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var g=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={time:null},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["Component"]),_(t,[{key:"componentDidMount",value:function(){this.calcTime(this.props.block_number)}},{key:"calcTime",value:function(e){this.setState({time:d.a.calc_block_time(e,this.props.globalObject,this.props.dynGlobalObject)})}},{key:"componentWillReceiveProps",value:function(e){e.block_number!==this.props.block_number&&this.calcTime(e.block_number)}},{key:"render",value:function(){return a.createElement("span",{className:"time",key:this.props.block_number},this.state.time?a.createElement(b.a,{time:this.state.time}):null)}}]),t}();g.propTypes={block_number:r.number.isRequired,globalObject:f.a.ChainObject.isRequired,dynGlobalObject:f.a.ChainObject.isRequired},g.defaultProps={globalObject:"2.0.0",dynGlobalObject:"2.1.0"};var v=g=Object(h.a)(g,{keep_updating:!0}),y=n(1268),E=n(1272),w=n(1283),k=n(1),A=n(1281),C=n.n(A),O=n(1286),x=n(1290),j=n(94),S=n(16),N=n(8),P=n(1289),T=n(106),I=n(121),R=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();function D(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function M(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function L(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var F=k.c.operations;n(1284);var q=Object.keys(F),B=C.a.account_listing;var W=function(e){function t(){return D(this,t),M(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return L(t,a["PureComponent"]),R(t,[{key:"render",value:function(){var e=m.a.translate("transaction.trxTypes"),t=c()("label",this.props.color||"info");return a.createElement("span",{className:t},e[q[this.props.type]])}}]),t}(),U=((Y=function(e){function t(e){return D(this,t),M(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return L(t,a["PureComponent"]),R(t,[{key:"render",value:function(){var e=this.props,t=e.block,n=e.fee,r=e.color,i=e.type,c=e.hideOpLabel,l=this.props.dynGlobalObject.get("last_irreversible_block_num"),p=null;return t>l&&(p=a.createElement("span",null,"(",a.createElement(u.a,{content:"operation.pending",blocks:t-l}),")")),n.amount=parseInt(n.amount,10),a.createElement("tr",null,c?null:a.createElement("td",{style:{textAlign:"left"},className:"left-td column-hide-tiny"},a.createElement(o.a,{className:"inline-block","data-place":"bottom","data-tip":m.a.translate("tooltip.show_block",{block:d.a.format_number(this.props.block,0)}),to:"/block/"+this.props.block},a.createElement(W,{color:r,type:i}))),a.createElement("td",{style:{padding:"8px 5px",textAlign:"left"}},a.createElement("div",null,a.createElement("span",null,this.props.info)),a.createElement("div",{style:{fontSize:14,paddingTop:5}},this.props.hideFee?null:a.createElement("span",{className:"facolor-fee"}," ","- ",a.createElement(s.a,{amount:n.amount,asset:n.asset_id})),p?a.createElement("span",null," - ",p):null)),a.createElement("td",null,this.props.hideDate?null:a.createElement(v,{block_number:t})))}}]),t}()).contextTypes={router:r.object.isRequired},Y.propTypes={dynGlobalObject:f.a.ChainObject.isRequired},Y.defaultProps={dynGlobalObject:"2.1.0",tempComponent:"tr"},Y);U=Object(h.a)(U,{keep_updating:!1});var H=function(e){function t(){return D(this,t),M(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return L(t,a["PureComponent"]),R(t,[{key:"linkToAccount",value:function(e){return e?d.a.is_object_id(e)?a.createElement(y.a,{account:e}):a.createElement(o.a,{to:"/account/"+e+"/overview"},e):a.createElement("span",null,"-")}},{key:"linkToAsset",value:function(e){return e?d.a.is_object_id(e)?a.createElement(E.a,{asset:e}):a.createElement(o.a,{to:"/asset/"+e},e):a.createElement("span",null,"-")}},{key:"render",value:function(){var e=this.props,t=e.op,n=e.current,r=e.block,i=null,c=null,l="info",p=null;switch(q[t[0]]){case"transfer":t[1].memo&&(p=a.createElement(O.a,{memo:t[1].memo,fullLength:!0}));var m=T.a.getState().currentLocale,f=function(e){return e.extensions&&e.extensions.length&&e.extensions[0][1]?e.extensions[0][1].vesting_period:null}(t[1]),b=null===f?"none":P(1e3*f,{language:{zh:"zh_CN",en:"en"}[m],unitMeasures:{y:31536e6,mo:2592e6,w:6048e5,d:864e5,h:36e5,m:6e4,s:1e3}});l="success",t[1].amount.amount=parseFloat(t[1].amount.amount),i=this.props.csvExportMode?a.createElement(w.a,{string:"operation.transfer",keys:[{type:"account",value:t[1].from,arg:"from"},{type:"amount",value:t[1].amount,arg:"amount"},{type:"account",value:t[1].to,arg:"to"},{value:b,arg:"vesting"}]}):a.createElement("span",{className:"right-td"},a.createElement(w.a,{string:"operation.transfer",keys:[{type:"account",value:t[1].from,arg:"from"},{type:"amount",value:t[1].amount,arg:"amount"},{type:"account",value:t[1].to,arg:"to"},{value:b,arg:"vesting"}]}),p),c=p;break;case"limit_order_create":l="warning";var _=t[1];i=a.createElement("span",null,a.createElement(h.a.Wrapper,{base:_.min_to_receive.asset_id,quote:_.amount_to_sell.asset_id},function(e){var n=e.base,r=e.quote,s=j.a.getMarketID(n,r),o=(s.marketID,s.first),i=(s.second,_.min_to_receive.asset_id===o.get("id")),c=i?_.amount_to_sell:_.min_to_receive,l=i?_.min_to_receive:_.amount_to_sell,u=[t[1].amount_to_sell,t[1].min_to_receive],p=u[0],m=u[1],d=Object(I.b)(n.get("symbol"),"limit_order_create",i?"operation.limit_order_buy":"operation.limit_order_sell");return a.createElement(w.a,{string:d,keys:[{type:"account",value:t[1].seller,arg:"account"},{type:"amount",value:p,arg:"amount_to_sell"},{type:"amount",value:m,arg:"amount_to_buy"},{type:"asset",value:p,arg:"asset_to_sell"},{type:"asset",value:m,arg:"asset_to_buy"},{type:"price",value:{base:c,quote:l},arg:"price"}]})}));break;case"limit_order_cancel":l="cancel",i=a.createElement("span",null,a.createElement(w.a,{string:"operation.limit_order_cancel",keys:[{type:"account",value:t[1].fee_paying_account,arg:"account"}],params:{order:t[1].order.substring(4)}}));break;case"call_order_update":l="warning",i=a.createElement("span",null,a.createElement(h.a.Wrapper,{base:t[1].delta_debt.asset_id},function(e){var n=e.base,r=Object(I.b)(n.get("symbol"),"call_order_update","operation.call_order_update");return a.createElement(w.a,{string:r,keys:[{type:"account",value:t[1].funding_account,arg:"account"},{type:"asset",value:t[1].delta_debt.asset_id,arg:"debtSymbol"},{type:"amount",value:t[1].delta_debt,arg:"debt"},{type:"amount",value:t[1].delta_collateral,arg:"collateral"}]})}));break;case"key_create":i=a.createElement("span",null,a.createElement(u.a,{component:"span",content:"transaction.create_key"}));break;case"account_create":i=a.createElement(w.a,{string:"operation.reg_account",keys:[{type:"account",value:t[1].registrar,arg:"registrar"},{type:"account",value:t[1].name,arg:"new_account"}]});break;case"account_update":i=a.createElement("span",null,a.createElement(w.a,{string:"operation.update_account",keys:[{type:"account",value:t[1].account,arg:"account"}]}));break;case"account_whitelist":var g=t[1].new_listing===B.no_listing?"unlisted_by":t[1].new_listing===B.white_listed?"whitelisted_by":"blacklisted_by";i=a.createElement("span",null,a.createElement(w.a,{string:"operation."+g,keys:[{type:"account",value:t[1].authorizing_account,arg:"lister"},{type:"account",value:t[1].account_to_list,arg:"listee"}]}));break;case"account_upgrade":i=a.createElement("span",null,a.createElement(w.a,{string:t[1].upgrade_to_lifetime_member?"operation.lifetime_upgrade_account":"operation.annual_upgrade_account",keys:[{type:"account",value:t[1].account_to_upgrade,arg:"account"}]}));break;case"account_transfer":i=a.createElement("span",null,a.createElement(w.a,{string:"operation.account_transfer",keys:[{type:"account",value:t[1].account_id,arg:"account"},{type:"account",value:t[1].new_owner,arg:"to"}]}));break;case"asset_create":l="warning",i=a.createElement("span",null,a.createElement(w.a,{string:"operation.asset_create",keys:[{type:"account",value:t[1].issuer,arg:"account"},{type:"asset",value:t[1].symbol,arg:"asset"}]}));break;case"asset_update":case"asset_update_bitasset":l="warning",i=a.createElement("span",null,a.createElement(w.a,{string:"operation.asset_update",keys:[{type:"account",value:t[1].issuer,arg:"account"},{type:"asset",value:t[1].asset_to_update,arg:"asset"}]}));break;case"asset_update_feed_producers":l="warning",i=a.createElement("span",null,a.createElement(w.a,{string:"operation.asset_update_feed_producers",keys:[{type:"account",value:t[1].issuer,arg:"account"},{type:"asset",value:t[1].asset_to_update,arg:"asset"}]}));break;case"asset_issue":l="warning",t[1].memo&&(p=a.createElement(O.a,{memo:t[1].memo})),t[1].asset_to_issue.amount=parseInt(t[1].asset_to_issue.amount,10),i=a.createElement("span",null,a.createElement(w.a,{string:"operation.asset_issue",keys:[{type:"account",value:t[1].issuer,arg:"account"},{type:"amount",value:t[1].asset_to_issue,arg:"amount"},{type:"account",value:t[1].issue_to_account,arg:"to"}]}),p);break;case"asset_fund_fee_pool":l="warning",i=a.createElement("span",null,a.createElement(w.a,{string:"operation.asset_fund_fee_pool",keys:[{type:"account",value:t[1].from_account,arg:"account"},{type:"asset",value:t[1].asset_id,arg:"asset"},{type:"amount",value:{amount:t[1].amount,asset_id:"1.3.0"},arg:"amount"}]}));break;case"asset_settle":l="warning",i=a.createElement("span",null,a.createElement(h.a.Wrapper,{asset:t[1].amount.asset_id},function(e){var n=e.asset,r=Object(I.b)(n.get("symbol"),"asset_settle","operation.asset_settle");return a.createElement(w.a,{string:r,keys:[{type:"account",value:t[1].account,arg:"account"},{type:"amount",value:t[1].amount,arg:"amount"}]})}));break;case"asset_global_settle":l="warning",i=a.createElement("span",null,a.createElement(w.a,{string:"operation.asset_global_settle",keys:[{type:"account",value:t[1].issuer,arg:"account"},{type:"asset",value:t[1].asset_to_settle,arg:"asset"},{type:"price",value:t[1].settle_price,arg:"price"}]}));break;case"asset_publish_feed":l="warning",i=a.createElement("span",null,a.createElement(w.a,{string:"operation.publish_feed",keys:[{type:"account",value:t[1].publisher,arg:"account"},{type:"price",value:t[1].feed.settlement_price,arg:"price"}]}));break;case"witness_create":i=a.createElement("span",null,a.createElement(w.a,{string:"operation.witness_create",keys:[{type:"account",value:t[1].witness_account,arg:"account"}]}));break;case"witness_update":i=a.createElement("span",null,a.createElement(w.a,{string:"operation.witness_update",keys:[{type:"account",value:t[1].witness_account,arg:"account"}]}));break;case"witness_withdraw_pay":console.log("witness_withdraw_pay:",t[1].witness_account),i=n===t[1].witness_account?a.createElement("span",null,a.createElement(u.a,{component:"span",content:"transaction.witness_pay"})," ",a.createElement(s.a,{amount:t[1].amount,asset:"1.3.0"}),a.createElement(u.a,{component:"span",content:"transaction.to"})," ",this.linkToAccount(t[1].witness_account)):a.createElement("span",null,a.createElement(u.a,{component:"span",content:"transaction.received"})," ",a.createElement(s.a,{amount:t[1].amount,asset:"1.3.0"}),a.createElement(u.a,{component:"span",content:"transaction.from"})," ",this.linkToAccount(t[1].witness_account));break;case"proposal_create":i=a.createElement("div",{className:"inline-block"},a.createElement("span",null,a.createElement(w.a,{string:"operation.proposal_create",keys:[{type:"account",value:t[1].fee_paying_account,arg:"account"}]}),":"),a.createElement("div",null,t[1].proposed_ops.map(function(e,t){return a.createElement(x.a,{op:e.op,key:t,index:t,inverted:!1,hideFee:!0,hideOpLabel:!0,hideDate:!0,proposal:!0})})));break;case"proposal_update":i=a.createElement("span",null,a.createElement(w.a,{string:"operation.proposal_update",keys:[{type:"account",value:t[1].fee_paying_account,arg:"account"}]}));break;case"proposal_delete":i=a.createElement("span",null,a.createElement(u.a,{component:"span",content:"transaction.proposal_delete"}));break;case"withdraw_permission_create":i=a.createElement("span",null,a.createElement(u.a,{component:"span",content:"transaction.withdraw_permission_create"})," ",this.linkToAccount(t[1].withdraw_from_account),a.createElement(u.a,{component:"span",content:"transaction.to"})," ",this.linkToAccount(t[1].authorized_account));break;case"withdraw_permission_update":i=a.createElement("span",null,a.createElement(u.a,{component:"span",content:"transaction.withdraw_permission_update"})," ",this.linkToAccount(t[1].withdraw_from_account),a.createElement(u.a,{component:"span",content:"transaction.to"})," ",this.linkToAccount(t[1].authorized_account));break;case"withdraw_permission_claim":i=a.createElement("span",null,a.createElement(u.a,{component:"span",content:"transaction.withdraw_permission_claim"})," ",this.linkToAccount(t[1].withdraw_from_account),a.createElement(u.a,{component:"span",content:"transaction.to"})," ",this.linkToAccount(t[1].withdraw_to_account));break;case"withdraw_permission_delete":i=a.createElement("span",null,a.createElement(u.a,{component:"span",content:"transaction.withdraw_permission_delete"})," ",this.linkToAccount(t[1].withdraw_from_account),a.createElement(u.a,{component:"span",content:"transaction.to"})," ",this.linkToAccount(t[1].authorized_account));break;case"fill_order":l="success",_=t[1],i=a.createElement("span",null,a.createElement(h.a.Wrapper,{base:_.receives.asset_id,quote:_.pays.asset_id},function(e){var n=e.base,r=e.quote,s=j.a.getMarketID(n,r),o=(s.marketID,s.first,s.second),i=_.pays.asset_id===o.get("id"),c=i?_.fill_price.base:_.fill_price.quote,l=i?_.fill_price.quote:_.fill_price.base,u=i?_.receives:_.pays,p=_.fee.asset_id===u.asset_id?u.amount-_.fee.amount:u.amount,m=Object(I.b)(n.get("symbol"),"fill_order","operation.fill_order_"+(i?"buy":"sell"));return a.createElement(w.a,{string:m,keys:[{type:"account",value:t[1].account_id,arg:"account"},{type:"amount",value:{amount:p,asset_id:u.asset_id},arg:"amount"},{type:"price",value:{base:c,quote:l},arg:"price"}]})}));break;case"global_parameters_update":i=a.createElement("span",null,a.createElement(u.a,{component:"span",content:"transaction.global_parameters_update"}));break;case"vesting_balance_create":i=a.createElement("span",null," ",this.linkToAccount(t[1].creator),a.createElement(u.a,{component:"span",content:"transaction.vesting_balance_create"})," ",a.createElement(s.a,{amount:t[1].amount.amount,asset:t[1].amount.asset_id})," ",this.linkToAccount(t[1].owner));break;case"vesting_balance_withdraw":i=a.createElement("span",null,a.createElement(w.a,{string:"operation.vesting_balance_withdraw",keys:[{type:"account",value:t[1].owner,arg:"account"},{type:"amount",value:t[1].amount,arg:"amount"}]}));break;case"worker_create":i=a.createElement("span",null,a.createElement(w.a,{string:"operation.worker_create",keys:[{type:"account",value:t[1].owner,arg:"account"},{type:"amount",value:{amount:t[1].daily_pay,asset_id:"1.3.0"},arg:"pay"}],params:{name:t[1].name}}));break;case"balance_claim":l="success",t[1].total_claimed.amount=parseInt(t[1].total_claimed.amount,10),i=a.createElement("span",null,a.createElement(w.a,{string:"operation.balance_claim",keys:[{type:"account",value:t[1].deposit_to_account,arg:"account"},{type:"amount",value:t[1].total_claimed,arg:"amount"}]}));break;case"committee_member_create":i=a.createElement("span",null,a.createElement(u.a,{component:"span",content:"transaction.committee_member_create"})," ",this.linkToAccount(t[1].committee_member_account));break;case"transfer_to_blind":i=a.createElement("span",null,this.linkToAccount(t[1].from)," ",a.createElement(u.a,{component:"span",content:"transaction.sent"})," ",a.createElement(s.a,{amount:t[1].amount.amount,asset:t[1].amount.asset_id}));break;case"transfer_from_blind":i=a.createElement("span",null,this.linkToAccount(t[1].to)," ",a.createElement(u.a,{component:"span",content:"transaction.received"})," ",a.createElement(s.a,{amount:t[1].amount.amount,asset:t[1].amount.asset_id}));break;case"asset_claim_fees":l="success",t[1].amount_to_claim.amount=parseInt(t[1].amount_to_claim.amount,10),i=a.createElement("span",null,this.linkToAccount(t[1].issuer)," ",a.createElement(h.a.Wrapper,{asset:t[1].amount_to_claim.asset_id},function(e){var n=e.asset;return a.createElement(u.a,{component:"span",content:"transaction.asset_claim_fees",balance_amount:d.a.format_asset(t[1].amount_to_claim.amount,n),asset:n.get("symbol")})}));break;case"custom":i=a.createElement("span",null,a.createElement(u.a,{component:"span",content:"transaction.custom"}));break;case"asset_reserve":i=a.createElement("span",null,a.createElement(w.a,{string:"operation.asset_reserve",keys:[{type:"account",value:t[1].payer,arg:"account"},{type:"amount",value:t[1].amount_to_reserve,arg:"amount"}]}));break;case"committee_member_update_global_parameters":console.log("committee_member_update_global_parameters op:",t),i=a.createElement("span",null,a.createElement(w.a,{string:"operation.committee_member_update_global_parameters",keys:[{type:"account",value:"1.2.0",arg:"account"}]}));break;case"override_transfer":i=a.createElement(w.a,{string:"operation.override_transfer",keys:[{type:"account",value:t[1].issuer,arg:"issuer"},{type:"account",value:t[1].from,arg:"from"},{type:"account",value:t[1].to,arg:"to"},{type:"amount",value:t[1].amount,arg:"amount"}]});break;case"initiate_crowdfund":i=a.createElement(w.a,{string:"operation.init_crowd",keys:[{type:"account",value:t[1].owner,arg:"owner"},{type:"asset",value:t[1].asset_id,arg:"asset"}]});break;case"participate_crowdfund":i=a.createElement(w.a,{string:"operation.part_crowd",keys:[{type:"account",value:t[1].buyer,arg:"account"},{type:"amount",value:{asset_id:"1.3.0",amount:t[1].valuation},arg:"amount"}]});break;case"withdraw_crowdfund":i=a.createElement(w.a,{string:"operation.withdraw_crowd",keys:[{type:"account",value:t[1].buyer,arg:"account"}]});break;case"withdraw_all":i=t[1].sell_asset_id===t[1].receive_asset_id&&"1.3.0"===t[1].receive_asset_id?a.createElement(w.a,{string:"operation.withdraw_all_all",keys:[{type:"account",value:t[1].seller,arg:"account"}]}):a.createElement(w.a,{string:"operation.withdraw_all",keys:[{type:"account",value:t[1].seller,arg:"account"},{type:"asset",value:t[1].receive_asset_id,arg:"quote"},{type:"asset",value:t[1].sell_asset_id,arg:"base"}]});break;case"initiate_dice_bet":i=a.createElement(w.a,{string:"operation.initiate_dice_bet",keys:[{type:"account",value:t[1].owner,arg:"account"}]});break;case"deposit_dice_bet":i=a.createElement(w.a,{string:"operation.deposit_dice_bet",keys:[{type:"account",value:t[1].owner,arg:"account"}]});break;case"withdraw_dice_bet":i=a.createElement(w.a,{string:"operation.withdraw_dice_bet",keys:[{type:"account",value:t[1].owner,arg:"account"}]});break;case"participate_dice_bet":console.debug("Bet: "),i=a.createElement(w.a,{string:"operation.participate_dice_bet",keys:[{type:"account",value:t[1].payer,arg:"account"},{type:"value",value:t[1].choice,arg:"amount"}]});break;case"settle_bet":console.debug("Bet: "),i=a.createElement(w.a,{string:"operation.settle_bet",keys:[{type:"account",value:t[1].payer,arg:"account"},{type:"amount",value:{asset_id:t[1].asset_id,amount:t[1].refund},arg:"amount"},{type:"asset",value:t[1].asset_id,arg:"asset"}]});break;case"nonfungible_create":i=a.createElement(w.a,{string:"operation.nonfungible_create",keys:[{type:"account",value:t[1].issuer,arg:"account"}]});break;case"nonfungible_update":i=a.createElement(w.a,{string:"operation.nonfungible_update",keys:[{type:"account",value:t[1].issuer,arg:"account"}]});break;case"nonfungible_issue":i=a.createElement(w.a,{string:"operation.nonfungible_issue",keys:[{type:"account",value:t[1].issuer,arg:"from"},{type:"account",value:t[1].issue_to_account,arg:"to"},{type:"nft",value:t[1].nonfungible_to_issue,arg:"nft"}]});break;case"nonfungible_transfer":i=a.createElement(w.a,{string:"operation.nonfungible_transfer",keys:[{type:"account",value:t[1].from,arg:"from"},{type:"account",value:t[1].to,arg:"to"},{type:"nft",value:t[1].token_id,arg:"nft"}]});break;case"nonfungible_reserve":i=a.createElement(w.a,{string:"operation.nonfungible_reserve",keys:[{type:"account",value:t[1].owner,arg:"account"}]});break;case"nonfungible_sell":i=a.createElement(w.a,{string:"operation.nonfungible_sell",keys:[{type:"account",value:t[1].seller,arg:"seller"},{type:"amount",value:t[1].min_to_receive,arg:"price"},{type:"nft",value:t[1].token_id,arg:"nft"}]});break;case"nonfungible_cancel_sell":i=a.createElement(w.a,{string:"operation.nonfungible_cancel_sell",keys:[{type:"account",value:t[1].seller,arg:"seller"},{type:"nft",value:t[1].token_id,arg:"nft"}]});break;case"nonfungible_buy":i=a.createElement(w.a,{string:"operation.nonfungible_buy",keys:[{type:"account",value:t[1].buyer,arg:"buyer"},{type:"amount",value:t[1].pay,arg:"price"},{type:"other",value:t[1].min_to_receive,arg:"receive"},{type:"nft",value:t[1].token_id,arg:"nft"}]});break;default:console.log("unimplemented op:",t,q[t[0]],q),i=a.createElement("span",null,a.createElement(o.a,{to:"/block/"+r},"#",r))}if(this.props.csvExportMode){var v=k.b.getObject("2.0.0"),y=k.b.getObject("2.1.0"),E=d.a.calc_block_time(r,v,y);return a.createElement("div",null,a.createElement("div",null,E?E.toLocaleString():""),a.createElement("div",null,q[t[0]]),a.createElement("div",null,i),c&&a.createElement("div",null,c),a.createElement("div",null,a.createElement(s.a,{amount:parseInt(t[1].fee.amount,10),asset:t[1].fee.asset_id})))}return(i?a.createElement(U,{block:r,type:t[0],color:l,fee:t[1].fee,hideOpLabel:this.props.hideOpLabel,hideDate:this.props.hideDate,info:i,hideFee:this.props.hideFee}):null)||a.createElement("tr",null)}}]),t}();H.defaultProps={op:[],current:"",block:null,hideOpLabel:!1,csvExportMode:!1},H.propTypes={op:r.array.isRequired,current:r.string,block:r.number,csvExportMode:r.bool},H=Object(S.connect)(H,{listenTo:function(){return[N.b]},getProps:function(){return{marketDirections:N.b.getState().marketDirections}}});var Y;t.a=H},1297:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var a=n(0),r=n(110),s=n(1275),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var i=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClose=function(){n.setState({fadeOut:!0}),setTimeout(function(){s.b.closeModal(n.props.modalId)},300)},n.state={fadeOut:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["Component"]),o(t,[{key:"render",value:function(){var e=this.props.fade,t=this.state.fadeOut;return a.createElement("div",{className:Object(r.a)("overlay",{"fade-in":e,"fade-out":t})},a.createElement("div",{id:this.props.modalId,className:"modal with-shadow"},a.createElement("a",{href:"javascript:;",className:"close-button",onClick:this.onClose},"×"),this.props.children))}}]),t}();i.defaultProps={fade:!0}},1300:function(e,t,n){"use strict";var a=n(31),r=n(5),s=n.n(r),o=n(9),i=n(1278),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var l=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.assets=s.a.Map(),e.asset_symbol_to_id={},e.searchTerms={},e.lookupResults=[],e.assetsLoading=!1,e.bindListeners({onGetAssetList:i.a.getAssetList,onLookupAsset:i.a.lookupAsset}),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["a"]),c(t,[{key:"onGetAssetList",value:function(e){var t=this;if(!e)return!1;this.assetsLoading=e.loading,e.assets&&e.assets.forEach(function(n){for(var a=0;a<e.dynamic.length;a++)if(e.dynamic[a].id===n.dynamic_asset_data_id){n.dynamic=e.dynamic[a];break}if(n.bitasset_data_id){n.market_asset=!0;for(a=0;a<e.bitasset_data.length;a++)if(e.bitasset_data[a].id===n.bitasset_data_id){n.bitasset_data=e.bitasset_data[a];break}}else n.market_asset=!1;t.assets=t.assets.set(n.id,n),t.asset_symbol_to_id[n.symbol]=n.id})}},{key:"onLookupAsset",value:function(e){this.searchTerms[e.searchID]=e.symbol,this.lookupResults=e.assets}}]),t}();t.a=o.a.createStore(l,"AssetStore")},1302:function(e,t,n){"use strict";n.d(t,"a",function(){return N});var a=n(0),r=n(3),s=n(2),o=n.n(s),i=n(292),c=n(1294),l=n(19),u=n(40),p=n(17),m=n(1),d=n(1292),h=n(1421),f=n(13),b=n.n(f),_=n(93),g=n(23),v=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function w(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var k=function(e,t,n,a){return new(n||(n=Promise))(function(r,s){function o(e){try{c(a.next(e))}catch(e){s(e)}}function i(e){try{c(a.throw(e))}catch(e){s(e)}}function c(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(o,i)}c((a=a.apply(e,t||[])).next())})},A=m.c.operations,C={textAlign:"left"},O={textAlign:"right"},x={};function j(e,t){return t.block_num===e.block_num?t.virtual_op-e.virtual_op:t.block_num-e.block_num}function S(e){return e?'"'+e.textContent.replace(/[\s\t\r\n]/gi," ")+'"':""}var N=((P=function(e){function t(e){y(this,t);var n=E(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._onIncreaseUnlimit=function(){n.setState({limit:n.state.limit+1e5})},n.handleTryMore=function(e){return k(n,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,a;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props.accountsList,!(n=1===t.length&&t[0]?t[0].get("id"):null)){e.next=10;break}if(a=void 0,x[n]){e.next=10;break}return e.next=7,p.a.getAccountFullHistory(n);case 7:a=e.sent,x[n]=a,this.forceUpdate();case 10:case"end":return e.stop()}},e,this)}))},n.state={limit:e.limit||20,csvExport:!1,headerHeight:85,filter:"all"},n}return w(t,a["Component"]),v(t,[{key:"componentDidMount",value:function(){if(!this.props.fullHeight){var e=this.refs.transactions;h.initialize(e),this._setHeaderHeight()}}},{key:"_setHeaderHeight",value:function(){var e=this.refs.header.offsetHeight;e!==this.state.headerHeight&&this.setState({headerHeight:e})}},{key:"shouldComponentUpdate",value:function(e,t){if(!p.a.are_equal_shallow(this.props.accountsList,e.accountsList))return!0;if(this.props.maxHeight!==e.maxHeight)return!0;if(this.state.headerHeight!==t.headerHeight)return!0;if(this.state.filter!==t.filter)return!0;if(this.props.customFilter&&(!p.a.are_equal_shallow(this.props.customFilter.fields,e.customFilter.fields)||!p.a.are_equal_shallow(this.props.customFilter.values,e.customFilter.values)))return!0;if(this.props.maxHeight!==e.maxHeight)return!0;if(t.limit!==this.state.limit||t.csvExport!==this.state.csvExport)return!0;for(var n=0;n<e.accountsList.length;++n){var a=e.accountsList[n],r=this.props.accountsList[n];if(a&&r&&a.get("history")!==r.get("history"))return!0}return!1}},{key:"componentDidUpdate",value:function(){if(this.state.csvExport){this.state.csvExport=!1;var e=document.getElementById("csv_export_container").childNodes,t="",n=!0,a=!1,r=void 0;try{for(var s,o=e[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){var c=s.value.childNodes;""!==t&&(t+="\n"),t+=[S(c[0]),S(c[1]),S(c[2]),S(c[3])].join(",")}}catch(e){a=!0,r=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw r}}var l=new Blob([t],{type:"text/csv;charset=utf-8"}),u=new Date;Object(i.saveAs)(l,"cybhist-"+u.getFullYear()+"-"+("0"+(u.getMonth()+1)).slice(-2)+"-"+("0"+u.getDate()).slice(-2)+"-"+("0"+u.getHours()).slice(-2)+("0"+u.getMinutes()).slice(-2)+".csv")}if(!this.props.fullHeight){var p=this.refs.transactions;h.update(p),this._setHeaderHeight()}}},{key:"_onIncreaseLimit",value:function(){this.setState({limit:this.state.limit+30})}},{key:"_getHistory",value:function(e,t,n){var a=[],r=new Set,s=!0,o=!1,i=void 0;try{for(var c,l=e[Symbol.iterator]();!(s=(c=l.next()).done);s=!0){var u=c.value;if(u&&u.get&&u.get("history")){var p=x[u.get("id")]||[],m=u.get("history").toJS(),d=Object(g.uniq)(m.concat(p),function(e){return e.id});d&&(a=a.concat(d.filter(function(e){return!r.has(e.id)&&r.add(e.id)})))}}}catch(e){o=!0,i=e}finally{try{!s&&l.return&&l.return()}finally{if(o)throw i}}return t&&(a=a.filter(function(e){return e.op[0]===A[t]})),n&&(a=a.filter(function(e){return n.fields.reduce(function(t,a){switch(a){case"asset_id":return t&&e.op[1].amount[a]===n.values[a];default:return t&&e.op[1][a]===n.values[a]}},!0)})),a}},{key:"_downloadCSV",value:function(){return k(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({csvExport:!0});case 1:case"end":return e.stop()}},e,this)}))}},{key:"_onChangeFilter",value:function(e){this.setState({filter:e.target.value})}},{key:"render",value:function(){var e=this.props,t=e.accountsList,n=e.compactView,r=e.filter,s=e.customFilter,i=e.style,l=e.maxHeight,u=this.state,p=u.limit,m=u.headerHeight,h=1===t.length&&t[0]?t[0].get("id"):null,f=this._getHistory(t,this.props.showFilters&&"all"!==this.state.filter?this.state.filter:r,s).sort(j),g=f.length;i=i||{};var v=null;v=["all","transfer","limit_order_create","limit_order_cancel","fill_order","account_create","account_update","asset_create","witness_withdraw_pay","balance_claim"].map(function(e){return a.createElement("option",{value:e,key:e},b.a.translate("transaction.trxTypes."+e))});var y=f.length?f.slice(0,p).map(function(e){return a.createElement(c.a,{style:C,key:e.id,op:e.op,result:e.result,block:e.block_num,current:h,hideFee:!0,inverted:!1,hideOpLabel:n})}):[a.createElement("tr",{key:"no_recent"},a.createElement("td",{colSpan:n?2:3},a.createElement(o.a,{content:"operation.no_recent"})))];return y.push(a.createElement("tr",{className:"total-value",key:"total_value"},a.createElement("td",{className:"column-hide-tiny text-center"},x[h]?p<g&&a.createElement("a",{href:"javascript:;",onClick:this._onIncreaseUnlimit},a.createElement(o.a,{content:"account.show_more"})):a.createElement("a",{href:"javascript:;",onClick:this.handleTryMore},a.createElement(o.a,{content:"account.try_more"}))),a.createElement("td",{style:O},g>0?a.createElement("span",null,a.createElement("a",{className:"inline-block",onClick:this._downloadCSV.bind(this),"data-tip":b.a.translate("transaction.csv_tip"),"data-place":"bottom"},a.createElement(_.a,{name:"excel",className:"icon-14px"}))):null),a.createElement("td",{style:{textAlign:"center"}}," ",this.props.showMore&&g>this.props.limit||p<g?a.createElement("a",{onClick:this._onIncreaseLimit.bind(this)},a.createElement(_.a,{name:"chevron-down",className:"icon-14px"})):null))),a.createElement("div",{className:"recent-transactions no-overflow",style:i},a.createElement("div",{className:"generic-bordered-box"},this.props.dashboard||this.props.noHeader?null:a.createElement("div",{ref:"header"},a.createElement("div",{className:"block-content-header"},a.createElement("span",null,this.props.title?this.props.title:a.createElement(o.a,{content:"account.recent"})))),a.createElement("div",{className:"box-content grid-block no-margin",style:this.props.fullHeight?null:{maxHeight:l-m},ref:"transactions"},a.createElement("table",{className:"table"+(n?" compact":"")+(this.props.dashboard?" dashboard-table":"")},a.createElement("thead",null,a.createElement("tr",null,n?null:a.createElement("th",{style:C,className:"column-hide-tiny"},this.props.showFilters?a.createElement("select",{"data-place":"left","data-tip":b.a.translate("tooltip.filter_ops"),style:{paddingTop:5,width:"auto"},className:"cyb-select no-margin",value:this.state.filter,onChange:this._onChangeFilter.bind(this)},v):null),a.createElement("th",{style:C},a.createElement(o.a,{content:"account.votes.info"})),a.createElement("th",null))),a.createElement(d.a,{component:"tbody",transitionName:"newrow"},y))),g>0&&this.state.csvExport&&a.createElement("div",{id:"csv_export_container",style:{display:"none"}},a.createElement("div",null,a.createElement("div",null,"DATE"),a.createElement("div",null,"OPERATION"),a.createElement("div",null,"MEMO"),a.createElement("div",null,"AMOUNT")),f.map(function(e){return a.createElement(c.a,{key:e.id,op:e.op,result:e.result,block:e.block_num,inverted:!1,csvExportMode:!0})}))))}}]),t}()).propTypes={accountsList:l.a.ChainAccountsList.isRequired,compactView:r.bool,limit:r.number,maxHeight:r.number,fullHeight:r.bool,showFilters:r.bool},P.defaultProps={limit:25,maxHeight:500,fullHeight:!1,showFilters:!1},P);N=Object(u.a)(N,{keep_updating:!0});var P,T,I=((T=function(e){function t(){return y(this,t),E(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return w(t,a["Component"]),v(t,[{key:"render",value:function(){return a.createElement("span",{className:"wrapper"},this.props.children(this.props))}}]),t}()).propTypes={asset:l.a.ChainAsset.isRequired,to:l.a.ChainAccount.isRequired,fromAccount:l.a.ChainAccount.isRequired},T.defaultProps={asset:"1.3.0"},T);I=Object(u.a)(I)},1421:function(e,t,n){"use strict";e.exports=n(1449)},1426:function(e,t,n){"use strict";var a=n(0),r=n(2),s=n.n(r),o=[{label:"Seconds",translate:"period.seconds",value:1},{label:"Minutes",translate:"period.minutes",value:60},{label:"Hours",translate:"period.hours",value:3600},{label:"Days",translate:"period.days",value:86400}],i=function(e){var t=e.disabled,n=e.tabIndex,r=e.className,o=e.value,i=e.name,c=e.id,l=e.items,u=e.onChange;return a.createElement("select",{disabled:t,tabIndex:n,className:r,value:o,name:i,id:c,onChange:u},l.map(function(e){return e.translate?a.createElement(s.a,{component:"option",key:e.label,value:e.value,content:e.translate}):a.createElement("option",{key:e.label,value:e.value},e.label)}))};n.d(t,"a",function(){return l});var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var l=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={vestingPeriod:n.props.defaultPeriod,vestingAmount:n.props.defaultPeriod,vestingUnit:1},n.getIds=n.getIds.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["Component"]),c(t,[{key:"getIds",value:function(){return{amount:"vestingAmount-"+this.props.name,unit:"vestingUnit-"+this.props.name}}},{key:"onVestingChanged",value:function(e){var t=this.getIds(),n=t.amount,a=t.unit,r=this.props.onPeriodChange,s=document.getElementById(n).value,o=document.getElementById(a).value,i=parseInt(s*o,10);r(i),this.setState({vestingUnit:o,vestingAmount:s,vestingPeriod:i})}},{key:"onVestingUnitChanged",value:function(e){var t=this.getIds(),n=(t.amount,t.unit),a=this.state.vestingPeriod,r=document.getElementById(n).value;this.setState({vestingAmount:parseFloat((a/r).toFixed(2)),vestingUnit:r})}},{key:"render",value:function(){var e=this.props,t=e.tabIndex,n=e.className,r=e.disabled;return a.createElement("div",{className:n},a.createElement("input",{tabIndex:t?t-1:-1,id:this.getIds().amount,name:this.getIds().amount,type:"number",min:"0",value:this.state.vestingAmount,onChange:this.onVestingChanged.bind(this),disabled:r}),a.createElement(i,{tabIndex:t?t-1:-1,id:this.getIds().unit,disabled:r,name:this.getIds().unit,value:this.state.vestingUnit,onChange:this.onVestingUnitChanged.bind(this),items:o}))}}]),t}()},1427:function(e,t,n){"use strict";var a=n(0),r=n(3),s=n(16),o=n(1),i=n(1282),c=n(1293),l=n(1274),u=n(40),p=n(287),m=n(1280),d=n(19),h=n(27),f=n(2),b=n.n(f),_=function(e){var t=e.isI18n,n=e.message,r=e.messageParams;return t?a.createElement(b.a,Object.assign({className:"has-error",component:"div",content:n},r)):a.createElement("div",{className:"has-error"},n)},g=function(e){var t=e.isI18n,n=e.message,r=e.messageParams;return t?a.createElement(b.a,Object.assign({className:"has-info",component:"div",content:n},r)):a.createElement("div",{className:"has-info"},n)},v=function(e){var t=e.children;return a.createElement("div",{className:"error-wrapper"},t)},y=function(e){var t=e.placeholder,n=e.isI18n,r=e.tips,s=e.muiltTips,o=e.messageParams,i=r.filter(function(e){return e.isError});if(!i.length&&!t)return null;if(!i.length)return!0===t?a.createElement(v,null,a.createElement("div",null)):t?a.createElement(v,null,a.createElement(g,{isI18n:n,message:t,messageParams:o})):null;var c=s?i:i.slice(0,1);return a.createElement(v,null,c.map(function(e){var t=e.name,n=e.isI18n,r=e.message,s=e.messageParams;return a.createElement(_,{key:t,isI18n:n,message:r,messageParams:s||{}})}))},E=n(13),w=n.n(E),k=n(17),A=n(155),C=n(289),O=n(23),x=n(1297),j=n(58),S=n(59),N=function(e,t){return Math.floor(parseFloat(e)*Math.pow(10,t))},P=n(34),T=n(293),I=n(82),R=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var D=function(e,t,n,a){return new(n||(n=Promise))(function(r,s){function o(e){try{c(a.next(e))}catch(e){s(e)}}function i(e){try{c(a.throw(e))}catch(e){s(e)}}function c(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(o,i)}c((a=a.apply(e,t||[])).next())})},M=Object(A.a)("WithdrawModal"),L=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onWithdrawAmountChange=function(e){var t,a=e.amount,r=void 0,s=void 0;try{r="EOS"===n.props.withdrawInfo.type?4:n.props.withdrawInfo.precision||n.props.asset.get("precision")}catch(e){r=4}s=new S.BigNumber(1).dividedBy(Math.pow(10,r)),t=-1!==new S.BigNumber(a||1).dividedBy(s).toString().indexOf("."),n.setState({withdraw_amount:a,eosPrecisionError:t,outerPrecision:s.toString()},n._checkBalance)},n.onMemoToggleChange=function(e){var t=e.target.checked,a=(n.state.withdraw_address,void 0);n.setState({withMemo:t,memoContent:""}),t?(a={target:{value:n.state.withdraw_address}},n.onWithdrawOriginAddrChange(a)):(a={target:{value:n.state.withdraw_address_origin}},n.onWithdrawAddressChanged(a))},n.onWithdrawMemoChange=function(e){if(n.state.withMemo){var t=e.target.value;n.setState({memoContent:t});var a={target:{value:t?n.state.withdraw_address_origin+"["+t+"]":n.state.withdraw_address_origin}};n.onWithdrawAddressChanged(a)}},n.onWithdrawOriginAddrChange=function(e){var t=e.target.value;n.setState({withdraw_address_origin:t});var a={target:{value:n.state.withMemo&&n.state.memoContent?t+"["+n.state.memoContent+"]":t}};n.onWithdrawAddressChanged(a)},n._validateAddress=function(e){return D(n,void 0,void 0,regeneratorRuntime.mark(function t(){var n,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=void 0,t.prev=1,t.next=4,Object(c.e)(e,this.props.account.get("name"),this.props.withdrawInfo.type);case 4:a=t.sent,M("Verify Res: ",a),n=a.valid,t.next=12;break;case 9:return t.prev=9,t.t0=t.catch(1),t.abrupt("return",this.setState({withdraw_address_loading:!1,withdraw_address_valid:!1,withdraw_address_error:!0}));case 12:this.setState({withdraw_address_loading:!1,withdraw_address_error:!1,withdraw_address_valid:n},this._updateFee),M("Valid: ",n);case 14:case"end":return t.stop()}},t,this,[[1,9]])}))},n.validateAddress=Object(O.debounce)(n._validateAddress,250),n.onSubmit=function(){n.state.useCybAsFee;var e=n.props.asset.get("precision"),t=N(n.state.withdraw_amount,e);N(n.props.withdrawInfo.fee,e);j.a.transfer(n.props.account.get("id"),n.props.withdrawInfo.gatewayAccount,t,n.props.asset.get("id"),n._withdrawMemo(),null,n.state.feeAsset?n.state.feeAsset.get("id"):"1.3.0").catch(function(e){P.a.error(w.a.translate("modal.withdraw.lack_memo"))})},n._withdrawMemo=function(){return"withdraw:"+l.a+":"+n.props.withdrawInfo.type+":"+n.state.withdraw_address},n.invalid_address_message=a.createElement("div",{className:"has-error",style:{paddingTop:10}},a.createElement(b.a,{content:"gateway.valid_address",coin_type:n.props.withdrawInfo.type})),n.invalid_gateway_message=a.createElement("div",{className:"has-error",style:{paddingTop:10}},a.createElement(b.a,{content:"gateway.valid_service"})),n.state={withdraw_amount:0,withdraw_address:"",fadeOut:!1,fee_asset_id:"1.3.0",feeAmount:new h.a({amount:0}),from_account:e.account,feeStatus:{},memo:null,hasPoolBalance:null,hasBalance:null,balanceError:null,error:!1,useCybAsFee:!0,eosPrecisionError:!1,withdraw_address_loading:!1,withdraw_address_valid:!1,outerPrecision:2,withMemo:!1,withdraw_address_origin:"",memoContent:""},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["Component"]),R(t,[{key:"onWithdrawAddressChanged",value:function(e){this.setState({withdraw_address:e.target.value,withdraw_address_loading:!0,withdraw_address_valid:!1},this._updateFee),this.validateAddress(e.target.value)}},{key:"componentWillMount",value:function(){}},{key:"componentDidUpdate",value:function(e){this.props.withdrawInfo&&e.withdraw&&this.props.withdrawInfo.type!=e.withdrawInfo.type&&this.setState({withMemo:!1})}},{key:"onFeeChanged",value:function(e){var t=e.asset;this.setState({feeAsset:t,fee_asset_id:t.get("id")},this._updateFee)}},{key:"_updateFee",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state,n=t.fee_asset_id,a=t.from_account,r=this._getAvailableAssets(t).fee_asset_types;if(1===r.length&&r[0]!==n&&(n=r[0]),M("UpdateFee: ",t),!a)return null;Object(C.b)({accountID:a.get("id"),feeID:n,options:["price_per_kbyte"],data:{type:"memo",content:this._withdrawMemo()}}).then(function(t){var n=t.fee,a=t.hasBalance,r=t.hasPoolBalance;e.setState({feeAmount:n,hasBalance:a,hasPoolBalance:r,error:!a||!r},e._checkBalance)})}},{key:"_getAvailableAssets",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state,t=e.from_account,n=e.feeStatus;var a=[];if(!t||!t.get("balances"))return{fee_asset_types:a};var r=e.from_account.get("balances").toJS();for(var s in a=Object.keys(r).sort(k.a.sortID),r){var i=o.b.getObject(s),c=o.b.getObject(r[s]);c&&0===c.get("balance")&&-1!==a.indexOf(s)&&a.splice(a.indexOf(s),1),i&&("1.3.0"===i.get("id")||k.a.isValidPrice(i.getIn(["options","core_exchange_rate"]))||a.splice(a.indexOf(s),1))}return{fee_asset_types:a=a.filter(function(e){return function(e){return void 0===n[e]||n[e]&&n[e].hasPoolBalance}(e)&&function(e){return void 0===n[e]||n[e]&&n[e].hasBalance}(e)})}}},{key:"_checkFeeStatus",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state,n=t.from_account;if(n){var a=this._getAvailableAssets(t).fee_asset_types,r={},s=[];a.forEach(function(t){s.push(Object(C.b)({accountID:n.get("id"),feeID:t,options:["price_per_kbyte"],data:{type:"memo",content:e._withdrawMemo()}}))}),Promise.all(s).then(function(n){a.forEach(function(e,t){r[e]=n[t]}),k.a.are_equal_shallow(t.feeStatus,r)||e.setState({feeStatus:r}),e._checkBalance()}).catch(function(e){console.error(e)})}}},{key:"setNestedRef",value:function(e){this.nestedRef=e}},{key:"onFeeCheckboxChange",value:function(e){var t=e.target.checked;this.setState({useCybAsFee:t})}},{key:"_checkBalance",value:function(){var e=this.state,t=e.feeAmount,n=e.withdraw_amount,a=this.props.asset,r=this.props.account.get("balances").toJS()[this.props.asset.get("id")];if(r&&t){var s=o.b.getObject(r),i=Object(C.a)(n,a,t,s);if(null!==i)return this.setState({balanceError:!i}),i}}},{key:"_setTotal",value:function(e,t){var n=this.state.feeAmount,a=o.b.getObject(t),r=o.b.getObject(e),s=new h.a({amount:a.get("balance"),asset_id:r.get("id"),precision:r.get("precision")});a&&(n.asset_id===s.asset_id&&s.minus(n),this.setState({withdraw_amount:s.getAmount({real:!0})},this._checkBalance))}},{key:"render",value:function(){var e=this.props,t=(e.asset,e.withdrawInfo),n=e.modalId,r=this.state,s=r.withdraw_amount,o=r.withdraw_address,i=r.withdraw_address_valid,c=r.withdraw_address_loading,l=r.withdraw_address_error,u=(r.useCybAsFee,r.eosPrecisionError),d=(r.memo,r.withdraw_address_origin),h=r.withMemo,f=r.feeAsset,_=r.memoContent,g=null,v=this.props.account.get("balances").toJS(),E=this.state.feeAmount.getAmount({real:!0}),w=f?f.get("id"):"1.3.0";if(Object.keys(v).length>0){var A=this.props.asset.get("id");g=A?a.createElement("span",{style:{borderBottom:"#A09F9F 1px dotted",cursor:"pointer"},onClick:this._setTotal.bind(this,A,v[A],E,w)},a.createElement(b.a,{component:"span",content:"transfer.available"}),":",a.createElement(p.a,{balance:v[A]})):"No funds"}else g="No funds";var C=this._getAvailableAssets().fee_asset_types,O=o&&!c&&l,j=o&&!c&&!i&&!l,S=Number(s)>=t.minValue,N=!o||c||j||this.state.balanceError||O||u||!S,P=k.a.replaceName(this.props.asset.get("symbol")).name,R=-1!==P.indexOf("EOS")||-1!==P.indexOf("XRP"),D=-1!==P.indexOf("XRP")?"tag":"memo";return a.createElement(x.a,{modalId:n},a.createElement("div",{className:"content-block"},a.createElement("h3",null,a.createElement(b.a,{content:"gateway.withdraw"})," "+P,"(",this.props.receive_asset_symbol,")")),a.createElement("div",{className:"content-block"},a.createElement("p",null,a.createElement(b.a,{unsafe:!0,content:"gateway.withdraw_funds",type:this.props.receive_asset_symbol,asset:P}))),a.createElement("div",{className:"content-block"},a.createElement(m.a,{label:"modal.withdraw.amount",amount:this.state.withdraw_amount,asset:this.props.asset.get("id"),assets:[this.props.asset.get("id")],placeholder:"0.0",onChange:this.onWithdrawAmountChange.bind(this),display_balance:g}),a.createElement(y,{isI18n:!0,tips:[{name:"insufficient",isError:this.state.balanceError,isI18n:!0,message:"transfer.errors.insufficient"},{name:"withdraw-amount",isError:!S&&0!=Number(s),isI18n:!0,message:"gateway.low_limit",messageParams:{symbol:this.props.withdrawInfo.type,amount:this.props.withdrawInfo.minValue}},{name:"withdraw-precision",isError:u,isI18n:!0,message:"gateway.precision_error",messageParams:{symbol:this.props.withdrawInfo.type,amount:this.state.outerPrecision}}],muiltTips:!1})),a.createElement("div",{className:"content-block"},a.createElement("label",{className:"left-label"},R?a.createElement(b.a,{component:"span",content:"modal.withdraw.to_eos",type:P}):a.createElement(b.a,{component:"span",content:"modal.withdraw.address",type:P})),a.createElement("div",{className:"inline-label"},a.createElement(I.h,{size:"small",style:{width:"100%"},id:"withdrawAddress",name:"withdrawAddress",type:"text",value:h?d:o,valueFromOuter:!0,onChange:h?this.onWithdrawOriginAddrChange.bind(this):this.onWithdrawAddressChanged.bind(this),autoComplete:"off"}))),a.createElement("div",{className:"content-block"},R&&a.createElement("div",{className:"inline-label use-cyb"},a.createElement(b.a,{className:"left-label",component:"lebel",content:"modal.withdraw.with_memo",memo:D}),a.createElement("div",{className:"switch"},a.createElement("input",{id:"withMemo",type:"checkbox",value:h,defaultChecked:!1,onChange:this.onMemoToggleChange}),a.createElement("label",{htmlFor:"withMemo"}))),h&&a.createElement("div",{style:{marginTop:10}},a.createElement("label",{className:"left-label"},a.createElement(b.a,{component:"span",memo:D,content:"gateway.withdraw_memo"})),a.createElement("div",{className:"inline-label"},a.createElement(I.h,{type:"text",size:"small",style:{width:"100%"},id:"withdrawAddressMemo",name:"withdrawAddressMemo",value:_,valueFromOuter:!0,onChange:this.onWithdrawMemoChange.bind(this),autoComplete:"off"}))),a.createElement(y,{isI18n:!0,placeholder:!0,messageParams:{memo:D},tips:[{name:"withdraw-address",isError:-1!==o.indexOf(" "),isI18n:!0,message:"gateway.space_in_memo"},{name:"withdraw-address",isError:j,isI18n:!0,message:"gateway.valid_address",messageParams:{coin_type:this.props.withdrawInfo.type}},{name:"withdraw-gateway",isError:O,isI18n:!0,message:"gateway.valid_service"},{name:"withdraw-gateway",isError:c,isI18n:!0,message:"gateway.loading"}],muiltTips:!1})),a.createElement("hr",null),this.props.withdrawInfo.fee?a.createElement("div",{className:"amount-selector right-selector",style:{paddingBottom:20}},a.createElement("label",{className:"left-label"},a.createElement(b.a,{content:"gateway.fee"}),a.createElement(T.a,null,a.createElement(b.a,{content:"gateway.fee_tip_outer"}))),a.createElement("div",{className:"inline-label input-wrapper"},a.createElement(I.h,{size:"small",style:{width:"100%"},type:"text",disabled:!0,valueFromOuter:!0,value:this.props.withdrawInfo.fee}),a.createElement("div",{className:"form-label select floating-dropdown"},a.createElement("div",{className:"dropdown-wrapper inactive"},a.createElement("div",null,t.type))))):null,a.createElement("div",{className:"content-block gate_fee"},a.createElement(m.a,{labelTooltip:{id:"gate_fee_tip",component:a.createElement(b.a,{content:"gateway.fee_tip_inner"})},refCallback:this.setNestedRef.bind(this),label:"gateway.fee_transfer",disabled:!0,amount:this.state.feeAmount.getAmount({real:!0}),onChange:this.onFeeChanged.bind(this),asset:this.state.feeAmount.asset_id,assets:C}),this.state.hasBalance?null:a.createElement("p",{className:"has-error no-margin",style:{paddingTop:10}},a.createElement(b.a,{content:"transfer.errors.noFeeBalance"})),this.state.hasPoolBalance?null:a.createElement("p",{className:"has-error no-margin",style:{paddingTop:10}},a.createElement(b.a,{content:"transfer.errors.noPoolBalance"}))),a.createElement(I.c,{onClick:this.onSubmit,type:"primary",style:{width:"100%"},disabled:N},a.createElement(b.a,{content:"modal.withdraw.submit",onClick:this.onSubmit})))}}]),t}();L.propTypes={account:d.a.ChainAccount.isRequired,issuer:d.a.ChainAccount.isRequired,asset:d.a.ChainAsset.isRequired,receive_asset_name:r.string,receive_asset_symbol:r.string,memo_prefix:r.string};var F=Object(u.a)(L,{keep_updating:!0,show_loader:!0});F=Object(s.connect)(F,{listenTo:function(){return[i.b]},getProps:function(e){var t=e.modalId,n=i.b.getState().withdrawInfo;return{open:i.b.getState().modals.get(t),withdrawInfo:n,receive_asset_symbol:n.type,asset:i.b.getState().withdrawInfo.asset}}});t.a=F},1428:function(e,t,n){"use strict";var a=n(0),r=n(16),s=n(1282),o=n(1275),i=n(40),c=n(19),l=n(27),u=n(2),p=n.n(u),m=n(291),d=n(13),h=n.n(d),f=n(17),b=n(52),_=n(1299),g=n.n(_),v=n(1297),y=function(e){var t=e.currentBalance,n=e.asset,r=f.a.replaceName(n.get("symbol"),!!n.get("bitasset")).name,s=a.createElement("span",{style:{border:"2px solid black",borderLeft:"none"},className:"form-label"},r);return a.createElement("div",{className:"SimpleTrade__withdraw-row",style:{fontSize:"1rem"}},a.createElement("label",{style:{fontSize:"1rem"}},h.a.translate("gateway.balance_asset",{asset:r}),":",a.createElement("span",{className:"inline-label"},a.createElement("input",{disabled:!0,style:{color:"white",border:"2px solid black",padding:10,width:"100%"},value:t&&t.getAmount?t.getAmount({real:!0}):0}),s)))},E=n(1266),w=function(e){return a.createElement("img",Object.assign({style:{width:108,height:108,margin:"0 2em"},src:"https://static-assets.51nebula.com/asset-symbols/"+e.symbol.toUpperCase()+".png",alt:""},e))},k=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var A=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["PureComponent"]),k(t,[{key:"render",value:function(){var e=this.props.gatewayAsset;return a.createElement("div",{className:"gateway-info flex-wrapper"},a.createElement("div",{className:"asset-section flex-wrapper-main"},a.createElement("ul",{className:"gateway-info-asset no-margin"},e.options.name&&a.createElement("li",null,a.createElement(p.a,{content:"gateway.project_name",className:"with-colon"}),a.createElement("strong",null,e.options.name)),e.options.contractAddress&&a.createElement("li",null,a.createElement(p.a,{content:"gateway.contract_address",className:"with-colon"}),a.createElement("a",{href:e.contractExplorer,target:"_blank",rel:"noopener noreferrer"},a.createElement("strong",null,e.options.contractAddress)))),a.createElement("hr",null),this.props.children),a.createElement(w,{symbol:e.type}))}}]),t}(),C=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var O=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.getNewAddress=function(){var e=n.props.depositInfo;o.b.updateDepositAddress(e.accountName,e.type,!0)},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["Component"]),C(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.asset,r=t.depositInfo,s=t.modalId,o=t.type,i=this.props.balances.find(function(t){return t&&t.get&&t.get("asset_type")===e.props.asset.get("id")}),c=new l.a({asset_id:n.get("id"),precision:n.get("precision"),amount:i?i.get("balance"):0}),u=o,d=void 0,_=void 0,w=/^(.+)\[(.+)\]$/;r.meta&&r.meta.options&&(r.meta.options.name,r.meta.options.contractAddress),w.test(r.address)?(_=r.address.match(w)[1],d=r.address.match(w)[2]):d=r.address;var k="EOS"===o||"XRP"===o,C="XRP"===o?"tag":"memo";return a.createElement(v.a,{modalId:s},a.createElement("h3",null,a.createElement(p.a,{content:"gateway.deposit"})," ",f.a.replaceName(n.get("symbol"),!1).name,"(",u,")"),a.createElement(A,{gatewayAsset:r.meta},a.createElement("p",{className:"gateway-info-common"},a.createElement(p.a,{unsafe:!0,content:"gateway.add_funds",type:u,account:r.accountName}))),i&&a.createElement(y,{currentBalance:c,asset:n}),a.createElement("div",{className:"SimpleTrade__withdraw-row"},k?a.createElement(p.a,{component:"p",style:{fontSize:"bold"},content:"gateway.deposit_eos",account:_,memo:C,type:o}):[a.createElement("p",{style:{marginBottom:10},"data-place":"right",key:"deposit_tip","data-tip":h.a.translate("tooltip.deposit_tip",{asset:u})},a.createElement("span",{className:"help-tooltip"},h.a.translate("gateway.deposit_to",{asset:u}))),a.createElement("section",{key:"deposit_qr_code",className:"text-center"},a.createElement("div",{className:"wrapper",style:{padding:"8px",background:"white",display:"inline-block"}},a.createElement(g.a,{level:"L",size:140,value:d})))],r?a.createElement("label",null,a.createElement("span",{className:"inline-label"},a.createElement("input",{id:"depositAddress",readOnly:!0,type:"text",value:d}),a.createElement(m.a,{text:d}))):a.createElement(b.a,{type:"three-bounce"}),a.createElement("div",{className:"SimpleTrade__withdraw-row"},a.createElement("p",null,"Current address is generated"," ",E(r.createAt).fromNow())),a.createElement("div",{className:"button-group SimpleTrade__withdraw-row"},a.createElement("button",{className:"button",onClick:this.getNewAddress,type:"submit"},k?a.createElement(p.a,{content:"gateway.generate_new_eos",type:o}):a.createElement(p.a,{content:"gateway.generate_new"})))))}}]),t}();O.propTypes={asset:c.a.ChainAsset.isRequired,balances:c.a.ChainObjectsList};var x=Object(i.a)(O,{keep_updating:!0,show_loader:!0});x=Object(r.connect)(x,{listenTo:function(){return[s.b]},getProps:function(e){var t=e.modalId;return{open:s.b.getState().modals.get(t),depositInfo:s.b.getState().depositInfo,type:s.b.getState().depositInfo.type,asset:s.b.getState().depositInfo.asset}}});t.a=x},1435:function(e,t,n){"use strict";var a=n(0),r=n(3),s=n(23),o=n(54),i=n.n(o),c=n(235),l=n(148),u=n(2),p=n.n(u),m=n(19),d=n(40),h=n(80),f=n(17),b=n(28),_=n.n(b),g=n(1280),v=n(287),y=n(133),E=n(10),w=n(286),k=n(13),A=n.n(k),C=n(288),O=n(5),x=n.n(O),j=n(1),S=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();function N(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function P(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function T(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var I=function(e){function t(e){N(this,t);var n=P(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.state=n._initialState(e),n}return T(t,a["Component"]),S(t,[{key:"_initialState",value:function(e){var t=e?this._getCurrentPosition(e):{};if(t.collateral){var n=f.a.get_asset_amount(t.debt,e.quote_asset),a=f.a.get_asset_amount(t.collateral,e.backing_asset);return{short_amount:n?n.toString():null,collateral:a?a.toString():null,collateral_ratio:this._getCollateralRatio(n,a),errors:this._getInitialErrors(),isValid:!1,original_position:{debt:n,collateral:a}}}return{short_amount:0,collateral:0,collateral_ratio:this._getInitialCollateralRatio(e),errors:this._getInitialErrors(),isValid:!1,original_position:{debt:0,collateral:0}}}},{key:"componentDidMount",value:function(){var e=this._initialState(this.props);this.setState(e),this._setUpdatedPosition(e)}},{key:"shouldComponentUpdate",value:function(e,t){return!(f.a.are_equal_shallow(t,this.state)&&x.a.is(e.quote_asset,this.props.quote_asset)&&!e.backing_asset.get("symbol")!==this.props.backing_asset.get("symbol")&&x.a.is(e.account,this.props.account)&&x.a.is(e.call_orders,this.props.call_orders))}},{key:"componentWillReceiveProps",value:function(e){e.account===this.props.account&&e.hasCallOrders===this.props.hasCallOrders&&e.quote_asset.get("id")===this.props.quote_asset.get("id")||this.setState(this._initialState(e))}},{key:"_getInitialErrors",value:function(){return{collateral_balance:null,ratio_too_high:null}}},{key:"confirmClicked",value:function(e){e.preventDefault(),i.a.publish(this.props.modalId,"close")}},{key:"_onBorrowChange",value:function(e){var t=this._getFeedPrice(),n=e.amount.replace(/,/g,""),a={short_amount:n,collateral:(this.state.collateral_ratio*(n/t)).toFixed(this.props.backing_asset.get("precision")),collateral_ratio:this.state.collateral_ratio};this.setState(a),this._validateFields(a),this._setUpdatedPosition(a)}},{key:"_onCollateralChange",value:function(e){var t=e.amount.replace(/,/g,""),n=this._getFeedPrice(),a=t/(this.state.short_amount/n),r=this._isPredictionMarket(this.props)?{short_amount:t,collateral:t,collateral_ratio:1}:{short_amount:this.state.short_amount,collateral:t,collateral_ratio:Object(s.isFinite)(a)?a:this._getInitialCollateralRatio(this.props)};this.setState(r),this._validateFields(r),this._setUpdatedPosition(r)}},{key:"_onRatioChange",value:function(e){var t=this._getFeedPrice(),n=e.target.value,a={short_amount:this.state.short_amount,collateral:(this.state.short_amount/t*n).toFixed(this.props.backing_asset.get("precision")),collateral_ratio:n};this.setState(a),this._validateFields(a),this._setUpdatedPosition(a)}},{key:"_setUpdatedPosition",value:function(e){this.setState({newPosition:parseFloat(e.short_amount)/parseFloat(e.collateral)})}},{key:"_validateFields",value:function(e){var t=this._getInitialErrors(),n=this.state.original_position,a=this.props.backing_balance?this.props.backing_balance.toJS():{balance:0};parseFloat(e.collateral)-n.collateral>f.a.get_asset_amount(a.balance,this.props.backing_asset.toJS())&&(t.collateral_balance=A.a.translate("borrow.errors.collateral"));var r=e.short_amount>=0&&e.collateral>=0&&(e.short_amount!=n.debt||e.collateral!=n.collateral),s=this.props.quote_asset.getIn(["bitasset","current_feed","maintenance_collateral_ratio"])/1e3;parseFloat(e.collateral_ratio)<(this._isPredictionMarket(this.props)?1:s)?(t.below_maintenance=A.a.translate("borrow.errors.below",{mr:s}),r=!1):parseFloat(e.collateral_ratio)<(this._isPredictionMarket(this.props)?1:s+.5)&&(t.close_maintenance=A.a.translate("borrow.errors.close",{mr:s}),r=!0),this.setState({errors:t,isValid:r})}},{key:"_onSubmit",value:function(e){e.preventDefault();var t=f.a.get_asset_precision(this.props.quote_asset.get("precision")),n=f.a.get_asset_precision(this.props.backing_asset.get("precision")),a=this._getCurrentPosition(this.props),r=y.a.new_transaction();r.add_type_operation("call_order_update",{fee:{amount:0,asset_id:0},funding_account:this.props.account.get("id"),delta_collateral:{amount:parseInt(this.state.collateral*n-a.collateral,10),asset_id:this.props.backing_asset.get("id")},delta_debt:{amount:parseInt(this.state.short_amount*t-a.debt,10),asset_id:this.props.quote_asset.get("id")}}),E.a.process_transaction(r,null,!0).catch(function(e){}),i.a.publish(this.props.modalId,"close")}},{key:"_getCurrentPosition",value:function(e){var t={collateral:null,debt:null};if(e&&e.hasCallOrders&&e.call_orders)for(var n in e.call_orders)e.call_orders.hasOwnProperty(n)&&e.call_orders[n]&&e.quote_asset.get("id")===e.call_orders[n].getIn(["call_price","quote","asset_id"])&&(t=e.call_orders[n].toJS());return t}},{key:"_getFeedPrice",value:function(){return this.props?this._isPredictionMarket(this.props)?1:1/f.a.get_asset_price(this.props.quote_asset.getIn(["bitasset","current_feed","settlement_price","quote","amount"]),this.props.backing_asset,this.props.quote_asset.getIn(["bitasset","current_feed","settlement_price","base","amount"]),this.props.quote_asset):1}},{key:"_getInitialCollateralRatio",value:function(e){return this._isPredictionMarket(e)?1:0}},{key:"_getCollateralRatio",value:function(e,t){return t/(e/this._getFeedPrice())}},{key:"_isPredictionMarket",value:function(e){return e.quote_asset.getIn(["bitasset","is_prediction_market"])}},{key:"render",value:function(){var e=this,t=this.props,n=t.quote_asset,r=t.bitasset_balance,s=t.backing_asset,o=t.backing_balance,i=this.state,c=i.short_amount,u=i.collateral,m=i.collateral_ratio,d=i.errors,b=i.isValid,y=f.a.get_asset_precision(this.props.quote_asset.get("precision")),E=f.a.get_asset_precision(this.props.backing_asset.get("precision"));m&&!isNaN(m)&&m>0&&m<1e3||(m=0),r=r?r.toJS():{balance:0,id:null},o=o?o.toJS():{balance:0,id:null};var k=_()("form-group",{"has-error":d.collateral_balance}),O=_()("form-group",{"has-error":d.below_maintenance},{"has-warning":d.close_maintenance}),x=_()("button",{disabled:d.collateral_balance||!b},{success:b}),S=this._getCurrentPosition(this.props),N=o.id?j.b.getObject(o.id):null,P=(N?N.get("balance"):0)-parseInt(this.state.collateral*E-S.collateral,10),T=a.createElement("span",null,a.createElement(p.a,{component:"span",content:"transfer.available"}),":"," ",r.id?a.createElement(v.a,{balance:r.id}):a.createElement(h.a,{amount:0,asset:n.get("id")})),I=a.createElement("span",null,a.createElement(p.a,{component:"span",content:"transfer.available"}),":"," ",o.id?a.createElement(h.a,{amount:P,asset:s.get("id")}):a.createElement(h.a,{amount:0,asset:s.get("id")})),R=this._getFeedPrice(),D=this.props.quote_asset.getIn(["bitasset","current_feed","maintenance_collateral_ratio"])/1e3,M=this.props.quote_asset.getIn(["bitasset","current_feed","maximum_short_squeeze_ratio"])/1e3,L=this._isPredictionMarket(this.props);return!L&&isNaN(R)?a.createElement("div",null,a.createElement("form",{className:"grid-container text-center no-overflow",noValidate:!0},a.createElement(p.a,{component:"h3",content:"borrow.no_valid",asset_symbol:n.get("symbol")})),a.createElement("div",{className:"grid-content button-group text-center no-overflow"},a.createElement(l.a,{close:this.props.modalId},a.createElement("div",{className:" button warning"},a.createElement(p.a,{content:"account.perm.cancel"}))))):a.createElement("div",null,a.createElement("form",{className:"grid-container small-10 small-offset-1 no-overflow",noValidate:!0},a.createElement(p.a,{component:"h3",content:"borrow.title",asset_symbol:n.get("symbol")}),a.createElement("div",{style:{textAlign:"left"}},this.props.hide_help?null:a.createElement(C.a,{path:"components/"+(L?"BorrowModalPrediction":"BorrowModal"),debt:n.get("symbol"),collateral:s.get("symbol"),borrower:this.props.account.get("name"),mr:D}),L?null:a.createElement("div",{style:{paddingBottom:"1rem"}},a.createElement("div",{className:"borrow-price-feeds"},a.createElement("span",{className:"borrow-price-label"},a.createElement(p.a,{content:"transaction.feed_price"}),": "),a.createElement(w.a,{noPopOver:!0,quote_amount:n.getIn(["bitasset","current_feed","settlement_price","base","amount"]),quote_asset:n.getIn(["bitasset","current_feed","settlement_price","base","asset_id"]),base_asset:n.getIn(["bitasset","current_feed","settlement_price","quote","asset_id"]),base_amount:n.getIn(["bitasset","current_feed","settlement_price","quote","amount"])})),a.createElement("div",{className:"borrow-price-feeds"},a.createElement("span",{className:"inline-block tooltip borrow-price-label","data-place":"bottom","data-tip":A.a.translate("tooltip.margin_price")},a.createElement(p.a,{content:"exchange.squeeze"}),": "),a.createElement(w.a,{decimals:2,callPrice:!0,noPopOver:!0,quote_amount:n.getIn(["bitasset","current_feed","settlement_price","base","amount"]),quote_asset:n.getIn(["bitasset","current_feed","settlement_price","base","asset_id"]),base_asset:n.getIn(["bitasset","current_feed","settlement_price","quote","asset_id"]),base_amount:M*n.getIn(["bitasset","current_feed","settlement_price","quote","amount"])})),a.createElement("b",null),a.createElement("div",{className:"borrow-price-final "+(d.below_maintenance?"has-error":d.close_maintenance?"has-warning":"")},a.createElement("span",{className:"borrow-price-label"},a.createElement(p.a,{content:"exchange.your_price"}),": "),this.state.newPosition?a.createElement(w.a,{noPopOver:!0,quote_amount:D*this.state.short_amount*y,quote_asset:n.get("id"),base_asset:s.get("id"),base_amount:this.state.collateral*E}):null)),a.createElement("div",{className:"form-group"},a.createElement(g.a,{label:"transaction.borrow_amount",amount:c.toString(),onChange:this._onBorrowChange.bind(this),asset:n.get("id"),assets:[n.get("id")],display_balance:T,placeholder:"0.0",tabIndex:1})),a.createElement("div",{className:k},a.createElement(g.a,{label:"transaction.collateral",amount:u.toString(),onChange:this._onCollateralChange.bind(this),asset:s.get("id"),assets:[s.get("id")],display_balance:I,placeholder:"0.0",tabIndex:1}),d.collateral_balance?a.createElement("div",{style:{paddingTop:"0.5rem"}},d.collateral_balance):null),L?null:a.createElement("div",{className:O},a.createElement(p.a,{component:"label",content:"borrow.coll_ratio"}),a.createElement("input",{min:"0",max:"6",step:"0.05",onChange:this._onRatioChange.bind(this),value:m,type:"range",disabled:!c}),a.createElement("div",{className:"inline-block"},f.a.format_number(m,2)),d.below_maintenance||d.close_maintenance?a.createElement("div",{style:{maxWidth:"calc(100% - 50px)"},className:"float-right"},d.below_maintenance,d.close_maintenance):null),a.createElement("div",{className:"no-padding grid-content button-group no-overflow"},a.createElement("div",{onClick:this._onSubmit.bind(this),href:!0,className:x},a.createElement(p.a,{content:"borrow.adjust"})),a.createElement("div",{onClick:function(t){t.preventDefault(),e.setState(e._initialState(e.props))},href:!0,className:"button info"},a.createElement(p.a,{content:"wallet.reset"}))))))}}]),t}();I.propTypes={quote_asset:m.a.ChainAsset.isRequired,bitasset_balance:m.a.ChainObject,backing_asset:m.a.ChainAsset.isRequired,backing_balance:m.a.ChainObject,call_orders:m.a.ChainObjectsList,hasCallOrders:r.bool},I=Object(d.a)(I,{keep_updating:!0});var R=function(e){function t(){N(this,t);var e=P(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={smallScreen:!1},e}return T(t,a["Component"]),S(t,[{key:"show",value:function(){var e="borrow_modal_"+this.props.quote_asset;i.a.publish(e,"open")}},{key:"componentWillMount",value:function(){this.setState({smallScreen:window.innerHeight<=800})}},{key:"render",value:function(){var e=this.props,t=e.quote_asset,n=e.backing_asset,r=e.account,s="borrow_modal_"+t,o=r.get("balances").toJS(),i=void 0,l=void 0;if(o)for(var u in o)u===n&&(i=o[u]),u===t&&(l=o[u]);return a.createElement(c.a,{id:s,overlay:!0,ref:s},a.createElement("div",{className:"grid-block vertical"},a.createElement(I,{quote_asset:t,call_orders:r.get("call_orders"),hasCallOrders:r.get("call_orders")&&r.get("call_orders").size>0,modalId:s,bitasset_balance:l,backing_balance:i,backing_asset:n,hide_help:this.state.smallScreen,account:r})))}}]),t}();t.a=R},1436:function(e,t,n){"use strict";var a=n(1270),r=n(1273),s=n(1267),o=n(1269),i=n(1271);e.exports=function(e){var t=s.get(e);t&&(t.negativeScrollAdjustment=t.isNegativeScroll?e.scrollWidth-e.clientWidth:0,r.css(t.scrollbarXRail,"display","block"),r.css(t.scrollbarYRail,"display","block"),t.railXMarginWidth=a.toInt(r.css(t.scrollbarXRail,"marginLeft"))+a.toInt(r.css(t.scrollbarXRail,"marginRight")),t.railYMarginHeight=a.toInt(r.css(t.scrollbarYRail,"marginTop"))+a.toInt(r.css(t.scrollbarYRail,"marginBottom")),r.css(t.scrollbarXRail,"display","none"),r.css(t.scrollbarYRail,"display","none"),o(e),i(e,"top",e.scrollTop),i(e,"left",e.scrollLeft),r.css(t.scrollbarXRail,"display",""),r.css(t.scrollbarYRail,"display",""))}},1437:function(e,t,n){"use strict";var a=n(1267),r=n(1269);e.exports=function(e){!function(e,t){t.event.bind(e,"scroll",function(){r(e)})}(e,a.get(e))}},1438:function(e,t,n){"use strict";var a=n(1270),r=n(1267),s=n(1269),o=n(1271);function i(e,t){var n=null,i={top:0,left:0};function c(){n&&(clearInterval(n),n=null),a.stopScrolling(e)}var l=!1;t.event.bind(t.ownerDocument,"selectionchange",function(){e.contains(function(){var e=window.getSelection?window.getSelection():document.getSelection?document.getSelection():"";return 0===e.toString().length?null:e.getRangeAt(0).commonAncestorContainer}())?l=!0:(l=!1,c())}),t.event.bind(window,"mouseup",function(){l&&(l=!1,c())}),t.event.bind(window,"keyup",function(){l&&(l=!1,c())}),t.event.bind(window,"mousemove",function(t){if(l){var u={x:t.pageX,y:t.pageY},p={left:e.offsetLeft,right:e.offsetLeft+e.offsetWidth,top:e.offsetTop,bottom:e.offsetTop+e.offsetHeight};u.x<p.left+3?(i.left=-5,a.startScrolling(e,"x")):u.x>p.right-3?(i.left=5,a.startScrolling(e,"x")):i.left=0,u.y<p.top+3?(i.top=p.top+3-u.y<5?-5:-20,a.startScrolling(e,"y")):u.y>p.bottom-3?(i.top=u.y-p.bottom+3<5?5:20,a.startScrolling(e,"y")):i.top=0,0===i.top&&0===i.left?c():n||(n=setInterval(function(){r.get(e)?(o(e,"top",e.scrollTop+i.top),o(e,"left",e.scrollLeft+i.left),s(e)):clearInterval(n)},50))}})}e.exports=function(e){i(e,r.get(e))}},1439:function(e,t,n){"use strict";var a=n(1270),r=n(1267),s=n(1269),o=n(1271);function i(e,t,n,a){function i(t,n){o(e,"top",e.scrollTop-n),o(e,"left",e.scrollLeft-t),s(e)}var c={},l=0,u={},p=null,m=!1,d=!1;function h(){m=!0}function f(){m=!1}function b(e){return e.targetTouches?e.targetTouches[0]:e}function _(e){return!(!e.targetTouches||1!==e.targetTouches.length)||!(!e.pointerType||"mouse"===e.pointerType||e.pointerType===e.MSPOINTER_TYPE_MOUSE)}function g(e){if(_(e)){d=!0;var t=b(e);c.pageX=t.pageX,c.pageY=t.pageY,l=(new Date).getTime(),null!==p&&clearInterval(p),e.stopPropagation()}}function v(n){if(!d&&t.settings.swipePropagation&&g(n),!m&&d&&_(n)){var a=b(n),r={pageX:a.pageX,pageY:a.pageY},s=r.pageX-c.pageX,o=r.pageY-c.pageY;i(s,o),c=r;var p=(new Date).getTime(),h=p-l;h>0&&(u.x=s/h,u.y=o/h,l=p),function(n,a){var r=e.scrollTop,s=e.scrollLeft,o=Math.abs(n),i=Math.abs(a);if(i>o){if(a<0&&r===t.contentHeight-t.containerHeight||a>0&&0===r)return!t.settings.swipePropagation}else if(o>i&&(n<0&&s===t.contentWidth-t.containerWidth||n>0&&0===s))return!t.settings.swipePropagation;return!0}(s,o)&&(n.stopPropagation(),n.preventDefault())}}function y(){!m&&d&&(d=!1,clearInterval(p),p=setInterval(function(){r.get(e)&&(u.x||u.y)?Math.abs(u.x)<.01&&Math.abs(u.y)<.01?clearInterval(p):(i(30*u.x,30*u.y),u.x*=.8,u.y*=.8):clearInterval(p)},10))}n?(t.event.bind(window,"touchstart",h),t.event.bind(window,"touchend",f),t.event.bind(e,"touchstart",g),t.event.bind(e,"touchmove",v),t.event.bind(e,"touchend",y)):a&&(window.PointerEvent?(t.event.bind(window,"pointerdown",h),t.event.bind(window,"pointerup",f),t.event.bind(e,"pointerdown",g),t.event.bind(e,"pointermove",v),t.event.bind(e,"pointerup",y)):window.MSPointerEvent&&(t.event.bind(window,"MSPointerDown",h),t.event.bind(window,"MSPointerUp",f),t.event.bind(e,"MSPointerDown",g),t.event.bind(e,"MSPointerMove",v),t.event.bind(e,"MSPointerUp",y)))}e.exports=function(e){(a.env.supportsTouch||a.env.supportsIePointer)&&i(e,r.get(e),a.env.supportsTouch,a.env.supportsIePointer)}},1440:function(e,t,n){"use strict";var a=n(1267),r=n(1269),s=n(1271);function o(e,t){var n=!1;function a(a){var o=function(e){var t=e.deltaX,n=-1*e.deltaY;return void 0!==t&&void 0!==n||(t=-1*e.wheelDeltaX/6,n=e.wheelDeltaY/6),e.deltaMode&&1===e.deltaMode&&(t*=10,n*=10),t!=t&&n!=n&&(t=0,n=e.wheelDelta),e.shiftKey?[-n,-t]:[t,n]}(a),i=o[0],c=o[1];(function(t,n){var a=e.querySelector("textarea:hover, select[multiple]:hover, .ps-child:hover");if(a){if(a.className.match(/ps-must-propagate/))return!0;if(!window.getComputedStyle(a).overflow.match(/(scroll|auto)/))return!1;var r=a.scrollHeight-a.clientHeight;if(r>0&&!(0===a.scrollTop&&n>0||a.scrollTop===r&&n<0))return!0;var s=a.scrollLeft-a.clientWidth;if(s>0&&!(0===a.scrollLeft&&t<0||a.scrollLeft===s&&t>0))return!0}return!1})(i,c)||(n=!1,t.settings.useBothWheelAxes?t.scrollbarYActive&&!t.scrollbarXActive?(s(e,"top",c?e.scrollTop-c*t.settings.wheelSpeed:e.scrollTop+i*t.settings.wheelSpeed),n=!0):t.scrollbarXActive&&!t.scrollbarYActive&&(s(e,"left",i?e.scrollLeft+i*t.settings.wheelSpeed:e.scrollLeft-c*t.settings.wheelSpeed),n=!0):(s(e,"top",e.scrollTop-c*t.settings.wheelSpeed),s(e,"left",e.scrollLeft+i*t.settings.wheelSpeed)),r(e),(n=n||function(n,a){var r=e.scrollTop;if(0===n){if(!t.scrollbarYActive)return!1;if(0===r&&a>0||r>=t.contentHeight-t.containerHeight&&a<0)return!t.settings.wheelPropagation}var s=e.scrollLeft;if(0===a){if(!t.scrollbarXActive)return!1;if(0===s&&n<0||s>=t.contentWidth-t.containerWidth&&n>0)return!t.settings.wheelPropagation}return!0}(i,c))&&(a.stopPropagation(),a.preventDefault()))}void 0!==window.onwheel?t.event.bind(e,"wheel",a):void 0!==window.onmousewheel&&t.event.bind(e,"mousewheel",a)}e.exports=function(e){o(e,a.get(e))}},1441:function(e,t,n){"use strict";var a=n(1270),r=n(1273),s=n(1267),o=n(1269),i=n(1271);function c(e,t){var n=!1;t.event.bind(e,"mouseenter",function(){n=!0}),t.event.bind(e,"mouseleave",function(){n=!1});t.event.bind(t.ownerDocument,"keydown",function(s){if(!(s.isDefaultPrevented&&s.isDefaultPrevented()||s.defaultPrevented)){var c=r.matches(t.scrollbarX,":focus")||r.matches(t.scrollbarY,":focus");if(n||c){var l=document.activeElement?document.activeElement:t.ownerDocument.activeElement;if(l){if("IFRAME"===l.tagName)l=l.contentDocument.activeElement;else for(;l.shadowRoot;)l=l.shadowRoot.activeElement;if(a.isEditable(l))return}var u=0,p=0;switch(s.which){case 37:u=s.metaKey?-t.contentWidth:s.altKey?-t.containerWidth:-30;break;case 38:p=s.metaKey?t.contentHeight:s.altKey?t.containerHeight:30;break;case 39:u=s.metaKey?t.contentWidth:s.altKey?t.containerWidth:30;break;case 40:p=s.metaKey?-t.contentHeight:s.altKey?-t.containerHeight:-30;break;case 33:p=90;break;case 32:p=s.shiftKey?90:-90;break;case 34:p=-90;break;case 35:p=s.ctrlKey?-t.contentHeight:-t.containerHeight;break;case 36:p=s.ctrlKey?e.scrollTop:t.containerHeight;break;default:return}i(e,"top",e.scrollTop-p),i(e,"left",e.scrollLeft+u),o(e),function(n,a){var r=e.scrollTop;if(0===n){if(!t.scrollbarYActive)return!1;if(0===r&&a>0||r>=t.contentHeight-t.containerHeight&&a<0)return!t.settings.wheelPropagation}var s=e.scrollLeft;if(0===a){if(!t.scrollbarXActive)return!1;if(0===s&&n<0||s>=t.contentWidth-t.containerWidth&&n>0)return!t.settings.wheelPropagation}return!0}(u,p)&&s.preventDefault()}}})}e.exports=function(e){c(e,s.get(e))}},1442:function(e,t,n){"use strict";var a=n(1270),r=n(1273),s=n(1267),o=n(1269),i=n(1271);function c(e,t){var n=null,s=null;var c=function(r){!function(r){var s=n+r*t.railXRatio,o=Math.max(0,t.scrollbarXRail.getBoundingClientRect().left)+t.railXRatio*(t.railXWidth-t.scrollbarXWidth);t.scrollbarXLeft=s<0?0:s>o?o:s;var c=a.toInt(t.scrollbarXLeft*(t.contentWidth-t.containerWidth)/(t.containerWidth-t.railXRatio*t.scrollbarXWidth))-t.negativeScrollAdjustment;i(e,"left",c)}(r.pageX-s),o(e),r.stopPropagation(),r.preventDefault()},l=function(){a.stopScrolling(e,"x"),t.event.unbind(t.ownerDocument,"mousemove",c)};t.event.bind(t.scrollbarX,"mousedown",function(o){s=o.pageX,n=a.toInt(r.css(t.scrollbarX,"left"))*t.railXRatio,a.startScrolling(e,"x"),t.event.bind(t.ownerDocument,"mousemove",c),t.event.once(t.ownerDocument,"mouseup",l),o.stopPropagation(),o.preventDefault()})}function l(e,t){var n=null,s=null;var c=function(r){!function(r){var s=n+r*t.railYRatio,o=Math.max(0,t.scrollbarYRail.getBoundingClientRect().top)+t.railYRatio*(t.railYHeight-t.scrollbarYHeight);t.scrollbarYTop=s<0?0:s>o?o:s;var c=a.toInt(t.scrollbarYTop*(t.contentHeight-t.containerHeight)/(t.containerHeight-t.railYRatio*t.scrollbarYHeight));i(e,"top",c)}(r.pageY-s),o(e),r.stopPropagation(),r.preventDefault()},l=function(){a.stopScrolling(e,"y"),t.event.unbind(t.ownerDocument,"mousemove",c)};t.event.bind(t.scrollbarY,"mousedown",function(o){s=o.pageY,n=a.toInt(r.css(t.scrollbarY,"top"))*t.railYRatio,a.startScrolling(e,"y"),t.event.bind(t.ownerDocument,"mousemove",c),t.event.once(t.ownerDocument,"mouseup",l),o.stopPropagation(),o.preventDefault()})}e.exports=function(e){var t=s.get(e);c(e,t),l(e,t)}},1443:function(e,t,n){"use strict";var a=n(1267),r=n(1269),s=n(1271);e.exports=function(e){!function(e,t){function n(e){return e.getBoundingClientRect()}var a=function(e){e.stopPropagation()};t.event.bind(t.scrollbarY,"click",a),t.event.bind(t.scrollbarYRail,"click",function(a){var o=a.pageY-window.pageYOffset-n(t.scrollbarYRail).top>t.scrollbarYTop?1:-1;s(e,"top",e.scrollTop+o*t.containerHeight),r(e),a.stopPropagation()}),t.event.bind(t.scrollbarX,"click",a),t.event.bind(t.scrollbarXRail,"click",function(a){var o=a.pageX-window.pageXOffset-n(t.scrollbarXRail).left>t.scrollbarXLeft?1:-1;s(e,"left",e.scrollLeft+o*t.containerWidth),r(e),a.stopPropagation()})}(e,a.get(e))}},1444:function(e,t,n){"use strict";var a=n(1270),r=n(1285),s=n(1267),o=n(1269),i={"click-rail":n(1443),"drag-scrollbar":n(1442),keyboard:n(1441),wheel:n(1440),touch:n(1439),selection:n(1438)},c=n(1437);e.exports=function(e,t){t="object"==typeof t?t:{},r.add(e,"ps-container");var n=s.add(e);n.settings=a.extend(n.settings,t),r.add(e,"ps-theme-"+n.settings.theme),n.settings.handlers.forEach(function(t){i[t](e)}),c(e),o(e)}},1445:function(e,t,n){"use strict";e.exports=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return function(){return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}}()},1446:function(e,t,n){"use strict";var a=function(e){this.element=e,this.events={}};a.prototype.bind=function(e,t){void 0===this.events[e]&&(this.events[e]=[]),this.events[e].push(t),this.element.addEventListener(e,t,!1)},a.prototype.unbind=function(e,t){var n=void 0!==t;this.events[e]=this.events[e].filter(function(a){return!(!n||a===t)||(this.element.removeEventListener(e,a,!1),!1)},this)},a.prototype.unbindAll=function(){for(var e in this.events)this.unbind(e)};var r=function(){this.eventElements=[]};r.prototype.eventElement=function(e){var t=this.eventElements.filter(function(t){return t.element===e})[0];return void 0===t&&(t=new a(e),this.eventElements.push(t)),t},r.prototype.bind=function(e,t,n){this.eventElement(e).bind(t,n)},r.prototype.unbind=function(e,t,n){this.eventElement(e).unbind(t,n)},r.prototype.unbindAll=function(){for(var e=0;e<this.eventElements.length;e++)this.eventElements[e].unbindAll()},r.prototype.once=function(e,t,n){var a=this.eventElement(e),r=function(e){a.unbind(t,r),n(e)};a.bind(t,r)},e.exports=r},1447:function(e,t,n){"use strict";e.exports={handlers:["click-rail","drag-scrollbar","keyboard","wheel","touch"],maxScrollbarLength:null,minScrollbarLength:null,scrollXMarginOffset:0,scrollYMarginOffset:0,suppressScrollX:!1,suppressScrollY:!1,swipePropagation:!0,useBothWheelAxes:!1,wheelPropagation:!1,wheelSpeed:1,theme:"default"}},1448:function(e,t,n){"use strict";var a=n(1270),r=n(1273),s=n(1267);e.exports=function(e){var t=s.get(e);t&&(t.event.unbindAll(),r.remove(t.scrollbarX),r.remove(t.scrollbarY),r.remove(t.scrollbarXRail),r.remove(t.scrollbarYRail),a.removePsClasses(e),s.remove(e))}},1449:function(e,t,n){"use strict";var a=n(1448),r=n(1444),s=n(1436);e.exports={initialize:r,update:s,destroy:a}},1458:function(e,t,n){var a={"./af":1420,"./af.js":1420,"./ar":1419,"./ar-dz":1418,"./ar-dz.js":1418,"./ar-kw":1417,"./ar-kw.js":1417,"./ar-ly":1416,"./ar-ly.js":1416,"./ar-ma":1415,"./ar-ma.js":1415,"./ar-sa":1414,"./ar-sa.js":1414,"./ar-tn":1413,"./ar-tn.js":1413,"./ar.js":1419,"./az":1412,"./az.js":1412,"./be":1411,"./be.js":1411,"./bg":1410,"./bg.js":1410,"./bm":1409,"./bm.js":1409,"./bn":1408,"./bn.js":1408,"./bo":1407,"./bo.js":1407,"./br":1406,"./br.js":1406,"./bs":1405,"./bs.js":1405,"./ca":1404,"./ca.js":1404,"./cs":1403,"./cs.js":1403,"./cv":1402,"./cv.js":1402,"./cy":1401,"./cy.js":1401,"./da":1400,"./da.js":1400,"./de":1399,"./de-at":1398,"./de-at.js":1398,"./de-ch":1397,"./de-ch.js":1397,"./de.js":1399,"./dv":1396,"./dv.js":1396,"./el":1395,"./el.js":1395,"./en-au":1394,"./en-au.js":1394,"./en-ca":1393,"./en-ca.js":1393,"./en-gb":1392,"./en-gb.js":1392,"./en-ie":1391,"./en-ie.js":1391,"./en-nz":1390,"./en-nz.js":1390,"./eo":1389,"./eo.js":1389,"./es":1388,"./es-do":1387,"./es-do.js":1387,"./es-us":1386,"./es-us.js":1386,"./es.js":1388,"./et":1385,"./et.js":1385,"./eu":1384,"./eu.js":1384,"./fa":1383,"./fa.js":1383,"./fi":1382,"./fi.js":1382,"./fo":1381,"./fo.js":1381,"./fr":1380,"./fr-ca":1379,"./fr-ca.js":1379,"./fr-ch":1378,"./fr-ch.js":1378,"./fr.js":1380,"./fy":1377,"./fy.js":1377,"./gd":1376,"./gd.js":1376,"./gl":1375,"./gl.js":1375,"./gom-latn":1374,"./gom-latn.js":1374,"./gu":1373,"./gu.js":1373,"./he":1372,"./he.js":1372,"./hi":1371,"./hi.js":1371,"./hr":1370,"./hr.js":1370,"./hu":1369,"./hu.js":1369,"./hy-am":1368,"./hy-am.js":1368,"./id":1367,"./id.js":1367,"./is":1366,"./is.js":1366,"./it":1365,"./it.js":1365,"./ja":1364,"./ja.js":1364,"./jv":1363,"./jv.js":1363,"./ka":1362,"./ka.js":1362,"./kk":1361,"./kk.js":1361,"./km":1360,"./km.js":1360,"./kn":1359,"./kn.js":1359,"./ko":1358,"./ko.js":1358,"./ky":1357,"./ky.js":1357,"./lb":1356,"./lb.js":1356,"./lo":1355,"./lo.js":1355,"./lt":1354,"./lt.js":1354,"./lv":1353,"./lv.js":1353,"./me":1352,"./me.js":1352,"./mi":1351,"./mi.js":1351,"./mk":1350,"./mk.js":1350,"./ml":1349,"./ml.js":1349,"./mr":1348,"./mr.js":1348,"./ms":1347,"./ms-my":1346,"./ms-my.js":1346,"./ms.js":1347,"./my":1345,"./my.js":1345,"./nb":1344,"./nb.js":1344,"./ne":1343,"./ne.js":1343,"./nl":1342,"./nl-be":1341,"./nl-be.js":1341,"./nl.js":1342,"./nn":1340,"./nn.js":1340,"./pa-in":1339,"./pa-in.js":1339,"./pl":1338,"./pl.js":1338,"./pt":1337,"./pt-br":1336,"./pt-br.js":1336,"./pt.js":1337,"./ro":1335,"./ro.js":1335,"./ru":1334,"./ru.js":1334,"./sd":1333,"./sd.js":1333,"./se":1332,"./se.js":1332,"./si":1331,"./si.js":1331,"./sk":1330,"./sk.js":1330,"./sl":1329,"./sl.js":1329,"./sq":1328,"./sq.js":1328,"./sr":1327,"./sr-cyrl":1326,"./sr-cyrl.js":1326,"./sr.js":1327,"./ss":1325,"./ss.js":1325,"./sv":1324,"./sv.js":1324,"./sw":1323,"./sw.js":1323,"./ta":1322,"./ta.js":1322,"./te":1321,"./te.js":1321,"./tet":1320,"./tet.js":1320,"./th":1319,"./th.js":1319,"./tl-ph":1318,"./tl-ph.js":1318,"./tlh":1317,"./tlh.js":1317,"./tr":1316,"./tr.js":1316,"./tzl":1315,"./tzl.js":1315,"./tzm":1314,"./tzm-latn":1313,"./tzm-latn.js":1313,"./tzm.js":1314,"./uk":1312,"./uk.js":1312,"./ur":1311,"./ur.js":1311,"./uz":1310,"./uz-latn":1309,"./uz-latn.js":1309,"./uz.js":1310,"./vi":1308,"./vi.js":1308,"./x-pseudo":1307,"./x-pseudo.js":1307,"./yo":1306,"./yo.js":1306,"./zh-cn":1305,"./zh-cn.js":1305,"./zh-hk":1304,"./zh-hk.js":1304,"./zh-tw":1303,"./zh-tw.js":1303};function r(e){var t=s(e);return n(t)}function s(e){var t=a[e];if(!(t+1)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t}r.keys=function(){return Object.keys(a)},r.resolve=s,e.exports=r,r.id=1458},1498:function(e,t,n){"use strict";(function(e){var a=n(0),r=(n(3),n(2)),s=n.n(r),o=n(19),i=n(40),c=n(17),l=n(13),u=n.n(l),p=n(1278),m=n(1288),d=n(1280),h=n(155),f=n(1426),b=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var _=function(t){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e)),a=t.props.asset.options,r=Object(h.d)(a,"vesting_period")||void 0;return t.state={amount:e.amount,to:e.to,to_id:null,memo:void 0,vestingPeriod:r},t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,a["Component"]),b(n,[{key:"onAmountChanged",value:function(e){var t=e.amount;e.asset;this.setState({amount:t})}},{key:"onToAccountChanged",value:function(e){var t=e?{to:e.get("name"),to_id:e.get("id")}:{to_id:null};this.setState(t)}},{key:"onToChanged",value:function(e){this.setState({to:e,to_id:null})}},{key:"onPeriodChange",value:function(e){this.setState({vestingPeriod:e})}},{key:"onSubmit",value:function(){var t=this.props.asset_to_issue,n=c.a.get_asset_precision(t.get("precision")),a=this.state.amount.replace(/,/g,"");a*=n;var r=this.props.asset.options,s=Object(h.d)(r,"vesting_period");p.a.issueAsset(this.state.to_id,t.get("issuer"),t.get("id"),a,this.state.memo?new e(this.state.memo,"utf-8"):this.state.memo,s&&this.state.vestingPeriod),this.setState({amount:null,to_id:null,memo:null})}},{key:"onMemoChanged",value:function(e){this.setState({memo:e.target.value})}},{key:"render",value:function(){var e=this.props.asset_to_issue.get("id"),t=1,n=this.props.asset.options,r=Object(h.d)(n,"vesting_period");return a.createElement("form",{className:"grid-block vertical full-width-content"},a.createElement("div",{className:"grid-container ",style:{paddingTop:"2rem"}},a.createElement("div",{className:"content-block"},a.createElement(m.a,{label:"modal.issue.to",accountName:this.state.to,onAccountChanged:this.onToAccountChanged.bind(this),onChange:this.onToChanged.bind(this),account:this.state.to,tabIndex:t++})),a.createElement("div",{className:"content-block"},a.createElement(d.a,{label:"modal.issue.amount",amount:this.state.amount,onChange:this.onAmountChanged.bind(this),asset:e,assets:[e],tabIndex:t++})),r&&a.createElement("div",{className:"content-block"},a.createElement("label",{htmlFor:"issueVesting"},a.createElement(s.a,{component:"span",content:"account.user_issued_assets.vesting_period"})),a.createElement(f.a,{className:"period-horizontal",defaultPeriod:this.state.vestingPeriod||r,name:"issue",tabIndex:t+=2,onPeriodChange:this.onPeriodChange.bind(this)})),a.createElement("div",{className:"content-block"},a.createElement("label",null,a.createElement(s.a,{component:"span",content:"transfer.memo"})," (",a.createElement(s.a,{content:"transfer.optional"}),")"),a.createElement("textarea",{rows:"1",value:this.state.memo,tabIndex:t++,onChange:this.onMemoChanged.bind(this)})),a.createElement("div",{className:"content-block button-group"},a.createElement("input",{type:"submit",className:"button success",onClick:this.onSubmit.bind(this,this.state.to,this.state.amount),value:u.a.translate("modal.issue.submit"),tabIndex:t++}),a.createElement("div",{className:"button",onClick:this.props.onClose,tabIndex:t++},u.a.translate("cancel")))))}}]),n}();_.propTypes={asset_to_issue:o.a.ChainAsset.isRequired},t.a=Object(i.a)(_)}).call(this,n(30).Buffer)}}]);