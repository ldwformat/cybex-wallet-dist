(window.webpackJsonp=window.webpackJsonp||[]).push([[263],{1622:function(e,t,n){"use strict";var r=n(0),a=n(2),o=n(1),s=n.n(o),i=n(22),l=n(24),c=n(19),u=n(342),p=n(5),d=n.n(p),h=n(9),m=n.n(h),f=n(58),b=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _=function(e){function t(){return g(this,t),y(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return v(t,r["Component"]),b(t,[{key:"render",value:function(){return 0===this.props.assets.length?null:r.createElement(u.a,{entries:this.props.assets.map(function(e){return e&&e.get("symbol")}).filter(function(e){return!!e}),values:this.props.assets.reduce(function(e,t){return t&&t.get("symbol")&&(e[t.get("symbol")]=t),e},{}),singleEntry:this.props.assets[0]?r.createElement(c.a,{asset:this.props.assets[0].get("id"),amount:0,hide_amount:!0}):null,value:this.props.value,onChange:this.props.onChange})}}]),t}();_.propTypes={assets:i.a.ChainAssetsList,value:a.string,onChange:a.func},_=Object(l.a)(_);var E=function(e){function t(){return g(this,t),y(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return v(t,r["Component"]),b(t,[{key:"componentDidMount",value:function(){this.onAssetChange(this.props.asset)}},{key:"formatAmount",value:function(e){return e||(e=""),"number"==typeof e&&(e=e.toString()),e.trim().replace(/,/g,"")}},{key:"_onChange",value:function(e){var t=e.target.value;this.props.onChange({amount:t,asset:this.props.asset})}},{key:"onAssetChange",value:function(e){this.props.onChange({amount:this.props.amount,asset:e})}},{key:"render",value:function(){var e=this.props.error?m.a.translate(this.props.error):this.formatAmount(this.props.amount),t=this.props.isNumber;return r.createElement("div",{className:"amount-selector",style:this.props.style},r.createElement("label",{className:"right-label"},this.props.display_balance),r.createElement("label",{className:"left-label"},r.createElement(s.a,{content:this.props.label}),this.props.labelTooltip&&r.createElement(f.r,{id:this.props.labelTooltip.id},this.props.labelTooltip.component)),r.createElement("div",{className:"inline-label input-wrapper"},t?r.createElement(f.l,{disabled:this.props.disabled,type:"number",valueFromOuter:!0,value:e,size:"small",placeholder:this.props.placeholder,onChange:this._onChange.bind(this),tabIndex:this.props.tabIndex,style:{width:"100%",marginBottom:0}}):r.createElement(f.l,{disabled:this.props.disabled,type:"text",valueFromOuter:!0,size:"small",value:e||"",placeholder:this.props.placeholder,onChange:this._onChange.bind(this),tabIndex:this.props.tabIndex,style:{width:"100%",marginBottom:0}}),r.createElement("div",{className:"form-label select floating-dropdown"},r.createElement(_,{ref:this.props.refCallback,value:this.props.asset.get("symbol"),assets:d.a.List(this.props.assets),onChange:this.onAssetChange.bind(this)}))))}}]),t}();E.propTypes={label:a.string,asset:i.a.ChainAsset.isRequired,assets:a.array,amount:a.any,placeholder:a.string,onChange:a.func.isRequired,tabIndex:a.number,error:a.string},E.defaultProps={disabled:!1},E=Object(l.a)(E),t.a=E},1623:function(e,t,n){"use strict";var r;n.d(t,"c",function(){return u}),n.d(t,"b",function(){return p}),n.d(t,"a",function(){return d}),n.d(t,"d",function(){return m});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i,l={BTC:"https://live.blockcypher.com/btc/tx/#{txid}",USDT:"https://www.omniexplorer.info/tx/#{txid}",ETH:"https://etherscan.io/tx/#{txid}",GAS:"https://neoscan.io/transaction/#{txid}",EOS:"https://eosflare.io/tx/#{txid}",LTC:"https://chain.so/tx/LTC/#{txid}",QTUM:"https://explorer.qtum.org/tx/#{txid}"},c={ERC20:"https://etherscan.io/token/#{contract}"},u="https://gateway.cybex.io/gateway",p="https://gateway-query.cybex.io/",d="CybexGateway";!function(e){e[e.ERC20=0]="ERC20",e[e.ETH=1]="ETH",e[e.BTC=2]="BTC",e[e.USDT=3]="USDT",e[e.EOS=4]="EOS",e[e.LTC=5]="LTC",e[e.QTUM=6]="QTUM",e[e.NEO=7]="NEO"}(i||(i={}));var h=function(){function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};s(this,e),this.asset=t,this.type=n,this.protocol=r,this.options=a,this.contractExplorer=a.contractAddress?this.getExplorerUrlByContract(a.contractAddress):null}return a(e,[{key:"getExplorerUrlByTx",value:function(t){if(!e.ExplorerAddress[this.protocol])return null;try{return(this.options.specificExplorer||e.ExplorerAddress[this.protocol]).replace("#{txid}",t)}catch(e){return null}}},{key:"getExplorerUrlByContract",value:function(t){if(!e.ContractAddress[this.protocol])return null;try{return(this.options.specificContractExplorer||e.ContractAddress[this.protocol]).replace("#{contract}",t)}catch(e){return null}}}]),e}();h.ExplorerAddress=(o(r={},i.BTC,l.BTC),o(r,i.USDT,l.USDT),o(r,i.ERC20,l.ETH),o(r,i.ETH,l.ETH),o(r,i.EOS,l.EOS),o(r,i.LTC,l.LTC),o(r,i.QTUM,l.QTUM),o(r,i.NEO,l.GAS),r),h.ContractAddress=o({},i.ERC20,c.ERC20);var m={GATEWAY_ACCOUNT:"cybex-jadegateway",ADDRESS_TYPES:{"JADE.ETH":new h("JADE.ETH","ETH",i.ETH,{name:"Ethereum"}),"JADE.BTC":new h("JADE.BTC","BTC",i.BTC,{name:"Bitcoin"}),"JADE.LTC":new h("JADE.LTC","LTC",i.LTC,{name:"Litecoin"}),"JADE.EOS":new h("JADE.EOS","EOS",i.EOS,{name:"EOS"}),"JADE.USDT":new h("JADE.USDT","USDT",i.USDT,{name:"Tether"}),"JADE.LHT":new h("JADE.LHT","LHT",i.ERC20,{name:"LongHash"}),"JADE.INK":new h("JADE.INK","INK",i.ERC20,{name:"Ink [QTUM]",contractAddress:"0xf4c90e18727c5c76499ea6369c856a6d61d3e92e"}),"JADE.BAT":new h("JADE.BAT","BAT",i.ERC20,{name:"Basic Attention Token",contractAddress:"0x0d8775f648430679a709e98d2b0cb6250d2887ef"}),"JADE.OMG":new h("JADE.OMG","OMG",i.ERC20,{name:"OmiseGO",contractAddress:"0xd26114cd6ee289accf82350c8d8487fedb8a0c07"}),"JADE.SNT":new h("JADE.SNT","SNT",i.ERC20,{name:"Status",contractAddress:"0x744d70fdbe2ba4cf95131626614a1763df805b9e"}),"JADE.NAS":new h("JADE.NAS","NAS",i.ERC20,{name:"Nebulas",contractAddress:"0x5d65d971895edc438f465c17db6992698a52318d"}),"JADE.KNC":new h("JADE.KNC","KNC",i.ERC20,{name:"Kyber Network",contractAddress:"0xdd974d5c2e2928dea5f71b9825b8b646686bd200"}),"JADE.PAY":new h("JADE.PAY","PAY",i.ERC20,{name:"TenX",contractAddress:"0xb97048628db6b661d4c2aa833e95dbe1a905b280"}),"JADE.GET":new h("JADE.GET","GET",i.ERC20,{name:"Global Escrow Token, Themis",contractAddress:"0x60c68a87be1e8a84144b543aacfa77199cd3d024"}),"JADE.MAD":new h("JADE.MAD","MAD",i.ERC20,{name:"MAD Network",contractAddress:"0x5b09a0371c1da44a8e24d36bf5deb1141a84d875"}),"JADE.TCT":new h("JADE.TCT","TCT",i.ERC20,{name:"TokenClub",contractAddress:"0x4824a7b64e3966b0133f4f4ffb1b9d6beb75fff7"}),"JADE.CENNZ":new h("JADE.CENNZ","CENNZ",i.ERC20,{name:"Centrality",contractAddress:"0x1122b6a0e00dce0563082b6e2953f3a943855c1f"}),"JADE.POLY":new h("JADE.POLY","POLY",i.ERC20,{name:"Polymath",contractAddress:"0x9992eC3cF6A55b00978cdDF2b27BC6882d88D1eC"}),"JADE.MCO":new h("JADE.MCO","MCO",i.ERC20,{name:"Monaco",contractAddress:"0xb63b606ac810a52cca15e44bb630fd42d8d1d83d"}),"JADE.JCT":new h("JADE.JCT","JCT",i.ERC20,{name:"JCT",contractAddress:"0x9288d6b823927f528aea244c5fa71a356b807112"}),"JADE.HER":new h("JADE.HER","HER",i.ERC20,{name:"Hero Node",contractAddress:"0x9ae559ac062de221eb5198d90c27e45e85fcaab2"}),"JADE.CTXC":new h("JADE.CTXC","CTXC",i.ERC20,{name:"Cortex",contractAddress:"0xea11755ae41d889ceec39a63e6ff75a02bc1c00d"}),"JADE.NES":new h("JADE.NES","NES",i.ERC20,{name:"Genesis Space",contractAddress:"0xa74ae2d3a4c3f6d9454634fee91dc7aab6724cf9"}),"JADE.PPT":new h("JADE.PPT","PPT",i.ERC20,{name:"Populous",contractAddress:"0xd4fa1460f537bb9085d22c7bccb5dd450ef28e3a"}),"JADE.RHOC":new h("JADE.RHOC","RHOC",i.ERC20,{name:"RChain",contractAddress:"0x168296bb09e24a88805cb9c33356536b980d3fc5"}),"JADE.MKR":new h("JADE.MKR","MKR",i.ERC20,{name:"Maker",contractAddress:"0x9f8f72aa9304c8b593d555f12ef6589cc3a579a2"}),"JADE.FUN":new h("JADE.FUN","FUN",i.ERC20,{name:"FunFair",contractAddress:"0x419d0d8bdd9af5e606ae2232ed285aff190e711b"}),"JADE.MVP":new h("JADE.MVP","MVP",i.ERC20,{name:"Merculet",contractAddress:"0x8a77e40936bbc27e80e9a3f526368c967869c86d"}),"JADE.GNT":new h("JADE.GNT","GNT",i.ERC20,{name:"Golem",contractAddress:"0xa74476443119a942de498590fe1f2454d7d4ac0d"}),"JADE.DPY":new h("JADE.DPY","DPY",i.ERC20,{name:"Delphy",contractAddress:"0x6c2adc2073994fb2ccc5032cc2906fa221e9b391"}),"JADE.GNX":new h("JADE.GNX","GNX",i.ERC20,{name:"Genaro Network",contractAddress:"0x6ec8a24cabdc339a06a172f8223ea557055adaa5"}),"JADE.KEY":new h("JADE.KEY","KEY",i.ERC20,{name:"Bihu KEY",contractAddress:"0x4cd988afbad37289baaf53c13e98e2bd46aaea8c"}),"JADE.MT":new h("JADE.MT","MT",i.ERC20,{name:"MyToken",contractAddress:"0x9b4e2b4b13d125238aa0480dd42b4f6fc71b37cc"}),"JADE.ENG":new h("JADE.ENG","ENG",i.ERC20,{name:"Enigma",contractAddress:"0xf0ee6b27b759c9893ce4f094b49ad28fd15a23e4"})}}},1624:function(e,t,n){"use strict";var r=n(11),a=n(12),o=n(10),s=n(141),i=n(1641),l=n(35),c=n(1623),u=n(3),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var d=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.op=t,this.signer=""}return p(e,[{key:"addSigner",value:function(e){this.signer=e}}]),e}();n.d(t,"a",function(){return b}),n.d(t,"c",function(){return g}),n.d(t,"b",function(){return _});var h=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var m=function(e,t,n,r){return new(n||(n=Promise))(function(a,o){function s(e){try{l(r.next(e))}catch(e){o(e)}}function i(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(s,i)}l((r=r.apply(e,t||[])).next())})},f=Object(s.a)("GatewayActions"),b="DEPOSIT_MODAL_ID",g="WITHDRAW_MODAL_ID",y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=[],r=!0,o=!1,s=void 0;try{for(var i,l=e[Symbol.iterator]();!(r=(i=l.next()).done);r=!0){var c=i.value,u=a.a.getPrivateKey(c);if(u&&(n.push(u),n.length>=t))break}}catch(e){o=!0,s=e}finally{try{!r&&l.return&&l.return()}finally{if(o)throw s}}return n},v=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return h(e,[{key:"showDepositModal",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:b;return m(this,void 0,void 0,regeneratorRuntime.mark(function r(){var a;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(a=c.d.ADDRESS_TYPES[t]&&c.d.ADDRESS_TYPES[t].type){r.next=3;break}return r.abrupt("return",l.a.error("No suitable asset for "+t+" to be deposited"));case 3:return r.next=5,this.updateDepositAddress(e,a);case 5:if(r.sent){r.next=8;break}return r.abrupt("return");case 8:this.openModal(n);case 9:case"end":return r.stop()}},r,this)}))}},{key:"showWithdrawModal",value:function(e){return m(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(f("Withdraw: ",e),n=c.d.ADDRESS_TYPES[e]&&c.d.ADDRESS_TYPES[e].type){t.next=4;break}return t.abrupt("return",l.a.error("No suitable asset for "+e+" to be withdrawn"));case 4:return t.next=6,this.updateWithdrawInfo(e,n);case 6:if(t.sent){t.next=9;break}return t.abrupt("return");case 9:this.openModal(g);case 10:case"end":return t.stop()}},t,this)}))}},{key:"updateDepositAddress",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return m(this,void 0,void 0,regeneratorRuntime.mark(function r(){var a,o,s;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return a=void 0,f("Update Deposit Address: ",e,t,n),r.prev=2,r.next=5,Object(i.a)(e,t,n);case 5:o=a=r.sent,s=o.address,f("Address: ",s),r.next=15;break;case 10:return r.prev=10,r.t0=r.catch(2),f(r.t0),l.a.error(r.t0.message),r.abrupt("return",!1);case 15:return this.afterUpdateDepositInfo(a),r.abrupt("return",a);case 17:case"end":return r.stop()}},r,this,[[2,10]])}))}},{key:"updateWithdrawInfo",value:function(e,t){return m(this,void 0,void 0,regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=void 0,n.prev=1,n.next=4,Object(i.b)(t);case 4:r=n.sent,f("WithdrawLimit: ",r),n.next=13;break;case 8:return n.prev=8,n.t0=n.catch(1),f(n.t0),l.a.error(n.t0.message),n.abrupt("return",!1);case 13:return this.afterUpdateWithdrawInfo(Object.assign({asset:e},r)),n.abrupt("return",!0);case 15:case"end":return n.stop()}},n,this,[[1,8]])}))}},{key:"queryFundRecords",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:200;return m(this,void 0,void 0,regeneratorRuntime.mark(function a(){var o,s,l,c;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return f("[QueryFundRecord]",e),o=new d({accountName:e.get("name"),offset:n,size:r}),t.accountName===e.get("name")&&t.signer&&o.addSigner(t.signer),a.next=5,Object(i.d)(o);case 5:if(s=a.sent){a.next=15;break}return a.next=9,this.loginGatewayQuery(e);case 9:return l=a.sent,c=l.signer,o.addSigner(c),a.next=14,Object(i.d)(o);case 14:s=a.sent;case 15:s&&this.updateFundRecords(s);case 16:case"end":return a.stop()}},a,this)}))}},{key:"updateFundRecords",value:function(e){return e}},{key:"loginGatewayQuery",value:function(e){return m(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n,r,a,s,l,c,p;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(f("[LoginGatewayQuery]",e),f("[LoginGatewayQuery]",o.b.getSetting("walletLockTimeout")),n=new d({accountName:e.get("name"),expiration:Date.now()+1e3*o.b.getSetting("walletLockTimeout")}),r=u.p.fund_query.fromObject(n.op),e.getIn(["active","weight_threshold"]),a=e.getIn(["active","key_auths"]).filter(function(e){return e.get(1)>=1}).map(function(e){return e.get(0)}).toJS(),s=y(a)[0]){t.next=9;break}throw Error("Privkey Not Found");case 9:return f("[LoginGatewayQuery privKey]",e.getIn(["options","memo_key"]),s),l=u.p.fund_query.toBuffer(r),c=u.k.signBuffer(l,s).toHex(),f("[LoginGatewayQuery Signed]",c),n.addSigner(c),t.next=16,Object(i.c)(n);case 16:return p=t.sent,f("[LoginGatewayQuery LoginRes]",p),p&&this.updateLogin(p),t.abrupt("return",p);case 20:case"end":return t.stop()}},t,this)}))}},{key:"updateLogin",value:function(e){return e}},{key:"afterUpdateWithdrawInfo",value:function(e){return e}},{key:"afterUpdateDepositInfo",value:function(e){return e}},{key:"closeModal",value:function(e){return e}},{key:"openModal",value:function(e){return e}}]),e}(),_=r.a.createActions(v);t.d=_},1627:function(e,t,n){"use strict";var r=n(11),a=n(4),o=n(8),s=n(157),i=n(158),l=n(12),c=n(3),u=n(92),p=n.n(u),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var h={},m=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return d(e,[{key:"fundPool",value:function(e,t,n,r){var a=s.a.new_transaction(),i=o.a.get_asset_precision(t.get("precision"));return a.add_type_operation("asset_fund_fee_pool",{fee:{amount:0,asset_id:"1.3.0"},from_account:e,asset_id:n.get("id"),amount:r*i}),function(e){return l.a.process_transaction(a,null,!0).then(function(t){e(!0)}).catch(function(t){console.log("[AssetActions.js:150] ----- fundPool error -----\x3e",t),e(!1)})}}},{key:"claimPoolFees",value:function(e,t,n){var r=s.a.new_transaction(),a=o.a.get_asset_precision(t.get("precision"));return r.add_type_operation("asset_claim_fees",{fee:{amount:0,asset_id:0},issuer:e,amount_to_claim:{asset_id:t.get("id"),amount:n*a}}),function(e){return l.a.process_transaction(r,null,!0).then(function(t){e(!0)}).catch(function(t){console.log("[AssetActions.js:150] ----- claimFees error -----\x3e",t),e(!1)})}}},{key:"createAsset",value:function(e,t,n,r,a,i,u,d,h){console.log("create asset:",t,"flags:",n,"isBitAsset:",i,"bitasset_opts:",d);var m=s.a.new_transaction(),f=o.a.get_asset_precision(t.precision);p.a.config({DECIMAL_PLACES:t.precision});var b=new p.a(t.max_supply).times(f).toString(),g=new p.a(t.max_market_fee||0).times(f).toString(),y=(Date.now(),null);t.vesting_period&&(y=[[1,{vesting_period:1*t.vesting_period}]]);var v=o.a.get_asset_precision(c.b.getAsset(a.base.asset_id).get("precision")),_={fee:{amount:0,asset_id:0},issuer:e,symbol:t.symbol,precision:parseInt(t.precision,10),common_options:{max_supply:b,market_fee_percent:100*t.market_fee_percent||0,max_market_fee:g,issuer_permissions:r,flags:n,core_exchange_rate:{base:{amount:a.base.amount*v,asset_id:a.base.asset_id},quote:{amount:a.quote.amount*f,asset_id:"1.3.1"}},whitelist_authorities:[],blacklist_authorities:[],whitelist_markets:[],blacklist_markets:[],description:h,extensions:y},is_prediction_market:u,extensions:null};return i&&(_.bitasset_opts=d),m.add_type_operation("asset_create",_),function(e){return l.a.process_transaction(m,null,!0).then(function(t){e(!0)}).catch(function(t){console.log("[AssetActions.js:150] ----- createAsset error -----\x3e",t),e(!1)})}}},{key:"updateAsset",value:function(e,t,n,r,a,i,u,d,h,m,f,b){var g=s.a.new_transaction(),y=o.a.get_asset_precision(a.get("precision"));p.a.config({DECIMAL_PLACES:a.get("precision")});var v=new p.a(n.max_supply).times(y).toString(),_=new p.a(n.max_market_fee||0).times(y).toString(),E=c.b.getAsset(r.quote.asset_id),k=o.a.get_asset_precision(E.get("precision")),w=c.b.getAsset(r.base.asset_id),A=o.a.get_asset_precision(w.get("precision")),C=new p.a(r.quote.amount).times(k).toString(),S=new p.a(r.base.amount).times(A).toString();console.log("auths:",b);var O={fee:{amount:0,asset_id:0},asset_to_update:a.get("id"),extensions:a.get("extensions"),issuer:e,new_issuer:t,new_options:{max_supply:v,max_market_fee:_,market_fee_percent:100*n.market_fee_percent,description:f,issuer_permissions:u,flags:i,whitelist_authorities:b.whitelist_authorities.toJS(),blacklist_authorities:b.blacklist_authorities.toJS(),whitelist_markets:b.whitelist_markets.toJS(),blacklist_markets:b.blacklist_markets.toJS(),extensions:a.getIn(["options","extensions"]),core_exchange_rate:{quote:{amount:C,asset_id:r.quote.asset_id},base:{amount:S,asset_id:r.base.asset_id}}}};if(e!==t&&t||delete O.new_issuer,g.add_type_operation("asset_update",O),console.log("bitasset_opts:",h,"original_bitasset_opts:",m),d&&(h.feed_lifetime_sec!==m.feed_lifetime_sec||h.minimum_feeds!==m.minimum_feeds||h.force_settlement_delay_sec!==m.force_settlement_delay_sec||h.force_settlement_offset_percent!==m.force_settlement_offset_percent||h.maximum_force_settlement_volume!==m.maximum_force_settlement_volume||h.short_backing_asset!==m.short_backing_asset)){var x={fee:{amount:0,asset_id:0},asset_to_update:a.get("id"),issuer:e,new_options:h};g.add_type_operation("asset_update_bitasset",x)}return l.a.process_transaction(g,null,!0).then(function(e){return!0}).catch(function(e){return console.log("[AssetActions.js:150] ----- createAsset error -----\x3e",e),!1})}},{key:"issueAsset",value:function(e,t,n,r,a,o){i.a.issue_asset(e,t,n,r,a,o)}},{key:"getAssetList",value:function(e,t){var n=e+"_"+t;return function(r){if(!h[n])return h[n]=!0,r({loading:!0}),a.a.instance().db_api().exec("list_assets",[e,t]).then(function(e){var t=[],o=[];e.forEach(function(e){c.b._updateObject(e,!1),o.push(e.dynamic_asset_data_id),e.bitasset_data_id&&t.push(e.bitasset_data_id)});var s=a.a.instance().db_api().exec("get_objects",[o]),i=t.length>0?a.a.instance().db_api().exec("get_objects",[t]):null;Promise.all([s,i]).then(function(t){delete h[n],r({assets:e,dynamic:t[0],bitasset_data:t[1],loading:!1})}),r({loading:!1}),delete h[n]})}}},{key:"lookupAsset",value:function(e,t){var n=c.b.getAsset(e);return n?{assets:[n],searchID:t,symbol:e}:function(n){setTimeout(function(){var r=c.b.getAsset(e);r&&n({assets:[r],searchID:t,symbol:e})},200)}}},{key:"reserveAsset",value:function(e,t,n){var r=s.a.new_transaction();return r.add_type_operation("asset_reserve",{fee:{amount:0,asset_id:0},amount_to_reserve:{amount:e,asset_id:t},payer:n,extensions:[]}),l.a.process_transaction(r,null,!0).then(function(e){return!0}).catch(function(e){return console.log("[AssetActions.js:150] ----- reserveAsset error -----\x3e",e),!1})}}]),e}();t.a=r.a.createActions(m)},1630:function(e,t,n){"use strict";var r=n(0),a=(n(2),n(1650)),o=n.n(a),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={animateEnter:!1},e.timer=null,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["Component"]),s(t,[{key:"componentDidMount",value:function(){this.enableAnimation()}},{key:"resetAnimation",value:function(){this.setState({animateEnter:!1}),this.enableAnimation()}},{key:"enableAnimation",value:function(){var e=this;this.timer=setTimeout(function(){e.timer&&e.setState({animateEnter:!0})},2e3)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timer),this.timer=null}},{key:"render",value:function(){return this.props.children?r.createElement(o.a,{className:this.props.className,component:this.props.component,transitionName:this.props.transitionName,transitionEnterTimeout:this.props.enterTimeout,transitionEnter:this.state.animateEnter,transitionLeave:!1},this.props.children):r.createElement(this.props.component)}}]),t}();i.defaultProps={component:"span",enterTimeout:2e3},t.a=i},1632:function(e,t,n){"use strict";n.d(t,"a",function(){return h});var r=n(41),a=n(5),o=n(11),s=n(1624),i=n(1623),l=n(144),c=n(69),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var p=new c.a("__graphene__"),d=Object(l.a)("GatewayStore"),h=i.d.ADDRESS_TYPES,m=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={backedCoins:Object(a.Map)({JADE:h}),bridgeCoins:Object(a.Map)(Object(a.fromJS)(p.get("bridgeCoins",{}))),bridgeInputs:["btc","dash","eth","steem"],login:{accountName:"",signer:""},records:{total:0,records:[],offset:0,size:20},down:Object(a.Map)({}),modals:Object(a.Map)(),depositInfo:{},withdrawInfo:{}},e.bindListeners({handleDepositUpdate:s.b.afterUpdateDepositInfo,handleWithdrawUpdate:s.b.afterUpdateWithdrawInfo,handleLogin:s.b.updateLogin,handleRecordsUpdate:s.b.updateFundRecords,openModal:s.b.openModal,closeModal:s.b.closeModal}),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["a"]),u(t,[{key:"handleDepositUpdate",value:function(e){var t=h[e.asset]||{},n=Object.assign({},e,{meta:t});d("Open: ",h,n),this.setState({depositInfo:n})}},{key:"handleWithdrawUpdate",value:function(e){this.setState({withdrawInfo:e})}},{key:"handleLogin",value:function(e){this.setState({login:e})}},{key:"handleRecordsUpdate",value:function(e){e.records.forEach(function(e){e.hash||(e.hash=t.findHash(e))}),this.setState({records:e})}},{key:"openModal",value:function(e){this.setState({modals:this.state.modals.set(e,!0)})}},{key:"closeModal",value:function(e){this.setState({modals:this.state.modals.set(e,!1)})}}]),t}();m.findHash=function(e){return e.details&&e.details.length?e.details[e.details.length-1].hash:null};var f=o.a.createStore(m,"GatewayStore");t.b=f},1638:function(e,t,n){"use strict";n.d(t,"b",function(){return w}),n.d(t,"a",function(){return A});var r=n(0),a=(n(2),n(19)),o=n(22),s=n(24),i=n(8),l=n(16),c=n(100),u=n(1),p=n.n(u),d=n(9),h=n.n(d),m=n(67),f=n.n(m),b=n(345),g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},y=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function E(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var k=function(e){function t(e){return v(this,t),_(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return E(t,b["a"]),y(t,[{key:"componentDidMount",value:function(){f.a.rebuild()}},{key:"shouldComponentUpdate",value:function(e){return function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var s=a.get;return void 0!==s?s.call(r):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"shouldComponentUpdate",this).call(this,e)||e.toAsset!==this.props.toAsset||e.fromAsset!==this.props.fromAsset||e.amount!==this.props.amount}},{key:"getValue",value:function(){var e=this.props,t=e.amount,n=e.toAsset,r=e.fromAsset,a=e.fullPrecision,o=e.marketStats,s=e.coreAsset,l=void 0,c=void 0,u=n.get("id"),p=n.get("symbol"),d=r.get("id"),h=r.get("symbol");if(a||(t=i.a.get_asset_amount(t,r)),s&&o){var m=s.get("symbol");l=o.get(p+"_"+m),c=o.get(h+"_"+m)}var f=i.a.convertPrice(c&&c.close?c.close:"1.3.0"===d||r.has("bitasset")?r:null,l&&l.close?l.close:"1.3.0"===u||n.has("bitasset")?n:null,d,u);return f?i.a.convertValue(f,t,r,n):null}},{key:"render",value:function(){var e=this.props,t=e.amount,n=e.toAsset,o=e.fromAsset,s=e.fullPrecision,l=n.get("id");n.get("symbol");s||(t=i.a.get_asset_amount(t,o));var c=this.getValue();return c||0===c?r.createElement(a.a,{hide_asset:this.props.hide_asset,noPrefix:!0,amount:c,asset:l,decimalOffset:0}):r.createElement("div",{className:"tooltip inline-block","data-place":"bottom","data-tip":h.a.translate("tooltip.no_price"),style:{fontSize:"0.9rem"}},r.createElement(p.a,{content:"account.no_price"}))}}]),t}();k.propTypes={toAsset:o.a.ChainAsset.isRequired,fromAsset:o.a.ChainAsset.isRequired,coreAsset:o.a.ChainAsset.isRequired},k.defaultProps={toAsset:"1.3.0",fullPrecision:!0,noDecimals:!1,hide_asset:!1,coreAsset:"1.3.0"},k=Object(s.a)(k,{keep_updating:!0});var w=function(e){function t(){return v(this,t),_(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return E(t,r["Component"]),y(t,[{key:"render",value:function(){var e=this.props,t=e.refCallback,n=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["refCallback"]);return r.createElement(k,g({},n,{ref:t}))}}]),t}();w=Object(l.connect)(w,{listenTo:function(){return[c.a]},getProps:function(){return{marketStats:c.a.getState().allMarketStats}}});var A=function(e){function t(){return v(this,t),_(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return E(t,r["Component"]),y(t,[{key:"render",value:function(){var e=this.props.balance,t=!!e.getIn(["balance","amount"]),n=Number(t?e.getIn(["balance","amount"]):e.get("balance")),a=t?e.getIn(["balance","asset_id"]):e.get("asset_type");return isNaN(n)?r.createElement("span",null,"--"):r.createElement(w,{refCallback:this.props.refCallback,hide_asset:this.props.hide_asset,amount:n,fromAsset:a,noDecimals:!0,toAsset:this.props.toAsset})}}]),t}();A.propTypes={balance:o.a.ChainObject.isRequired},A=Object(s.a)(A,{keep_updating:!0})},1641:function(e,t,n){"use strict";n.d(t,"a",function(){return _}),n.d(t,"b",function(){return E}),n.d(t,"e",function(){return k}),n.d(t,"d",function(){return w}),n.d(t,"c",function(){return A});var r=n(1623),a=n(141),o=n(1663),s=n.n(o),i=n(1657),l=n(1656),c=n(1658),u=m(["\n    mutation GenNewAddress($accountName: String!, $asset: String!) {\n      newDepositAddress(accountName: $accountName, asset: $asset) {\n        address\n        accountName\n        asset\n        type\n        createAt\n      }\n    }\n  "],["\n    mutation GenNewAddress($accountName: String!, $asset: String!) {\n      newDepositAddress(accountName: $accountName, asset: $asset) {\n        address\n        accountName\n        asset\n        type\n        createAt\n      }\n    }\n  "]),p=m(["\n    query GetAddress($accountName: String!, $asset: String!) {\n      getDepositAddress(accountName: $accountName, asset: $asset) {\n        address\n        accountName\n        asset\n        type\n        createAt\n        projectInfo {\n          projectName\n          logoUrl\n          contractAddress\n          contractExplorerUrl\n        }\n      }\n    }\n  "],["\n    query GetAddress($accountName: String!, $asset: String!) {\n      getDepositAddress(accountName: $accountName, asset: $asset) {\n        address\n        accountName\n        asset\n        type\n        createAt\n        projectInfo {\n          projectName\n          logoUrl\n          contractAddress\n          contractExplorerUrl\n        }\n      }\n    }\n  "]),d=m(["\n    query WithdrawInfo($type: String!) {\n      withdrawInfo(type: $type) {\n        fee\n        minValue\n        precision\n        asset\n        type\n        gatewayAccount\n      }\n    }\n  "],["\n    query WithdrawInfo($type: String!) {\n      withdrawInfo(type: $type) {\n        fee\n        minValue\n        precision\n        asset\n        type\n        gatewayAccount\n      }\n    }\n  "]),h=m(["\n    query VerifyAddress(\n      $asset: String!\n      $accountName: String!\n      $address: String!\n    ) {\n      verifyAddress(\n        asset: $asset\n        accountName: $accountName\n        address: $address\n      ) {\n        valid\n        asset\n      }\n    }\n  "],["\n    query VerifyAddress(\n      $asset: String!\n      $accountName: String!\n      $address: String!\n    ) {\n      verifyAddress(\n        asset: $asset\n        accountName: $accountName\n        address: $address\n      ) {\n        valid\n        asset\n      }\n    }\n  "]);function m(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var f=function(e,t,n,r){return new(n||(n=Promise))(function(a,o){function s(e){try{l(r.next(e))}catch(e){o(e)}}function i(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(s,i)}l((r=r.apply(e,t||[])).next())})},b=Object(a.a)("GatewayService"),g=new Headers;g.append("Content-Type","application/x-www-form-urlencoded");var y=new l.a({uri:r.c}),v=new i.a({link:y,cache:new c.a});function _(e,t,n){return f(this,void 0,void 0,regeneratorRuntime.mark(function r(){var a,o;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(b("Get Deposit: ",e,t,n),a=s()(u),o=s()(p),!n){r.next=9;break}return r.next=6,S("mutate",{mutation:a,variables:{accountName:e,asset:t}},"newDepositAddress");case 6:r.t0=r.sent,r.next=12;break;case 9:return r.next=11,S("query",{query:o,variables:{accountName:e,asset:t}},"getDepositAddress");case 11:r.t0=r.sent;case 12:return r.abrupt("return",r.t0);case 13:case"end":return r.stop()}},r,this)}))}function E(e){return f(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=s()(d),t.next=3,S("query",{query:n,variables:{type:e}},"withdrawInfo");case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}},t,this)}))}function k(e,t,n){return f(this,void 0,void 0,regeneratorRuntime.mark(function r(){var a;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return a=s()(h),r.next=3,S("query",{query:a,variables:{asset:n,accountName:t,address:e}},"verifyAddress");case 3:return r.abrupt("return",r.sent);case 4:case"end":return r.stop()}},r,this)}))}function w(e){return f(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C("records",e).then(function(e){return e.data});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)}))}function A(e){return f(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C("login",e).then(function(e){return e.data});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)}))}function C(e,t){return f(this,void 0,void 0,regeneratorRuntime.mark(function n(){var a,o;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return(a=new Headers).append("Content-Type","application/json"),o={headers:a,method:"POST",body:JSON.stringify(t)},n.next=5,fetch(""+r.b+e,o).then(function(e){return e.json()}).catch(function(e){return{code:400,error:e.message}});case 5:return n.abrupt("return",n.sent);case 6:case"end":return n.stop()}},n,this)}))}function S(e,t,n){return f(this,void 0,void 0,regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if("newDepositAddress"!==n){r.next=3;break}return r.next=3,v.resetStore();case 3:return r.prev=3,r.next=6,v[e](t);case 6:return r.t0=n,r.abrupt("return",r.sent.data[r.t0]);case 10:throw r.prev=10,r.t1=r.catch(3),console.error("GatewayError: ",r.t1),r.t1;case 14:case"end":return r.stop()}},r,this,[[3,10]])}))}},1648:function(e,t,n){"use strict";var r=n(0),a=n(2),o=n(1),s=n.n(o),i=n(3),l=n(22),c=n(24),u=n(9),p=n.n(u),d=n(342),h=n(19),m=n(5),f=n(26),b=n.n(f),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function v(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var E=((k=function(e){function t(){return y(this,t),v(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _(t,r["Component"]),g(t,[{key:"render",value:function(){return 0!==this.props.assets.length&&this.props.value?r.createElement(d.a,{isAsset:!0,entries:this.props.assets.map(function(e){return e&&e.get("symbol")}).filter(function(e){return!!e}),values:this.props.assets.reduce(function(e,t){return t&&t.get("symbol")&&(e[t.get("symbol")]=t),e},{}),singleEntry:this.props.assets[0]?r.createElement(h.a,{asset:this.props.assets[0].get("id"),amount:0,hide_amount:!0}):null,value:"",onChange:this.props.onChange}):null}}]),t}()).propTypes={assets:l.a.ChainAssetsList,value:a.string,onChange:a.func},k);E=Object(c.a)(E);var k,w=function(e){function t(){return y(this,t),v(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _(t,r["Component"]),g(t,[{key:"getAsset",value:function(){return this.props.asset}},{key:"getError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.assetInput,t=this.props.error;return t||!e||this.getNameType(e)||(t=p.a.translate("explorer.asset.invalid",{name:e})),t}},{key:"getNameType",value:function(e){return e?i.d.is_valid_symbol_error(e,!0)?null:"symbol":null}},{key:"onInputChanged",value:function(e){var t=e.target.value.trim().substr(0,16).toUpperCase();this.props.onChange&&t!==this.props.assetInput&&this.props.onChange(t)}},{key:"onKeyDown",value:function(e){13===e.keyCode&&(this.onFound(e),this.onAction(e))}},{key:"componentDidMount",value:function(){this.props.onFound&&this.props.asset&&this.props.onFound(this.props.asset)}},{key:"componentWillReceiveProps",value:function(e){this.props.onFound&&e.asset!==this.props.asset&&this.props.onFound(e.asset)}},{key:"onFound",value:function(e){e.preventDefault(),!this.props.onFound||this.getError()||this.props.disableActionButton||this.props.asset&&this.props.onFound(this.props.asset)}},{key:"onAssetSelect",value:function(e){e&&(this.props.onFound(e),this.props.onChange(e.get("symbol")))}},{key:"onAction",value:function(e){e.preventDefault(),!this.props.onAction||this.getError()||this.props.disableActionButton||this.props.asset&&this.props.onAction(this.props.asset)}},{key:"render",value:function(){var e=this.props,t=e.disabled,n=e.noLabel,a=this.getError(),o=void 0;t||(this.props.asset?o=this.props.asset.get("symbol"):!a&&this.props.assetInput&&(a=p.a.translate("explorer.asset.not_found",{name:this.props.assetInput})));var i=b()("button",{disabled:!this.props.asset||a||this.props.disableActionButton});return r.createElement("div",{className:this.props.className?this.props.className+" asset-selector":"asset-selector",style:this.props.style},r.createElement("div",{className:"header-area"},a||n?null:r.createElement("label",{className:"right-label"},"  ",r.createElement("span",null,o)),r.createElement(s.a,{component:"label",content:this.props.label})),r.createElement("div",{className:"input-area"},r.createElement("div",{className:"inline-label input-wrapper"},r.createElement("input",{style:this.props.inputStyle,disabled:this.props.disabled,type:"text",value:this.props.assetInput||"",placeholder:p.a.translate("explorer.assets.symbol"),ref:"user_input",onChange:this.onInputChanged.bind(this),onKeyDown:this.onKeyDown.bind(this),tabIndex:this.props.tabIndex}),r.createElement("div",{className:"form-label select floating-dropdown"},this.props.asset?r.createElement(E,{ref:this.props.refCallback,value:this.props.asset.get("symbol"),assets:m.List(this.props.assets),onChange:this.onAssetSelect.bind(this)}):null),this.props.children,this.props.onAction?r.createElement("button",{className:i,onClick:this.onAction.bind(this)},r.createElement(s.a,{content:this.props.action_label})):null)),r.createElement("div",{className:"error-area",style:{paddingBottom:"10px"}},r.createElement("span",{style:{wordBreak:"break-all"}},a)))}}]),t}();w.propTypes={label:a.string,error:a.string,placeholder:a.string,onChange:a.func,onFound:a.func,assetInput:a.string,asset:l.a.ChainAsset,tabIndex:a.number,disableActionButton:a.string},w.defaultProps={disabled:!1},t.a=Object(c.a)(w)},1649:function(e,t,n){"use strict";var r=n(41),a=n(5),o=n.n(a),s=n(11),i=n(1627),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var c=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.assets=o.a.Map(),e.asset_symbol_to_id={},e.searchTerms={},e.lookupResults=[],e.assetsLoading=!1,e.bindListeners({onGetAssetList:i.a.getAssetList,onLookupAsset:i.a.lookupAsset}),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["a"]),l(t,[{key:"onGetAssetList",value:function(e){var t=this;if(!e)return!1;this.assetsLoading=e.loading,e.assets&&e.assets.forEach(function(n){for(var r=0;r<e.dynamic.length;r++)if(e.dynamic[r].id===n.dynamic_asset_data_id){n.dynamic=e.dynamic[r];break}if(n.bitasset_data_id){n.market_asset=!0;for(r=0;r<e.bitasset_data.length;r++)if(e.bitasset_data[r].id===n.bitasset_data_id){n.bitasset_data=e.bitasset_data[r];break}}else n.market_asset=!1;t.assets=t.assets.set(n.id,n),t.asset_symbol_to_id[n.symbol]=n.id})}},{key:"onLookupAsset",value:function(e){this.searchTerms[e.searchID]=e.symbol,this.lookupResults=e.assets}}]),t}();t.a=s.a.createStore(c,"AssetStore")},1651:function(e,t,n){"use strict";var r=n(0),a=n(8),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["Component"]),o(t,[{key:"render",value:function(){var e=this.props,t=e.price,n=e.preFormattedPrice,o=e.quote,s=e.base,i=(e.component,e.precision),l=(e.previous,n||a.a.price_to_text(t,o,s,i));return l.full>=1?r.createElement("span",null,r.createElement("span",{className:"price-integer"},l.int,"."),l.dec?r.createElement("span",{className:"price-integer"},l.dec):null,l.trailing?r.createElement("span",{className:"price-integer"},l.trailing):null):l.full>=.1?r.createElement("span",null,r.createElement("span",{className:"price-decimal"},l.int,"."),l.dec?r.createElement("span",{className:"price-integer"},l.dec):null,l.trailing?r.createElement("span",{className:"price-decimal"},l.trailing):null):r.createElement("span",null,r.createElement("span",{className:"price-decimal"},l.int,"."),l.dec?r.createElement("span",{className:"price-decimal"},l.dec):null,l.trailing?r.createElement("span",{className:"price-integer"},l.trailing):null)}}]),t}();t.a=s},1659:function(e,t,n){"use strict";var r=n(0),a=n(2),o=n(30),s=n(39),i=n.n(s),l=n(126),c=n(91),u=n(1),p=n.n(u),d=n(22),h=n(24),m=n(19),f=n(8),b=n(26),g=n.n(b),y=n(1622),v=n(340),_=n(157),E=n(12),k=n(86),w=n(9),A=n.n(w),C=n(341),S=n(5),O=n.n(S),x=n(3),T=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function P(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function D(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function N(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var I=function(e){function t(e){P(this,t);var n=D(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.state=n._initialState(e),n}return N(t,r["Component"]),T(t,[{key:"_initialState",value:function(e){var t=e?this._getCurrentPosition(e):{};if(t.collateral){var n=f.a.get_asset_amount(t.debt,e.quote_asset),r=f.a.get_asset_amount(t.collateral,e.backing_asset);return{short_amount:n?n.toString():null,collateral:r?r.toString():null,collateral_ratio:this._getCollateralRatio(n,r),errors:this._getInitialErrors(),isValid:!1,original_position:{debt:n,collateral:r}}}return{short_amount:0,collateral:0,collateral_ratio:this._getInitialCollateralRatio(e),errors:this._getInitialErrors(),isValid:!1,original_position:{debt:0,collateral:0}}}},{key:"componentDidMount",value:function(){var e=this._initialState(this.props);this.setState(e),this._setUpdatedPosition(e)}},{key:"shouldComponentUpdate",value:function(e,t){return!(f.a.are_equal_shallow(t,this.state)&&O.a.is(e.quote_asset,this.props.quote_asset)&&!e.backing_asset.get("symbol")!==this.props.backing_asset.get("symbol")&&O.a.is(e.account,this.props.account)&&O.a.is(e.call_orders,this.props.call_orders))}},{key:"componentWillReceiveProps",value:function(e){e.account===this.props.account&&e.hasCallOrders===this.props.hasCallOrders&&e.quote_asset.get("id")===this.props.quote_asset.get("id")||this.setState(this._initialState(e))}},{key:"_getInitialErrors",value:function(){return{collateral_balance:null,ratio_too_high:null}}},{key:"confirmClicked",value:function(e){e.preventDefault(),i.a.publish(this.props.modalId,"close")}},{key:"_onBorrowChange",value:function(e){var t=this._getFeedPrice(),n=e.amount.replace(/,/g,""),r={short_amount:n,collateral:(this.state.collateral_ratio*(n/t)).toFixed(this.props.backing_asset.get("precision")),collateral_ratio:this.state.collateral_ratio};this.setState(r),this._validateFields(r),this._setUpdatedPosition(r)}},{key:"_onCollateralChange",value:function(e){var t=e.amount.replace(/,/g,""),n=this._getFeedPrice(),r=t/(this.state.short_amount/n),a=this._isPredictionMarket(this.props)?{short_amount:t,collateral:t,collateral_ratio:1}:{short_amount:this.state.short_amount,collateral:t,collateral_ratio:Object(o.isFinite)(r)?r:this._getInitialCollateralRatio(this.props)};this.setState(a),this._validateFields(a),this._setUpdatedPosition(a)}},{key:"_onRatioChange",value:function(e){var t=this._getFeedPrice(),n=e.target.value,r={short_amount:this.state.short_amount,collateral:(this.state.short_amount/t*n).toFixed(this.props.backing_asset.get("precision")),collateral_ratio:n};this.setState(r),this._validateFields(r),this._setUpdatedPosition(r)}},{key:"_setUpdatedPosition",value:function(e){this.setState({newPosition:parseFloat(e.short_amount)/parseFloat(e.collateral)})}},{key:"_validateFields",value:function(e){var t=this._getInitialErrors(),n=this.state.original_position,r=this.props.backing_balance?this.props.backing_balance.toJS():{balance:0};parseFloat(e.collateral)-n.collateral>f.a.get_asset_amount(r.balance,this.props.backing_asset.toJS())&&(t.collateral_balance=A.a.translate("borrow.errors.collateral"));var a=e.short_amount>=0&&e.collateral>=0&&(e.short_amount!=n.debt||e.collateral!=n.collateral),o=this.props.quote_asset.getIn(["bitasset","current_feed","maintenance_collateral_ratio"])/1e3;parseFloat(e.collateral_ratio)<(this._isPredictionMarket(this.props)?1:o)?(t.below_maintenance=A.a.translate("borrow.errors.below",{mr:o}),a=!1):parseFloat(e.collateral_ratio)<(this._isPredictionMarket(this.props)?1:o+.5)&&(t.close_maintenance=A.a.translate("borrow.errors.close",{mr:o}),a=!0),this.setState({errors:t,isValid:a})}},{key:"_onSubmit",value:function(e){e.preventDefault();var t=f.a.get_asset_precision(this.props.quote_asset.get("precision")),n=f.a.get_asset_precision(this.props.backing_asset.get("precision")),r=this._getCurrentPosition(this.props),a=_.a.new_transaction();a.add_type_operation("call_order_update",{fee:{amount:0,asset_id:0},funding_account:this.props.account.get("id"),delta_collateral:{amount:parseInt(this.state.collateral*n-r.collateral,10),asset_id:this.props.backing_asset.get("id")},delta_debt:{amount:parseInt(this.state.short_amount*t-r.debt,10),asset_id:this.props.quote_asset.get("id")}}),E.a.process_transaction(a,null,!0).catch(function(e){}),i.a.publish(this.props.modalId,"close")}},{key:"_getCurrentPosition",value:function(e){var t={collateral:null,debt:null};if(e&&e.hasCallOrders&&e.call_orders)for(var n in e.call_orders)e.call_orders.hasOwnProperty(n)&&e.call_orders[n]&&e.quote_asset.get("id")===e.call_orders[n].getIn(["call_price","quote","asset_id"])&&(t=e.call_orders[n].toJS());return t}},{key:"_getFeedPrice",value:function(){return this.props?this._isPredictionMarket(this.props)?1:1/f.a.get_asset_price(this.props.quote_asset.getIn(["bitasset","current_feed","settlement_price","quote","amount"]),this.props.backing_asset,this.props.quote_asset.getIn(["bitasset","current_feed","settlement_price","base","amount"]),this.props.quote_asset):1}},{key:"_getInitialCollateralRatio",value:function(e){return this._isPredictionMarket(e)?1:0}},{key:"_getCollateralRatio",value:function(e,t){return t/(e/this._getFeedPrice())}},{key:"_isPredictionMarket",value:function(e){return e.quote_asset.getIn(["bitasset","is_prediction_market"])}},{key:"render",value:function(){var e=this,t=this.props,n=t.quote_asset,a=t.bitasset_balance,o=t.backing_asset,s=t.backing_balance,i=this.state,l=i.short_amount,u=i.collateral,d=i.collateral_ratio,h=i.errors,b=i.isValid,_=f.a.get_asset_precision(this.props.quote_asset.get("precision")),E=f.a.get_asset_precision(this.props.backing_asset.get("precision"));d&&!isNaN(d)&&d>0&&d<1e3||(d=0),a=a?a.toJS():{balance:0,id:null},s=s?s.toJS():{balance:0,id:null};var w=g()("form-group",{"has-error":h.collateral_balance}),S=g()("form-group",{"has-error":h.below_maintenance},{"has-warning":h.close_maintenance}),O=g()("button",{disabled:h.collateral_balance||!b},{success:b}),T=this._getCurrentPosition(this.props),P=s.id?x.b.getObject(s.id):null,D=(P?P.get("balance"):0)-parseInt(this.state.collateral*E-T.collateral,10),N=r.createElement("span",null,r.createElement(p.a,{component:"span",content:"transfer.available"}),":"," ",a.id?r.createElement(v.a,{balance:a.id}):r.createElement(m.a,{amount:0,asset:n.get("id")})),I=r.createElement("span",null,r.createElement(p.a,{component:"span",content:"transfer.available"}),":"," ",s.id?r.createElement(m.a,{amount:D,asset:o.get("id")}):r.createElement(m.a,{amount:0,asset:o.get("id")})),F=this._getFeedPrice(),j=this.props.quote_asset.getIn(["bitasset","current_feed","maintenance_collateral_ratio"])/1e3,M=this.props.quote_asset.getIn(["bitasset","current_feed","maximum_short_squeeze_ratio"])/1e3,R=this._isPredictionMarket(this.props);return!R&&isNaN(F)?r.createElement("div",null,r.createElement("form",{className:"grid-container text-center no-overflow",noValidate:!0},r.createElement(p.a,{component:"h3",content:"borrow.no_valid",asset_symbol:n.get("symbol")})),r.createElement("div",{className:"grid-content button-group text-center no-overflow"},r.createElement(c.a,{close:this.props.modalId},r.createElement("div",{className:" button warning"},r.createElement(p.a,{content:"account.perm.cancel"}))))):r.createElement("div",null,r.createElement("form",{className:"grid-container small-10 small-offset-1 no-overflow",noValidate:!0},r.createElement(p.a,{component:"h3",content:"borrow.title",asset_symbol:n.get("symbol")}),r.createElement("div",{style:{textAlign:"left"}},this.props.hide_help?null:r.createElement(C.a,{path:"components/"+(R?"BorrowModalPrediction":"BorrowModal"),debt:n.get("symbol"),collateral:o.get("symbol"),borrower:this.props.account.get("name"),mr:j}),R?null:r.createElement("div",{style:{paddingBottom:"1rem"}},r.createElement("div",{className:"borrow-price-feeds"},r.createElement("span",{className:"borrow-price-label"},r.createElement(p.a,{content:"transaction.feed_price"}),": "),r.createElement(k.a,{noPopOver:!0,quote_amount:n.getIn(["bitasset","current_feed","settlement_price","base","amount"]),quote_asset:n.getIn(["bitasset","current_feed","settlement_price","base","asset_id"]),base_asset:n.getIn(["bitasset","current_feed","settlement_price","quote","asset_id"]),base_amount:n.getIn(["bitasset","current_feed","settlement_price","quote","amount"])})),r.createElement("div",{className:"borrow-price-feeds"},r.createElement("span",{className:"inline-block tooltip borrow-price-label","data-place":"bottom","data-tip":A.a.translate("tooltip.margin_price")},r.createElement(p.a,{content:"exchange.squeeze"}),": "),r.createElement(k.a,{decimals:2,callPrice:!0,noPopOver:!0,quote_amount:n.getIn(["bitasset","current_feed","settlement_price","base","amount"]),quote_asset:n.getIn(["bitasset","current_feed","settlement_price","base","asset_id"]),base_asset:n.getIn(["bitasset","current_feed","settlement_price","quote","asset_id"]),base_amount:M*n.getIn(["bitasset","current_feed","settlement_price","quote","amount"])})),r.createElement("b",null),r.createElement("div",{className:"borrow-price-final "+(h.below_maintenance?"has-error":h.close_maintenance?"has-warning":"")},r.createElement("span",{className:"borrow-price-label"},r.createElement(p.a,{content:"exchange.your_price"}),": "),this.state.newPosition?r.createElement(k.a,{noPopOver:!0,quote_amount:j*this.state.short_amount*_,quote_asset:n.get("id"),base_asset:o.get("id"),base_amount:this.state.collateral*E}):null)),r.createElement("div",{className:"form-group"},r.createElement(y.a,{label:"transaction.borrow_amount",amount:l.toString(),onChange:this._onBorrowChange.bind(this),asset:n.get("id"),assets:[n.get("id")],display_balance:N,placeholder:"0.0",tabIndex:1})),r.createElement("div",{className:w},r.createElement(y.a,{label:"transaction.collateral",amount:u.toString(),onChange:this._onCollateralChange.bind(this),asset:o.get("id"),assets:[o.get("id")],display_balance:I,placeholder:"0.0",tabIndex:1}),h.collateral_balance?r.createElement("div",{style:{paddingTop:"0.5rem"}},h.collateral_balance):null),R?null:r.createElement("div",{className:S},r.createElement(p.a,{component:"label",content:"borrow.coll_ratio"}),r.createElement("input",{min:"0",max:"6",step:"0.05",onChange:this._onRatioChange.bind(this),value:d,type:"range",disabled:!l}),r.createElement("div",{className:"inline-block"},f.a.format_number(d,2)),h.below_maintenance||h.close_maintenance?r.createElement("div",{style:{maxWidth:"calc(100% - 50px)"},className:"float-right"},h.below_maintenance,h.close_maintenance):null),r.createElement("div",{className:"no-padding grid-content button-group no-overflow"},r.createElement("div",{onClick:this._onSubmit.bind(this),href:!0,className:O},r.createElement(p.a,{content:"borrow.adjust"})),r.createElement("div",{onClick:function(t){t.preventDefault(),e.setState(e._initialState(e.props))},href:!0,className:"button info"},r.createElement(p.a,{content:"wallet.reset"}))))))}}]),t}();I.propTypes={quote_asset:d.a.ChainAsset.isRequired,bitasset_balance:d.a.ChainObject,backing_asset:d.a.ChainAsset.isRequired,backing_balance:d.a.ChainObject,call_orders:d.a.ChainObjectsList,hasCallOrders:a.bool},I=Object(h.a)(I,{keep_updating:!0});var F=function(e){function t(){P(this,t);var e=D(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={smallScreen:!1},e}return N(t,r["Component"]),T(t,[{key:"show",value:function(){var e="borrow_modal_"+this.props.quote_asset;i.a.publish(e,"open")}},{key:"componentWillMount",value:function(){this.setState({smallScreen:window.innerHeight<=800})}},{key:"render",value:function(){var e=this.props,t=e.quote_asset,n=e.backing_asset,a=e.account,o="borrow_modal_"+t,s=a.get("balances").toJS(),i=void 0,c=void 0;if(s)for(var u in s)u===n&&(i=s[u]),u===t&&(c=s[u]);return r.createElement(l.a,{id:o,overlay:!0,ref:o},r.createElement("div",{className:"grid-block vertical"},r.createElement(I,{quote_asset:t,call_orders:a.get("call_orders"),hasCallOrders:a.get("call_orders")&&a.get("call_orders").size>0,modalId:o,bitasset_balance:c,backing_balance:i,backing_asset:n,hide_help:this.state.smallScreen,account:a})))}}]),t}();t.a=F},1670:function(e,t,n){"use strict";n.d(t,"b",function(){return A}),n.d(t,"c",function(){return w}),n.d(t,"a",function(){return C});var r=n(0),a=n(2),o=n(1114),s=n(64),i=n(8),l=n(1),c=n.n(l),u=n(1651),p=n(1630),d=n(79),h=n(51),m=n(3),f=n(36),b=n(1638),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function E(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var k={textAlign:"right"},w=function(e){function t(){return v(this,t),_(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return E(t,r["Component"]),g(t,[{key:"render",value:function(){var e=this.props,t=e.baseSymbol,n=e.quoteSymbol,a=e.dashboard,o=(e.isMyAccount,e.settings),s=o?o.get("unit"):"1.3.0";return a?r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",null,r.createElement(c.a,{content:"account.cyb_market"})),r.createElement("th",{style:k},r.createElement(c.a,{content:"exchange.price"})),r.createElement("th",{style:k},r.createElement(c.a,{content:"account.qty"})),r.createElement("th",{style:k},r.createElement(c.a,{content:"exchange.total"})),r.createElement("th",{style:k},r.createElement(c.a,{content:"exchange.order_value"})," (",r.createElement(d.a,{name:s}),")"),r.createElement("th",null,r.createElement(c.a,{content:"account.trade"})),r.createElement("th",null,r.createElement(c.a,{content:"wallet.cancel"})))):r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",{className:"text-right"},r.createElement(c.a,{className:"header-sub-title",content:"exchange.price"})),r.createElement("th",{className:"text-right"},t?r.createElement("span",{className:"header-sub-title"},r.createElement(d.a,{dataPlace:"top",name:n})):null),r.createElement("th",{className:"text-right"},t?r.createElement("span",{className:"header-sub-title"},r.createElement(d.a,{dataPlace:"top",name:t})):null),r.createElement("th",{className:"text-right",style:{width:"28%"}},r.createElement(c.a,{className:"header-sub-title",content:"transaction.expiration"})),r.createElement("th",{style:{whiteSpace:"nowrap"}},r.createElement(c.a,{content:"wallet.cancel"}))))}}]),t}();w.defaultProps={quoteSymbol:null,baseSymbol:null};var A=function(e){function t(){return v(this,t),_(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return E(t,r["Component"]),g(t,[{key:"shouldComponentUpdate",value:function(e){return e.order.for_sale!==this.props.order.for_sale||e.order.id!==this.props.order.id||e.isMyAccount!==this.props.isMyAccount||e.quote!==this.props.quote||e.base!==this.props.base||e.order.market_base!==this.props.order.market_base}},{key:"render",value:function(){var e=this.props,t=e.base,n=e.quote,a=e.order,l=e.showSymbols,c=e.dashboard,p=(e.isMyAccount,e.settings),m=a.isBid(),f=a.isCall(),g=(f?"orderHistoryCall":m?"orderHistoryBid":"orderHistoryAsk")+" text-right",y=l?r.createElement("span",null," "+t.get("symbol")+"/"+n.get("symbol")):null,v=l?" "+t.get("symbol"):null,_=l?" "+n.get("symbol"):null,E=p?p.get("unit"):"1.3.0";return c?r.createElement("tr",{key:a.id},r.createElement("td",{style:{textAlign:"center",paddingLeft:0,borderRight:"none"}},r.createElement(o.a,{to:"/asset/"+n.get("symbol")},r.createElement(d.a,{noTip:!0,name:n.get("symbol")})),"/",r.createElement(o.a,{to:"/asset/"+t.get("symbol")},r.createElement(d.a,{noTip:!0,name:t.get("symbol")}))),r.createElement("td",{className:g,style:k},r.createElement(u.a,{price:a.getPrice(),base:t,quote:n}),y),r.createElement("td",{style:k},i.a.format_number(a[m?"amountToReceive":"amountForSale"]().getAmount({real:!0}),n.get("precision"))," ",_),r.createElement("td",{style:k},i.a.format_number(a[m?"amountForSale":"amountToReceive"]().getAmount({real:!0}),t.get("precision"))," ",v),r.createElement("td",{className:"text-right"},r.createElement(b.b,{hide_asset:!0,amount:a.amountForSale().getAmount(),fromAsset:a.amountForSale().asset_id,noDecimals:!0,toAsset:E})),r.createElement("td",null,r.createElement(o.a,{to:"/market/"+n.get("symbol")+"_"+t.get("symbol")},r.createElement(h.a,{name:"trade",className:"icon-14px"}))),r.createElement("td",{className:"text-center",style:{padding:"2px 5px"}},f?null:r.createElement("a",{style:{marginRight:0},className:"order-cancel",onClick:this.props.onCancel},r.createElement(h.a,{name:"cross-circle",className:"icon-14px"})))):r.createElement("tr",{key:a.id},r.createElement("td",{className:g,style:{paddingLeft:10}},r.createElement(u.a,{price:a.getPrice(),base:t,quote:n}),y),r.createElement("td",{className:"text-right"},i.a.format_number(a[m?"amountToReceive":"amountForSale"]().getAmount({real:!0}),n.get("precision"))," ",_),r.createElement("td",{className:"text-right"},i.a.format_number(a[m?"amountForSale":"amountToReceive"]().getAmount({real:!0}),t.get("precision"))," ",v),r.createElement("td",{className:"text-right",style:{width:"28%"}},f?null:r.createElement(s.a,{value:a.expiration,format:"short"})),r.createElement("td",{className:"text-center",style:{padding:"2px 5px"}},f?null:r.createElement("a",{style:{marginRight:0},className:"order-cancel",onClick:this.props.onCancel},r.createElement(h.a,{name:"cross-circle",className:"icon-14px"}))))}}]),t}();A.defaultProps={showSymbols:!1};var C=function(e){function t(e){v(this,t);var n=_(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._getOrders=n._getOrders.bind(n),n}return E(t,r["Component"]),g(t,[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(){}},{key:"_getOrders",value:function(){var e,t=this,n=this.props,r=n.currentAccount,a=n.base,o=n.quote,s=r.get("orders"),i=r.get("call_orders"),l=a.get("id"),c=o.get("id"),u=(y(e={},a.get("id"),{precision:a.get("precision")}),y(e,o.get("id"),{precision:o.get("precision")}),e),p=s.toArray().map(function(e){var t=m.b.getObject(e);if(!t)return null;var n=t.getIn(["sell_price","base","asset_id"]),r=t.getIn(["sell_price","quote","asset_id"]);return n===l&&r===c||n===c&&r===l?new f.d(t.toJS(),u,o.get("id")):void 0}).filter(function(e){return!!e}),d=i.toArray().map(function(e){var n=m.b.getObject(e);if(!n)return null;var r=n.getIn(["call_price","base","asset_id"]),a=n.getIn(["call_price","quote","asset_id"]);return r===l&&a===c||r===c&&a===l?t.props.feedPrice?new f.b(n.toJS(),u,o.get("id"),t.props.feedPrice):null:void 0}).filter(function(e){return!!e}).filter(function(e){return e.isMarginCalled()});return p.concat(d)}},{key:"render",value:function(){var e=this,t=this.props,n=t.base,a=t.quote,o=t.quoteSymbol,s=t.baseSymbol;if(!n||!a)return null;var i=this._getOrders(),l=r.createElement("tr",null,r.createElement("td",{style:{textAlign:"center"},colSpan:5},r.createElement(c.a,{content:"account.no_orders"}))),u=i.filter(function(e){return e.isBid()}).sort(function(e,t){return t.getPrice()-e.getPrice()}).map(function(t){var o=t.getPrice();return r.createElement(A,{price:o,key:t.id,order:t,base:n,quote:a,onCancel:e.props.onCancel.bind(e,t.id)})}),d=i.filter(function(e){return!e.isBid()}).sort(function(e,t){return e.getPrice()-t.getPrice()}).map(function(t){var o=t.getPrice();return r.createElement(A,{price:o,key:t.id,order:t,base:n,quote:a,onCancel:e.props.onCancel.bind(e,t.id)})}),h=[];return d.length&&(h=h.concat(d)),u.length&&(h=h.concat(u)),h.sort(function(e,t){return e.props.price-t.props.price}),r.createElement(r.Fragment,null,r.createElement("div",{className:"exchange-content-header"},r.createElement(c.a,{content:"exchange.my_orders"})),r.createElement("table",{className:"table order-table table-hover"},r.createElement(w,{type:"sell",baseSymbol:s,quoteSymbol:o})),r.createElement("div",{className:"grid-block no-padding market-right-padding _scroll-bar",ref:"asks",style:{overflow:"auto",maxHeight:720}},r.createElement("table",{style:{paddingBottom:5},className:"table order-table table-hover"},r.createElement(p.a,{component:"tbody",transitionName:"newrow"},h.length?h:l))))}}]),t}();C.defaultProps={base:{},quote:{},orders:{},quoteSymbol:"",baseSymbol:""},C.propTypes={base:a.object.isRequired,quote:a.object.isRequired,orders:a.object.isRequired,quoteSymbol:a.string.isRequired,baseSymbol:a.string.isRequired}},1694:function(e,t,n){"use strict";n.r(t),n.d(t,"Notification",function(){return a});var r=n(0),a=r.createClass({displayName:"Notification",getDefaultProps:function(){return{position:"top-right",color:"success",title:null,image:null,content:null,wrapperElement:"p"}},render:function(){var e="notification "+this.props.position+" "+this.props.color;e+=" "+(this.props.className||"");var t=null;return this.props.image&&(t=r.createElement("div",{className:"notification-icon"},r.createElement("img",{src:"{{ image }}"}))),r.createElement("div",{id:this.props.id,"data-closable":!0,className:e},r.createElement("a",{href:"#",className:"close-button",onClick:this.props.closeHandler},"×"),t,r.createElement("div",{className:"notification-content"},r.createElement("h1",null,this.props.title),r.createElement(this.props.wrapperElement,null,this.props.children)))}});t.default=a},1699:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var r=n(0),a=(n(2),Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function l(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var c=function(e){function t(){return s(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return l(t,r["Component"]),o(t,[{key:"onKeyPress",value:function(e){"."===e.key&&""===e.target.value&&(e.target.value="0");var t=e.target.value+e.key,n=t.match(/\./g),r=n?n.length:0;"."===e.key&&r>1&&e.preventDefault(),parseFloat(t)!=t&&e.preventDefault(),this.props.onKeyPress&&this.props.onKeyPress(e)}}]),t}(),u=function(e){function t(){return s(this,t),i(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return l(t,c),o(t,[{key:"componentWillReceiveProps",value:function(e){this.props.value&&!e.value&&(this.refs.input.value="")}},{key:"render",value:function(){return r.createElement("input",a({ref:"input",type:"text"},this.props,{onKeyPress:this.onKeyPress.bind(this)}))}}]),t}();t.b=u},1700:function(e,t,n){"use strict";var r=n(12),a=n(69),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var s=new a.a("__cyb__"),i=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.current_blocktrades_address_cache_version_string="2"}return o(e,[{key:"getIndexForDepositKeyInExchange",value:function(e,t,n){return[this.current_blocktrades_address_cache_version_string,e,t,n].reduce(function(e,t){return e.concat("[",t,"]")},"")}},{key:"getCachedInputAddress",value:function(e,t,n,a){r.a.getWallet();var o=this.getIndexForDepositKeyInExchange(t,n,a),i=s.get("deposit_keys",{});i[e]=i[e]||{},i[e][o]=i[e][o]||[];var l=i[e][o].length;return l?i[e][o][l-1]:null}},{key:"cacheInputAddress",value:function(e,t,n,a,o,i){if(o){r.a.getWallet();null;var l=this.getIndexForDepositKeyInExchange(t,n,a),c=s.get("deposit_keys",{});c[e]=c[e]||{},c[e][l]=c[e][l]||[],c[e][l].push({address:o,memo:i}),s.set("deposit_keys",c)}}}]),e}();t.a=i},1701:function(e,t,n){"use strict";n.d(t,"d",function(){return s}),n.d(t,"c",function(){return i}),n.d(t,"b",function(){return l}),n.d(t,"e",function(){return u}),n.d(t,"f",function(){return p}),n.d(t,"a",function(){return d});var r=n(69),a=n(105),o=new r.a("");function s(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:a.c.BASE+a.c.DEPOSIT_LIMIT;return fetch(n+"?inputCoinType="+encodeURIComponent(e)+"&outputCoinType="+encodeURIComponent(t),{method:"get",headers:new Headers({Accept:"application/json"})}).then(function(e){return e.json().then(function(e){return e})}).catch(function(n){console.log("error fetching deposit limit of",e,t,n)})}function i(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:a.c.BASE+a.c.ESTIMATE_OUTPUT;return fetch(r+"?inputAmount="+encodeURIComponent(e)+"&inputCoinType="+encodeURIComponent(t)+"&outputCoinType="+encodeURIComponent(n),{method:"get",headers:new Headers({Accept:"application/json"})}).then(function(e){return e.json().then(function(e){return e})}).catch(function(e){console.log("error fetching deposit limit of",t,n,e)})}function l(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:a.c.BASE+a.c.ESTIMATE_INPUT;return fetch(r+"?outputAmount="+encodeURIComponent(e)+"&inputCoinType="+encodeURIComponent(t)+"&outputCoinType="+encodeURIComponent(n),{method:"get",headers:new Headers({Accept:"application/json"})}).then(function(e){return e.json().then(function(e){return e})}).catch(function(e){console.log("error fetching deposit limit of",t,n,e)})}var c={};function u(e){var t=e.inputCoinType,n=e.outputCoinType,r=e.outputAddress,o=e.url,s=void 0===o?a.c.BASE_OL:o,i=e.stateCallback,l={inputCoinType:t,outputCoinType:n,outputAddress:r},u=JSON.stringify(l);c[u]||(c[u]=!0,fetch(s+"/simple-api/initiate-trade",{method:"post",headers:new Headers({Accept:"application/json","Content-Type":"application/json"}),body:u}).then(function(e){e.json().then(function(e){delete c[u];var t={address:e.inputAddress||"unknown",memo:e.inputMemo,error:e.error||null};i&&i(t)},function(e){delete c[u],i&&i(null)})},function(e){delete c[u],i&&i(null)}).catch(function(e){console.log("fetch error:",e),delete c[u]}))}function p(e){var t=e.url,n=void 0===t?a.c.BASE:t,r=e.walletType,o=e.newAddress;return o?fetch(n+"/wallets/"+r+"/address-validator?address="+encodeURIComponent(o),{method:"get",headers:new Headers({Accept:"application/json"})}).then(function(e){return e.json().then(function(e){return e.isValid})}).catch(function(e){console.log("validate error:",e)}):new Promise(function(e){return e()})}var d={has:function(e){return o.has("history_address_"+e)},set:function(e){var t=e.wallet,n=e.addresses;o.set("history_address_"+t,n)},get:function(e){return o.get("history_address_"+e,[])},setLast:function(e){var t=e.wallet,n=e.address;o.set("history_address_last_"+t,n)},getLast:function(e){return o.get("history_address_last_"+e,"")}}},1702:function(e,t){e.exports=function(){return navigator.languages&&navigator.languages.length?navigator.languages[0]:navigator.userLanguage?navigator.userLanguage:navigator.language}},1706:function(e,t,n){"use strict";var r=function(e){for(var t,n=e.length,r=n^n,a=0;n>=4;)t=1540483477*(65535&(t=255&e.charCodeAt(a)|(255&e.charCodeAt(++a))<<8|(255&e.charCodeAt(++a))<<16|(255&e.charCodeAt(++a))<<24))+((1540483477*(t>>>16)&65535)<<16),r=1540483477*(65535&r)+((1540483477*(r>>>16)&65535)<<16)^(t=1540483477*(65535&(t^=t>>>24))+((1540483477*(t>>>16)&65535)<<16)),n-=4,++a;switch(n){case 3:r^=(255&e.charCodeAt(a+2))<<16;case 2:r^=(255&e.charCodeAt(a+1))<<8;case 1:r=1540483477*(65535&(r^=255&e.charCodeAt(a)))+((1540483477*(r>>>16)&65535)<<16)}return r=1540483477*(65535&(r^=r>>>13))+((1540483477*(r>>>16)&65535)<<16),((r^=r>>>15)>>>0).toString(36)},a=function e(t){function n(e,t,n){var a=t.trim().split(f);t=a;var o=a.length,s=e.length;switch(s){case 0:case 1:var i=0;for(e=0===s?"":e[0]+" ";i<o;++i)t[i]=r(e,t[i],n).trim();break;default:var l=i=0;for(t=[];i<o;++i)for(var c=0;c<s;++c)t[l++]=r(e[c]+" ",a[i],n).trim()}return t}function r(e,t,n){var r=t.charCodeAt(0);switch(33>r&&(r=(t=t.trim()).charCodeAt(0)),r){case 38:return t.replace(b,"$1"+e.trim());case 58:switch(t.charCodeAt(1)){case 103:break;default:return e.trim()+t.replace(b,"$1"+e.trim())}default:if(0<1*n&&0<t.indexOf("\f"))return t.replace(b,(58===e.charCodeAt(0)?"":"$1")+e.trim())}return e+t}function a(e,t,n,r){var s=e+";",i=2*t+3*n+4*r;if(944===i){e=s.indexOf(":",9)+1;var l=s.substring(e,s.length-1).trim();return l=s.substring(0,e).trim()+l+";",1===T||2===T&&o(l,1)?"-webkit-"+l+l:l}if(0===T||2===T&&!o(s,1))return s;switch(i){case 1015:return 97===s.charCodeAt(10)?"-webkit-"+s+s:s;case 951:return 116===s.charCodeAt(3)?"-webkit-"+s+s:s;case 963:return 110===s.charCodeAt(5)?"-webkit-"+s+s:s;case 1009:if(100!==s.charCodeAt(4))break;case 969:case 942:return"-webkit-"+s+s;case 978:return"-webkit-"+s+"-moz-"+s+s;case 1019:case 983:return"-webkit-"+s+"-moz-"+s+"-ms-"+s+s;case 883:return 45===s.charCodeAt(8)?"-webkit-"+s+s:s;case 932:if(45===s.charCodeAt(4))switch(s.charCodeAt(5)){case 103:return"-webkit-box-"+s.replace("-grow","")+"-webkit-"+s+"-ms-"+s.replace("grow","positive")+s;case 115:return"-webkit-"+s+"-ms-"+s.replace("shrink","negative")+s;case 98:return"-webkit-"+s+"-ms-"+s.replace("basis","preferred-size")+s}return"-webkit-"+s+"-ms-"+s+s;case 964:return"-webkit-"+s+"-ms-flex-"+s+s;case 1023:if(99!==s.charCodeAt(8))break;return"-webkit-box-pack"+(l=s.substring(s.indexOf(":",15)).replace("flex-","").replace("space-between","justify"))+"-webkit-"+s+"-ms-flex-pack"+l+s;case 1005:return h.test(s)?s.replace(d,":-webkit-")+s.replace(d,":-moz-")+s:s;case 1e3:switch(t=(l=s.substring(13).trim()).indexOf("-")+1,l.charCodeAt(0)+l.charCodeAt(t)){case 226:l=s.replace(_,"tb");break;case 232:l=s.replace(_,"tb-rl");break;case 220:l=s.replace(_,"lr");break;default:return s}return"-webkit-"+s+"-ms-"+l+s;case 1017:if(-1===s.indexOf("sticky",9))break;case 975:switch(t=(s=e).length-10,i=(l=(33===s.charCodeAt(t)?s.substring(0,t):s).substring(e.indexOf(":",7)+1).trim()).charCodeAt(0)+(0|l.charCodeAt(7))){case 203:if(111>l.charCodeAt(8))break;case 115:s=s.replace(l,"-webkit-"+l)+";"+s;break;case 207:case 102:s=s.replace(l,"-webkit-"+(102<i?"inline-":"")+"box")+";"+s.replace(l,"-webkit-"+l)+";"+s.replace(l,"-ms-"+l+"box")+";"+s}return s+";";case 938:if(45===s.charCodeAt(5))switch(s.charCodeAt(6)){case 105:return"-webkit-"+s+"-webkit-box-"+(l=s.replace("-items",""))+"-ms-flex-"+l+s;case 115:return"-webkit-"+s+"-ms-flex-item-"+s.replace(w,"")+s;default:return"-webkit-"+s+"-ms-flex-line-pack"+s.replace("align-content","").replace(w,"")+s}break;case 973:case 989:if(45!==s.charCodeAt(3)||122===s.charCodeAt(4))break;case 931:case 953:if(!0===C.test(e))return 115===(l=e.substring(e.indexOf(":")+1)).charCodeAt(0)?a(e.replace("stretch","fill-available"),t,n,r).replace(":fill-available",":stretch"):s.replace(l,"-webkit-"+l)+s.replace(l,"-moz-"+l.replace("fill-",""))+s;break;case 962:if(s="-webkit-"+s+(102===s.charCodeAt(5)?"-ms-"+s:"")+s,211===n+r&&105===s.charCodeAt(13)&&0<s.indexOf("transform",10))return s.substring(0,s.indexOf(";",27)+1).replace(m,"$1-webkit-$2")+s}return s}function o(e,t){var n=e.indexOf(1===t?":":"{"),r=e.substring(0,3!==t?n:10);return n=e.substring(n+1,e.length-1),I(2!==t?r:r.replace(A,"$1"),n,t)}function s(e,t){var n=a(t,t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2));return n!==t+";"?n.replace(k," or ($1)").substring(4):"("+t+")"}function i(e,t,n,r,a,o,s,i,l,u){for(var p,d=0,h=t;d<N;++d)switch(p=D[d].call(c,e,h,n,r,a,o,s,i,l,u)){case void 0:case!1:case!0:case null:break;default:h=p}switch(h){case void 0:case!1:case!0:case null:case t:break;default:return h}}function l(e){for(var t in e){var n=e[t];switch(t){case"prefix":I=null,n?"function"!=typeof n?T=1:(T=2,I=n):T=0}}return l}function c(t,r){if(void 0!==this&&this.constructor===c)return e(t);var l=t;if(33>l.charCodeAt(0)&&(l=l.trim()),l=[l],0<N){var d=i(-1,r,l,l,O,S,0,0,0,0);void 0!==d&&"string"==typeof d&&(r=d)}var h=function e(t,r,l,c,d){for(var h,m,f,b,_,k,w=0,A=0,C=0,D=0,I=0,j=0,M=b=h=0,R=0,B=m=0,q=0,L=l.length,V=L-1,U="",H="",z="",W="";R<L;){if(f=l.charCodeAt(R),R===V&&0!==A+D+C+w&&(0!==A&&(f=47===A?10:47),D=C=w=0,L++,V++),0===A+D+C+w){if(R===V&&(0<m&&(U=U.replace(p,"")),0<U.trim().length)){switch(f){case 32:case 9:case 59:case 13:case 10:break;default:U+=l.charAt(R)}f=59}switch(f){case 123:for(h=(U=U.trim()).charCodeAt(0),b=1,q=++R;R<L;){switch(f=l.charCodeAt(R)){case 123:b++;break;case 125:b--}if(0===b)break;R++}switch(f=l.substring(q,R),0===h&&(h=(U=U.replace(u,"").trim()).charCodeAt(0)),h){case 64:switch(0<m&&(U=U.replace(p,"")),m=U.charCodeAt(1)){case 100:case 109:case 115:case 45:b=r;break;default:b=P}if(q=(f=e(r,b,f,m,d+1)).length,0<N&&(k=i(3,f,b=n(P,U,B),r,O,S,q,m,d,c),U=b.join(""),void 0!==k&&0===(q=(f=k.trim()).length)&&(m=0,f="")),0<q)switch(m){case 115:U=U.replace(E,s);case 100:case 109:case 45:f=U+"{"+f+"}";break;case 107:f=(U=U.replace(g,"$1 $2"))+"{"+f+"}",f=1===T||2===T&&o("@"+f,3)?"@-webkit-"+f+"@"+f:"@"+f;break;default:f=U+f,112===c&&(H+=f,f="")}else f="";break;default:f=e(r,n(r,U,B),f,c,d+1)}z+=f,b=B=m=M=h=0,U="",f=l.charCodeAt(++R);break;case 125:case 59:if(1<(q=(U=(0<m?U.replace(p,""):U).trim()).length))switch(0===M&&(h=U.charCodeAt(0),45===h||96<h&&123>h)&&(q=(U=U.replace(" ",":")).length),0<N&&void 0!==(k=i(1,U,r,t,O,S,H.length,c,d,c))&&0===(q=(U=k.trim()).length)&&(U="\0\0"),h=U.charCodeAt(0),m=U.charCodeAt(1),h+m){case 0:break;case 169:case 163:W+=U+l.charAt(R);break;default:58!==U.charCodeAt(q-1)&&(H+=a(U,h,m,U.charCodeAt(2)))}B=m=M=h=0,U="",f=l.charCodeAt(++R)}}switch(f){case 13:case 10:47===A?A=0:0===1+h&&(m=1,U+="\0"),0<N*F&&i(0,U,r,t,O,S,H.length,c,d,c),S=1,O++;break;case 59:case 125:if(0===A+D+C+w){S++;break}default:switch(S++,_=l.charAt(R),f){case 9:case 32:if(0===D+w+A)switch(I){case 44:case 58:case 9:case 32:_="";break;default:32!==f&&(_=" ")}break;case 0:_="\\0";break;case 12:_="\\f";break;case 11:_="\\v";break;case 38:0===D+A+w&&(m=B=1,_="\f"+_);break;case 108:if(0===D+A+w+x&&0<M)switch(R-M){case 2:112===I&&58===l.charCodeAt(R-3)&&(x=I);case 8:111===j&&(x=j)}break;case 58:0===D+A+w&&(M=R);break;case 44:0===A+C+D+w&&(m=1,_+="\r");break;case 34:case 39:0===A&&(D=D===f?0:0===D?f:D);break;case 91:0===D+A+C&&w++;break;case 93:0===D+A+C&&w--;break;case 41:0===D+A+w&&C--;break;case 40:if(0===D+A+w){if(0===h)switch(2*I+3*j){case 533:break;default:h=1}C++}break;case 64:0===A+C+D+w+M+b&&(b=1);break;case 42:case 47:if(!(0<D+w+C))switch(A){case 0:switch(2*f+3*l.charCodeAt(R+1)){case 235:A=47;break;case 220:q=R,A=42}break;case 42:47===f&&42===I&&(33===l.charCodeAt(q+2)&&(H+=l.substring(q,R+1)),_="",A=0)}}0===A&&(U+=_)}j=I,I=f,R++}if(0<(q=H.length)){if(b=r,0<N&&void 0!==(k=i(2,H,b,t,O,S,q,c,d,c))&&0===(H=k).length)return W+H+z;if(H=b.join(",")+"{"+H+"}",0!=T*x){switch(2!==T||o(H,2)||(x=0),x){case 111:H=H.replace(v,":-moz-$1")+H;break;case 112:H=H.replace(y,"::-webkit-input-$1")+H.replace(y,"::-moz-$1")+H.replace(y,":-ms-input-$1")+H}x=0}}return W+H+z}(P,l,r,0,0);return 0<N&&void 0!==(d=i(-2,h,l,l,O,S,h.length,0,0,0))&&(h=d),x=0,S=O=1,h}var u=/^\0+/g,p=/[\0\r\f]/g,d=/: */g,h=/zoo|gra/,m=/([,: ])(transform)/g,f=/,\r+?/g,b=/([\t\r\n ])*\f?&/g,g=/@(k\w+)\s*(\S*)\s*/,y=/::(place)/g,v=/:(read-only)/g,_=/[svh]\w+-[tblr]{2}/,E=/\(\s*(.*)\s*\)/g,k=/([\s\S]*?);/g,w=/-self|flex-/g,A=/[^]*?(:[rp][el]a[\w-]+)[^]*/,C=/stretch|:\s*\w+\-(?:conte|avail)/,S=1,O=1,x=0,T=1,P=[],D=[],N=0,I=null,F=0;return c.use=function e(t){switch(t){case void 0:case null:N=D.length=0;break;default:switch(t.constructor){case Array:for(var n=0,r=t.length;n<r;++n)e(t[n]);break;case Function:D[N++]=t;break;case Boolean:F=0|!!t}}return e},c.set=l,void 0!==t&&l(t),c},o=n(1780),s=n.n(o);var i={animationIterationCount:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},l=/[A-Z]|^ms/g,c=function(e){var t={};return function(n){return void 0===t[n]&&(t[n]=e(n)),t[n]}}(function(e){return e.replace(l,"-$&").toLowerCase()}),u=function(e,t){return null==t||"boolean"==typeof t?"":1===i[e]||45===e.charCodeAt(1)||isNaN(t)||0===t?t:t+"px"},p=function e(t){for(var n=t.length,r=0,a="";r<n;r++){var o=t[r];if(null!=o){var s=void 0;switch(typeof o){case"boolean":break;case"function":s=e([o()]);break;case"object":if(Array.isArray(o))s=e(o);else for(var i in s="",o)o[i]&&i&&(s&&(s+=" "),s+=i);break;default:s=o}s&&(a&&(a+=" "),a+=s)}}return a},d="undefined"!=typeof document;function h(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key||""),void 0!==e.nonce&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),(void 0!==e.container?e.container:document.head).appendChild(t),t}function m(e){this.isSpeedy=!0,this.tags=[],this.ctr=0,this.opts=e}function f(){if(this.injected)throw new Error("already injected!");this.tags[0]=h(this.opts),this.injected=!0}function b(e){if(0!==this.ctr)throw new Error("cannot change speedy now");this.isSpeedy=!!e}function g(e,t){if(this.isSpeedy){var n=function(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}(this.tags[this.tags.length-1]);try{n.insertRule(e,n.cssRules.length)}catch(e){0}}else{var r=h(this.opts);this.tags.push(r),r.appendChild(document.createTextNode(e+(t||"")))}this.ctr++,this.ctr%65e3==0&&this.tags.push(h(this.opts))}function y(e){return e.parentNode.removeChild(e)}function v(){this.tags.forEach(y),this.tags=[],this.ctr=0,this.injected=!1}var _=function(){var e=m.prototype;return e.inject=f,e.speedy=b,e.insert=g,e.flush=v,m}();t.a=function(e,t){if(void 0!==e.__SECRET_EMOTION__)return e.__SECRET_EMOTION__;void 0===t&&(t={});var n,o,i=t.key||"css",l=s()(function(e){n+=e,d&&m.insert(e,b)});void 0!==t.prefix&&(o={prefix:t.prefix});var h={registered:{},inserted:{},nonce:t.nonce,key:i},m=new _(t);d&&m.inject();var f=new a(o);f.use(t.stylisPlugins)(l);var b="";function g(e,t){if(null==e)return"";switch(typeof e){case"boolean":return"";case"function":if(void 0!==e.__emotion_styles){var n=e.toString();return n}return g.call(this,void 0===this?e():e(this.mergedProps,this.context),t);case"object":return function(e){if(E.has(e))return E.get(e);var t="";return Array.isArray(e)?e.forEach(function(e){t+=g.call(this,e,!1)},this):Object.keys(e).forEach(function(n){"object"!=typeof e[n]?void 0!==h.registered[e[n]]?t+=n+"{"+h.registered[e[n]]+"}":t+=c(n)+":"+u(n,e[n])+";":Array.isArray(e[n])&&"string"==typeof e[n][0]&&void 0===h.registered[e[n][0]]?e[n].forEach(function(e){t+=c(n)+":"+u(n,e)+";"}):t+=n+"{"+g.call(this,e[n],!1)+"}"},this),E.set(e,t),t}.call(this,e);default:var r=h.registered[e];return!1===t&&void 0!==r?r:e}}var y,v,E=new WeakMap,k=/label:\s*([^\s;\n{]+)\s*;/g,w=function(e){var t=!0,n="",a="";null==e||void 0===e.raw?(t=!1,n+=g.call(this,e,!1)):n+=e[0];for(var o=arguments.length,s=new Array(o>1?o-1:0),i=1;i<o;i++)s[i-1]=arguments[i];return s.forEach(function(r,a){n+=g.call(this,r,46===n.charCodeAt(n.length-1)),!0===t&&void 0!==e[a+1]&&(n+=e[a+1])},this),v=n,n=n.replace(k,function(e,t){return a+="-"+t,""}),y=r(n+a)+a,n};function A(e,t){void 0===h.inserted[y]&&(n="",f(e,t),h.inserted[y]=n)}var C=function(){var e=w.apply(this,arguments),t=i+"-"+y;return void 0===h.registered[t]&&(h.registered[t]=v),A("."+t,e),t};function S(e,t){var n="";return t.split(" ").forEach(function(t){void 0!==h.registered[t]?e.push(t):n+=t+" "}),n}function O(e,t){var n=[],r=S(n,e);return n.length<2?e:r+C(n,t)}function x(e){h.inserted[e]=!0}if(d){var T=document.querySelectorAll("[data-emotion-"+i+"]");Array.prototype.forEach.call(T,function(e){m.tags[0].parentNode.insertBefore(e,m.tags[0]),e.getAttribute("data-emotion-"+i).split(" ").forEach(x)})}var P={flush:function(){d&&(m.flush(),m.inject()),h.inserted={},h.registered={}},hydrate:function(e){e.forEach(x)},cx:function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return O(p(t))},merge:O,getRegisteredStyles:S,injectGlobal:function(){A("",w.apply(this,arguments))},keyframes:function(){var e=w.apply(this,arguments),t="animation-"+y;return A("","@keyframes "+t+"{"+e+"}"),t},css:C,sheet:m,caches:h};return e.__SECRET_EMOTION__=P,P}},1747:function(e,t,n){!function(e){"use strict";function t(e,n){var a=r({},e);for(var o in n)"object"!=typeof e[o]||null===e[o]||Array.isArray(e[o])?void 0!==n[o]&&(a[o]=n[o]):a[o]=t(e[o],n[o]);return a}function n(){return"1.13 (internal id 1c7535a2 @ 2018-10-10 04:58:21.362341)"}var r=Object.assign||function(e){for(var t,n=arguments,r=1,a=arguments.length;r<a;r++)for(var o in t=n[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e},a={mobile:{disabled_features:["left_toolbar","header_widget","timeframes_toolbar","edit_buttons_in_legend","context_menus","control_bar","border_around_the_chart"],enabled_features:[]}},o={width:800,height:500,symbol:"AA",interval:"D",timezone:"Etc/UTC",container_id:"",library_path:"",locale:"en",widgetbar:{details:!1,watchlist:!1,watchlist_settings:{default_symbols:[]}},overrides:{"mainSeriesProperties.showCountdown":!1},studies_overrides:{},brokerConfig:{configFlags:{}},fullscreen:!1,autosize:!1,disabled_features:[],enabled_features:[],debug:!1,logo:{},time_frames:[{text:"5y",resolution:"W"},{text:"1y",resolution:"W"},{text:"6m",resolution:"120"},{text:"3m",resolution:"60"},{text:"1m",resolution:"30"},{text:"5d",resolution:"5"},{text:"1d",resolution:"1"}],client_id:"0",user_id:"0",charts_storage_api_version:"1.0",favorites:{intervals:[],chartTypes:[]}},s=function(){function e(e){if(this._id="tradingview_"+(1048576*(1+Math.random())|0).toString(16).substring(1),this._ready=!1,this._readyHandlers=[],this._onWindowResize=this._autoResizeChart.bind(this),!e.datafeed)throw new Error("Datafeed is not defined");if(this._options=t(o,e),e.preset){var n=a[e.preset];n?(void 0!==this._options.disabled_features?this._options.disabled_features=this._options.disabled_features.concat(n.disabled_features):this._options.disabled_features=n.disabled_features,void 0!==this._options.enabled_features?this._options.enabled_features=this._options.enabled_features.concat(n.enabled_features):this._options.enabled_features=n.enabled_features):console.warn("Unknown preset: `"+e.preset+"`")}"Dark"===this._options.theme&&void 0===this._options.loading_screen&&(this._options.loading_screen={backgroundColor:"#131722"}),this._create()}return e.prototype.onChartReady=function(e){this._ready?e.call(this):this._readyHandlers.push(e)},e.prototype.onGrayedObjectClicked=function(e){this._innerAPI().onGrayedObjectClicked(e)},e.prototype.onShortcut=function(e,t){this._innerWindow().createShortcutAction(e,t)},e.prototype.subscribe=function(e,t){this._innerAPI().subscribe(e,t)},e.prototype.unsubscribe=function(e,t){this._innerAPI().unsubscribe(e,t)},e.prototype.chart=function(e){return this._innerAPI().chart(e)},e.prototype.setLanguage=function(e){this.remove(),this._options.locale=e,this._create()},e.prototype.setSymbol=function(e,t,n){this._innerAPI().changeSymbol(e,t+"",n)},e.prototype.remove=function(){window.removeEventListener("resize",this._onWindowResize),this._readyHandlers.splice(0,this._readyHandlers.length),delete window[this._id];var e=this._getIFrameElement();e.contentWindow.destroyChart(),e.parentNode&&e.parentNode.removeChild(e)},e.prototype.closePopupsAndDialogs=function(){this._innerAPI().closePopupsAndDialogs()},e.prototype.selectLineTool=function(e){this._innerAPI().selectLineTool(e)},e.prototype.selectedLineTool=function(){return this._innerAPI().selectedLineTool()},e.prototype.save=function(e){this._innerAPI().saveChart(e)},e.prototype.load=function(e,t){this._innerAPI().loadChart({json:e,extendedData:t})},e.prototype.getSavedCharts=function(e){this._innerAPI().getSavedCharts(e)},e.prototype.loadChartFromServer=function(e){this._innerAPI().loadChartFromServer(e)},e.prototype.saveChartToServer=function(e,t,n,r){this._innerAPI().saveChartToServer(e,t,n,r)},e.prototype.removeChartFromServer=function(e,t){this._innerAPI().removeChartFromServer(e,t)},e.prototype.onContextMenu=function(e){this._innerAPI().onContextMenu(e)},e.prototype.createButton=function(e){return this._innerWindow().createButton(e)},e.prototype.showNoticeDialog=function(e){this._innerAPI().showNoticeDialog(e)},e.prototype.showConfirmDialog=function(e){this._innerAPI().showConfirmDialog(e)},e.prototype.showLoadChartDialog=function(){this._innerAPI().showLoadChartDialog()},e.prototype.showSaveAsChartDialog=function(){this._innerAPI().showSaveAsChartDialog()},e.prototype.symbolInterval=function(){return this._innerAPI().getSymbolInterval()},e.prototype.mainSeriesPriceFormatter=function(){return this._innerAPI().mainSeriesPriceFormatter()},e.prototype.getIntervals=function(){return this._innerAPI().getIntervals()},e.prototype.getStudiesList=function(){return this._innerAPI().getStudiesList()},e.prototype.addCustomCSSFile=function(e){this._innerWindow().addCustomCSSFile(e)},e.prototype.applyOverrides=function(e){this._options=t(this._options,{overrides:e}),this._innerWindow().applyOverrides(e)},e.prototype.applyStudiesOverrides=function(e){this._innerWindow().applyStudiesOverrides(e)},e.prototype.watchList=function(){return this._innerAPI().watchlist()},e.prototype.activeChart=function(){return this._innerAPI().activeChart()},e.prototype.chartsCount=function(){return this._innerAPI().chartsCount()},e.prototype.layout=function(){return this._innerAPI().layout()},e.prototype.setLayout=function(e){this._innerAPI().setLayout(e)},e.prototype.changeTheme=function(e){this._innerWindow().changeTheme(e)},e.prototype.takeScreenshot=function(){this._innerAPI().takeScreenshot()},e.prototype.lockAllDrawingTools=function(){return this._innerAPI().lockAllDrawingTools()},e.prototype._getIFrameElement=function(){var e=document.getElementById(this._id);if(null===e)throw new Error("There is no such iframe");return e},e.prototype._innerAPI=function(){return this._getIFrameElement().contentWindow.tradingViewApi},e.prototype._innerWindow=function(){return this._getIFrameElement().contentWindow},e.prototype._autoResizeChart=function(){this._options.fullscreen&&(this._getIFrameElement().style.height=window.innerHeight+"px")},e.prototype._create=function(){var e=this,t=this._render(),n=document.getElementById(this._options.container_id);if(null===n)throw new Error("There is no such element - #"+this._options.container_id);n.innerHTML=t;var r=this._getIFrameElement();(this._options.autosize||this._options.fullscreen)&&(r.style.width="100%",this._options.fullscreen||(r.style.height="100%")),window.addEventListener("resize",this._onWindowResize),this._onWindowResize();var a=function(){r.removeEventListener("load",a,!1),r.contentWindow.widgetReady(function(){e._ready=!0;for(var t=0,n=e._readyHandlers;t<n.length;t++){var a=n[t];try{a.call(e)}catch(e){console.error(e)}}r.contentWindow.initializationFinished()})};r.addEventListener("load",a,!1)},e.prototype._render=function(){var e=window;e[this._id]={datafeed:this._options.datafeed,customFormatters:this._options.customFormatters,brokerFactory:this._options.brokerFactory,overrides:this._options.overrides,studiesOverrides:this._options.studies_overrides,disabledFeatures:this._options.disabled_features,enabledFeatures:this._options.enabled_features,brokerConfig:this._options.brokerConfig,restConfig:this._options.restConfig,favorites:this._options.favorites,logo:this._options.logo,numeric_formatting:this._options.numeric_formatting,rss_news_feed:this._options.rss_news_feed,newsProvider:this._options.news_provider,loadLastChart:this._options.load_last_chart,saveLoadAdapter:this._options.save_load_adapter,loading_screen:this._options.loading_screen,settingsAdapter:this._options.settings_adapter,customIndicatorsUrl:this._options.indicators_file_name},this._options.saved_data&&(e[this._id].chartContent={json:this._options.saved_data});var t=(this._options.library_path||"")+"static/"+this._options.locale+"-tv-chart.1c7535a2aac5ec511ed5.html#symbol="+encodeURIComponent(this._options.symbol)+"&interval="+encodeURIComponent(this._options.interval)+(this._options.timeframe?"&timeframe="+encodeURIComponent(this._options.timeframe):"")+(this._options.toolbar_bg?"&toolbarbg="+this._options.toolbar_bg.replace("#",""):"")+(this._options.studies_access?"&studiesAccess="+encodeURIComponent(JSON.stringify(this._options.studies_access)):"")+"&widgetbar="+encodeURIComponent(JSON.stringify(this._options.widgetbar))+(this._options.drawings_access?"&drawingsAccess="+encodeURIComponent(JSON.stringify(this._options.drawings_access)):"")+"&timeFrames="+encodeURIComponent(JSON.stringify(this._options.time_frames))+"&locale="+encodeURIComponent(this._options.locale)+"&uid="+encodeURIComponent(this._id)+"&clientId="+encodeURIComponent(String(this._options.client_id))+"&userId="+encodeURIComponent(String(this._options.user_id))+(this._options.charts_storage_url?"&chartsStorageUrl="+encodeURIComponent(this._options.charts_storage_url):"")+(this._options.charts_storage_api_version?"&chartsStorageVer="+encodeURIComponent(this._options.charts_storage_api_version):"")+(this._options.custom_css_url?"&customCSS="+encodeURIComponent(this._options.custom_css_url):"")+(this._options.auto_save_delay?"&autoSaveDelay="+encodeURIComponent(String(this._options.auto_save_delay)):"")+"&debug="+this._options.debug+(this._options.snapshot_url?"&snapshotUrl="+encodeURIComponent(this._options.snapshot_url):"")+(this._options.timezone?"&timezone="+encodeURIComponent(this._options.timezone):"")+(this._options.study_count_limit?"&studyCountLimit="+encodeURIComponent(String(this._options.study_count_limit)):"")+(this._options.symbol_search_request_delay?"&ssreqdelay="+encodeURIComponent(String(this._options.symbol_search_request_delay)):"")+(this._options.theme?"&theme="+encodeURIComponent(String(this._options.theme)):"");return'<iframe id="'+this._id+'" name="'+this._id+'"  src="'+t+'"'+(this._options.autosize||this._options.fullscreen?"":' width="'+this._options.width+'" height="'+this._options.height+'"')+' frameborder="0" allowTransparency="true" scrolling="no" allowfullscreen style="display:block;"></iframe>'},e}();window.TradingView=window.TradingView||{},window.TradingView.version=n,e.version=n,e.onready=function(e){window.addEventListener("DOMContentLoaded",e,!1)},e.widget=s,Object.defineProperty(e,"__esModule",{value:!0})}(t)},1756:function(e,t,n){"use strict";(function(e){var r=n(0),a=(n(2),n(39)),o=n.n(a),s=n(126),i=n(1),l=n.n(i),c=n(36),u=n(8),p=n(24),d=n(22),h=n(68),m=n(67),f=n.n(m),b=n(9),g=n.n(b),y=n(1701),v=n(1700),_=n(348),E=n(51),k=n(31),w=n(344),A=n(79),C=n(3),S=n(30),O=n(1699),x=n(105),T=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},P=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function D(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function N(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function I(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var F=function(t){function n(e){D(this,n);var t=N(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return console.log("constructor"),t.state={toAddress:y.a.getLast(e.walletType),withdrawValue:"",amountError:null,symbol:e.asset.get("symbol"),to_withdraw:new c.a({asset_id:e.asset.get("id"),precision:e.asset.get("precision")}),fee_asset_id:"1.3.0",feeStatus:{}},t._validateAddress(t.state.toAddress,e),t.deposit_address_cache=new v.a,t.addDepositAddress=t.addDepositAddress.bind(t),t._checkFeeStatus=t._checkFeeStatus.bind(t),t._checkBalance=t._checkBalance.bind(t),t._getCurrentBalance=t._getCurrentBalance.bind(t),t._getFee=t._getFee.bind(t),t._updateFee=Object(S.debounce)(t._updateFee.bind(t),250),t}return I(n,O["a"]),P(n,[{key:"componentWillMount",value:function(){this._getDepositAddress(),this._updateFee(),this._checkFeeStatus()}},{key:"componentWillReceiveProps",value:function(e){e.asset&&this.props.asset&&e.asset.get("id")!==this.props.asset.get("id")&&this.setState({to_withdraw:new c.a({asset_id:e.asset.get("id"),precision:e.asset.get("precision")}),gateFee:e.asset.get("gateFee"),intermediateAccount:e.asset.get("intermediateAccount"),symbol:e.asset.get("symbol"),memo:"",withdrawValue:"",receive_address:null,toAddress:y.a.getLast(e.walletType)},this._getDepositAddress)}},{key:"_getDepositAddress",value:function(){if(this.props.backingCoinType){var e=this.props.sender.get("name"),t=this.deposit_address_cache.getCachedInputAddress("openledger",e,this.props.backingCoinType.toLowerCase(),this.props.symbol.toLowerCase());t?this.setState({receive_address:t}):Object(y.e)(this._getDepositObject())}}},{key:"_getDepositObject",value:function(){return{inputCoinType:this.props.backingCoinType.toLowerCase(),outputCoinType:this.props.symbol.toLowerCase(),outputAddress:this.props.sender.get("name"),stateCallback:this.addDepositAddress}}},{key:"addDepositAddress",value:function(e){var t=this.props.sender.get("name");this.deposit_address_cache.cacheInputAddress("openledger",t,this.props.backingCoinType.toLowerCase(),this.props.symbol.toLowerCase(),e.address,e.memo),this.setState({receive_address:e})}},{key:"componentDidUpdate",value:function(){f.a.rebuild()}},{key:"onSubmit",value:function(t){if(t.preventDefault(),0===this.state.to_withdraw.getAmount())return this.setState({amountError:"transfer.errors.pos"});if(this.props.intermediateAccount){var n=this._getFee(),r=this._getGateFee(),a=this.state.to_withdraw.clone(),o=a.clone(this._getCurrentBalance().get("balance"));a.plus(r),o.lt(a)&&(a=this.state.to_withdraw.clone()),h.a.transfer(this.props.sender.get("id"),this.props.intermediateAccount,this.state.to_withdraw.getAmount(),this.state.to_withdraw.asset_id,this.props.backingCoinType.toLowerCase()+":"+this.state.toAddress+(this.state.memo?":"+new e(this.state.memo,"utf-8"):""),null,n.asset_id)}}},{key:"_updateAmount",value:function(){var e=this._getFee(),t=this._getCurrentBalance(),n=new c.a({amount:t?t.get("balance"):0,asset_id:this.props.asset.get("id"),precision:this.props.asset.get("precision")});n.asset_id===e.asset_id&&n.minus(e),this.state.to_withdraw.setAmount({sats:n.getAmount()}),this.setState({withdrawValue:n.getAmount({real:!0}),amountError:null},this._checkBalance)}},{key:"_checkFeeStatus",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.sender;if(t){var n=["1.3.0",this.state.to_withdraw.asset_id],r={},a=[];n.forEach(function(n){a.push(Object(w.b)({accountID:t.get("id"),feeID:n,options:["price_per_kbyte"],data:{type:"memo",content:e.props.backingCoinType.toLowerCase()+":"+e.state.toAddress+(e.state.memo?":"+e.state.memo:"")}}))}),Promise.all(a).then(function(t){n.forEach(function(e,n){r[e]=t[n]}),u.a.are_equal_shallow(e.state.feeStatus,r)||e.setState({feeStatus:r}),e._checkBalance()}).catch(function(e){console.error(e)})}}},{key:"_updateFee",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state.fee_asset_id;if(!this.props.sender)return null;Object(w.b)({accountID:this.props.sender.get("id"),feeID:t,options:["price_per_kbyte"],data:{type:"memo",content:this.props.backingCoinType.toLowerCase()+":"+this.state.toAddress+(this.state.memo?":"+this.state.memo:"")}}).then(function(t){var n=t.fee,r=t.hasBalance,a=t.hasPoolBalance;e.setState({feeAmount:n,hasBalance:r,hasPoolBalance:a,error:!r||!a},e._checkFeeStatus)})}},{key:"_getCurrentBalance",value:function(){var e=this;return this.props.balances.find(function(t){return t&&t.get("asset_type")===e.props.asset.get("id")})}},{key:"_checkBalance",value:function(){var e=this.state,t=e.feeAmount,n=e.to_withdraw,r=this.props.asset,a=this._getCurrentBalance();if(a&&t){var o=Object(w.a)(n.getAmount({real:!0}),r,this._getFee(),a,this._getGateFee());if(null!==o)return this.state.balanceError!==!o&&this.setState({balanceError:!o}),o}}},{key:"_getFee",value:function(){var e={getAmount:function(){return 0},asset_id:this.state.fee_asset_id};if(!this.state.feeStatus||!this.state.feeAmount)return e;var t=this.state.feeStatus["1.3.0"],n=this.state.feeStatus[this.state.to_withdraw.asset_id];return t&&t.hasBalance?t.fee:t&&!t.hasBalance&&n&&n.hasBalance?n.fee:t?t.fee:e}},{key:"_onInputAmount",value:function(e){try{this.state.to_withdraw.setAmount({real:parseFloat(e.target.value||0)}),this.setState({withdrawValue:e.target.value,amountError:null},this._checkBalance)}catch(e){console.error("err:",e)}}},{key:"_onInputTo",value:function(e){var t=e.target.value.trim();this.setState({withdraw_address_check_in_progress:!0,withdraw_address_selected:t,validAddress:null,toAddress:t}),this._validateAddress(t)}},{key:"_onMemoChanged",value:function(e){this.setState({memo:e.target.value},this._updateFee)}},{key:"_validateAddress",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.props;Object(y.f)({url:x.c.BASE_OL,walletType:n.walletType,newAddress:e}).then(function(n){t.state.toAddress===e&&t.setState({withdraw_address_check_in_progress:!1,validAddress:!!n})}).catch(function(e){console.error("Error when validating address:",e)})}},{key:"_openRegistrarSite",value:function(e){e.preventDefault(),window.open(SettingsStore.site_registr,"_blank").opener=null}},{key:"_getGateFee",value:function(){var e=this.props,t=e.gateFee,n=e.asset;return new c.a({real:parseFloat(t?t.replace(",",""):0),asset_id:n.get("id"),precision:n.get("precision")})}},{key:"_renderWithdraw",value:function(){var e=this.state.amountError,t=u.a.replaceName(this.props.asset.get("symbol"),!!this.props.asset.get("bitasset")).name,n=1,a=this.props.supportsMemos,o=this._getFee(),s=this._getGateFee(),i=this.state.feeStatus[o.asset_id],c=C.b.getAsset(o.asset_id),p=i&&!i.hasBalance||this.state.balanceError||!this.state.toAddress||!this.state.withdrawValue;return r.createElement("div",null,r.createElement("p",null,r.createElement(l.a,{content:"gateway.withdraw_funds",asset:t})),this._renderCurrentBalance(),r.createElement("div",{className:"SimpleTrade__withdraw-row"},r.createElement("label",{className:"left-label"},g.a.translate("modal.withdraw.amount")),r.createElement("div",{className:"inline-label input-wrapper"},r.createElement("input",{tabIndex:n++,type:"number",min:"0",onKeyPress:this.onKeyPress.bind(this),value:this.state.withdrawValue,onChange:this._onInputAmount.bind(this)}),r.createElement("div",{className:"form-label select floating-dropdown"},r.createElement("div",{className:"dropdown-wrapper inactive"},r.createElement("div",null,t)))),e?r.createElement("p",{className:"has-error no-margin",style:{paddingTop:10}},r.createElement(l.a,{content:e})):null,this.state.balanceError?r.createElement("p",{className:"has-error no-margin",style:{paddingTop:10}},r.createElement(l.a,{content:"transfer.errors.insufficient"})):null),r.createElement("div",{className:"SimpleTrade__withdraw-row"},r.createElement("label",{className:"left-label"},g.a.translate("transfer.fee")),r.createElement("div",{className:"inline-label input-wrapper"},r.createElement("input",{type:"text",disabled:!0,value:o.getAmount({real:!0})}),r.createElement("div",{className:"form-label select floating-dropdown"},r.createElement("div",{className:"dropdown-wrapper inactive"},r.createElement("div",null,c?r.createElement(A.a,{name:c.get("symbol")}):null)))),i&&!i.hasBalance?r.createElement("p",{className:"has-error no-margin",style:{paddingTop:10}},r.createElement(l.a,{content:"transfer.errors.insufficient"})):null),r.createElement("div",{className:"SimpleTrade__withdraw-row"},r.createElement("label",{className:"left-label"},g.a.translate("gateway.fee")),r.createElement("div",{className:"inline-label input-wrapper"},r.createElement("input",{type:"text",disabled:!0,value:s.getAmount({real:!0})}),r.createElement("div",{className:"form-label select floating-dropdown"},r.createElement("div",{className:"dropdown-wrapper inactive"},r.createElement("div",null,r.createElement(A.a,{name:this.props.asset.get("symbol")}))))),i&&!i.hasBalance?r.createElement("p",{className:"has-error no-margin",style:{paddingTop:10}},r.createElement(l.a,{content:"transfer.errors.insufficient"})):null),r.createElement("div",{className:"SimpleTrade__withdraw-row"},r.createElement("label",{className:"left-label"},g.a.translate("modal.withdraw.address")),r.createElement("div",{className:"inline-label input-wrapper"},r.createElement("input",{placeholder:g.a.translate("gateway.withdraw_placeholder",{asset:t}),tabIndex:n++,type:"text",value:this.state.toAddress,onChange:this._onInputTo.bind(this)}),r.createElement("div",{className:"form-label select floating-dropdown"},r.createElement("div",{className:"dropdown-wrapper inactive"},r.createElement("div",{"data-place":"right","data-tip":g.a.translate("tooltip.withdraw_address",{asset:t})},"?")))),!this.state.validAddress&&this.state.toAddress?r.createElement("div",{className:"has-error",style:{paddingTop:10}},r.createElement(l.a,{content:"gateway.valid_address",coin_type:t})):null),a?r.createElement("div",{className:"SimpleTrade__withdraw-row"},r.createElement("label",{className:"left-label"},g.a.translate("transfer.memo")),r.createElement("div",{className:"inline-label input-wrapper"},r.createElement("textarea",{rows:"1",value:this.state.memo,tabIndex:n++,onChange:this._onMemoChanged.bind(this)})),!this.state.validAddress&&this.state.toAddress?r.createElement("div",{className:"has-error",style:{paddingTop:10}},r.createElement(l.a,{content:"gateway.valid_address",coin_type:t})):null):null,r.createElement("div",{className:"button-group SimpleTrade__withdraw-row"},r.createElement("button",{tabIndex:n++,className:"button"+(p?" disabled":""),onClick:this.onSubmit.bind(this),type:"submit"},r.createElement(l.a,{content:"gateway.withdraw_now"}))))}},{key:"_renderDeposit",value:function(){var e=this.state.receive_address,t=u.a.replaceName(this.props.asset.get("symbol"),!!this.props.asset.get("bitasset")).name,n=e&&"memo"in e&&e.memo,a=e&&e.address||"",o=1;return r.createElement("div",{className:a?"":"no-overflow"},r.createElement("p",null,r.createElement(l.a,{unsafe:!0,content:"gateway.add_funds",account:this.props.sender.get("name")})),this._renderCurrentBalance(),r.createElement("div",{className:"SimpleTrade__withdraw-row"},r.createElement("p",{style:{marginBottom:10},"data-place":"right","data-tip":g.a.translate("tooltip.deposit_tip",{asset:t})},r.createElement(l.a,{className:"help-tooltip",content:"gateway.deposit_to",asset:t}),":"),a?r.createElement("label",null,r.createElement("span",{className:"inline-label"},r.createElement("input",{readOnly:!0,type:"text",value:a}),r.createElement(_.a,{text:a}))):r.createElement(k.a,{type:"three-bounce"}),n?r.createElement("label",null,r.createElement("span",{className:"inline-label"},r.createElement("input",{readOnly:!0,type:"text",value:g.a.translate("transfer.memo")+": "+e.memo}),r.createElement(_.a,{text:e.memo}))):null,e&&e.error?r.createElement("div",{className:"has-error",style:{paddingTop:10}},e.error.message):null),r.createElement("div",{className:"button-group SimpleTrade__withdraw-row"},r.createElement("button",{tabIndex:o++,className:"button",onClick:y.e.bind(null,this._getDepositObject()),type:"submit"},r.createElement(l.a,{content:"gateway.generate_new"}))))}},{key:"_renderCurrentBalance",value:function(){var e=u.a.replaceName(this.props.asset.get("symbol"),!!this.props.asset.get("bitasset")).name,t="deposit"===this.props.action,n=this._getCurrentBalance(),a=n?new c.a({asset_id:n.get("asset_type"),precision:this.props.asset.get("precision"),amount:n.get("balance")}):null,o=t?r.createElement("span",{style:{border:"2px solid black",borderLeft:"none"},className:"form-label"},e):r.createElement("button",{"data-place":"right","data-tip":g.a.translate("tooltip.withdraw_full"),className:"button",style:{border:"2px solid black",borderLeft:"none"},onClick:this._updateAmount.bind(this,n?parseInt(n.get("balance"),10):0)},r.createElement(E.a,{name:"clippy"}));return r.createElement("div",{className:"SimpleTrade__withdraw-row",style:{fontSize:"1rem"}},r.createElement("label",{style:{fontSize:"1rem"}},g.a.translate("gateway.balance_asset",{asset:e}),":",r.createElement("span",{className:"inline-label"},r.createElement("input",{disabled:!0,style:{color:"black",border:"2px solid black",padding:10,width:"100%"},value:a?a.getAmount({real:!0}):0}),o)))}},{key:"render",value:function(){var e=this.props,t=e.asset,n="deposit"===e.action;if(!t)return null;var a=u.a.replaceName(t.get("symbol"),!0).name,o=this.props.isDown?r.createElement("div",null,r.createElement(l.a,{className:"txtlabel cancel",content:"gateway.unavailable_OPEN",component:"p"})):this.props.isAvailable?n?this._renderDeposit():this._renderWithdraw():r.createElement("div",null,r.createElement(l.a,{className:"txtlabel cancel",content:"gateway.unavailable",component:"p"}));return r.createElement("div",{className:"SimpleTrade__modal"},r.createElement("div",{className:"Modal__header"},r.createElement("h3",null,r.createElement(l.a,{content:n?"gateway.deposit":"modal.withdraw.submit"})," ",a)),r.createElement("div",{className:"Modal__divider"}),r.createElement("div",{className:"grid-block vertical no-overflow",style:{zIndex:1002,paddingLeft:"2rem",paddingRight:"2rem",paddingTop:"1rem"}},o))}}]),n}();F.propTypes={sender:d.a.ChainAccount.isRequired,asset:d.a.ChainAsset.isRequired,coreAsset:d.a.ChainAsset.isRequired,globalObject:d.a.ChainAsset.isRequired},F.defaultProps={coreAsset:"1.3.0",globalObject:"2.0.0"},F=Object(p.a)(F);var j=function(e){function t(){D(this,t);var e=N(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={open:!1},e}return I(t,r["Component"]),P(t,[{key:"show",value:function(){var e=this;this.setState({open:!0},function(){o.a.publish(e.props.modalId,"open")})}},{key:"onClose",value:function(){this.setState({open:!1})}},{key:"render",value:function(){return r.createElement(s.a,{className:"test",onClose:this.onClose.bind(this),overlay:!0,id:this.props.modalId},this.state.open?r.createElement(F,T({},this.props,{open:this.state.open})):null)}}]),t}();t.a=j}).call(this,n(20).Buffer)},1771:function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},1772:function(e,t,n){"use strict";var r=n(111),a=n(80),o=n(1771);e.exports=function(){function e(e,t,n,r,s,i){i!==o&&a(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return n.checkPropTypes=r,n.PropTypes=n,n}},1773:function(e,t,n){e.exports=n(1772)()},1774:function(e,t,n){"use strict";e.exports="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED"},1775:function(e,t,n){"use strict";var r=n(111),a=n(80),o=n(1774);e.exports=function(){function e(e,t,n,r,s,i){i!==o&&a(!1,"Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types")}function t(){return e}e.isRequired=e;var n={array:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t};return n.checkPropTypes=r,n.PropTypes=n,n}},1776:function(e,t,n){e.exports=n(1775)()},1777:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),o=n(0),s=l(o),i=l(n(1776));function l(e){return e&&e.__esModule?e:{default:e}}var c={position:"absolute",top:0,left:0,visibility:"hidden",height:0,overflow:"scroll",whiteSpace:"pre"},u=["extraWidth","injectStyles","inputClassName","inputRef","inputStyle","minWidth","onAutosize","placeholderIsMinWidth"],p=function(e,t){t.style.fontSize=e.fontSize,t.style.fontFamily=e.fontFamily,t.style.fontWeight=e.fontWeight,t.style.fontStyle=e.fontStyle,t.style.letterSpacing=e.letterSpacing,t.style.textTransform=e.textTransform},d=!("undefined"==typeof window||!window.navigator)&&/MSIE |Trident\/|Edge\//.test(window.navigator.userAgent),h=function(){return d?"_"+Math.random().toString(36).substr(2,12):void 0},m=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.inputRef=function(e){n.input=e,"function"==typeof n.props.inputRef&&n.props.inputRef(e)},n.placeHolderSizerRef=function(e){n.placeHolderSizer=e},n.sizerRef=function(e){n.sizer=e},n.state={inputWidth:e.minWidth,inputId:e.id||h()},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,o.Component),a(t,[{key:"componentDidMount",value:function(){this.mounted=!0,this.copyInputStyles(),this.updateInputWidth()}},{key:"componentWillReceiveProps",value:function(e){var t=e.id;t!==this.props.id&&this.setState({inputId:t||h()})}},{key:"componentDidUpdate",value:function(e,t){t.inputWidth!==this.state.inputWidth&&"function"==typeof this.props.onAutosize&&this.props.onAutosize(this.state.inputWidth),this.updateInputWidth()}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"copyInputStyles",value:function(){if(this.mounted&&window.getComputedStyle){var e=this.input&&window.getComputedStyle(this.input);e&&(p(e,this.sizer),this.placeHolderSizer&&p(e,this.placeHolderSizer))}}},{key:"updateInputWidth",value:function(){if(this.mounted&&this.sizer&&void 0!==this.sizer.scrollWidth){var e=void 0;e=this.props.placeholder&&(!this.props.value||this.props.value&&this.props.placeholderIsMinWidth)?Math.max(this.sizer.scrollWidth,this.placeHolderSizer.scrollWidth)+2:this.sizer.scrollWidth+2,(e+="number"===this.props.type&&void 0===this.props.extraWidth?16:parseInt(this.props.extraWidth)||0)<this.props.minWidth&&(e=this.props.minWidth),e!==this.state.inputWidth&&this.setState({inputWidth:e})}}},{key:"getInput",value:function(){return this.input}},{key:"focus",value:function(){this.input.focus()}},{key:"blur",value:function(){this.input.blur()}},{key:"select",value:function(){this.input.select()}},{key:"renderStyles",value:function(){var e=this.props.injectStyles;return d&&e?s.default.createElement("style",{dangerouslySetInnerHTML:{__html:"input#"+this.state.inputId+"::-ms-clear {display: none;}"}}):null}},{key:"render",value:function(){var e=[this.props.defaultValue,this.props.value,""].reduce(function(e,t){return null!==e&&void 0!==e?e:t}),t=r({},this.props.style);t.display||(t.display="inline-block");var n=r({boxSizing:"content-box",width:this.state.inputWidth+"px"},this.props.inputStyle),a=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(this.props,[]);return function(e){u.forEach(function(t){return delete e[t]})}(a),a.className=this.props.inputClassName,a.id=this.state.inputId,a.style=n,s.default.createElement("div",{className:this.props.className,style:t},this.renderStyles(),s.default.createElement("input",r({},a,{ref:this.inputRef})),s.default.createElement("div",{ref:this.sizerRef,style:c},e),this.props.placeholder?s.default.createElement("div",{ref:this.placeHolderSizerRef,style:c},this.props.placeholder):null)}}]),t}();m.propTypes={className:i.default.string,defaultValue:i.default.any,extraWidth:i.default.oneOfType([i.default.number,i.default.string]),id:i.default.string,injectStyles:i.default.bool,inputClassName:i.default.string,inputRef:i.default.func,inputStyle:i.default.object,minWidth:i.default.oneOfType([i.default.number,i.default.string]),onAutosize:i.default.func,onChange:i.default.func,placeholder:i.default.string,placeholderIsMinWidth:i.default.bool,style:i.default.object,value:i.default.any},m.defaultProps={minWidth:1,injectStyles:!0},t.default=m},1778:function(e,t,n){(function(t){(function(){var n,r,a,o,s,i;"undefined"!=typeof performance&&null!==performance&&performance.now?e.exports=function(){return performance.now()}:void 0!==t&&null!==t&&t.hrtime?(e.exports=function(){return(n()-s)/1e6},r=t.hrtime,o=(n=function(){var e;return 1e9*(e=r())[0]+e[1]})(),i=1e9*t.uptime(),s=o-i):Date.now?(e.exports=function(){return Date.now()-a},a=Date.now()):(e.exports=function(){return(new Date).getTime()-a},a=(new Date).getTime())}).call(this)}).call(this,n(62))},1779:function(e,t,n){(function(t){for(var r=n(1778),a="undefined"==typeof window?t:window,o=["moz","webkit"],s="AnimationFrame",i=a["request"+s],l=a["cancel"+s]||a["cancelRequest"+s],c=0;!i&&c<o.length;c++)i=a[o[c]+"Request"+s],l=a[o[c]+"Cancel"+s]||a[o[c]+"CancelRequest"+s];if(!i||!l){var u=0,p=0,d=[];i=function(e){if(0===d.length){var t=r(),n=Math.max(0,1e3/60-(t-u));u=n+t,setTimeout(function(){var e=d.slice(0);d.length=0;for(var t=0;t<e.length;t++)if(!e[t].cancelled)try{e[t].callback(u)}catch(e){setTimeout(function(){throw e},0)}},Math.round(n))}return d.push({handle:++p,callback:e,cancelled:!1}),p},l=function(e){for(var t=0;t<d.length;t++)d[t].handle===e&&(d[t].cancelled=!0)}}e.exports=function(e){return i.call(a,e)},e.exports.cancel=function(){l.apply(a,arguments)},e.exports.polyfill=function(e){e||(e=a),e.requestAnimationFrame=i,e.cancelAnimationFrame=l}}).call(this,n(52))},1780:function(e,t,n){e.exports=function(){"use strict";return function(e){function t(t){if(t)try{e(t+"}")}catch(e){}}return function(n,r,a,o,s,i,l,c,u,p){switch(n){case 1:if(0===u&&64===r.charCodeAt(0))return e(r+";"),"";break;case 2:if(0===c)return r+"/*|*/";break;case 3:switch(c){case 102:case 112:return e(a[0]+r),"";default:return r+(0===p?"/*|*/":"")}case-2:r.split("/*|*/}").forEach(t)}}}}()},1781:function(e,t,n){"use strict";(function(e){n.d(t,"b",function(){return s}),n.d(t,"a",function(){return i});var r=n(1706),a=void 0!==e?e:{},o=Object(r.a)(a),s=(o.flush,o.hydrate,o.cx,o.merge,o.getRegisteredStyles,o.injectGlobal),i=(o.keyframes,o.css);o.sheet,o.caches}).call(this,n(52))},1808:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n.n(r),o=n(100),s=n(27),i=n(10),l=n(1632),c=n(142),u=n.n(c),p=n(2),d=n(56),h=n(1670),m=n(8),f=n(1),b=n.n(f),g=n(26),y=n.n(g),v=n(1651),_=n(79),E=n(276),k=n(67),w=n.n(k),A=n(16),C=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var S=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={change:null},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["Component"]),C(t,[{key:"shouldComponentUpdate",value:function(e){return!(!e.volume2||e.volume2===this.props.volume2)||(e.price!==this.props.price||e.ready!==this.props.ready)}},{key:"componentWillReceiveProps",value:function(e){e.ready&&this.props.ready?this.setState({change:parseFloat(e.price)-parseFloat(this.props.price)}):this.setState({change:0})}},{key:"componentDidUpdate",value:function(){w.a.rebuild()}},{key:"render",value:function(){var e=this.props,t=e.base,n=e.quote,a=e.hideQuote,o=e.hideBase,s=(e.price,e.content),i=e.ready,l=e.value,c=e.valueByYuan,u=e.volume,p=e.volume2,d=e.withYuan,h=e.toolTip,f=this.state.change,g=null;f&&null!==f&&(g=f>0?"change-up":"change-down");var v=p?m.a.format_volume(p):null,E=f&&null!==f?r.createElement("span",{className:g}," ","change-up"===g?r.createElement("span",null,"↑"):r.createElement("span",null,"↓")):null;return r.createElement("li",{className:y()("stat",this.props.className),"data-place":"bottom","data-tip":h},r.createElement("span",null,s&&r.createElement(b.a,{content:s}),s&&r.createElement("br",null),r.createElement("b",{className:"value stat-primary "+(o?g:"")},i?l:0," ",!o&&E),r.createElement("span",{className:"symbol-text"},!o&&r.createElement(_.a,{name:t.get("symbol")}),a||!n||u?null:r.createElement("span",null,"/",r.createElement(_.a,{name:n.get("symbol")})))),"number"==typeof p?r.createElement("span",null,r.createElement("span",null),r.createElement("b",{className:"value stat-primary"},i?r.createElement("span",null," / ",v):0," ",E),r.createElement("span",{className:"symbol-text"},r.createElement(_.a,{name:n.get("symbol")}))):null,d&&!isNaN(c)&&r.createElement("span",null,r.createElement("span",null),!o&&" / ",r.createElement("b",{className:"value stat-primary"},r.createElement("span",{className:"symbol-text"},"¥"),i?r.createElement("span",null," ",c):0," ")))}}]),t}(),O=S=Object(A.connect)(S,{listenTo:function(){return[E.a]},getProps:function(e){var t=e.volume,n=e.price,r=e.quote,a=e.base,o=t?m.a.format_volume(n):m.a.price_text(n,r,a),s=m.a.replaceName(a.get("symbol"),!1).name,i=E.a.getState().priceState[s];return{value:o,valueByYuan:i?parseFloat((o*i).toFixed(2)):NaN}}}),x=n(44),T=n(58),P=n(9),D=n.n(P),N=n(1781),I=n(97),F=n(1779),j=n.n(F),M=n(1777),R=n.n(M),B=n(1773),q=n.n(B),L=[{base:"A",letters:/[\u0041\u24B6\uFF21\u00C0\u00C1\u00C2\u1EA6\u1EA4\u1EAA\u1EA8\u00C3\u0100\u0102\u1EB0\u1EAE\u1EB4\u1EB2\u0226\u01E0\u00C4\u01DE\u1EA2\u00C5\u01FA\u01CD\u0200\u0202\u1EA0\u1EAC\u1EB6\u1E00\u0104\u023A\u2C6F]/g},{base:"AA",letters:/[\uA732]/g},{base:"AE",letters:/[\u00C6\u01FC\u01E2]/g},{base:"AO",letters:/[\uA734]/g},{base:"AU",letters:/[\uA736]/g},{base:"AV",letters:/[\uA738\uA73A]/g},{base:"AY",letters:/[\uA73C]/g},{base:"B",letters:/[\u0042\u24B7\uFF22\u1E02\u1E04\u1E06\u0243\u0182\u0181]/g},{base:"C",letters:/[\u0043\u24B8\uFF23\u0106\u0108\u010A\u010C\u00C7\u1E08\u0187\u023B\uA73E]/g},{base:"D",letters:/[\u0044\u24B9\uFF24\u1E0A\u010E\u1E0C\u1E10\u1E12\u1E0E\u0110\u018B\u018A\u0189\uA779]/g},{base:"DZ",letters:/[\u01F1\u01C4]/g},{base:"Dz",letters:/[\u01F2\u01C5]/g},{base:"E",letters:/[\u0045\u24BA\uFF25\u00C8\u00C9\u00CA\u1EC0\u1EBE\u1EC4\u1EC2\u1EBC\u0112\u1E14\u1E16\u0114\u0116\u00CB\u1EBA\u011A\u0204\u0206\u1EB8\u1EC6\u0228\u1E1C\u0118\u1E18\u1E1A\u0190\u018E]/g},{base:"F",letters:/[\u0046\u24BB\uFF26\u1E1E\u0191\uA77B]/g},{base:"G",letters:/[\u0047\u24BC\uFF27\u01F4\u011C\u1E20\u011E\u0120\u01E6\u0122\u01E4\u0193\uA7A0\uA77D\uA77E]/g},{base:"H",letters:/[\u0048\u24BD\uFF28\u0124\u1E22\u1E26\u021E\u1E24\u1E28\u1E2A\u0126\u2C67\u2C75\uA78D]/g},{base:"I",letters:/[\u0049\u24BE\uFF29\u00CC\u00CD\u00CE\u0128\u012A\u012C\u0130\u00CF\u1E2E\u1EC8\u01CF\u0208\u020A\u1ECA\u012E\u1E2C\u0197]/g},{base:"J",letters:/[\u004A\u24BF\uFF2A\u0134\u0248]/g},{base:"K",letters:/[\u004B\u24C0\uFF2B\u1E30\u01E8\u1E32\u0136\u1E34\u0198\u2C69\uA740\uA742\uA744\uA7A2]/g},{base:"L",letters:/[\u004C\u24C1\uFF2C\u013F\u0139\u013D\u1E36\u1E38\u013B\u1E3C\u1E3A\u0141\u023D\u2C62\u2C60\uA748\uA746\uA780]/g},{base:"LJ",letters:/[\u01C7]/g},{base:"Lj",letters:/[\u01C8]/g},{base:"M",letters:/[\u004D\u24C2\uFF2D\u1E3E\u1E40\u1E42\u2C6E\u019C]/g},{base:"N",letters:/[\u004E\u24C3\uFF2E\u01F8\u0143\u00D1\u1E44\u0147\u1E46\u0145\u1E4A\u1E48\u0220\u019D\uA790\uA7A4]/g},{base:"NJ",letters:/[\u01CA]/g},{base:"Nj",letters:/[\u01CB]/g},{base:"O",letters:/[\u004F\u24C4\uFF2F\u00D2\u00D3\u00D4\u1ED2\u1ED0\u1ED6\u1ED4\u00D5\u1E4C\u022C\u1E4E\u014C\u1E50\u1E52\u014E\u022E\u0230\u00D6\u022A\u1ECE\u0150\u01D1\u020C\u020E\u01A0\u1EDC\u1EDA\u1EE0\u1EDE\u1EE2\u1ECC\u1ED8\u01EA\u01EC\u00D8\u01FE\u0186\u019F\uA74A\uA74C]/g},{base:"OI",letters:/[\u01A2]/g},{base:"OO",letters:/[\uA74E]/g},{base:"OU",letters:/[\u0222]/g},{base:"P",letters:/[\u0050\u24C5\uFF30\u1E54\u1E56\u01A4\u2C63\uA750\uA752\uA754]/g},{base:"Q",letters:/[\u0051\u24C6\uFF31\uA756\uA758\u024A]/g},{base:"R",letters:/[\u0052\u24C7\uFF32\u0154\u1E58\u0158\u0210\u0212\u1E5A\u1E5C\u0156\u1E5E\u024C\u2C64\uA75A\uA7A6\uA782]/g},{base:"S",letters:/[\u0053\u24C8\uFF33\u1E9E\u015A\u1E64\u015C\u1E60\u0160\u1E66\u1E62\u1E68\u0218\u015E\u2C7E\uA7A8\uA784]/g},{base:"T",letters:/[\u0054\u24C9\uFF34\u1E6A\u0164\u1E6C\u021A\u0162\u1E70\u1E6E\u0166\u01AC\u01AE\u023E\uA786]/g},{base:"TZ",letters:/[\uA728]/g},{base:"U",letters:/[\u0055\u24CA\uFF35\u00D9\u00DA\u00DB\u0168\u1E78\u016A\u1E7A\u016C\u00DC\u01DB\u01D7\u01D5\u01D9\u1EE6\u016E\u0170\u01D3\u0214\u0216\u01AF\u1EEA\u1EE8\u1EEE\u1EEC\u1EF0\u1EE4\u1E72\u0172\u1E76\u1E74\u0244]/g},{base:"V",letters:/[\u0056\u24CB\uFF36\u1E7C\u1E7E\u01B2\uA75E\u0245]/g},{base:"VY",letters:/[\uA760]/g},{base:"W",letters:/[\u0057\u24CC\uFF37\u1E80\u1E82\u0174\u1E86\u1E84\u1E88\u2C72]/g},{base:"X",letters:/[\u0058\u24CD\uFF38\u1E8A\u1E8C]/g},{base:"Y",letters:/[\u0059\u24CE\uFF39\u1EF2\u00DD\u0176\u1EF8\u0232\u1E8E\u0178\u1EF6\u1EF4\u01B3\u024E\u1EFE]/g},{base:"Z",letters:/[\u005A\u24CF\uFF3A\u0179\u1E90\u017B\u017D\u1E92\u1E94\u01B5\u0224\u2C7F\u2C6B\uA762]/g},{base:"a",letters:/[\u0061\u24D0\uFF41\u1E9A\u00E0\u00E1\u00E2\u1EA7\u1EA5\u1EAB\u1EA9\u00E3\u0101\u0103\u1EB1\u1EAF\u1EB5\u1EB3\u0227\u01E1\u00E4\u01DF\u1EA3\u00E5\u01FB\u01CE\u0201\u0203\u1EA1\u1EAD\u1EB7\u1E01\u0105\u2C65\u0250]/g},{base:"aa",letters:/[\uA733]/g},{base:"ae",letters:/[\u00E6\u01FD\u01E3]/g},{base:"ao",letters:/[\uA735]/g},{base:"au",letters:/[\uA737]/g},{base:"av",letters:/[\uA739\uA73B]/g},{base:"ay",letters:/[\uA73D]/g},{base:"b",letters:/[\u0062\u24D1\uFF42\u1E03\u1E05\u1E07\u0180\u0183\u0253]/g},{base:"c",letters:/[\u0063\u24D2\uFF43\u0107\u0109\u010B\u010D\u00E7\u1E09\u0188\u023C\uA73F\u2184]/g},{base:"d",letters:/[\u0064\u24D3\uFF44\u1E0B\u010F\u1E0D\u1E11\u1E13\u1E0F\u0111\u018C\u0256\u0257\uA77A]/g},{base:"dz",letters:/[\u01F3\u01C6]/g},{base:"e",letters:/[\u0065\u24D4\uFF45\u00E8\u00E9\u00EA\u1EC1\u1EBF\u1EC5\u1EC3\u1EBD\u0113\u1E15\u1E17\u0115\u0117\u00EB\u1EBB\u011B\u0205\u0207\u1EB9\u1EC7\u0229\u1E1D\u0119\u1E19\u1E1B\u0247\u025B\u01DD]/g},{base:"f",letters:/[\u0066\u24D5\uFF46\u1E1F\u0192\uA77C]/g},{base:"g",letters:/[\u0067\u24D6\uFF47\u01F5\u011D\u1E21\u011F\u0121\u01E7\u0123\u01E5\u0260\uA7A1\u1D79\uA77F]/g},{base:"h",letters:/[\u0068\u24D7\uFF48\u0125\u1E23\u1E27\u021F\u1E25\u1E29\u1E2B\u1E96\u0127\u2C68\u2C76\u0265]/g},{base:"hv",letters:/[\u0195]/g},{base:"i",letters:/[\u0069\u24D8\uFF49\u00EC\u00ED\u00EE\u0129\u012B\u012D\u00EF\u1E2F\u1EC9\u01D0\u0209\u020B\u1ECB\u012F\u1E2D\u0268\u0131]/g},{base:"j",letters:/[\u006A\u24D9\uFF4A\u0135\u01F0\u0249]/g},{base:"k",letters:/[\u006B\u24DA\uFF4B\u1E31\u01E9\u1E33\u0137\u1E35\u0199\u2C6A\uA741\uA743\uA745\uA7A3]/g},{base:"l",letters:/[\u006C\u24DB\uFF4C\u0140\u013A\u013E\u1E37\u1E39\u013C\u1E3D\u1E3B\u017F\u0142\u019A\u026B\u2C61\uA749\uA781\uA747]/g},{base:"lj",letters:/[\u01C9]/g},{base:"m",letters:/[\u006D\u24DC\uFF4D\u1E3F\u1E41\u1E43\u0271\u026F]/g},{base:"n",letters:/[\u006E\u24DD\uFF4E\u01F9\u0144\u00F1\u1E45\u0148\u1E47\u0146\u1E4B\u1E49\u019E\u0272\u0149\uA791\uA7A5]/g},{base:"nj",letters:/[\u01CC]/g},{base:"o",letters:/[\u006F\u24DE\uFF4F\u00F2\u00F3\u00F4\u1ED3\u1ED1\u1ED7\u1ED5\u00F5\u1E4D\u022D\u1E4F\u014D\u1E51\u1E53\u014F\u022F\u0231\u00F6\u022B\u1ECF\u0151\u01D2\u020D\u020F\u01A1\u1EDD\u1EDB\u1EE1\u1EDF\u1EE3\u1ECD\u1ED9\u01EB\u01ED\u00F8\u01FF\u0254\uA74B\uA74D\u0275]/g},{base:"oi",letters:/[\u01A3]/g},{base:"ou",letters:/[\u0223]/g},{base:"oo",letters:/[\uA74F]/g},{base:"p",letters:/[\u0070\u24DF\uFF50\u1E55\u1E57\u01A5\u1D7D\uA751\uA753\uA755]/g},{base:"q",letters:/[\u0071\u24E0\uFF51\u024B\uA757\uA759]/g},{base:"r",letters:/[\u0072\u24E1\uFF52\u0155\u1E59\u0159\u0211\u0213\u1E5B\u1E5D\u0157\u1E5F\u024D\u027D\uA75B\uA7A7\uA783]/g},{base:"s",letters:/[\u0073\u24E2\uFF53\u00DF\u015B\u1E65\u015D\u1E61\u0161\u1E67\u1E63\u1E69\u0219\u015F\u023F\uA7A9\uA785\u1E9B]/g},{base:"t",letters:/[\u0074\u24E3\uFF54\u1E6B\u1E97\u0165\u1E6D\u021B\u0163\u1E71\u1E6F\u0167\u01AD\u0288\u2C66\uA787]/g},{base:"tz",letters:/[\uA729]/g},{base:"u",letters:/[\u0075\u24E4\uFF55\u00F9\u00FA\u00FB\u0169\u1E79\u016B\u1E7B\u016D\u00FC\u01DC\u01D8\u01D6\u01DA\u1EE7\u016F\u0171\u01D4\u0215\u0217\u01B0\u1EEB\u1EE9\u1EEF\u1EED\u1EF1\u1EE5\u1E73\u0173\u1E77\u1E75\u0289]/g},{base:"v",letters:/[\u0076\u24E5\uFF56\u1E7D\u1E7F\u028B\uA75F\u028C]/g},{base:"vy",letters:/[\uA761]/g},{base:"w",letters:/[\u0077\u24E6\uFF57\u1E81\u1E83\u0175\u1E87\u1E85\u1E98\u1E89\u2C73]/g},{base:"x",letters:/[\u0078\u24E7\uFF58\u1E8B\u1E8D]/g},{base:"y",letters:/[\u0079\u24E8\uFF59\u1EF3\u00FD\u0177\u1EF9\u0233\u1E8F\u00FF\u1EF7\u1E99\u1EF5\u01B4\u024F\u1EFF]/g},{base:"z",letters:/[\u007A\u24E9\uFF5A\u017A\u1E91\u017C\u017E\u1E93\u1E95\u01B6\u0225\u0240\u2C6C\uA763]/g}],V=function(e){for(var t=0;t<L.length;t++)e=e.replace(L[t].letters,L[t].base);return e},U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},H=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},z=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),W=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},J=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},G=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},$=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n},Y=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},K=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)},Q=function(e){return e.replace(/^\s+|\s+$/g,"")},X=function(e){return e.label+" "+e.value},Z=function(e){function t(){return H(this,t),Y(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return G(t,e),z(t,[{key:"render",value:function(){var e=this.props,t=(e.in,e.out,e.onExited,e.appear,e.enter,e.exit,e.innerRef),n=$(e,["in","out","onExited","appear","enter","exit","innerRef"]);return a.a.createElement("input",J({ref:t},n,{className:Object(N.a)({background:0,border:0,fontSize:"inherit",outline:0,padding:0,width:1,color:"transparent",left:-100,opacity:0,position:"relative",transform:"scale(0)"})}))}}]),t}(r.Component),ee=function(e){function t(){return H(this,t),Y(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return G(t,e),z(t,[{key:"componentDidMount",value:function(){this.props.innerRef(Object(I.findDOMNode)(this))}},{key:"componentWillUnmount",value:function(){this.props.innerRef(null)}},{key:"render",value:function(){return this.props.children}}]),t}(r.Component),te=["boxSizing","height","overflow","paddingRight","position"],ne={boxSizing:"border-box",overflow:"hidden",position:"relative",height:"100%"};function re(e){e.preventDefault()}function ae(e){e.stopPropagation()}function oe(){var e=this.scrollTop,t=this.scrollHeight,n=e+this.offsetHeight;0===e?this.scrollTop=1:n===t&&(this.scrollTop=e-1)}function se(){return"ontouchstart"in window||navigator.maxTouchPoints}var ie=!("undefined"==typeof window||!window.document||!window.document.createElement),le=0,ce=function(e){function t(){var e,n,r;H(this,t);for(var a=arguments.length,o=Array(a),s=0;s<a;s++)o[s]=arguments[s];return n=r=Y(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.originalStyles={},r.listenerOptions={capture:!1,passive:!1},Y(r,n)}return G(t,e),z(t,[{key:"componentDidMount",value:function(){var e=this;if(ie){var t=this.props,n=t.accountForScrollbars,r=t.touchScrollTarget,a=document.body,o=a&&a.style;if(n&&te.forEach(function(t){var n=o&&o[t];e.originalStyles[t]=n}),n&&le<1){var s=parseInt(this.originalStyles.paddingRight,10)||0,i=document.body?document.body.clientWidth:0,l=window.innerWidth-i+s||0;Object.keys(ne).forEach(function(e){var t=ne[e];o&&(o[e]=t)}),o&&(o.paddingRight=l+"px")}a&&se()&&(a.addEventListener("touchmove",re,this.listenerOptions),r&&(r.addEventListener("touchstart",oe,this.listenerOptions),r.addEventListener("touchmove",ae,this.listenerOptions))),le+=1}}},{key:"componentWillUnmount",value:function(){var e=this;if(ie){var t=this.props,n=t.accountForScrollbars,r=t.touchScrollTarget,a=document.body,o=a&&a.style;le=Math.max(le-1,0),n&&le<1&&te.forEach(function(t){var n=e.originalStyles[t];o&&(o[t]=n)}),a&&se()&&(a.removeEventListener("touchmove",re,this.listenerOptions),r&&(r.removeEventListener("touchstart",oe,this.listenerOptions),r.removeEventListener("touchmove",ae,this.listenerOptions)))}}},{key:"render",value:function(){return null}}]),t}(r.Component);ce.defaultProps={accountForScrollbars:!0};var ue=function(e){return function(t){var n=t.css,r=t.innerRef,o=$(t,["css","innerRef"]);return a.a.createElement(e,J({ref:r,className:Object(N.a)(n)},o))}}("div"),pe=function(e){return a.a.createElement("span",J({className:Object(N.a)({border:0,clip:"rect(1px, 1px, 1px, 1px)",height:1,overflow:"hidden",padding:0,position:"absolute",whiteSpace:"nowrap",width:1})},e))};function de(){return a.a.createElement(ue,{className:Object(N.a)({position:"fixed",left:0,bottom:0,right:0,top:0})},a.a.createElement(ce,null))}var he=function(e){function t(){var e,n,r;H(this,t);for(var a=arguments.length,o=Array(a),s=0;s<a;s++)o[s]=arguments[s];return n=r=Y(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.isBottom=!1,r.isTop=!1,r.cancelScroll=function(e){e.preventDefault(),e.stopPropagation()},r.handleEventDelta=function(e,t){var n=r.props,a=n.onBottomArrive,o=n.onBottomLeave,s=n.onTopArrive,i=n.onTopLeave,l=r.scrollTarget,c=l.scrollTop,u=l.scrollHeight,p=l.clientHeight,d=r.scrollTarget,h=t>0,m=u-p-c,f=!1;m>t&&r.isBottom&&(o&&o(e),r.isBottom=!1),h&&r.isTop&&(i&&i(e),r.isTop=!1),h&&t>m?(a&&!r.isBottom&&a(e),d.scrollTop=u,f=!0,r.isBottom=!0):!h&&-t>c&&(s&&!r.isTop&&s(e),d.scrollTop=0,f=!0,r.isTop=!0),f&&r.cancelScroll(e)},r.onWheel=function(e){r.handleEventDelta(e,e.deltaY)},r.onTouchStart=function(e){r.touchStart=e.changedTouches[0].clientY},r.onTouchMove=function(e){var t=r.touchStart-e.changedTouches[0].clientY;r.handleEventDelta(e,t)},r.getScrollTarget=function(e){r.scrollTarget=e},Y(r,n)}return G(t,e),z(t,[{key:"componentDidMount",value:function(){this.startListening(this.scrollTarget)}},{key:"componentWillUnmount",value:function(){this.stopListening(this.scrollTarget)}},{key:"startListening",value:function(e){e.scrollHeight<=e.clientHeight||("function"==typeof e.addEventListener&&e.addEventListener("wheel",this.onWheel,!1),"function"==typeof e.addEventListener&&e.addEventListener("touchstart",this.onTouchStart,!1),"function"==typeof e.addEventListener&&e.addEventListener("touchmove",this.onTouchMove,!1))}},{key:"stopListening",value:function(e){e.scrollHeight<=e.clientHeight||("function"==typeof e.removeEventListener&&e.removeEventListener("wheel",this.onWheel,!1),"function"==typeof e.removeEventListener&&e.removeEventListener("touchstart",this.onTouchStart,!1),"function"==typeof e.removeEventListener&&e.removeEventListener("touchmove",this.onTouchMove,!1))}},{key:"render",value:function(){return a.a.createElement(ee,{innerRef:this.getScrollTarget},this.props.children)}}]),t}(r.Component),me=function(e){function t(){return H(this,t),Y(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return G(t,e),z(t,[{key:"render",value:function(){var e=this.props,t=e.isEnabled,n=$(e,["isEnabled"]);return t?a.a.createElement(he,n):this.props.children}}]),t}(r.Component);me.defaultProps={isEnabled:!0};var fe=function(){};function be(e,t){return t?e+"__"+t:e}var ge=function(e){return Array.isArray(e)?e.filter(Boolean):"object"===(void 0===e?"undefined":U(e))&&null!==e?[e]:[]};function ye(e){return[document.documentElement,document.body,window].includes(e)}function ve(e){return ye(e)?window.pageYOffset:e.scrollTop}function _e(e,t){ye(e)?window.scrollTo(0,t):e.scrollTop=t}function Ee(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:200,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:fe,a=ve(e),o=t-a,s=10,i=0;!function t(){var l=function(e,t,n,r){return n*((e=e/r-1)*e*e+1)+t}(i+=s,a,o,n);_e(e,l),i<n?j()(t):r(e)}()}function ke(){try{return document.createEvent("TouchEvent"),!0}catch(e){return!1}}var we="#222",Ae="#2684FF",Ce="#B2D4FF",Se="#DEEBFF",Oe="#DE350B",xe="#FFBDAD",Te="hsl(0, 0%, 100%)",Pe="hsl(0, 0%, 98%)",De="hsl(0, 0%, 95%)",Ne="hsl(0, 0%, 90%)",Ie="hsl(0, 0%, 80%)",Fe="hsl(0, 0%, 70%)",je="hsl(0, 0%, 60%)",Me="hsl(0, 0%, 50%)",Re="hsl(0, 0%, 40%)",Be="hsl(0, 0%, 0%)",qe="hsla(0, 0%, 0%, 0.1)",Le={baseUnit:4,controlHeight:38,menuGutter:8},Ve=function(e){function t(){return H(this,t),Y(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return G(t,e),z(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.className,r=e.cx,o=e.isMulti,s=e.getStyles,i=e.hasValue;return a.a.createElement("div",{className:r(Object(N.a)(s("valueContainer",this.props)),{"value-container":!0,"value-container--is-multi":o,"value-container--has-value":i},n)},t)}}]),t}(r.Component),Ue=function(e){var t=e.size,n=$(e,["size"]);return a.a.createElement("svg",J({height:t,width:t,viewBox:"0 0 20 20",className:Object(N.a)({display:"inline-block",fill:"currentColor",lineHeight:1,stroke:"currentColor",strokeWidth:0})},n))},He=function(e){return a.a.createElement(Ue,J({size:20,focusable:"false",role:"presentation"},e),a.a.createElement("path",{d:"M14.348 14.849c-0.469 0.469-1.229 0.469-1.697 0l-2.651-3.030-2.651 3.029c-0.469 0.469-1.229 0.469-1.697 0-0.469-0.469-0.469-1.229 0-1.697l2.758-3.15-2.759-3.152c-0.469-0.469-0.469-1.228 0-1.697s1.228-0.469 1.697 0l2.652 3.031 2.651-3.031c0.469-0.469 1.228-0.469 1.697 0s0.469 1.229 0 1.697l-2.758 3.152 2.758 3.15c0.469 0.469 0.469 1.229 0 1.698z"}))},ze=function(e){return a.a.createElement(Ue,J({size:20,focusable:"false",role:"presentation"},e),a.a.createElement("path",{d:"M4.516 7.548c0.436-0.446 1.043-0.481 1.576 0l3.908 3.747 3.908-3.747c0.533-0.481 1.141-0.446 1.574 0 0.436 0.445 0.408 1.197 0 1.615-0.406 0.418-4.695 4.502-4.695 4.502-0.217 0.223-0.502 0.335-0.787 0.335s-0.57-0.112-0.789-0.335c0 0-4.287-4.084-4.695-4.502s-0.436-1.17 0-1.615z"}))},We=function(e){var t=e.isFocused;return{color:t?Re:Ie,display:"flex",padding:2*Le.baseUnit,transition:"color 150ms",":hover":{color:t?Be:je}}},Je=We,Ge=We,$e=function(e){var t=e.color,n=e.delay,r=e.offset;return a.a.createElement("span",{css:{animationDuration:"1s",animationDelay:n+"ms",animationIterationCount:"infinite",animationName:"react-select-loading-indicator",animationTimingFunction:"ease-in-out",backgroundColor:t,borderRadius:"1em",display:"inline-block",marginLeft:r?"1em":null,height:"1em",verticalAlign:"top",width:"1em"}})};Object(N.b)("@keyframes ","react-select-loading-indicator","{0%,80%,100%{opacity:0;}40%{opacity:1;}};");var Ye=function(e){var t=e.className,n=e.cx,r=e.getStyles,o=e.innerProps,s=e.isFocused,i=e.isRtl,l=s?we:Ie;return a.a.createElement("div",J({},o,{className:n(Object(N.a)(r("loadingIndicator",e)),{indicator:!0,"loading-indicator":!0},t)}),a.a.createElement($e,{color:l,delay:0,offset:i}),a.a.createElement($e,{color:l,delay:160,offset:!0}),a.a.createElement($e,{color:l,delay:320,offset:!i}),a.a.createElement(pe,null,"Loading"))};Ye.defaultProps={size:4};function Ke(e){var t=e.maxHeight,n=e.menuEl,r=e.minHeight,a=e.placement,o=e.shouldScroll,s=e.isFixedPosition,i=function(e){var t=getComputedStyle(e),n="absolute"===t.position,r=/(auto|scroll)/,a=document.documentElement;if("fixed"===t.position)return a;for(var o=e;o=o.parentElement;)if(t=getComputedStyle(o),(!n||"static"!==t.position)&&r.test(t.overflow+t.overflowY+t.overflowX))return o;return a}(n),l={placement:"bottom",maxHeight:t};if(!n||!n.offsetParent)return l;var c=i.getBoundingClientRect().height,u=n.getBoundingClientRect(),p=u.bottom,d=u.height,h=u.top,m=n.offsetParent.getBoundingClientRect().top,f=window.innerHeight,b=ve(i),g=Le.menuGutter,y=m-g,v=f-h,_=y+b,E=c-b-h,k=p-f+b+g,w=b+h-g;switch(a){case"auto":case"bottom":if(v>=d)return{placement:"bottom",maxHeight:t};if(E>=d&&!s)return o&&Ee(i,k,160),{placement:"bottom",maxHeight:t};if(!s&&E>=r||s&&v>=r)return o&&Ee(i,k,160),{placement:"bottom",maxHeight:s?v-g:E-g};if("auto"===a||s){var A=t;return(!s&&_>=r||s&&y>=r)&&(A=s?y-g-Le.controlHeight:_-g-Le.controlHeight),{placement:"top",maxHeight:A}}if("bottom"===a)return _e(i,k),{placement:"bottom",maxHeight:t};break;case"top":if(y>=d)return{placement:"top",maxHeight:t};if(_>=d&&!s)return o&&Ee(i,w,160),{placement:"top",maxHeight:t};if(!s&&_>=r||s&&y>=r){var C=t;return(!s&&_>=r||s&&y>=r)&&(C=s?y-g:_-g),o&&Ee(i,w,160),{placement:"top",maxHeight:C}}return{placement:"bottom",maxHeight:t};default:throw new Error('Invalid placement provided "'+a+'".')}return l}var Qe=function(e){return"auto"===e?"bottom":e},Xe=function(e){function t(){var e,n,r;H(this,t);for(var a=arguments.length,o=Array(a),s=0;s<a;s++)o[s]=arguments[s];return n=r=Y(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.state={maxHeight:r.props.maxMenuHeight,placement:null},r.getPlacement=function(e){var t=r.props,n=t.minMenuHeight,a=t.maxMenuHeight,o=t.menuPlacement,s=t.menuPosition,i=t.menuShouldScrollIntoView,l=r.context.getPortalPlacement;if(e){var c="fixed"===s,u=Ke({maxHeight:a,menuEl:e,minHeight:n,placement:o,shouldScroll:i&&!c,isFixedPosition:c});l&&l(u),r.setState(u)}},r.getState=function(){var e=r.props.menuPlacement,t=r.state.placement||Qe(e);return J({},r.props,{placement:t,maxHeight:r.state.maxHeight})},Y(r,n)}return G(t,e),z(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.className,r=e.cx,o=e.getStyles,s=e.innerProps;return a.a.createElement("div",J({className:r(Object(N.a)(o("menu",this.getState())),{menu:!0},n),ref:this.getPlacement},s),t)}}]),t}(r.Component);Xe.contextTypes={getPortalPlacement:q.a.func};var Ze=function(){return{color:je,padding:2*Le.baseUnit+"px "+3*Le.baseUnit+"px",textAlign:"center"}},et=Ze,tt=Ze,nt=function(e){var t=e.children,n=e.className,r=e.cx,o=e.getStyles,s=e.innerProps;return a.a.createElement("div",J({className:r(Object(N.a)(o("noOptionsMessage",e)),{"menu-notice":!0,"menu-notice--no-options":!0},n)},s),t)};nt.defaultProps={children:"No options"};var rt=function(e){var t=e.children,n=e.className,r=e.cx,o=e.getStyles,s=e.innerProps;return a.a.createElement("div",J({className:r(Object(N.a)(o("loadingMessage",e)),{"menu-notice":!0,"menu-notice--loading":!0},n)},s),t)};rt.defaultProps={children:"Loading..."};var at=function(e){function t(){var e,n,r;H(this,t);for(var a=arguments.length,o=Array(a),s=0;s<a;s++)o[s]=arguments[s];return n=r=Y(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.state={placement:null},r.getPortalPlacement=function(e){var t=e.placement;t!==Qe(r.props.menuPlacement)&&r.setState({placement:t})},Y(r,n)}return G(t,e),z(t,[{key:"getChildContext",value:function(){return{getPortalPlacement:this.getPortalPlacement}}},{key:"render",value:function(){var e=this.props,t=e.appendTo,n=e.children,r=e.controlElement,o=e.menuPlacement,s=e.menuPosition,i=e.getStyles,l="fixed"===s;if(!t&&!l||!r)return null;var c=this.state.placement||Qe(o),u=function(e){var t=e.getBoundingClientRect();return{bottom:t.bottom,height:t.height,left:t.left,right:t.right,top:t.top,width:t.width}}(r),p=l?0:window.pageYOffset,d={offset:u[c]+p,position:s,rect:u},h=a.a.createElement("div",{className:Object(N.a)(i("menuPortal",d))},n);return t?Object(I.createPortal)(h,t):h}}]),t}(r.Component);at.childContextTypes={getPortalPlacement:q.a.func};var ot=ue,st=ue,it=function(e){function t(){return H(this,t),Y(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return G(t,e),z(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=$(e,["children"]);return a.a.createElement(ue,n,t)}}]),t}(r.Component);it.defaultProps={children:a.a.createElement(He,{size:14})};var lt=function(e){function t(){return H(this,t),Y(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return G(t,e),z(t,[{key:"render",value:function(){var e=this.props,t=e.children,n=e.className,r=e.components,o=e.cx,s=e.getStyles,i=e.innerProps,l=e.isDisabled,c=e.removeProps,u={container:o(Object(N.a)(s("multiValue",this.props)),{"multi-value":!0,"multi-value--is-disabled":l},n),label:o(Object(N.a)(s("multiValueLabel",this.props)),{"multi-value__label":!0},n),remove:o(Object(N.a)(s("multiValueRemove",this.props)),{"multi-value__remove":!0},n)},p=r.Container,d=r.Label,h=r.Remove;return a.a.createElement(p,J({className:u.container},i),a.a.createElement(d,{className:u.label},t),a.a.createElement(h,J({className:u.remove},c)))}}]),t}(r.Component);lt.defaultProps={cropWithEllipsis:!0};var ct={ClearIndicator:function(e){var t=e.children,n=void 0===t?a.a.createElement(He,null):t,r=e.className,o=e.cx,s=e.getStyles,i=e.innerProps;return a.a.createElement("div",J({},i,{className:o(Object(N.a)(s("clearIndicator",e)),{indicator:!0,"clear-indicator":!0},r)}),n)},Control:function(e){var t=e.children,n=e.cx,r=e.getStyles,o=e.className,s=e.isDisabled,i=e.isFocused,l=e.innerProps;return a.a.createElement("div",J({className:n(Object(N.a)(r("control",e)),{control:!0,"control-is-disabled":s,"control-is-focused":i},o)},l),t)},DropdownIndicator:function(e){var t=e.children,n=void 0===t?a.a.createElement(ze,null):t,r=e.className,o=e.cx,s=e.getStyles,i=e.innerProps;return a.a.createElement("div",J({},i,{className:o(Object(N.a)(s("dropdownIndicator",e)),{indicator:!0,"dropdown-indicator":!0},r)}),n)},DownChevron:ze,CrossIcon:He,Group:function(e){var t=e.children,n=e.className,r=e.cx,o=e.getStyles,s=e.Heading,i=e.headingProps,l=e.label,c=e.innerProps;return a.a.createElement("div",J({className:r(Object(N.a)(o("group",e)),{group:!0},n)},c),a.a.createElement(s,J({getStyles:o,cx:r},i),l),a.a.createElement("div",null,t))},GroupHeading:function(e){var t=e.className,n=e.cx,r=e.getStyles,o=$(e,["className","cx","getStyles"]);return a.a.createElement("div",J({className:n(Object(N.a)(r("groupHeading",e)),{"group-heading":!0},t)},o))},IndicatorsContainer:function(e){var t=e.children,n=e.className,r=e.cx,o=e.getStyles;return a.a.createElement("div",{className:r(Object(N.a)(o("indicatorsContainer",e)),{indicators:!0},n)},t)},IndicatorSeparator:function(e){var t=e.className,n=e.cx,r=e.getStyles,o=e.innerProps;return a.a.createElement("span",J({},o,{className:n(Object(N.a)(r("indicatorSeparator",e)),{"indicator-separator":!0},t)}))},Input:function(e){var t=e.className,n=e.cx,r=e.getStyles,o=e.innerRef,s=e.isHidden,i=e.isDisabled,l=$(e,["className","cx","getStyles","innerRef","isHidden","isDisabled"]);return a.a.createElement("div",{className:Object(N.a)(r("input",l))},a.a.createElement(R.a,J({className:n(null,{input:!0},t),inputRef:o,inputStyle:function(e){return{background:0,border:0,fontSize:"inherit",opacity:e?0:1,outline:0,padding:0,color:"inherit"}}(s),disabled:i},l)))},LoadingIndicator:Ye,Menu:Xe,MenuList:function(e){var t=e.children,n=e.className,r=e.cx,o=e.getStyles,s=e.isMulti,i=e.innerProps;return a.a.createElement("div",J({className:r(Object(N.a)(o("menuList",e)),{"menu-list":!0,"menu-list--is-multi":s},n)},i),t)},MenuPortal:at,LoadingMessage:rt,NoOptionsMessage:nt,MultiValue:lt,MultiValueContainer:ot,MultiValueLabel:st,MultiValueRemove:it,Option:function(e){var t=e.children,n=e.className,r=e.cx,o=e.getStyles,s=e.isDisabled,i=e.isFocused,l=e.isSelected,c=e.innerProps;return a.a.createElement("div",J({className:r(Object(N.a)(o("option",e)),{option:!0,"option--is-disabled":s,"option--is-focused":i,"option--is-selected":l},n)},c),t)},Placeholder:function(e){var t=e.children,n=e.className,r=e.cx,o=e.getStyles,s=e.innerProps;return a.a.createElement("div",J({className:r(Object(N.a)(o("placeholder",e)),{placeholder:!0},n)},s),t)},SelectContainer:function(e){var t=e.children,n=e.className,r=e.cx,o=e.getStyles,s=e.innerProps,i=e.isDisabled,l=e.isRtl;return a.a.createElement("div",J({className:r(Object(N.a)(o("container",e)),{"--is-disabled":i,"--is-rtl":l},n)},s),t)},SingleValue:function(e){var t=e.children,n=e.className,r=e.cx,o=e.getStyles,s=e.isDisabled,i=e.innerProps;return a.a.createElement("div",J({className:r(Object(N.a)(o("singleValue",e)),{"single-value":!0,"single-value--is-disabled":s},n),css:o("singleValue",e)},i),t)},ValueContainer:Ve},ut=function(e){return J({},ct,e.components)},pt={clearIndicator:Ge,container:function(e){var t=e.isDisabled;return{direction:e.isRtl?"rtl":null,pointerEvents:t?"none":null,position:"relative"}},control:function(e){var t=e.isDisabled,n=e.isFocused;return{alignItems:"center",backgroundColor:t?De:n?Te:Pe,borderColor:t?Ne:n?Ae:Ie,borderRadius:4,borderStyle:"solid",borderWidth:1,boxShadow:n?"0 0 0 1px "+Ae:null,cursor:"default",display:"flex",flexWrap:"wrap",justifyContent:"space-between",minHeight:Le.controlHeight,outline:"0 !important",position:"relative",transition:"all 100ms","&:hover":{borderColor:n?Ae:Fe}}},dropdownIndicator:Je,group:function(){return{paddingBottom:2*Le.baseUnit,paddingTop:2*Le.baseUnit}},groupHeading:function(){return{color:"#999",cursor:"default",display:"block",fontSize:"75%",fontWeight:"500",marginBottom:"0.25em",paddingLeft:3*Le.baseUnit,paddingRight:3*Le.baseUnit,textTransform:"uppercase"}},indicatorsContainer:function(){return{alignItems:"center",alignSelf:"stretch",display:"flex",flexShrink:0}},indicatorSeparator:function(e){return{alignSelf:"stretch",backgroundColor:e.isDisabled?Ne:Ie,marginBottom:2*Le.baseUnit,marginTop:2*Le.baseUnit,width:1}},input:function(e){var t=e.isDisabled;return{margin:Le.baseUnit/2,paddingBottom:Le.baseUnit/2,paddingTop:Le.baseUnit/2,visibility:t?"hidden":"visible",color:we}},loadingIndicator:function(e){var t=e.isFocused,n=e.size;return{color:t?Re:Ie,display:"flex",padding:2*Le.baseUnit,transition:"color 150ms",alignSelf:"center",fontSize:n,lineHeight:1,marginRight:n,textAlign:"center",verticalAlign:"middle"}},loadingMessage:tt,menu:function(e){var t,n=e.placement;return W(t={},function(e){return e?{bottom:"top",top:"bottom"}[e]:"bottom"}(n),"100%"),W(t,"backgroundColor",Te),W(t,"borderRadius",4),W(t,"boxShadow","0 0 0 1px "+qe+", 0 4px 11px "+qe),W(t,"marginBottom",Le.menuGutter),W(t,"marginTop",Le.menuGutter),W(t,"position","absolute"),W(t,"width","100%"),W(t,"zIndex",1),t},menuList:function(e){return{maxHeight:e.maxHeight,overflowY:"auto",paddingBottom:Le.baseUnit,paddingTop:Le.baseUnit,position:"relative",WebkitOverflowScrolling:"touch"}},menuPortal:function(e){var t=e.rect,n=e.offset,r=e.position;return{left:t.left,position:r,top:n,width:t.width,zIndex:1}},multiValue:function(){return{backgroundColor:Ne,borderRadius:2,display:"flex",margin:Le.baseUnit/2,minWidth:0}},multiValueLabel:function(e){var t=e.cropWithEllipsis;return{color:we,fontSize:"85%",overflow:"hidden",padding:3,paddingLeft:6,textOverflow:t?"ellipsis":null,whiteSpace:"nowrap"}},multiValueRemove:function(e){return{alignItems:"center",borderRadius:2,backgroundColor:e.isFocused&&xe,display:"flex",paddingLeft:Le.baseUnit,paddingRight:Le.baseUnit,":hover":{backgroundColor:xe,color:Oe}}},noOptionsMessage:et,option:function(e){var t=e.isDisabled,n=e.isFocused,r=e.isSelected;return{backgroundColor:r?Ae:n?Se:"transparent",color:t?Ie:r?Te:"inherit",cursor:"default",display:"block",fontSize:"inherit",padding:2*Le.baseUnit+"px "+3*Le.baseUnit+"px",width:"100%",userSelect:"none",WebkitTapHighlightColor:"rgba(0, 0, 0, 0)",":active":{backgroundColor:r?Ae:Ce}}},placeholder:function(){return{color:Me,marginLeft:Le.baseUnit/2,marginRight:Le.baseUnit/2,position:"absolute",top:"50%",transform:"translateY(-50%)"}},singleValue:function(e){return{color:e.isDisabled?je:we,marginLeft:Le.baseUnit/2,marginRight:Le.baseUnit/2,maxWidth:"calc(100% - "+2*Le.baseUnit+"px)",overflow:"hidden",position:"absolute",textOverflow:"ellipsis",whiteSpace:"nowrap",top:"50%",transform:"translateY(-50%)"}},valueContainer:function(){return{alignItems:"center",display:"flex",flex:1,flexWrap:"wrap",padding:Le.baseUnit/2+"px "+2*Le.baseUnit+"px",WebkitOverflowScrolling:"touch",position:"relative"}}};var dt={backspaceRemovesValue:!0,blurInputOnSelect:ke(),captureMenuScroll:!ke(),closeMenuOnSelect:!0,components:{},escapeClearsValue:!1,filterOption:function(e){return function(t,n){var r=J({ignoreCase:!0,ignoreAccents:!0,stringify:X,trim:!0,matchFrom:"any"},e),a=r.ignoreCase,o=r.ignoreAccents,s=r.stringify,i=r.trim,l=r.matchFrom,c=i?Q(n):n,u=i?Q(s(t)):s(t);return a&&(c=c.toLowerCase(),u=u.toLowerCase()),o&&(c=V(c),u=V(u)),"start"===l?u.substr(0,c.length)===c:u.indexOf(c)>-1}}(),formatGroupLabel:function(e){return e.label},getOptionLabel:function(e){return e.label},getOptionValue:function(e){return e.value},hideSelectedOptions:!0,isDisabled:!1,isLoading:!1,isMulti:!1,isRtl:!1,isSearchable:!0,isOptionDisabled:function(e){return!!e.isDisabled},loadingMessage:function(){return"Loading..."},maxMenuHeight:300,minMenuHeight:140,menuIsOpen:!1,menuPlacement:"bottom",menuPosition:"absolute",menuShouldBlockScroll:!1,menuShouldScrollIntoView:!function(){try{return/Android|webOS|iPhone|iPad|iPod|BlackBerry|IEMobile|Opera Mini/i.test(navigator.userAgent)}catch(e){return!1}}(),noOptionsMessage:function(){return"No options"},openMenuOnFocus:!1,openMenuOnClick:!0,options:[],pageSize:5,placeholder:"Select...",screenReaderStatus:function(e){var t=e.count;return t+" result"+(1!==t?"s":"")+" available."},styles:{},tabIndex:"0",tabSelectsValue:!0},ht=1,mt=function(e){function t(e){H(this,t);var n=Y(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));ft.call(n);var r=e.value;n.components=ut(e),n.instancePrefix="react-select-"+(n.props.instanceId||++ht);var a=ge(r),o=n.buildMenuOptions(e,a);return n.state.menuOptions=o,n.state.selectValue=a,n}return G(t,e),z(t,[{key:"componentDidMount",value:function(){this.props.autoFocus&&this.focusInput()}},{key:"componentWillReceiveProps",value:function(e){var t=this.props,n=t.components,r=t.options,a=t.value,o=t.inputValue;if(e.components!==n&&(this.components=ut(e)),e.value!==a||e.options!==r||e.inputValue!==o){var s=ge(e.value),i=this.buildMenuOptions(e,s),l=this.getNextFocusedValue(s),c=this.getNextFocusedOption(i.focusable);this.setState({menuOptions:i,selectValue:s,focusedOption:c,focusedValue:l})}null!=this.inputIsHiddenAfterUpdate&&(this.setState({inputIsHidden:this.inputIsHiddenAfterUpdate}),delete this.inputIsHiddenAfterUpdate),e.menuIsOpen&&!this.props.menuIsOpen?this.startListeningToTouch():!e.menuIsOpen&&this.props.menuIsOpen&&this.stopListeningToTouch()}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.isDisabled,r=t.menuIsOpen,a=this.state.isFocused;(a&&!n&&e.isDisabled||a&&r&&!e.menuIsOpen)&&this.focusInput(),this.menuRef&&this.focusedOptionRef&&this.scrollToFocusedOptionOnUpdate&&function(e,t){var n=e.getBoundingClientRect(),r=t.getBoundingClientRect(),a=t.offsetHeight/3;r.bottom+a>n.bottom?_e(e,Math.min(t.offsetTop+t.clientHeight-e.offsetHeight+a,e.scrollHeight)):r.top-a<n.top&&_e(e,Math.max(t.offsetTop-a,0))}(this.menuRef,this.focusedOptionRef),this.scrollToFocusedOptionOnUpdate=!1}},{key:"onMenuOpen",value:function(){this.props.onMenuOpen()}},{key:"onMenuClose",value:function(){this.onInputChange("",{action:"menu-close"}),this.props.onMenuClose()}},{key:"onInputChange",value:function(e,t){this.props.onInputChange(e,t)}},{key:"focusInput",value:function(){this.input&&this.input.focus()}},{key:"blurInput",value:function(){this.input&&this.input.blur()}},{key:"openMenu",value:function(e){var t=this.state,n=t.menuOptions,r=t.selectValue,a=this.props.isMulti,o="first"===e?0:n.focusable.length-1;if(!a){var s=n.focusable.indexOf(r[0]);s>-1&&(o=s)}this.scrollToFocusedOptionOnUpdate=!0,this.inputIsHiddenAfterUpdate=!1,this.onMenuOpen(),this.setState({focusedValue:null,focusedOption:n.focusable[o]})}},{key:"focusValue",value:function(e){var t=this.props.isMulti,n=this.state,r=n.selectValue,a=n.focusedValue;if(t){this.setState({focusedOption:null});var o=a?r.indexOf(a):-1,s=r.length-1,i=-1;if(r.length){switch(e){case"previous":i=0===o?0:-1===o?s:o-1;break;case"next":o>-1&&o<s&&(i=o+1)}this.setState({inputIsHidden:-1!==i,focusedValue:r[i]})}}}},{key:"focusOption",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"first",t=this.props.pageSize,n=this.state,r=n.focusedOption,a=n.menuOptions.focusable;if(a.length){var o=0,s=r?a.indexOf(r):-1;"up"===e?o=s>0?s-1:a.length-1:"down"===e?o=(s+1)%a.length:"pageup"===e?(o=s-t)<0&&(o=0):"pagedown"===e?(o=s+t)>a.length-1&&(o=a.length-1):"last"===e&&(o=a.length-1),this.scrollToFocusedOptionOnUpdate=!0,this.setState({focusedOption:a[o],focusedValue:null})}}},{key:"getCommonProps",value:function(){var e=this.clearValue,t=this.getStyles,n=this.setValue,r=this.selectOption,a=this.props,o=a.className,s=a.classNamePrefix,i=a.isMulti,l=a.isRtl,c=a.options,u=this.state.selectValue,p=this.hasValue(),d=s;return o&&void 0===s&&(console.warn("\n        Warning: the behaviour of 'className' has changed between 2.0.0-beta.2 and 2.0.0-beta.3.\n        You can now use className to specify the class name of the outer container, and classNamePrefix to enable our provided BEM class names for internal elements.\n        The className prop will have no effect on internal elements when 2.0.0 is released.\n      "),d=o),{cx:function(e,t,n,r){var a=[t,r];if(n&&e)for(var o in n)n.hasOwnProperty(o)&&n[o]&&a.push(""+be(e,o));return a.filter(function(e){return e}).map(function(e){return String(e).trim()}).join(" ")}.bind(null,d),clearValue:e,getStyles:t,getValue:function(){return u},hasValue:p,isMulti:i,isRtl:l,options:c,selectOption:r,setValue:n,selectProps:a}}},{key:"getNextFocusedValue",value:function(e){if(this.clearFocusValueOnUpdate)return this.clearFocusValueOnUpdate=!1,null;var t=this.state,n=t.focusedValue,r=t.selectValue.indexOf(n);if(r>-1){if(e.indexOf(n)>-1)return n;if(r<e.length)return e[r]}return null}},{key:"getNextFocusedOption",value:function(e){var t=this.state.focusedOption;return t&&e.indexOf(t)>-1?t:e[0]}},{key:"getOptionLabel",value:function(e){return this.props.getOptionLabel(e)}},{key:"getOptionValue",value:function(e){return this.props.getOptionValue(e)}},{key:"hasValue",value:function(){return this.state.selectValue.length>0}},{key:"hasOptions",value:function(){return!!this.state.menuOptions.render.length}},{key:"countOptions",value:function(){return this.state.menuOptions.focusable.length}},{key:"isClearable",value:function(){var e=this.props,t=e.isClearable,n=e.isMulti;return void 0===t?n:t}},{key:"isOptionDisabled",value:function(e){return"function"==typeof this.props.isOptionDisabled&&this.props.isOptionDisabled(e)}},{key:"isOptionSelected",value:function(e,t){var n=this;if(t.indexOf(e)>-1)return!0;if("function"==typeof this.props.isOptionSelected)return this.props.isOptionSelected(e,t);var r=this.getOptionValue(e);return t.some(function(e){return n.getOptionValue(e)===r})}},{key:"filterOption",value:function(e,t){return!this.props.filterOption||this.props.filterOption(e,t)}},{key:"formatOptionLabel",value:function(e,t){if("function"==typeof this.props.formatOptionLabel){var n=this.props.inputValue,r=this.state.selectValue;return this.props.formatOptionLabel(e,{context:t,inputValue:n,selectValue:r})}return this.getOptionLabel(e)}},{key:"formatGroupLabel",value:function(e){return this.props.formatGroupLabel(e)}},{key:"startListeningToTouch",value:function(){document&&document.addEventListener&&(document.addEventListener("touchstart",this.onTouchStart,!1),document.addEventListener("touchmove",this.onTouchMove,!1),document.addEventListener("touchend",this.onTouchEnd,!1))}},{key:"stopListeningToTouch",value:function(){document&&document.removeEventListener&&(document.removeEventListener("touchstart",this.onTouchStart),document.removeEventListener("touchmove",this.onTouchMove),document.removeEventListener("touchend",this.onTouchEnd))}},{key:"buildMenuOptions",value:function(e,t){var n=this,r=e.hideSelectedOptions,a=e.isMulti,o=e.inputValue,s=void 0===o?"":o,i=function(e,o){var i=n.isOptionDisabled(e),l=n.isOptionSelected(e,t),c=n.getOptionLabel(e),u=n.getOptionValue(e);if(!(a&&r&&l)&&n.filterOption({label:c,value:u,data:e},s)){var p=i?void 0:function(){return n.onOptionHover(e)},d=i?void 0:function(){return n.selectOption(e)},h=n.getElementId("option")+"-"+o;return{innerProps:{"aria-selected":l,id:h,onClick:d,onMouseMove:p,onMouseOver:p,role:"option",tabIndex:-1},data:e,isDisabled:i,isSelected:l,key:h,label:c,type:"option",value:u}}};return e.options.reduce(function(e,t,r){if(t.options){n.hasGroups||(n.hasGroups=!0);var a=t.options.map(function(t,n){var a=i(t,r+"-"+n);return a&&!a.isDisabled&&e.focusable.push(t),a}).filter(Boolean);if(a.length){var o=n.getElementId("group")+"-"+r;e.render.push({type:"group",key:o,data:t,options:a})}}else{var s=i(t,""+r);s&&(e.render.push(s),s.isDisabled||e.focusable.push(t))}return e},{render:[],focusable:[]})}},{key:"renderScreenReaderStatus",value:function(){var e=this.props.screenReaderStatus;return a.a.createElement(pe,{"aria-atomic":"true","aria-live":"polite",role:"status"},e({count:this.countOptions()}))}},{key:"renderInput",value:function(){var e=this.props,t=e.isDisabled,n=e.isLoading,r=e.isSearchable,o=e.inputId,s=e.inputValue,i=e.menuIsOpen,l=e.tabIndex,c=this.components.Input,u=this.state.inputIsHidden,p=o||this.getElementId("input");if(!r)return a.a.createElement(Z,{id:p,innerRef:this.onInputRef,onBlur:this.onInputBlur,onChange:fe,onFocus:this.onInputFocus,readOnly:!0,tabIndex:l,value:""});var d={"aria-activedescendant":this.getActiveDescendentId(),"aria-autocomplete":"list","aria-busy":n,"aria-describedby":this.props["aria-describedby"],"aria-expanded":i,"aria-haspopup":i,"aria-label":this.props["aria-label"],"aria-labelledby":this.props["aria-labelledby"],"aria-owns":i?this.getElementId("listbox"):void 0,role:"combobox"},h=this.commonProps.cx;return a.a.createElement(c,J({autoCapitalize:"none",autoComplete:"off",autoCorrect:"off",cx:h,getStyles:this.getStyles,id:p,innerRef:this.onInputRef,isDisabled:t,isHidden:u,onBlur:this.onInputBlur,onChange:this.handleInputChange,onFocus:this.onInputFocus,spellCheck:"false",tabIndex:l,type:"text",value:s},d))}},{key:"renderPlaceholderOrValue",value:function(){var e=this,t=this.components,n=t.MultiValue,r=t.MultiValueContainer,o=t.MultiValueLabel,s=t.MultiValueRemove,i=t.SingleValue,l=t.Placeholder,c=this.commonProps,u=this.props,p=u.isDisabled,d=u.isMulti,h=u.inputValue,m=u.placeholder,f=this.state,b=f.selectValue,g=f.focusedValue;if(!this.hasValue())return h?null:a.a.createElement(l,J({},c,{key:"placeholder",isDisabled:p}),m);if(d)return b.map(function(t){var i=t===g;return a.a.createElement(n,J({},c,{components:{Container:r,Label:o,Remove:s},isFocused:i,isDisabled:p,key:e.getOptionValue(t),removeProps:{onClick:function(){return e.removeValue(t)},onMouseDown:function(e){e.preventDefault(),e.stopPropagation()}},data:t}),e.formatOptionLabel(t,"value"))});if(h)return null;var y=b[0];return a.a.createElement(i,J({},c,{data:y,isDisabled:p}),this.formatOptionLabel(y,"value"))}},{key:"renderClearIndicator",value:function(){var e=this.components.ClearIndicator,t=this.commonProps,n=this.props,r=n.isDisabled,o=n.isLoading,s=this.state.isFocused;if(!this.isClearable()||!e||r||!this.hasValue()||o)return null;var i={onMouseDown:this.onClearIndicatorMouseDown,onTouchEnd:this.onClearIndicatorTouchEnd,role:"button"};return a.a.createElement(e,J({},t,{innerProps:i,isFocused:s}))}},{key:"renderLoadingIndicator",value:function(){var e=this.components.LoadingIndicator,t=this.commonProps,n=this.props,r=n.isDisabled,o=n.isLoading,s=this.state.isFocused;if(!e||!o)return null;return a.a.createElement(e,J({},t,{innerProps:{role:"presentation"},isDisabled:r,isFocused:s}))}},{key:"renderIndicatorSeparator",value:function(){var e=this.components,t=e.DropdownIndicator,n=e.IndicatorSeparator;if(!t||!n)return null;var r=this.commonProps,o=this.props.isDisabled,s=this.state.isFocused;return a.a.createElement(n,J({},r,{innerProps:{role:"presentation"},isDisabled:o,isFocused:s}))}},{key:"renderDropdownIndicator",value:function(){var e=this.components.DropdownIndicator;if(!e)return null;var t=this.commonProps,n=this.props.isDisabled,r=this.state.isFocused,o={onMouseDown:this.onDropdownIndicatorMouseDown,onTouchEnd:this.onDropdownIndicatorTouchEnd,role:"button"};return a.a.createElement(e,J({},t,{innerProps:o,isDisabled:n,isFocused:r}))}},{key:"renderMenu",value:function(){var e=this,t=this.components,n=t.Group,r=t.GroupHeading,o=t.Menu,s=t.MenuList,i=t.MenuPortal,l=t.LoadingMessage,c=t.NoOptionsMessage,u=t.Option,p=this.commonProps,d=this.state,h=d.focusedOption,m=d.menuOptions,f=this.props,b=f.captureMenuScroll,g=f.inputValue,y=f.isLoading,v=f.isMulti,_=f.loadingMessage,E=f.minMenuHeight,k=f.maxMenuHeight,w=f.menuIsOpen,A=f.menuPlacement,C=f.menuPosition,S=f.menuPortalTarget,O=f.menuShouldBlockScroll,x=f.menuShouldScrollIntoView,T=f.noOptionsMessage,P=f.onMenuScrollToTop,D=f.onMenuScrollToBottom;if(!w)return null;var N=function(t){var n=h===t.data;return t.innerProps.ref=n?e.onFocusedOptionRef:void 0,a.a.createElement(u,J({},p,t,{isFocused:n}),e.formatOptionLabel(t.data,"menu"))},I=void 0;I=this.hasOptions()?m.render.map(function(t){if("group"===t.type){t.type;var o=$(t,["type"]),s=t.key+"-heading";return a.a.createElement(n,J({},p,o,{Heading:r,innerProps:{"aria-expanded":!0,"aria-labelledby":s,role:"group"},headingProps:{id:s},label:e.formatGroupLabel(t.data)}),t.options.map(function(e){return N(e)}))}if("option"===t.type)return N(t)}):y?a.a.createElement(l,p,_({inputValue:g})):a.a.createElement(c,p,T({inputValue:g}));var F=a.a.createElement("div",null,O?a.a.createElement(de,null):null,a.a.createElement(o,J({},p,{innerProps:{onMouseDown:this.onMenuMouseDown,onMouseMove:this.onMenuMouseMove},isLoading:y,minMenuHeight:E,maxMenuHeight:k,menuPlacement:A,menuPosition:C,menuShouldScrollIntoView:x}),a.a.createElement(me,{isEnabled:b,onTopArrive:P,onBottomArrive:D},a.a.createElement(s,J({},p,{innerProps:{"aria-multiselectable":v,id:this.getElementId("listbox"),ref:this.onMenuRef,role:"listbox"},isLoading:y,maxHeight:k}),I))));return S||"fixed"===C?a.a.createElement(i,J({},p,{appendTo:S,controlElement:this.controlRef,menuPlacement:A,menuPosition:C}),F):F}},{key:"renderFormField",value:function(){var e=this,t=this.props,n=t.delimiter,r=t.isDisabled,o=t.isMulti,s=t.name,i=this.state.selectValue;if(s&&!r){if(o){if(n){var l=i.map(function(t){return e.getOptionValue(t)}).join(n);return a.a.createElement("input",{name:s,type:"hidden",value:l})}return a.a.createElement("div",null,i.map(function(t,n){return a.a.createElement("input",{key:"i-"+n,name:s,type:"hidden",value:e.getOptionValue(t)})}))}var c=i[0]?this.getOptionValue(i[0]):"";return a.a.createElement("input",{name:s,type:"hidden",value:c})}}},{key:"render",value:function(){var e=this.components,t=e.Control,n=e.IndicatorsContainer,r=e.SelectContainer,o=e.ValueContainer,s=this.props,i=s.className,l=s.id,c=s.isDisabled,u=this.state.isFocused,p=this.commonProps=this.getCommonProps();return a.a.createElement(r,J({},p,{className:i,innerProps:{id:l,onKeyDown:this.onKeyDown},isDisabled:c,isFocused:u}),this.renderScreenReaderStatus(),a.a.createElement(t,J({},p,{innerProps:{ref:this.onControlRef,onMouseDown:this.onControlMouseDown,onTouchEnd:this.onControlTouchEnd},isDisabled:c,isFocused:u}),a.a.createElement(o,J({},p,{isDisabled:c}),this.renderPlaceholderOrValue(),this.renderInput()),a.a.createElement(n,J({},p,{isDisabled:c}),this.renderClearIndicator(),this.renderLoadingIndicator(),this.renderIndicatorSeparator(),this.renderDropdownIndicator())),this.renderMenu(),this.renderFormField())}}]),t}(r.Component);mt.defaultProps=dt;var ft=function(){var e=this;this.blockOptionHover=!1,this.clearFocusValueOnUpdate=!1,this.hasGroups=!1,this.instancePrefix="",this.openAfterFocus=!1,this.scrollToFocusedOptionOnUpdate=!1,this.state={focusedOption:null,focusedValue:null,inputIsHidden:!1,isFocused:!1,menuOptions:{render:[],focusable:[]},selectValue:[]},this.onInputRef=function(t){e.input=t},this.onControlRef=function(t){e.controlRef=t},this.onMenuRef=function(t){e.menuRef=t},this.onFocusedOptionRef=function(t){e.focusedOptionRef=t},this.focus=this.focusInput,this.blur=this.blurInput,this.setValue=function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"set-value",r=e.props,a=r.closeMenuOnSelect,o=r.isMulti,s=r.onChange;e.onInputChange("",{action:"set-value"}),a&&(e.inputIsHiddenAfterUpdate=!o,e.onMenuClose()),e.clearFocusValueOnUpdate=!0,s(t,{action:n})},this.selectOption=function(t){var n=e.props,r=n.blurInputOnSelect;if(n.isMulti){var a=e.state.selectValue;e.isOptionSelected(t,a)?e.setValue(a.filter(function(e){return e!==t}),"deselect-option"):e.setValue([].concat(K(a),[t]),"select-option")}else e.setValue(t,"select-option");r&&e.blurInput()},this.removeValue=function(t){(0,e.props.onChange)(e.state.selectValue.filter(function(e){return e!==t}),{action:"remove-value"}),e.focusInput()},this.clearValue=function(){var t=e.props,n=t.isMulti;(0,t.onChange)(n?[]:null,{action:"clear"})},this.popValue=function(){var t=e.props.onChange,n=e.state.selectValue;t(n.slice(0,n.length-1),{action:"pop-value"})},this.getStyles=function(t,n){var r=pt[t](n);r.boxSizing="border-box";var a=e.props.styles[t];return a?a(r,n):r},this.getElementId=function(t){return e.instancePrefix+"-"+t},this.getActiveDescendentId=function(){var t=e.props.menuIsOpen,n=e.state,r=n.menuOptions,a=n.focusedOption;if(a&&t){var o=r.focusable.indexOf(a),s=r.render[o];return s&&s.key}},this.onMenuMouseDown=function(t){0===t.button&&(t.stopPropagation(),t.preventDefault(),e.focusInput())},this.onMenuMouseMove=function(t){e.blockOptionHover=!1},this.onControlMouseDown=function(t){var n=e.props.openMenuOnClick;e.state.isFocused?e.props.menuIsOpen?e.onMenuClose():e.openMenu("first"):(n&&(e.openAfterFocus=!0),e.focusInput()),"INPUT"!==t.target.tagName&&t.preventDefault()},this.onDropdownIndicatorMouseDown=function(t){if(!(t&&"mousedown"===t.type&&0!==t.button||e.props.isDisabled)){var n=e.props,r=n.isMulti,a=n.menuIsOpen;e.focusInput(),a?(e.inputIsHiddenAfterUpdate=!r,e.onMenuClose()):e.openMenu("first"),t.preventDefault(),t.stopPropagation()}},this.onClearIndicatorMouseDown=function(t){t&&"mousedown"===t.type&&0!==t.button||(e.clearValue(),t.stopPropagation(),e.openAfterFocus=!1,setTimeout(function(){return e.focusInput()}))},this.onTouchStart=function(){e.userIsDragging=!1},this.onTouchMove=function(){e.userIsDragging=!0},this.onTouchEnd=function(t){e.userIsDragging||e.controlRef&&!e.controlRef.contains(t.target)&&e.menuRef&&!e.menuRef.contains(t.target)&&e.blurInput()},this.onControlTouchEnd=function(t){e.userIsDragging||e.onControlMouseDown(t)},this.onClearIndicatorTouchEnd=function(t){e.userIsDragging||e.onClearIndicatorMouseDown(t)},this.onDropdownIndicatorTouchEnd=function(t){e.userIsDragging||e.onDropdownIndicatorMouseDown(t)},this.handleInputChange=function(t){var n=t.currentTarget.value;e.inputIsHiddenAfterUpdate=!1,e.onInputChange(n,{action:"input-change"}),e.onMenuOpen()},this.onInputFocus=function(t){e.props.onFocus&&e.props.onFocus(t),e.inputIsHiddenAfterUpdate=!1,e.setState({isFocused:!0}),(e.openAfterFocus||e.props.openMenuOnFocus)&&e.openMenu("first"),e.openAfterFocus=!1},this.onInputBlur=function(t){e.props.onBlur&&e.props.onBlur(t),e.onInputChange("",{action:"input-blur"}),e.onMenuClose(),e.setState({focusedValue:null,isFocused:!1})},this.onOptionHover=function(t){e.blockOptionHover||e.state.focusedOption===t||e.setState({focusedOption:t})},this.onKeyDown=function(t){var n=e.props,r=n.isMulti,a=n.backspaceRemovesValue,o=n.escapeClearsValue,s=n.inputValue,i=n.isClearable,l=n.isDisabled,c=n.menuIsOpen,u=n.onKeyDown,p=n.tabSelectsValue,d=n.openMenuOnFocus,h=e.state,m=h.focusedOption,f=h.focusedValue,b=h.selectValue;if(!(l||"function"==typeof u&&(u(t),t.defaultPrevented))){switch(e.blockOptionHover=!0,t.key){case"ArrowLeft":if(!r||s)return;e.focusValue("previous");break;case"ArrowRight":if(!r||s)return;e.focusValue("next");break;case"Backspace":if(s)return;if(f)e.removeValue(f);else{if(!a)return;e.popValue()}break;case"Tab":if(t.shiftKey||!c||!p||!m||d&&e.isOptionSelected(m,b))return;e.selectOption(m);break;case"Enter":if(c){if(!m)return;e.selectOption(m)}else e.focusOption("first");break;case"Escape":c?(e.inputIsHiddenAfterUpdate=!1,e.onInputChange("",{action:"menu-close"}),e.onMenuClose()):i&&o&&e.clearValue();break;case" ":if(s)return;if(!c){e.openMenu("first");break}if(!m)return;e.selectOption(m);break;case"ArrowUp":c?e.focusOption("up"):e.openMenu("last");break;case"ArrowDown":c?e.focusOption("down"):e.openMenu("first");break;case"PageUp":if(!c)return;e.focusOption("pageup");break;case"PageDown":if(!c)return;e.focusOption("pagedown");break;case"Home":if(!c)return;e.focusOption("first");break;case"End":if(!c)return;e.focusOption("last");break;default:return}t.preventDefault()}}},bt=function(e){var t,n;return n=t=function(t){function n(){var e,t,r;H(this,n);for(var a=arguments.length,o=Array(a),s=0;s<a;s++)o[s]=arguments[s];return t=r=Y(this,(e=n.__proto__||Object.getPrototypeOf(n)).call.apply(e,[this].concat(o))),r.state={inputValue:void 0!==r.props.inputValue?r.props.inputValue:r.props.defaultInputValue,menuIsOpen:void 0!==r.props.menuIsOpen?r.props.menuIsOpen:r.props.defaultMenuIsOpen,value:void 0!==r.props.value?r.props.value:r.props.defaultValue},r.onChange=function(e,t){r.callProp("onChange",e,t),r.setState({value:e})},r.onInputChange=function(e,t){var n=r.callProp("onInputChange",e,t);r.setState({inputValue:void 0!==n?n:e})},r.onMenuOpen=function(){r.callProp("onMenuOpen"),r.setState({menuIsOpen:!0})},r.onMenuClose=function(){r.callProp("onMenuClose"),r.setState({menuIsOpen:!1})},Y(r,t)}return G(n,t),z(n,[{key:"focus",value:function(){this.select.focus()}},{key:"blur",value:function(){this.select.blur()}},{key:"getProp",value:function(e){return void 0!==this.props[e]?this.props[e]:this.state[e]}},{key:"callProp",value:function(e){if("function"==typeof this.props[e]){for(var t,n=arguments.length,r=Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return(t=this.props)[e].apply(t,K(r))}}},{key:"render",value:function(){var t=this;return a.a.createElement(e,J({},this.props,{ref:function(e){t.select=e},inputValue:this.getProp("inputValue"),menuIsOpen:this.getProp("menuIsOpen"),onChange:this.onChange,onInputChange:this.onInputChange,onMenuClose:this.onMenuClose,onMenuOpen:this.onMenuOpen,value:this.getProp("value")}))}}]),n}(r.Component),t.defaultProps={defaultInputValue:"",defaultMenuIsOpen:!1,defaultValue:null},n},gt={cacheOptions:!1,defaultOptions:!1},yt=function(e){var t,n;return n=t=function(t){function n(e){H(this,n);var t=Y(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return t.mounted=!1,t.optionsCache={},t.handleInputChange=function(e,n){var r=t.props,a=r.cacheOptions,o=function(e,t,n){if(n){var r=n(e,t);if("string"==typeof r)return r}return e}(e,n,r.onInputChange);if(!o)return delete t.lastRequest,void t.setState({inputValue:"",loadedInputValue:"",loadedOptions:[],isLoading:!1,passEmptyOptions:!1});if(a&&t.optionsCache[o])t.setState({inputValue:o,loadedInputValue:o,loadedOptions:t.optionsCache[o],isLoading:!1,passEmptyOptions:!1});else{var s=t.lastRequest={};t.setState({inputValue:o,isLoading:!0,passEmptyOptions:!t.state.loadedInputValue},function(){t.loadOptions(o,function(e){t.mounted&&(e&&(t.optionsCache[o]=e),s===t.lastRequest&&(delete t.lastRequest,t.setState({isLoading:!1,loadedInputValue:o,loadedOptions:e||[],passEmptyOptions:!1})))})})}return o},t.state={defaultOptions:Array.isArray(e.defaultOptions)?e.defaultOptions:void 0,inputValue:"",isLoading:!0===e.defaultOptions,loadedOptions:[],passEmptyOptions:!1},t}return G(n,t),z(n,[{key:"componentDidMount",value:function(){var e=this;this.mounted=!0,!0===this.props.defaultOptions&&this.loadOptions("",function(t){if(e.mounted){var n=!!e.lastRequest;e.setState({defaultOptions:t||[],isLoading:n})}})}},{key:"componentWillReceiveProps",value:function(e){e.cacheOptions!==this.props.cacheOptions&&(this.optionsCache={})}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"focus",value:function(){this.select.focus()}},{key:"blur",value:function(){this.select.blur()}},{key:"loadOptions",value:function(e,t){var n=this.props.loadOptions;if(!n)return t();var r=n(e,t);r&&"function"==typeof r.then&&r.then(t,function(){return t()})}},{key:"render",value:function(){var t=this,n=this.props,r=(n.loadOptions,$(n,["loadOptions"])),o=this.state,s=o.defaultOptions,i=o.inputValue,l=o.isLoading,c=o.loadedInputValue,u=o.loadedOptions,p=o.passEmptyOptions?[]:i&&c?u:s||[];return a.a.createElement(e,J({},r,{ref:function(e){t.select=e},options:p,filterOption:null,isLoading:l,onInputChange:this.handleInputChange}))}}]),n}(r.Component),t.defaultProps=gt,n},vt=(yt(bt(mt)),function(e,t){var n=e.toLowerCase();return t.value.toLowerCase()===n||t.label.toLowerCase()===n}),_t=J({allowCreateWhileLoading:!1},{formatCreateLabel:function(e){return'Create "'+e+'"'},isValidNewOption:function(e,t,n){return!(!e||t.some(function(t){return vt(e,t)})||n.some(function(t){return vt(e,t)}))},getNewOptionData:function(e,t){return{label:t,value:e,__isNew__:!0}}}),Et=function(e){var t,n;return n=t=function(t){function n(e){H(this,n);var t=Y(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));t.onChange=function(e,n){var r=t.props,a=r.getNewOptionData,o=r.inputValue,s=r.isMulti,i=r.onChange,l=r.onCreateOption,c=r.value;if("select-option"!==n.action)return i(e,n);var u=t.state.newOption,p=Array.isArray(e)?e:[e];if(p[p.length-1]!==u)i(e,n);else if(l)l(o);else{var d=a(o,o),h={action:"create-option"};i(s?[].concat(K(ge(c)),[d]):d,h)}};var r=e.options||[];return t.state={newOption:void 0,options:r},t}return G(n,t),z(n,[{key:"componentWillReceiveProps",value:function(e){var t=e.allowCreateWhileLoading,n=e.formatCreateLabel,r=e.getNewOptionData,a=e.inputValue,o=e.isLoading,s=e.isValidNewOption,i=e.value,l=e.options||[],c=this.state.newOption;c=s(a,ge(i),l)?r(a,n(a)):void 0,this.setState({newOption:c,options:!t&&o||!c?l:[].concat(K(l),[c])})}},{key:"focus",value:function(){this.select.focus()}},{key:"blur",value:function(){this.select.blur()}},{key:"render",value:function(){var t=this,n=$(this.props,[]),r=this.state.options;return a.a.createElement(e,J({},n,{ref:function(e){t.select=e},options:r,onChange:this.onChange}))}}]),n}(r.Component),t.defaultProps=_t,n},kt=(bt(Et(mt)),yt(bt(Et(mt))),bt(mt)),wt=n(36),At=n(11),Ct=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var St=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&(n[r[a]]=e[r[a]])}return n},Ot=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.subCounter={ticker:{},depth:{}},this.subscription={channel:""}}return Ct(e,[{key:"addMarketListener",value:function(e){var t=this;return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:["ticker","depth"]).forEach(function(n){e in t.subCounter[n]?t.subCounter[n][e]+=1:t.subCounter[n][e]=1}),this.updateWs(),this.subCounter}},{key:"removeMarketListener",value:function(e){var t=this;return(arguments.length>1&&void 0!==arguments[1]?arguments[1]:["ticker","depth"]).forEach(function(n){e in t.subCounter[n]&&t.subCounter[n][e]>0?t.subCounter[n][e]-=1:console.error("Remove Market Listener Error: ",e,n)}),this.updateWs(),this.subCounter}},{key:"updateWs",value:function(){var e=this,t=Object.getOwnPropertyNames(this.subCounter).map(function(t){return Object.getOwnPropertyNames(e.subCounter[t]).filter(function(n){return!!e.subCounter[t][n]}).map(function(e){return e+"@"+t}).join("/")}).filter(function(e){return e.length}).join("/");t!==this.subscription.channel&&t&&(this.subscription.ws&&this.subscription.ws.close(),this.setupWs(t))}},{key:"setupWs",value:function(e){this.subscription.channel=e,this.subscription.ws=new WebSocket("wss://mdp.cybex.io/streams?stream="+e),this.subscription.ws.onmessage=this.onMarketMsg}},{key:"onMarketMsg",value:function(e){var t=JSON.parse(e.data);return{channel:t.type,market:t.sym,data:St(t,["type","sym"])}}}]),e}(),xt=At.a.createActions(Ot),Tt=n(120),Pt=n(5),Dt=n.n(Pt),Nt=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var It,Ft,jt=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return console.debug("RTE Store Constructor"),e.state={ticker:Object(Pt.Map)(),depth:Object(Pt.Map)()},e.bindListeners({onUpdateMarket:xt.onMarketMsg}),console.debug("RTE Store Constructor Done"),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,Tt["a"]),Nt(t,[{key:"onUpdateMarket",value:function(e){var t=e.channel,n=e.market,r=e.data,a=this.state[t].set(n,r);this.setState(function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},t,a))}}]),t}(),Mt=At.a.createStore(jt,"RteStore"),Rt=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var s,i=e[Symbol.iterator]();!(r=(s=i.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{!r&&i.return&&i.return()}finally{if(a)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),Bt=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function qt(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Lt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function Vt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ut(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}!function(e){e[e.Ask=0]="Ask",e[e.Bid=1]="Bid",e[e.All=2]="All"}(It||(It={})),function(e){e[e.Accum=0]="Accum",e[e.Interval=1]="Interval"}(Ft||(Ft={}));var Ht={base:{display:"flex",flexShrink:0,position:"relative",padding:"0 0.5rem",margin:"0 -0.5em"}},zt={base:Object.assign({},Ht.base,{flexGrow:1,flexFlow:"column",transition:"all 0.4s ease-in-out",overflowY:"hidden",justifyContent:"space-between",flex:"1"}),expand:{flex:"1"},hidden:{flex:"0"},scroll:{overflowY:"auto",height:"calc(100% - 32px)"}},Wt={height:"calc(100% - 32px)"},Jt=Object.assign({},Wt,zt,{display:"flex",padding:"0 0.5rem",flexFlow:"column"}),Gt={flexBasis:"24px",lineHeight:"24px"},$t={height:"32px",display:"flex",alignItems:"center"},Yt=function(e,t,n,r){return t&&e&&Array.isArray(e)&&n?e.length>n?e.slice(0,n):[].concat(Ut(e),Ut(new Array(n-e.length).fill(r))):e},Kt=function(e){return{zIndex:2,lineHeight:"24px",width:e}},Qt=(function(){function e(t,n,r,a,o,s){Vt(this,e),this.price=t,this.value=n,this.amount=r,this.isBid=a,this.basePrecision=o,this.quotePresicion=s}Bt(e,[{key:"sum",value:function(t){return new e(this.price,this.value+t.value,this.amount+t.amount,this.isBid,this.basePrecision,this.quotePresicion)}},{key:"priceAmount",get:function(){return parseInt((this.price*Math.pow(10,this.basePrecision)).toString())}},{key:"amountAmount",get:function(){return parseInt((this.amount*Math.pow(10,this.quotePresicion)).toString())}},{key:"accumAmount",get:function(){return parseInt((this.accum*Math.pow(10,this.quotePresicion)).toString())}},{key:"quoteValueAmount",get:function(){return parseInt((this.accum*this.price*Math.pow(10,this.basePrecision)).toString())}}])}(),(on=function(e){function t(){return Vt(this,t),qt(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Lt(t,r["Component"]),Bt(t,[{key:"shouldComponentUpdate",value:function(e){return e.order.ne(this.props.order)||e.index!==this.props.index||e.digits!==this.props.digits||e.depthType!==this.props.depthType||e.currentAccount!==this.props.currentAccount}},{key:"render",value:function(){var e=this.props,t=e.order,n=e.quote,a=e.base,o=(e.final,e.digits),s=e.depthType,i=e.total,l=e.withYuan,c=e.unitYuan,u=e.max,p=e.previous,d=t.isBid(),h=(t.isCall(),r.createElement(v.a,{price:t.getPrice(t.sell_price,o),quote:n,base:a,precision:o,previous:p})),f=l?parseFloat((c*t.getPrice(t.sell_price,o)).toFixed(Math.max(o-3,2))):NaN,b=(t?s===Ft.Interval?100*((d?t.amountToReceive().amount:t.amountForSale().amount)/u).toFixed(4):100*(t.accum/i).toFixed(4):0)+"%";return r.createElement("div",{onClick:this.props.onClick,className:y()("link","order-row",{"my-order":t.isMine(this.props.currentAccount)}),style:[Ht.base,Gt],"data-tip":l&&!isNaN(f)?"¥ "+f:null,"data-place":"left"},r.createElement("i",{className:"bg",style:{position:"absolute",zIndex:1,width:b,height:"100%",margin:"0 -0.5em",backgroundColor:d?T.i.$colorGrass:T.i.$colorFlame,opacity:.25}}),r.createElement("span",{className:"text-left",style:[Kt("30%"),{color:d?T.i.$colorGrass:T.i.$colorFlame}]},h),r.createElement("span",{className:"text-right",style:Kt("30%")},m.a.format_number(t[d?"amountToReceive":"amountForSale"]().getAmount({real:!0}),n.get("precision"))),r.createElement("span",{className:"text-right",style:Kt("40%")},m.a.format_number(t[d?"amountForSale":"amountToReceive"]().getAmount({real:!0}),a.get("precision"))))}}]),t}()).defaultProps={depthType:Ft.Interval},on);Qt=Object(x.a)(Qt),Qt=Object(A.connect)(Qt,{listenTo:function(){return[E.a]},getProps:function(e){var t=e.base,n=m.a.replaceName(t.get("symbol"),!1).name;return{unitYuan:E.a.getState().priceState[n]||NaN}}});var Xt=7,Zt=function(e){function t(e){Vt(this,t);var n=qt(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.combineOptions=[],n.handleDepthChange=function(e){n.setState({depth:e});var t=n.props.onDepthChange;t&&t(e)};var r=Math.max(e.basePrecision,Xt),a=n.combineOptions=new Array(Xt).fill(1).map(function(e,t){return{label:D.a.translate("exchange.depth",{depth:r-t}),value:r-t}});return n.state={depth:a[0]},n}return Lt(t,r["PureComponent"]),Bt(t,[{key:"render",value:function(){var e=this.props,t=e.type,n=e.depthType,a=e.onTypeChange,o=e.onDepthTypeChange;e.onDepthChange,e.basePrecision;return[r.createElement(T.q,{key:"orderType-all",active:t===It.All,onClick:a.bind(this,It.All),style:an.tab},r.createElement(b.a,{content:"exchange.orderbook.all"})),r.createElement(T.q,{key:"orderType-ask",active:t===It.Ask,onClick:a.bind(this,It.Ask),style:an.tab},r.createElement(b.a,{content:"exchange.orderbook.ask"})),r.createElement(T.q,{key:"orderType-bid",active:t===It.Bid,onClick:a.bind(this,It.Bid),style:an.tab},r.createElement(b.a,{content:"exchange.orderbook.bid"})),r.createElement("i",{key:"orderType-divider",style:{flexGrow:1}}),r.createElement(T.q,{key:"depthType-interval",type:"secondary",active:n===Ft.Interval,onClick:o.bind(this,Ft.Interval),style:an.tab},r.createElement(b.a,{content:"exchange.orderbook.compare_depth"})),r.createElement(T.q,{key:"depthType-accum",type:"secondary",active:n===Ft.Accum,onClick:o.bind(this,Ft.Accum),style:an.tab},r.createElement(b.a,{content:"exchange.orderbook.accum_depth"})),r.createElement("i",{key:"depthType-divider",style:{flexGrow:1}}),r.createElement(kt,{key:"depthType-switcher",onChange:this.handleDepthChange,styles:Object(T.e)("orderbook"),options:this.combineOptions,value:this.state.depth})]}}]),t}(),en=function(e){function t(){return Vt(this,t),qt(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Lt(t,r["PureComponent"]),Bt(t,[{key:"render",value:function(){return r.createElement("div",{style:Ht.base},r.createElement("span",{className:"text-left",style:Kt("30%")},"---"),r.createElement("span",{className:"text-right",style:Kt("30%")},"---"),r.createElement("span",{className:"text-right",style:Kt("40%")},"---"))}}]),t}(),tn=function(e){function t(){return Vt(this,t),qt(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Lt(t,r["PureComponent"]),Bt(t,[{key:"render",value:function(){var e=this.props,t=e.baseSymbol,n=e.quoteSymbol;return r.createElement("div",{key:"top-header",style:$t,className:"top-header"},r.createElement("span",{className:"header-sub-title text-left",style:{width:"30%"}},D.a.translate("exchange.price"),"(",r.createElement(_.a,{dataPlace:"top",name:t}),")"),r.createElement("span",{className:"header-sub-title text-right",style:{width:"30%"}},D.a.translate("exchange.quantity"),"(",r.createElement(_.a,{dataPlace:"top",name:n}),")"),r.createElement("span",{className:"header-sub-title text-right",style:{width:"40%"}},D.a.translate("exchange.total_bidask"),"(",r.createElement(_.a,{dataPlace:"top",name:t}),")"))}}]),t}(),nn=function(e){function t(){return Vt(this,t),qt(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Lt(t,r["Component"]),Bt(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.orders,a=(t.displayType,t.type),o=(t.countOfRow,t.base),s=t.quote,i=t.onOrderClick,l=t.currentAccount,c=t.depthType,u=t.total,p=t.digits,d=t.max,h=a===It.Ask?n.reverse():n;return h.map(function(t,n){var m=void 0,f=(m=a===It.Ask?n<h.length-1?h[n+1]:null:n>0?h[n-1]:null)?m.getPrice():null;return null===t?r.createElement(en,{key:"$nullOrder"+n}):r.createElement(Qt,{index:n,key:t.getPrice()+(t.isCall()?"_call":""),order:t,onClick:i.bind(e,t),digits:p,withYuan:!0,base:o,quote:s,final:0===n,depthType:c,max:d,total:u,currentAccount:l,previous:f})})}}]),t}(),rn=((sn=function(e){function t(e){Vt(this,t);var n=qt(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.setType=function(e){n.setState({type:e}),n.fixPos()},n.setDepthType=function(e){n.setState({depthType:e})},n.fixPos=function(){setTimeout(function(){n.askWrapper&&(n.askWrapper.scrollTop=n.askWrapper.scrollHeight+1e3),n.state.type!==It.Ask&&setTimeout(function(){n.askWrapper.scrollTop=n.askWrapper.scrollHeight+1e3},200)},200)},n.onDepthChange=function(e){var t=e.value;n.setState({digits:t})},n.onDepthTypeChange={},n.state={scrollToBottom:!0,flip:e.flipOrderBook,showAllBids:!0,showAllAsks:!0,rowCount:20,digits:8,depthType:Ft.Interval,type:It.All},xt.addMarketListener(""+e.quoteSymbol+e.baseSymbol),n}return Lt(t,r["Component"]),Bt(t,[{key:"componentDidUpdate",value:function(e){e.baseSymbol===this.props.baseSymbol&&e.quoteSymbol===this.props.quoteSymbol||(xt.removeMarketListener(""+e.quoteSymbol+e.baseSymbol),xt.addMarketListener(""+this.props.quoteSymbol+this.props.baseSymbol))}},{key:"componentDidMount",value:function(){this.fixPos()}},{key:"componentDidCatch",value:function(){return r.createElement("h1",null,"Opps")}},{key:"render",value:function(){var e=this,t=this.props,n=t.combinedBids,a=t.combinedAsks,o=(t.highestBid,t.lowestAsk,t.quote),s=t.base,i=(t.totalAsks,t.totalBids,t.quoteSymbol),l=t.baseSymbol,c=(t.horizontal,t.marketReady),u=t.rteTicker,p=t.rteDepth,d=t.latest,h=this.state,m=(h.showAllAsks,h.showAllBids,h.rowCount,h.type),f=h.digits,b=h.depthType,g=document.getElementById("orderBook")?Math.floor((document.getElementById("orderBook").offsetHeight/24-3)/2):24;if(!s||!o)return null;var y="JADE.USDT"===l&&"JADE.ETH"===i,v=(y&&p.bids,y&&p.bids?[p.bids,p.asks].map(function(e,t){return e.map(function(e){return wt.d.fromRteOrder(e,s,o,!t)})}):[n,a]),_=Rt(v,2),E=[_[0],_[1]].map(function(e){return Array.from(e.reduce(function(e,t){var n=t.getPrice(t.sell_price,f);e[n];if(e.has(n)){var r=e.get(n).sum(t);e.set(n,r)}else e.set(n,t);return e},new Map).values())}),k=Rt(E,2),w=k[0],A=k[1];Array.prototype.lastOne=function(){return this.length?this.filter(function(e){return e}).slice(-1)[0]:null},A=It.Ask===m?Yt(A,A.length<2*g,2*g,null):Yt(A,!0,g,null);var C=0,S=0,x=0;(w=It.Bid===m?Yt(w,w.length<2*g,2*g,null):Yt(w,!0,g,null)).filter(function(e){return e}).forEach(function(e){var t=e.isBid()?e.amountToReceive().amount:e.amountForSale().amount;S=Math.max(S,t),C+=t,e.accum=C}),C=0,A.filter(function(e){return e}).forEach(function(e){var t=e.isBid()?e.amountToReceive().amount:e.amountForSale().amount;x=Math.max(x,t),C+=t,e.accum=C});var P=Math.max(w.lastOne()&&w.lastOne().accum||0,A.lastOne()&&A.lastOne().accum||0),D=r.createElement("div",{style:[Gt,{backgroundColor:T.i.$colorAnchor,margin:"0 -0.5rem"}],className:"text-center"},r.createElement(O,{ready:c,price:y&&u&&u.px||d&&d.full||{},quote:o,withYuan:!0,base:s,hideQuote:!0}));return[r.createElement("div",{className:"order-book-title",style:$t},r.createElement(Zt,{type:this.state.type,onTypeChange:this.setType,basePrecision:8,depthType:this.state.depthType,onDepthTypeChange:this.setDepthType,onDepthChange:this.onDepthChange})),r.createElement("div",{className:"order-book-wrapper",style:Wt},r.createElement(tn,{baseSymbol:s.get("symbol"),quoteSymbol:o.get("symbol")}),r.createElement("div",{className:"order-book-body _scroll-bar",style:[Jt]},r.createElement("div",{ref:function(t){return e.askWrapper=t},className:"ask-wrapper",style:[zt.base,m===It.All&&zt.expand,m===It.Ask&&zt.scroll,m===It.Bid&&zt.hidden]},r.createElement(nn,{displayType:this.state.type,type:It.Ask,currentAccount:this.props.currentAccount,countOfRow:g,total:P,digits:f,base:s,quote:o,orders:A,max:x,depthType:b,onOrderClick:this.props.onClick.bind(this)})),D,r.createElement("div",{className:"bid-wrapper",style:[zt.base,m===It.All&&zt.expand,m===It.Bid&&zt.scroll,m===It.Ask&&zt.hidden]},r.createElement(nn,{displayType:this.state.type,type:It.Bid,currentAccount:this.props.currentAccount,countOfRow:g,digits:f,base:s,total:P,quote:o,depthType:b,max:S,orders:w,onOrderClick:this.props.onClick.bind(this)}))))]}}]),t}()).defaultProps={bids:[],asks:[],orders:{}},sn.propTypes={bids:p.array.isRequired,asks:p.array.isRequired,orders:p.object.isRequired},sn),an={tab:{marginRight:"0.5rem",lineHeight:"24px",height:"24px"}};rn=Object(x.a)(rn);var on,sn,ln=rn=Object(A.connect)(rn,{listenTo:function(){return[Mt]},getProps:function(e){return{rteDepth:Mt.getState().depth.get(""+e.quoteSymbol+e.baseSymbol,{}),rteTicker:Mt.getState().ticker.get(""+e.quoteSymbol+e.baseSymbol,{})}}}),cn=(n(1661),n(71)),un=n(21),pn=n(1630),dn=n(3),hn=n(132),mn=n(224),fn=n(1702),bn=n.n(fn),gn=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var yn=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["Component"]),gn(t,[{key:"componentWillMount",value:function(){mn.a.getBlock.defer(this.props.block_number)}},{key:"shouldComponentUpdate",value:function(e){return e.block&&!this.props.block&&setTimeout(w.a.rebuild,1e3),e.block!==this.props.block}},{key:"render",value:function(){var e=this.props,t=e.block,n=e.tooltip,a=e.component,o=e.format;return t?r.createElement(a,{className:n?"tooltip":"","data-tip":n?t.timestamp:""},r.createElement("span",null,D.a.localize(t.timestamp,{type:"date",format:o}))):r.createElement(a)}}]),t}();yn.defaultProps={format:-1!==bn()().toLowerCase().indexOf("en-us")?"market_history_us":"market_history",tooltip:!1,component:"span"};var vn=yn=Object(A.connect)(yn,{listenTo:function(){return[hn.a]},getProps:function(e){return{block:hn.a.getState().blocks.get(e.block_number)}}}),_n=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var En=dn.c.operations,kn=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.state={activeTab:e.viewSettings.get("historyTab","history")},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["Component"]),_n(t,[{key:"shouldComponentUpdate",value:function(e,t){return!Dt.a.is(e.history,this.props.history)||e.baseSymbol!==this.props.baseSymbol||e.quoteSymbol!==this.props.quoteSymbol||e.className!==this.props.className||t.activeTab!==this.state.activeTab||e.currentAccount!==this.props.currentAccount}},{key:"_changeTab",value:function(e){un.a.changeViewSetting({historyTab:e}),this.setState({activeTab:e}),this.refs.history.scrollTop=0,setTimeout(w.a.rebuild,1e3)}},{key:"render",value:function(){var e=this.props,t=e.history,n=e.myHistory,a=e.base,o=e.quote,s=(e.baseSymbol,e.quoteSymbol),i=e.isNullAccount,l=this.state.activeTab,c=null;if(i&&(l="history"),"my_history"===l&&n&&n.size){var u=-1,p=a.get("id").split(".")[2]>o.get("id").split(".")[2];c=n.filter(function(e){return e.getIn(["op",0])===En.fill_order}).filter(function(e){var t=o.get("id"),n=a.get("id"),r=e.getIn(["op",1,"pays","asset_id"]),s=e.getIn(["op",1,"receives","asset_id"]);return(t===r||t===s)&&(n===r||n===s)}).sort(function(e,t){return t.get("block_num")-e.get("block_num")}).map(function(e){var t=e.toJS().op[1];u++;var n=void 0,s=void 0,i=!1;t.pays.asset_id===a.get("id")?(n=a,s=o,i=!0):(n=o,s=a);var l=cn.a.parse_order_history(t,n,s,i,p),c=e.get("block_num");return r.createElement("tr",{key:"my_history_"+u},r.createElement("td",{className:l.className},r.createElement(v.a,{preFormattedPrice:l})),r.createElement("td",null,l.receives),r.createElement(vn,{component:"td",block_number:c,tooltip:!0}))}).toArray()}else if(t&&t.size){var d=0,h=-1,m=a.get("id").split(".")[2]>o.get("id").split(".")[2];c=this.props.history.filter(function(){return++d%2==0}).take(100).map(function(e){h++;var t=void 0,n=void 0,s=!1;e.pays.asset_id===a.get("id")?(t=a,n=o,s=!0):(t=o,n=a);var i=cn.a.parse_order_history(e,t,n,s,m);return r.createElement("tr",{key:"history_"+h},r.createElement("td",{className:i.className},r.createElement(v.a,{preFormattedPrice:i})),r.createElement("td",null,i.receives),r.createElement("td",null,D.a.localize(new Date(e.time),{type:"date",format:-1!==bn()().toLowerCase().indexOf("en-us")?"market_history_us":"market_history"})))}).toArray()}var f="mymarkets-header clickable",g=y()(f,{inactive:"my_history"===l}),E=y()(f,{inactive:"history"===l});return r.createElement("div",{className:this.props.className},r.createElement("div",{className:"flex-wrapper flex-wrapper-main flex-column small-12 ",style:{height:"100%"}},r.createElement("div",{style:this.props.headerStyle,className:"grid-block shrink left-orderbook-header bottom-header"},r.createElement("div",{className:y()(E,{disabled:i}),onClick:this._changeTab.bind(this,"my_history")},r.createElement(b.a,{content:"exchange.my_history"})),r.createElement("div",{className:g,onClick:this._changeTab.bind(this,"history")},r.createElement(b.a,{content:"exchange.history"}))),r.createElement("div",{className:"grid-block shrink left-orderbook-header "},r.createElement("table",{className:"table table-4 order-table fixed-table market-right-padding"},r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",{className:"text-center"},r.createElement(b.a,{className:"header-sub-title",content:"exchange.price"})),r.createElement("th",{className:"text-center"},r.createElement("span",{className:"header-sub-title"},r.createElement(_.a,{dataPlace:"top",name:s}))),r.createElement("th",{className:"text-center"},r.createElement(b.a,{className:"header-sub-title",content:"explorer.block.date"})))))),r.createElement("div",{className:"table-container flex-wrapper flex-column grid-block _scroll-bar",ref:"history",style:{maxHeight:420}},r.createElement("table",{className:"table table-4 flex-wrapper-main order-table text-right fixed-table market-right-padding"},r.createElement(pn.a,{component:"tbody",transitionName:"newrow"},c)))))}}]),t}();kn.defaultProps={history:[]},kn.propTypes={history:p.object.isRequired};var wn=Object(A.connect)(kn,{listenTo:function(){return[i.b]},getProps:function(){return{viewSettings:i.b.getState().viewSettings}}}),An=n(19),Cn=n(22),Sn=n(24),On=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var xn=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["Component"]),On(t,[{key:"render",value:function(){return this.props.account?r.createElement("span",null,this.props.account.get("name")):null}}]),t}();xn.propTypes={account:Cn.a.ChainObject.isRequired},xn.defaultProps={autosubscribe:!1};var Tn=Object(Sn.a)(xn),Pn=n(51),Dn=n(1799),Nn=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var In={row:{base:{width:"100%"},active:{backgroundColor:T.i.$colorGreyLightWhite,opacity:.8}},cell:{active:{color:T.i.$colorOrange}}},Fn=((jn=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.statsInterval=null,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["Component"]),Nn(t,[{key:"_onClick",value:function(e){"/market/"+e!==this.props.location.pathname&&(d.a.switchMarket(),this.props.history.push("/market/"+e))}},{key:"componentDidMount",value:function(){d.a.getMarketStats.defer(this.props.base,this.props.quote),this.statsChecked=new Date,this.statsInterval=setInterval(d.a.getMarketStats.bind(this,this.props.base,this.props.quote),6e3)}},{key:"componentWillUnmount",value:function(){clearInterval(this.statsInterval)}},{key:"shouldComponentUpdate",value:function(e){return!m.a.are_equal_shallow(e,this.props)}},{key:"_onStar",value:function(e,t,n){n.preventDefault(),this.props.starred?un.a.removeStarMarket(e,t):un.a.addStarMarket(e,t)}},{key:"render",value:function(){var e=this,t=this.props,n=t.quote,a=t.base,o=(t.noSymbols,t.stats),s=t.starred,i=t.unitYuan,l=t.tooltipPosition,c=t.withYuan,u=t.hideZeroVol;if(!n||!a)return null;if(u&&o&&0===o.volumeBase)return null;var p=n.get("symbol")+"_"+a.get("symbol"),d=n.get("symbol")+":"+a.get("symbol"),h=n.get("dynamic"),f=a.get("dynamic"),b=m.a.convertPrice(n,a),g=o&&o.price?o.price.toReal():o&&o.close&&o.close.quote.amount&&o.close.base.amount?m.a.get_asset_price(o.close.quote.amount,n,o.close.base.amount,a,!0):m.a.get_asset_price(b.quote.amount,n,b.base.amount,a,!0),y=parseFloat((i*g).toFixed(2)),v="button outline",_=null;this.props.compact&&(v+=" no-margin",_={marginBottom:0,fontSize:"0.75rem",padding:"4px 10px",borderRadius:"0px",letterSpacing:"0.05rem"});var E=this.props.columns.map(function(t){switch(t.name){case"star":var i=s?"gold-star":"grey-star";return r.createElement("span",{onClick:e._onStar.bind(e,n.get("symbol"),a.get("symbol")),key:t.index},r.createElement(Pn.a,{className:i,name:"fi-star"}));case"vol":var l=o?o.volumeBase:0;return r.createElement("span",{onClick:e._onClick.bind(e,p),className:"text-right",key:t.index},m.a.format_volume(l));case"change":var c=m.a.format_number(o&&o.change?o.change:0,2),u="0.00"===c?"":parseFloat(c)>0?"change-up":"change-down";return r.createElement("span",{onClick:e._onClick.bind(e,p),className:"text-right "+u,key:t.index},c+"%");case"marketName":return r.createElement("span",{onClick:e._onClick.bind(e,p),key:t.index},r.createElement("div",{className:v,style:_},d));case"market":return r.createElement("span",{onClick:e._onClick.bind(e,p),key:t.index,style:[e.props.current&&In.cell.active]},e.props.name);case"price":var b=6;return-1!==["BTC","OPEN.BTC","TRADE.BTC","GOLD","SILVER"].indexOf(a.get("symbol"))&&(b=8),r.createElement("span",{onClick:e._onClick.bind(e,p),className:"text-right",key:t.index},m.a.format_number(g,g>1e3?0:g>10?2:b));case"quoteSupply":return r.createElement("span",{onClick:e._onClick.bind(e,p),key:t.index},h?r.createElement(An.a,{style:{fontWeight:"bold"},amount:parseInt(h.get("current_supply"),10),asset:n.get("id")}):null);case"baseSupply":return r.createElement("span",{onClick:e._onClick.bind(e,p),key:t.index},f?r.createElement(An.a,{style:{fontWeight:"bold"},amount:parseInt(f.get("current_supply"),10),asset:a.get("id")}):null);case"issuer":return r.createElement("span",{onClick:e._onClick.bind(e,p),key:t.index},r.createElement(Tn,{account:n.get("issuer")}));case"add":return r.createElement("span",{style:{textAlign:"right"},key:t.index,onClick:e.props.onCheckMarket.bind(e,p)},r.createElement("input",{type:"checkbox",checked:!!e.props.isChecked||e.props.isDefault,disabled:e.props.isDefault,"data-tip":e.props.isDefault?"This market is a default market and cannot be removed":null}));case"remove":return r.createElement("span",{key:t.index,className:"clickable",onClick:e.props.removeMarket},r.createElement("span",{style:{marginBottom:"6px",marginRight:"6px",zIndex:999},className:"text float-right remove"},"–"))}}).sort(function(e,t){return e.key>t.key});return this.props.current&&" activeMarket",r.createElement("div",{className:"table-row clickable",style:[In.row.base,this.props.current&&In.row.active],"data-tip":c&&!isNaN(y)?"¥ "+y:null,"data-place":l,"data-offset":"{'right': 6}"},E)}}]),t}()).propTypes={quote:Cn.a.ChainAsset.isRequired,base:Cn.a.ChainAsset.isRequired},jn.defaultProps={noSymbols:!1,withYuan:!1,tempComponent:"tr",tooltipPosition:"right"},jn.contextTypes={router:p.object.isRequired},jn);Fn=Object(x.a)(Fn),Fn=Object(Sn.a)(Fn),Fn=Object(A.connect)(Fn,{listenTo:function(){return[E.a]},getProps:function(e){var t=e.base,n=m.a.replaceName(t,!1).name;return{unitYuan:E.a.getState().priceState[n]||NaN}}});var jn,Mn=Fn=Object(Dn.a)(Fn),Rn=n(85),Bn=n(1649),qn=n(1627),Ln=n(30),Vn=n(1648),Un=n(31),Hn=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var s,i=e[Symbol.iterator]();!(r=(s=i.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{!r&&i.return&&i.return()}finally{if(a)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),zn=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function Wn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Jn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Gn(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var $n=new Date,Yn={"JADE.USDT":{CYB:0,"JADE.ETH":1,"JADE.BTC":2,"JADE.EOS":3,"JADE.LTC":4}},Kn={CYB:new Set(["JADE.JCT"]),"JADE.ETH":new Set(["JADE.LTC"]),"JADE.EOS":new Set(["JADE.LTC"]),"JADE.BTC":new Set(["JADE.MT","JADE.ETH","JADE.BTC","JADE.EOS","JADE.INK","JADE.BAT","JADE.VET","JADE.OMG","JADE.SNT","JADE.NAS","JADE.KNC","JADE.PAY","JADE.GET","JADE.MAD","JADE.GNX","JADE.KEY","JADE.TCT","JADE.CENNZ","JADE.JCT","JADE.MCO","JADE.CTXC","JADE.NES","JADE.RHOC","JADE.PPT","JADE.MKR","JADE.FUN","JADE.GNT","JADE.MVP","JADE.DPY"])},Qn={},Xn=function(e){function t(e){Wn(this,t);var n=Jn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state=n._getInitialState(e),n}return Gn(t,r["Component"]),zn(t,[{key:"_getInitialState",value:function(e){var t=!!e.findMarketTab||e.viewSettings.get("myMarketsBase_"+e.index);return{open:void 0===t||t,inverseSort:e.viewSettings.get("myMarketsInvert",!0),sortBy:e.viewSettings.get("myMarketsSort","volume")}}},{key:"componentWillReceiveProps",value:function(e){e.findMarketTab!==this.props.findMarketTab&&this.setState(this._getInitialState(e))}},{key:"shouldComponentUpdate",value:function(e,t){return!e.markets||!this.props.markets||(!m.a.are_equal_shallow(t,this.state)||!m.a.are_equal_shallow(e.markets,this.props.markets)||e.starredMarkets!==this.props.starredMarkets||e.marketStats!==this.props.marketStats||e.userMarkets!==this.props.userMarkets)}},{key:"_inverseSort",value:function(){un.a.changeViewSetting({myMarketsInvert:!this.state.myMarketsInvert}),this.setState({inverseSort:!this.state.inverseSort})}},{key:"_changeSort",value:function(e){e!==this.state.sortBy?(un.a.changeViewSetting({myMarketsSort:e}),this.setState({sortBy:e})):this._inverseSort()}},{key:"_onToggle",value:function(e){if(!this.props.findMarketTab){var t=!this.state.open;this.setState({open:t});var n={};n["myMarketsBase_"+this.props.index]=t,un.a.changeViewSetting(n)}}},{key:"_onToggleUserMarket",value:function(e){var t=e.split("_"),n=Hn(t,2),r=n[0],a=n[1],o=!this.props.userMarkets.get(e);un.a.setUserMarket(r,a,o)}},{key:"render",value:function(){var e=this,t=this.props,n=t.columns,a=t.markets,o=t.base,s=t.marketStats,i=t.starredMarkets,l=t.current,c=(t.findMarketTab,this.state),u=c.sortBy,p=c.inverseSort,d=c.open;if(!a||!a.length)return null;var h=n.map(function(t){switch(t.name){case"market":return r.createElement("span",{key:t.name,className:"clickable",onClick:e._changeSort.bind(e,"name")},r.createElement(b.a,{content:"exchange.market"}));case"vol":return r.createElement("span",{key:t.name,className:"clickable",onClick:e._changeSort.bind(e,"volume"),style:{textAlign:"right"}},r.createElement(b.a,{content:"exchange.vol_short"}));case"price":return r.createElement("span",{key:t.name,style:{textAlign:"right"}},r.createElement(b.a,{content:"exchange.price"}));case"quoteSupply":return r.createElement("span",{key:t.name},r.createElement(b.a,{content:"exchange.quote_supply"}));case"baseSupply":return r.createElement("span",{key:t.name},r.createElement(b.a,{content:"exchange.base_supply"}));case"change":return r.createElement("span",{key:t.name,className:"clickable",onClick:e._changeSort.bind(e,"change"),style:{textAlign:"right"}},r.createElement(b.a,{content:"exchange.change"}));case"issuer":return r.createElement("span",{key:t.name},r.createElement(b.a,{content:"explorer.assets.issuer"}));case"add":default:return r.createElement("span",{key:t.name})}}),f=a.map(function(t){return r.createElement(Mn,{key:t.id,withYuan:!0,name:"others"===o?r.createElement("span",null,r.createElement(_.a,{name:t.quote}),":",r.createElement(_.a,{name:t.base})):r.createElement(_.a,{dataPlace:"left",name:t.quote}),quote:t.quote,base:t.base,columns:n,hideZeroVol:"JADE.NES"!==t.quote,compact:!0,noSymbols:!0,stats:s.get(t.id),starred:i.has(t.id),current:l===t.id,isChecked:e.props.userMarkets.has(t.id),isDefault:e.props.defaultMarkets&&e.props.defaultMarkets.has(t.id),onCheckMarket:e._onToggleUserMarket.bind(e)})}).filter(function(e){return null!==e}).filter(function(e){return e.props.base in Kn?!Kn[e.props.base].has(e.props.quote):e}).filter(function(e){return e.props.base in Yn?e.props.quote in Yn[e.props.base]:e}).sort(function(e,t){if(e.props.base in Yn)return Yn[e.props.base][e.props.quote]-Yn[e.props.base][t.props.quote];if(e.props.base in Qn&&(e.props.quote in Qn[e.props.base]||t.props.quote in Qn[e.props.base]))return e.props.quote in Qn[e.props.base]?-1:1;var n=e.key.split("_"),r=t.key.split("_"),a=s.get(n[0]+"_"+n[1]),o=s.get(r[0]+"_"+r[1]);switch(u){case"name":return m.a.replaceName(n[0]).name>m.a.replaceName(r[0]).name?p?-1:1:n[0]<r[0]?p?1:-1:m.a.replaceName(n[1]).name>m.a.replaceName(r[1]).name?p?-1:1:m.a.replaceName(n[1]).name<m.a.replaceName(r[1]).name?p?1:-1:0;case"volume":return a&&o?p?o.volumeBase-a.volumeBase:a.volumeBase-o.volumeBase:0;case"change":return a&&o?p?o.change-a.change:a.change-o.change:0}});d?r.createElement("span",null,"▼"):r.createElement("span",null,"▲");return d&&r.createElement(r.Fragment,null,r.createElement("div",{className:"table table-hover"},r.createElement("div",{className:"table-row",style:{paddingRight:"10px"}},h)),r.createElement("div",{className:"table table-hover _scroll-bar",style:{overflowY:"auto",paddingRight:"4px"}},f))}}]),t}();Xn.defaultProps={maxRows:20};var Zn=((er=function(e){function t(e){Wn(this,t);var n=Jn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.getAssetList=Object(Ln.debounce)(qn.a.getAssetList.defer,150),n._renderFindMarkets=function(){var e=[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(n.props.preferredBases));return r.createElement("div",{className:"grid-block",style:{overflow:"visible",width:"100%",textAlign:"left",padding:"0.75rem 0.5rem"}},r.createElement(Vn.a,{onAssetSelect:n._onFoundBaseAsset.bind(n),assets:e,className:"small-12 medium-6",onChange:n._onInputBaseAsset.bind(n),asset:n.state.findBaseInput,assetInput:n.state.findBaseInput,tabIndex:1,onFound:n._onFoundBaseAsset.bind(n),label:"exchange.base",noLabel:!0,inputStyle:{fontSize:"0.9rem"},style:{padding:2}}),r.createElement("div",{className:"market-more small-12 medium-6",style:{padding:2,marginTop:"-1px"}},r.createElement("label",null,r.createElement(b.a,{content:"account.user_issued_assets.name"}),":"),r.createElement("input",{style:{fontSize:"0.9rem",position:"relative",top:1},type:"text",value:n.state.inputValue,onChange:n._onInputName.bind(n),placeholder:D.a.translate("exchange.search")})))};var a=[null],o=a[0],s=2===a.length?a[1]:null;return n.state={inverseSort:e.viewSettings.get("myMarketsInvert",!0),sortBy:e.viewSettings.get("myMarketsSort","volume"),activeTab:e.viewSettings.get("favMarketTab","my-market"),activeMarketTab:e.viewSettings.get("activeMarketTab",0),lookupQuote:o,lookupBase:s,inputValue:null,minWidth:"100%",findBaseInput:"USD",activeFindBase:"USD"},n}return Gn(t,r["Component"]),zn(t,[{key:"shouldComponentUpdate",value:function(e,t){return"find-market"===this.state.activeTab||"find-market"!==t.activeTab||e.searchAssets.size||this._lookupAssets("OPEN.",!0),!(Pt.is(e.searchAssets,this.props.searchAssets)&&Pt.is(e.markets,this.props.markets)&&Pt.is(e.starredMarkets,this.props.starredMarkets)&&Pt.is(e.defaultMarkets,this.props.defaultMarkets)&&Pt.is(e.marketStats,this.props.marketStats)&&m.a.are_equal_shallow(t,this.state)&&e.locale===this.props.locale&&e.current===this.props.current&&e.minWidth===this.props.minWidth&&e.listHeight===this.props.listHeight&&e.preferredBases===this.props.preferredBases&&e.onlyStars===this.props.onlyStars&&e.assetsLoading===this.props.assetsLoading&&e.userMarkets===this.props.userMarkets)}},{key:"componentDidMount",value:function(){this.refs.favorites;"find-market"===this.state.activeTab&&this._lookupAssets("OPEN.",!0)}},{key:"_inverseSort",value:function(){un.a.changeViewSetting({myMarketsInvert:!this.state.myMarketsInvert}),this.setState({inverseSort:!this.state.inverseSort})}},{key:"_changeSort",value:function(e){e!==this.state.sortBy?(un.a.changeViewSetting({myMarketsSort:e}),this.setState({sortBy:e})):this._inverseSort()}},{key:"_goMarkets",value:function(){this.context.router.history.push("/markets")}},{key:"_changeTab",value:function(e){un.a.changeViewSetting({favMarketTab:e}),this.setState({activeTab:e})}},{key:"_onInputName",value:function(e){var t=e.target.value.toUpperCase();this.setState({inputValue:t}),this._lookupAssets(t)}},{key:"_lookupAssets",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(console.log("__lookupAssets",e,t),e||""===e){var n=new Date,r=e.toUpperCase().split(":"),a=r[0],o=2===r.length?r[1]:null;if(this.setState({lookupQuote:a,lookupBase:o}),un.a.changeViewSetting.defer({marketLookupInput:e.toUpperCase()}),this.state.lookupQuote!==a||t){if(a.length<1||n-$n<=250)return!1}else if(o&&this.state.lookupBase!==o){if(o.length<1||n-$n<=250)return!1;this.getAssetList(o,50)}}}},{key:"toggleActiveMarketTab",value:function(e){un.a.changeViewSetting({activeMarketTab:e}),this.setState({activeMarketTab:e})}},{key:"_onInputBaseAsset",value:function(e){this.setState({findBaseInput:e.toUpperCase(),error:null})}},{key:"_onFoundBaseAsset",value:function(e){e&&this.setState({activeFindBase:e.get("symbol")})}},{key:"render",value:function(){var e=this,t=this.props,n=t.starredMarkets,a=t.defaultMarkets,o=t.marketStats,s=t.columns,i=t.searchAssets,l=t.assetsLoading,c=t.preferredBases,u=(t.core,t.current),p=t.viewSettings,h=t.listHeight,f=t.onlyStars,g=t.userMarkets,v=this.state,E=v.activeMarketTab,k=v.activeTab,w=v.lookupQuote,A=v.lookupBase,C=(r.createElement("div",null),"my-market"===k);c.map(function(e){return e});C||(c=(c=c.clear()).push(this.state.activeFindBase));var S={},O=[];w||(w="OPEN."),C||(E=0),i.filter(function(e){return A&&A.length?0===e.symbol.indexOf(A):-1!==e.symbol.indexOf(w)}).forEach(function(e){A&&A.length?0===e.symbol.indexOf(A)&&O.push(e.symbol):c.includes(e.symbol)&&e.symbol.length>=w.length&&e.symbol.length<w.length+3&&O.push(e.symbol)}),O=(O=O.concat(c.filter(function(e){return!A||!A.length||0===e.indexOf(A)}).toArray())).filter(function(e){return!(A&&A.length>1)||0===e.indexOf(A)});var x=[];i.size&&i.filter(function(e){return-1!==e.symbol.indexOf(w)&&e.symbol.length>=w.length}).forEach(function(e){O.forEach(function(t){var n=e.symbol+"_"+t;t!==e.symbol&&x.push([n,{quote:e.symbol,base:t}])})}),x=x.filter(function(e){return!A||e[1].quote===w}),x=Pt.Map(x);var P=C?a:x;C&&g.size&&g.forEach(function(e,t){P=P.set(t,e)}),P.size>0&&P.filter(function(t){if(C){var r=t.quote+"_"+t.base;return m.a.replaceName(t.quote).name,e.state.myMarketFilter?-1!==m.a.replaceName(t.quote).name.indexOf(e.state.myMarketFilter):!(f&&!n.has(r))}return!(w.length<1)&&-1!==t.quote.indexOf(w)}).map(function(e){var t=e.quote+"_"+e.base;return c.includes(e.base)?(S[e.base]||(S[e.base]=[]),S[e.base].push({id:t,quote:e.quote,base:e.base}),null):{id:t,quote:e.quote,base:e.base}}).filter(function(e){return null!==e}).take(C?100:20).toArray();var N="mymarkets-header clickable",I=y()(N,{inactive:!C}),F=(y()(N,{inactive:C}),{minWidth:this.state.minWidth,minHeight:"6rem"});return h&&(F.height=h),r.createElement(r.Fragment,null,r.createElement("div",{className:"grid-block shrink left-orderbook-header"},r.createElement("div",{ref:"myMarkets",className:I,onClick:this._changeTab.bind(this,"my-market")},r.createElement(b.a,{content:"exchange.market_name"}))),this.props.controls&&r.createElement("div",{className:"small-12 medium-6",style:{padding:"1rem 0"}},this.props.controls?r.createElement("div",{style:{paddingBottom:"0.5rem"}},this.props.controls):null),r.createElement("ul",{className:"mymarkets-tabs",style:{padding:"0 0.5em"}},c.map(function(t,n){return t?r.createElement(T.q,{style:{lineHeight:"1.8",marginRight:"1rem",display:"inline-block",height:"1.8em",fontWeight:"bold",borderBottomWidth:"2px"},key:t,active:E===n,onClick:e.toggleActiveMarketTab.bind(e,n)},r.createElement(_.a,{name:t,dataPlace:"left"})):null})),C?r.createElement("div",{className:"grid-block shrink",style:{width:"100%",textAlign:"left",padding:"0.5rem 0.5rem 0.25rem"}},r.createElement(T.h,{active:this.props.onlyStars,onChange:function(){d.a.toggleStars()},labelStyle:{alignItems:"center"}},r.createElement(b.a,{content:"exchange.show_star_2"}),r.createElement(b.a,{content:"exchange.show_star_1"}),r.createElement(T.k,{icon:"star"})),r.createElement(T.j,null),r.createElement("div",{className:"float-right"},r.createElement("input",{style:{height:"inherit",padding:5},className:"no-margin",type:"text",placeholder:D.a.translate("exchange.filter_name"),value:this.state.myMarketFilter,onChange:function(t){e.setState({myMarketFilter:t.target.value&&t.target.value.toUpperCase()})}}))):this._renderFindMarkets(),r.createElement("div",{style:F,className:"table-container grid-block vertical mymarkets-list",ref:"favorites"},l?r.createElement("div",{style:{position:"absolute",paddingTop:"3rem",textAlign:"center",width:"100%"}},r.createElement(Un.a,{type:"three-bounce"})):null,c.filter(function(e){return e===c.get(E)}).map(function(t,a){return r.createElement(Xn,{userMarkets:e.props.userMarkets,defaultMarkets:e.props.defaultMarkets,index:a,allowChange:!1,key:t,current:u,starredMarkets:n,marketStats:o,viewSettings:p,columns:C?s:e.props.findColumns||s,markets:S[t],base:t,maxRows:C?20:10,findMarketTab:!C})})))}}]),t}()).propTypes={core:Cn.a.ChainAsset.isRequired},er.defaultProps={activeTab:"my-market",core:"1.3.0",setMinWidth:!1},er.contextTypes={router:p.object.isRequired},er);Zn=Object(Sn.a)(Zn,{keep_updating:!0});var er,tr=function(e){function t(){return Wn(this,t),Jn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Gn(t,r["Component"]),zn(t,[{key:"render",value:function(){return r.createElement(Zn,Object.assign({},this.props))}}]),t}(),nr=Object(A.connect)(tr,{listenTo:function(){return[i.b,o.a,Bn.a,Rn.a]},getProps:function(){return{locale:Rn.a.getState().currentLocale,starredMarkets:i.b.getState().starredMarkets,defaultMarkets:i.b.getState().defaultMarkets,viewSettings:i.b.getState().viewSettings,preferredBases:i.b.getState().preferredBases,marketStats:o.a.getState().allMarketStats,userMarkets:i.b.getState().userMarkets,searchAssets:Bn.a.getState().assets,onlyStars:o.a.getState().onlyStars,assetsLoading:Bn.a.getState().assetsLoading}}}),rr=n(1756),ar=n(39),or=n.n(ar),sr=n(126),ir=n(1701),lr=n(1700),cr=n(348),ur=n(105),pr=n(342),dr=n(1644),hr=n.n(dr),mr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},fr=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function br(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function gr(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function yr(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var vr=function(e){function t(e){br(this,t);var n=gr(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.state={toAddress:ir.a.getLast(e.walletType),withdrawValue:"",amountError:null,inputAmount:0,receiveLoading:!1,limitLoading:!0,apiError:!1},n._validateAddress(n.state.toAddress,e),n.deposit_address_cache=new lr.a,n}return yr(t,r["Component"]),fr(t,[{key:"onClose",value:function(){or.a.publish(this.props.modalId,"close")}},{key:"componentWillMount",value:function(){this._getDepositAddress()}},{key:"componentDidMount",value:function(){this._getDepositLimit(),this._estimateOutput()}},{key:"componentWillReceiveProps",value:function(e){e.inputCoinType===this.props.inputCoinType&&e.outputCoinType===this.props.outputCoinType||(this._getDepositLimit(e),this._estimateOutput(e),this._getDepositAddress(e))}},{key:"shouldComponentUpdate",value:function(e,t){return e.inputCoinType!==this.props.inputCoinType||e.outputCoinType!==this.props.outputCoinType||e.sender!==this.props.sender||e.asset!==this.props.asset||e.isAvailable!==this.props.isAvailable||e.isDown!==this.props.isDown||!m.a.are_equal_shallow(t,this.state)}},{key:"_getDepositLimit",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;this.setState({limitLoading:!0}),Object(ir.d)(t.inputCoinType,t.outputCoinType).then(function(t){e.setState({depositLimit:t.depositLimit,limitLoading:!1})}).catch(function(t){console.log("deposit limit error:",t),e.setState({depositLimit:null,limitLoading:!1})})}},{key:"_onAmountChange",value:function(e,t){var n=new RegExp(/[[:digit:]]/),r=t.target;switch(n.test(r.value)||(r.value=r.value.replace(/[^0-9.]/g,"")),"."==r.value.charAt(0)&&(r.value="0."),r.value.charAt(r.value.length)!=r.value.search(".")&&r.value.substr(1),r.value=m.a.limitByPrecision(r.value,8),e){case"input":this.setState({inputAmount:r.value},this._estimateOutput.bind(this));break;case"output":this.setState({outputAmount:r.value},this._estimateInput.bind(this))}}},{key:"_estimateOutput",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;this.setState({receiveAmount:0,sendAmount:this.state.inputAmount}),this.state.inputAmount&&(this.setState({receiveLoading:!0}),Object(ir.c)(this.state.inputAmount,t.inputCoinType,t.outputCoinType).then(function(t){e.setState({inputAmount:t.inputAmount,receiveAmount:t.outputAmount,receiveLoading:!1})}).catch(function(t){console.log("receive amount err:",t),e.setState({receiveLoading:!1,apiError:!0})}))}},{key:"_estimateInput",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;this.setState({receiveAmount:this.state.outputAmount,sendAmount:0}),this.state.outputAmount&&(this.setState({receiveLoading:!0}),Object(ir.b)(this.state.outputAmount,t.inputCoinType,t.outputCoinType).then(function(t){e.setState({inputAmount:t.inputAmount,sendAmount:m.a.limitByPrecision(t.inputAmount,8),receiveLoading:!1})}).catch(function(t){console.log("send amount err:",t),e.setState({receiveLoading:!1,apiError:!0})}))}},{key:"_getDepositAddress",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;if(e.inputCoinType){this.setState({receive_address:null}),Object(ir.e)(this._getDepositObject(e))}}},{key:"_getDepositObject",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;return{inputCoinType:t.inputCoinType.toLowerCase(),outputCoinType:t.outputCoinType.toLowerCase(),outputAddress:t.sender.get("name"),url:ur.c.BASE,stateCallback:function(n){e.addDepositAddress(t.inputCoinType.toLowerCase(),t.outputCoinType.toLowerCase(),t.sender.get("name"),n)}}}},{key:"addDepositAddress",value:function(e,t,n,r){this.deposit_address_cache.cacheInputAddress("blocktrades",n,e,t,r.address,r.memo),this.setState({receive_address:r})}},{key:"componentDidUpdate",value:function(){w.a.rebuild()}},{key:"_validateAddress",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.props;Object(ir.f)({walletType:n.walletType,newAddress:e}).then(function(n){t.state.toAddress===e&&t.setState({withdraw_address_check_in_progress:!1,validAddress:n})}).catch(function(e){console.error("Error when validating address:",e)})}},{key:"_openRegistrarSite",value:function(e){e.preventDefault(),window.open(i.b.site_registr,"_blank").opener=null}},{key:"_onDropDownSelect",value:function(e){un.a.changeViewSetting({preferredBridge:e})}},{key:"onBlockTradesContact",value:function(){console.log("Open New Tab"),window.open("https://www.blocktrades.us/contact","_blank").focus()}},{key:"_renderDeposit",value:function(){var e=m.a.replaceName(this.props.asset.get("symbol"),!!this.props.asset.get("bitasset")),t=e.name,n=e.prefix,a=this.state,o=a.receive_address,s=a.apiError,i=o&&"memo"in o&&o.memo,l=o&&o.address||"",c=r.createElement("div",{className:"SimpleTrade__QR"},r.createElement(hr.a,{size:140,value:l})),u=Object.keys(this.props.bridges.toJS()),p=this.props.inputCoinType.toUpperCase(),d=(n||"")+t,h=(this.state.receiveAmount/this.state.inputAmount).toFixed(4),f=d+"/"+p,g=this.state.inputAmount>parseFloat(this.state.depositLimit)||this.state.sendAmount>parseFloat(this.state.depositLimit),y=g?{border:"1px solid #a94442"}:null;return r.createElement("div",{className:l?"":"no-overflow"},r.createElement("div",{className:"SimpleTrade__withdraw-row"},r.createElement("label",{className:"left-label"},"ASSET"),r.createElement("div",{className:"inline-label input-wrapper"},r.createElement("input",{disabled:!0,type:"text",defaultValue:d}))),r.createElement("div",{className:"SimpleTrade__withdraw-row"},r.createElement("div",{className:"grid-block"},r.createElement("label",{className:"left-label"},"BRIDGE"),r.createElement("span",{"data-tip":D.a.translate("tooltip.bridge_TRADE"),className:"inline-block tooltip",onClick:this.onBlockTradesContact.bind(this)}," ",r.createElement(Pn.a,{style:{position:"relative",top:0},name:"question-circle"}))),r.createElement("div",{className:"inline-label input-wrapper"},r.createElement("input",{disabled:!0,type:"text",defaultValue:"BLOCKTRADES"})," ")),r.createElement("span",{style:s?{display:"none"}:{display:""}},r.createElement("div",{className:"SimpleTrade__withdraw-row"},r.createElement("div",{className:"no-margin no-padding"},r.createElement("div",{className:"small-6",style:{paddingRight:10}},r.createElement("div",{className:"grid-block"},r.createElement("label",{className:"left-label"},r.createElement(b.a,{content:"transfer.send"})),g?r.createElement("div",{className:"error-msg inline-block tooltip","data-tip":D.a.translate("tooltip.over_limit")},r.createElement(b.a,{content:"gateway.over_limit"})," ",r.createElement(Pn.a,{name:"question-circle"})):null),r.createElement("div",{className:"inline-label input-wrapper"},r.createElement("input",{style:y,type:"text",value:this.state.sendAmount,onInput:this._onAmountChange.bind(this,"input")}),r.createElement("div",{className:"form-label select floating-dropdown"},r.createElement(pr.a,{entries:u,values:u.reduce(function(e,t){return t&&(e[t]=t),e},{}),singleEntry:u[0],value:this.props.preferredBridge||u[0],onChange:this._onDropDownSelect,upperCase:!0})))),r.createElement("div",{className:"small-6",style:{paddingLeft:10}},r.createElement("label",{className:"left-label"},r.createElement(b.a,{content:"gateway.deposit_limit"})),r.createElement("div",{className:"inline-label input-wrapper"},r.createElement("input",{disabled:!0,type:"number",value:this.state.depositLimit&&parseFloat(this.state.depositLimit).toFixed(4)||0}),r.createElement("div",{className:"input-right-symbol"},p))))),r.createElement("div",{className:"SimpleTrade__withdraw-row"},r.createElement("div",{className:"no-margin no-padding"},r.createElement("div",{className:"small-6",style:{paddingRight:10}},r.createElement("label",{className:"left-label"},r.createElement(b.a,{content:"exchange.receive"})),r.createElement("div",{className:"inline-label input-wrapper"},r.createElement("input",{style:y,type:"text",value:this.state.receiveAmount,onInput:this._onAmountChange.bind(this,"output")}),r.createElement("div",{className:"input-right-symbol"},d))),r.createElement("div",{className:"small-6",style:{paddingLeft:10}},r.createElement("div",{className:"grid-block"},r.createElement("label",{className:"left-label"},r.createElement(b.a,{content:"exchange.price"}),"  ",this.state.receiveLoading?r.createElement(b.a,{content:"footer.loading"}):"")),r.createElement("div",{className:"inline-label input-wrapper"},r.createElement("input",{disabled:!0,type:"number",value:g?0:h}),r.createElement("div",{className:"input-right-symbol"},f))))),l?r.createElement("div",{className:"SimpleTrade__withdraw-row",style:{textAlign:"center"}},i?null:c,r.createElement("div",{className:"grid-block SimpleTrade__deposit-info"},r.createElement("div",{className:"copyIcon"},r.createElement(cr.a,{text:l,className:"SimpleTrade__copyIcon"})),r.createElement("div",{className:"deposit-details"},r.createElement("div",null,r.createElement(b.a,{unsafe:!0,content:"gateway.purchase_notice",inputAsset:p,outputAsset:d})),r.createElement("div",null,l))),i?r.createElement("div",{className:"grid-block SimpleTrade__deposit-info",style:{marginTop:"10px"}},r.createElement("div",{className:"copyIcon"},r.createElement(cr.a,{text:o.memo,className:"SimpleTrade__copyIcon"})),r.createElement("div",{className:"deposit-details"},r.createElement("div",null,r.createElement(b.a,{unsafe:!0,content:"gateway.purchase_notice_memo"})),r.createElement("div",null,o.memo))):null):r.createElement("div",{style:{textAlign:"center"}},r.createElement(Un.a,{type:"three-bounce"})),r.createElement("div",{className:"SimpleTrade__withdraw-row",style:{textAlign:"center",paddingBottom:"2rem"}},r.createElement("div",{className:"no-margin no-padding"},r.createElement("button",{className:"ActionButton_Close",onClick:this.onClose.bind(this)},r.createElement(b.a,{content:"transfer.close"}))))),r.createElement("span",{style:s?{display:""}:{display:"none"}},r.createElement("div",{className:"SimpleTrade__withdraw-row",style:{textAlign:"center",paddingBottom:"2rem",color:"#bb2926"}},r.createElement(b.a,{className:"txtlabel cancel",content:"gateway.unavailable_TRADE",component:"p"}),r.createElement("button",{className:"ActionButton_Close",onClick:this.onClose.bind(this)},r.createElement(b.a,{content:"transfer.close"})))))}},{key:"_renderCurrentBalance",value:function(){var e=this,t=m.a.replaceName(this.props.asset.get("symbol"),!!this.props.asset.get("bitasset")).name,n="deposit"===this.props.action,a=this.props.balances.find(function(t){return t&&t.get("asset_type")===e.props.asset.get("id")}),o=a?new wt.a({asset_id:a.get("asset_type"),precision:this.props.asset.get("precision"),amount:a.get("balance")}):null,s=n?r.createElement("span",{style:{border:"2px solid black",borderLeft:"none"},className:"form-label"},t):r.createElement("button",{"data-place":"right","data-tip":D.a.translate("tooltip.withdraw_full"),className:"button",style:{border:"2px solid black",borderLeft:"none"},onClick:this._updateAmount.bind(this,a?parseInt(a.get("balance"),10):0)},r.createElement(Pn.a,{name:"clippy"}));return r.createElement("div",{className:"SimpleTrade__withdraw-row",style:{fontSize:"1rem"}},r.createElement("label",{style:{fontSize:"1rem"}},D.a.translate("gateway.balance_asset",{asset:t}),":",r.createElement("span",{className:"inline-label"},r.createElement("input",{disabled:!0,style:{color:"black",border:"2px solid black",padding:10,width:"100%"},value:o?o.getAmount({real:!0}):0}),s)))}},{key:"render",value:function(){if(!this.props.asset)return null;var e=n(724);return r.createElement("div",{className:"SimpleTrade__modal"},r.createElement("div",{className:"Modal__header",style:{background:"none"}}),r.createElement("div",{className:"grid-block vertical no-overflow",style:{zIndex:1002,paddingLeft:"2rem",paddingRight:"2rem"}},r.createElement("div",{style:{textAlign:"center"}},r.createElement("img",{style:{margin:0,height:80},src:e}),r.createElement("br",null),r.createElement("p",{style:{fontSize:"1.8rem",fontWeight:"bold",marginBottom:0}},"Buy")),this.props.isDown?r.createElement("div",{style:{textAlign:"center"}},r.createElement(b.a,{className:"txtlabel cancel",content:"gateway.unavailable_TRADE",component:"p"})):this.props.isAvailable?this._renderDeposit():r.createElement("div",{style:{textAlign:"center"}},r.createElement(b.a,{className:"txtlabel cancel",content:"gateway.unavailable",component:"p"}))))}}]),t}();vr.propTypes={sender:Cn.a.ChainAccount.isRequired,asset:Cn.a.ChainAsset.isRequired},vr=Object(Sn.a)(vr);var _r=function(e){function t(){return br(this,t),gr(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return yr(t,r["Component"]),fr(t,[{key:"render",value:function(){var e=this.props,t=e.preferredBridge,n=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["preferredBridge"]),a=this.props.bridges.get(this.props.preferredBridge);return a||(t=(a=this.props.bridges.first()).inputCoinType),r.createElement(vr,mr({},n,{preferredBridge:t},a.toJS()))}}]),t}();_r=Object(A.connect)(_r,{listenTo:function(){return[i.b]},getProps:function(){return{preferredBridge:i.b.getState().viewSettings.get("preferredBridge","btc")}}});var Er=function(e){function t(){br(this,t);var e=gr(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={open:!1},e}return yr(t,r["Component"]),fr(t,[{key:"show",value:function(){var e=this;this.setState({open:!0},function(){or.a.publish(e.props.modalId,"open")})}},{key:"onClose",value:function(){this.setState({open:!1})}},{key:"render",value:function(){return this.props.bridges?r.createElement(sr.a,{className:"test",onClose:this.onClose.bind(this),id:this.props.modalId,overlay:!0},this.state.open?r.createElement(_r,mr({},this.props,{open:this.state.open})):null):null}}]),t}(),kr=n(1699),wr=n(218),Ar=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var Cr=((Sr=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["Component"]),Ar(t,[{key:"shouldComponentUpdate",value:function(e){return e.amount!==this.props.amount||e.onBorrow!==this.props.onBorrow||e.total!==this.props.total||e.currentPrice!==this.props.currentPrice||e.price!==this.props.price||e.balance!==this.props.balance||e.account!==this.props.account||e.className!==this.props.className||!(!e.fee||!this.props.fee)&&e.fee.ne(this.props.fee)||e.isPredictionMarket!==this.props.isPredictionMarket||e.feeAsset!==this.props.feeAsset||e.isOpen!==this.props.isOpen||e.hasFeeBalance!==this.props.hasFeeBalance}},{key:"_addBalance",value:function(e){"bid"===this.props.type?this.props.totalChange({target:{value:e.getAmount({real:!0}).toString()}}):this.props.amountChange({target:{value:e.getAmount({real:!0}).toString()}})}},{key:"_setPrice",value:function(e){this.props.priceChange({target:{value:e.toString()}})}},{key:"_onDeposit",value:function(e){e.preventDefault(),this.refs.deposit_modal.show()}},{key:"_onBuy",value:function(e){e.preventDefault(),this.refs.bridge_modal.show()}},{key:"render",value:function(){var e=this.props,t=e.type,n=e.quote,a=e.base,o=e.amountChange,s=e.fee,i=e.isPredictionMarket,l=e.priceChange,c=e.onSubmit,u=e.balance,p=e.totalChange,d=e.balancePrecision,h=(e.currentPrice,e.currentPriceObject,e.feeAsset),f=e.feeAssets,g=e.hasFeeBalance,v=e.backedCoin,E=void 0,k=void 0,w=void 0;this.props.isOpen?r.createElement("span",null,"▼"):r.createElement("span",null,"▲");this.props.amount&&(E=this.props.amount),this.props.price&&(k=this.props.price),this.props.total&&(w=this.props.total);var A=new wt.a({amount:u?u.get("balance"):0,precision:d,asset_id:this.props.balanceId}),C=new wt.a({amount:a.getIn(["options","max_market_fee"]),asset_id:a.get("asset_id"),precision:a.get("precision")}),S=new wt.a({amount:n.getIn(["options","max_market_fee"]),asset_id:n.get("asset_id"),precision:n.get("precision")}),O=E?Math.min(S.getAmount({real:!0}),E*n.getIn(["options","market_fee_percent"])/1e4):0,x=E?Math.min(C.getAmount({real:!0}),w*a.getIn(["options","market_fee_percent"])/1e4):0,P=wr.a.getFlagBooleans(a.getIn(["options","flags"]),a.has("bitasset_data_id")),N=wr.a.getFlagBooleans(n.getIn(["options","flags"]),n.has("bitasset_data_id")),I=P.charge_market_fee||N.charge_market_fee,F=P.charge_market_fee?r.createElement("div",{className:"grid-block no-padding buy-sell-row"},r.createElement("div",{className:"grid-block small-3 no-margin no-overflow buy-sell-label"},r.createElement(b.a,{content:"explorer.asset.summary.market_fee"}),":"),r.createElement("div",{className:"grid-block small-5 no-margin no-overflow buy-sell-input"},r.createElement("input",{disabled:!0,type:"text",id:"baseMarketFee",value:x,autoComplete:"off"})),r.createElement("div",{className:"grid-block small-4 no-margin no-overflow buy-sell-box"},r.createElement(_.a,{noTip:!0,name:a.get("symbol")}),r.createElement("span",{"data-tip":D.a.translate("tooltip.market_fee",{percent:a.getIn(["options","market_fee_percent"])/100,asset:a.get("symbol")}),className:"inline-block tooltip"}," ",r.createElement(Pn.a,{style:{position:"relative",top:3},name:"question-circle"})))):I?r.createElement("div",{className:"grid-block no-padding buy-sell-row"},r.createElement("div",{style:{visibility:"hidden"},className:"grid-block small-3 no-margin no-overflow buy-sell-label"},r.createElement(b.a,{content:"explorer.asset.summary.market_fee"}),":")):null,j=N.charge_market_fee?r.createElement("div",{className:"grid-block no-padding buy-sell-row"},r.createElement("div",{className:"grid-block small-3 no-margin no-overflow buy-sell-label"},r.createElement(b.a,{content:"explorer.asset.summary.market_fee"}),":"),r.createElement("div",{className:"grid-block small-5 no-margin no-overflow buy-sell-input"},r.createElement("input",{disabled:!0,type:"text",id:"baseMarketFee",value:O,autoComplete:"off"})),r.createElement("div",{className:"grid-block small-4 no-margin no-overflow buy-sell-box"},r.createElement(_.a,{noTip:!0,name:n.get("symbol")}),r.createElement("span",{"data-tip":D.a.translate("tooltip.market_fee",{percent:n.getIn(["options","market_fee_percent"])/100,asset:n.get("symbol")}),className:"inline-block tooltip"}," ",r.createElement(Pn.a,{style:{position:"relative",top:3},name:"question-circle"})))):I?r.createElement("div",{className:"grid-block no-padding buy-sell-row"},r.createElement("div",{style:{visibility:"hidden"},className:"grid-block small-3 no-margin no-overflow buy-sell-label"},r.createElement(b.a,{content:"explorer.asset.summary.market_fee"}),":")):null,M="bid"===t,R=M&&j?j:!M&&F?F:null,B=M?A.getAmount({real:!0})>=parseFloat(w):A.getAmount({real:!0})>=parseFloat(E),q=i?D.a.translate("exchange.short"):M?D.a.translate("exchange.buy"):D.a.translate("exchange.sell"),L=M?D.a.translate("exchange.buy"):D.a.translate("exchange.sell"),V=!i&&!(A.getAmount()>0&&B),U=!(k>0),H=!(E>0),z=V||U||H,W=y()({disabled:z}),J=M?a.get("symbol"):n.get("symbol"),G=U?D.a.translate("exchange.invalid_price"):H?D.a.translate("exchange.invalid_amount"):V?D.a.translate("exchange.no_balance"):null;f[1]&&"1.3.0"===f[1].getIn(["options","core_exchange_rate","quote","asset_id"])&&"1.3.0"===f[1].getIn(["options","core_exchange_rate","base","asset_id"])&&(h=f[0],f.splice(1,1));var $=0,Y=f.map(function(e){var t=m.a.replaceName(e.get("symbol"),e.get("bitasset")&&!e.getIn(["bitasset","is_prediction_market"])&&"1.2.0"===e.get("issuer")),n=t.name,a=t.prefix;return r.createElement("option",{key:e.get("id"),value:$++},a,n)}),K=void 0;K=h.get("symbol")===J?A.clone(A.getAmount()-s.getAmount()):A;var Q=m.a.replaceName(this.props[M?"base":"quote"].get("symbol"),!!this.props[M?"base":"quote"].get("bitasset")),X=Q.name,Z=Q.prefix,ee=(Z||"")+X;return r.createElement("div",{className:this.props.className},r.createElement("div",{className:"buy-sell-container"},r.createElement("div",{className:"exchange-content-header "+t},r.createElement("span",null,q," ",r.createElement(_.a,{dataPlace:"top",name:n.get("symbol")})),this.props.onBorrow&&r.createElement("div",{className:"float-right buy-sell-deposit"},r.createElement("a",{onClick:this.props.onBorrow},r.createElement(b.a,{content:"exchange.borrow"})," ",r.createElement("span",{className:"asset-name"},ee)))),r.createElement("form",{className:(this.props.isOpen?"":"hide-container ")+"order-form",noValidate:!0},r.createElement("div",{className:"grid-block vertical no-overflow no-padding"},r.createElement("div",{className:"grid-block no-padding buy-sell-row"},r.createElement("div",{className:"grid-block small-3 no-margin no-overflow buy-sell-label"},r.createElement(b.a,{content:"exchange.price"}),":"),r.createElement("div",{className:"grid-block small-5 no-margin no-overflow buy-sell-input"},r.createElement(kr.b,{id:X+"_buyPrice",value:k,onChange:l,autoComplete:"off",placeholder:"0.0"})),r.createElement("div",{className:"grid-block small-4 no-margin no-overflow buy-sell-box"},r.createElement(_.a,{dataPlace:"right",name:a.get("symbol")}))),r.createElement("div",{className:"grid-block no-padding buy-sell-row"},r.createElement("div",{className:"grid-block small-3 no-margin no-overflow buy-sell-label"},r.createElement(b.a,{content:"exchange.amount"}),":"),r.createElement("div",{className:"grid-block small-5 no-margin no-overflow buy-sell-input"},r.createElement(kr.b,{id:X+"_amount_buyAmount",value:E,onChange:o,autoComplete:"off",placeholder:"0.0"})),r.createElement("div",{className:"grid-block small-4 no-margin no-overflow buy-sell-box"},r.createElement(_.a,{dataPlace:"right",name:n.get("symbol")}))),r.createElement("div",{className:"grid-block buy-sell-row bottom-row"},r.createElement("div",{className:"grid-block small-3 no-margin no-overflow buy-sell-label"},r.createElement(b.a,{content:"exchange.total"}),":"),r.createElement("div",{className:"grid-block small-5 no-margin no-overflow buy-sell-input"},r.createElement(kr.b,{id:X+"_total_buyAmount",value:w,onChange:p,autoComplete:"off",placeholder:"0.0"})),r.createElement("div",{className:"grid-block small-4 no-margin no-overflow buy-sell-box"},r.createElement(_.a,{dataPlace:"right",name:a.get("symbol")}))),r.createElement("div",{className:"grid-block no-padding buy-sell-row"},r.createElement("div",{className:"grid-block small-3 no-margin no-overflow buy-sell-label"},r.createElement(b.a,{content:"transfer.fee"}),":"),r.createElement("div",{className:"grid-block small-5 no-margin no-overflow buy-sell-input"},r.createElement("input",{className:g?"":"no-balance",disabled:!0,type:"text",id:X+"_fee",value:g?s.getAmount({real:!0}):D.a.translate("transfer.errors.insufficient"),autoComplete:"off"})),r.createElement("div",{className:"grid-block small-4 no-margin no-overflow buy-sell-box",style:{paddingLeft:1!==f.length?0:5}},r.createElement("select",{style:1===f.length?{background:"none"}:null,disabled:1===f.length,value:f.indexOf(this.props.feeAsset),className:"form-control"+(1!==f.length?" buysell-select":""),onChange:this.props.onChangeFeeAsset},Y)),R)),r.createElement("div",null,r.createElement("div",{className:"grid-content clear-fix no-padding"},r.createElement("table",{style:{width:"100%"}},r.createElement("tbody",null,r.createElement("tr",{className:"buy-sell-info"},r.createElement("td",null,r.createElement(b.a,{content:"exchange.balance"}),":"),r.createElement("td",{style:{paddingLeft:5,textAlign:"right"}},r.createElement("span",{style:{borderBottom:"#A09F9F 1px dotted",cursor:"pointer"},onClick:this._addBalance.bind(this,K)},m.a.format_number(A.getAmount({real:!0}),d)," ",r.createElement(_.a,{name:J})))))),r.createElement("div",{className:"buysell-buttons-wrapper"},r.createElement("div",{className:"full-width-content","data-tip":G&&""},r.createElement(T.g,{className:W,onClick:c.bind(this,!0),type:t,disabled:z},q,"（",r.createElement(_.a,{name:M?a.get("symbol"):n.get("symbol")})," "," => ",r.createElement(_.a,{name:M?n.get("symbol"):a.get("symbol")}),"）")),G&&i?r.createElement("div",{style:{paddingLeft:10},className:"float-right","data-tip":G,"data-place":"right"},r.createElement("input",{style:{margin:0},className:W,type:"submit",onClick:c.bind(this,!1),value:L})):i?r.createElement("div",{style:{paddingLeft:10},className:"float-right","data-tip":""},r.createElement("input",{style:{margin:0},className:W,type:"submit",onClick:c.bind(this,!1),value:L})):null))))),r.createElement(rr.a,Object.assign({ref:"deposit_modal",action:"deposit",fiatModal:!1,account:this.props.currentAccount.get("name"),sender:this.props.currentAccount.get("id"),asset:this.props[M?"base":"quote"].get("id"),modalId:"simple_deposit_modal"+("bid"===t?"":"_ask"),balances:[this.props.balance]},v)),r.createElement(Er,{ref:"bridge_modal",action:"deposit",account:this.props.currentAccount.get("name"),sender:this.props.currentAccount.get("id"),asset:this.props.balanceId,modalId:"simple_bridge_modal"+("bid"===t?"":"_ask"),balances:[this.props.balance],bridges:this.props.currentBridges}))}}]),t}()).propTypes={balance:Cn.a.ChainObject,type:p.string,amountChange:p.func.isRequired,priceChange:p.func.isRequired,onSubmit:p.func.isRequired},Sr.defaultProps={type:"bid"},Sr);Cr=Object(x.a)(Cr);var Sr,Or=Object(Sn.a)(Cr,{keep_updating:!0}),xr=n(1747),Tr=n(289),Pr=n.n(Tr),Dr=n(15),Nr=n(215),Ir=n(287),Fr=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function jr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var Mr=function(e,t,n,r){return new(n||(n=Promise))(function(a,o){function s(e){try{l(r.next(e))}catch(e){o(e)}}function i(e){try{l(r.throw(e))}catch(e){o(e)}}function l(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(s,i)}l((r=r.apply(e,t||[])).next())})};var Rr=Symbol(),Br={"15S":15,1:60,5:300,60:3600,"1D":86400},qr=Object.keys(Br),Lr={15:"15S",60:"1",300:"5",3600:"60",86400:"1D"},Vr=function(e){function t(){jr(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments));return e.updateEmitter=new Pr.a,e.updateCbs={},e.tvWidget=null,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["PureComponent"]),Fr(t,[{key:"componentDidUpdate",value:function(e){var t=this;if(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];return!(!e.length&&!t.length||(0==e.length||0==t.length?(console.debug("===getBar from zero to one"),0):e[1]&&t[1]&&e[1].interval!==t[1].interval?(console.debug("===getBar bucketChange: ",e[1].interval,t[1].interval),0):e[0].base+e[0].quote===t[0].base+t[0].quote||(console.debug("===getBar marketChange: ",e[0].base+e[0].quote,t[0].base+t[0].quote,t[1].interval),0)))}(e.priceData,this.props.priceData))this.updateEmitter.emit(Rr);else if(e.priceData.length&&this.props.priceData.length&&this.updateCbs.realtimeUpdate){var n=new Date(Math.max(e.priceData[0].date,e.priceData[e.priceData.length-1].date)),r=this.props.priceData.filter(function(e){return e.date.getTime()>=n.getTime()});r.forEach(function(e){return e.time=e.date.getTime()}),r.forEach(function(e){return t.updateCbs.realtimeUpdate(e)})}}},{key:"componentDidMount",value:function(){var e=this;this.updateEmitter.on(Rr,function(t){e.updateCbs.resetData&&(console.debug("==== getBar Reload Chart"),e.updateCbs.resetCache(),e.updateCbs.resetData())}),console.debug("==== getBar Component Did Mount"),this._setupTv()}},{key:"_setupTv",value:function(){var e=this,t=["edit_buttons_in_legend","header_symbol_search","symbol_search_hot_key","symbol_info","header_compare","header_undo_redo","border_around_the_chart"],n={onReady:function(e){console.debug("=====onReady running"),setTimeout(function(){e({supported_resolutions:Object.keys(Br)})},10)},resolveSymbol:function(n,r){console.debug("======resolveSymbol running",n);var a={name:n,description:n,type:"crypto",session:"24x7",timezone:"Asia/Shanghai",ticker:n,minmov:1,pricescale:function(e){for(var t=1,n=0;n<e;n++)t*=10;return t}(e.props.latestPrice.full.toPrecision(6).split(".")[1].length),has_intraday:!0,has_seconds:!0,intraday_multipliers:["15S","1","60"],disabled_features:t,supported_resolution:qr,volume_precision:4,data_status:"streaming"};setTimeout(function(){r(a),console.debug("Resolving that symbol....",a)},0)},subscribeBars:function(t,n,r,a,o){console.debug("=====subscribeBars runnning",t),e.updateCbs.resetCache=function(){return o()},e.updateCbs.realtimeUpdate=r},unsubscribeBars:function(e){console.debug("=====unsubscribeBars running",e)},getBars:function(t,n,r,a,o,s,i){return Mr(e,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,s=this;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(r*=1e3,a*=1e3,t=Ir.a.getState()[""+this.props.quoteSymbol+this.props.baseSymbol+this.props.bucketSize]||[],n=i?t:t.filter(function(e){return e.date>=r&&e.date<=a}),console.debug("=====getBars running",i,r,a,t,n),n.length){e.next=9;break}return e.next=8,new Promise(function(e){var t=(new Date).toISOString()+"$";Nr.a.patchMarketHistory(s.props.base,s.props.quote,s.props.bucketSize,Ir.a,!1,t),Ir.b.once(t,function(t){e(t)})});case 8:n=e.sent;case 9:(function(e){e.filter(function(e){e.date>=r&&e.date}),(e=e.sort(function(e,t){return e.date>t.date?1:e.date<t.date?-1:0})).length>1?o(e,{noData:!1}):o([],{noData:!0})})(n);case 11:case"end":return e.stop()}},e,this)}))}},r={debug:!1,symbol:this.props.quoteSymbol.replace("JADE.","")+"/"+this.props.baseSymbol.replace("JADE.",""),datafeed:n,interval:Lr[this.props.bucketSize],container_id:this.props.containerId,library_path:this.props.libraryPath,locale:function(){var e=new RegExp("[\\?&]lang=([^&#]*)").exec(window.location.search);return null===e?Rn.a.getState().currentLocale:decodeURIComponent(e[1].replace(/\+/g," "))}()||"en",charts_storage_url:this.props.chartsStorageUrl,charts_storage_api_version:this.props.chartsStorageApiVersion,user_id:this.props.userId,fullscreen:this.props.fullscreen,autosize:this.props.autosize,timezone:"UTC",time_frames:[{text:"1m",resolution:"1D"},{text:"1d",resolution:"60"},{text:"6h",resolution:"1"}],enabled_features:["hide_loading_screen_on_series_error","side_toolbar_in_fullscreen_mode","hide_left_toolbar_by_default"],disabled_features:t,toolbar_bg:Dr.b.$colorDark,client_id:"tradingview.com",custom_css_url:["/charting_library/themes/tv-dark.min.css"],overrides:{"paneProperties.background":Dr.b.$colorDark,"dataWindowProperties.font":"Open Sans, Verdana","dataWindowProperties.fontSize":8,"paneProperties.vertGridProperties.color":"#363c4e","paneProperties.horzGridProperties.color":"#363c4e","symbolWatermarkProperties.transparency":60,"scalesProperties.textColor":"#AAA","scalesProperties.fontSize":10,"paneProperties.topMargin":10,"paneProperties.bottomMargin":25,"paneProperties.leftMargin":20,"paneProperties.rightMargin":20,"mainSeriesProperties.candleStyle.wickUpColor":Dr.b.$colorGrass,"mainSeriesProperties.candleStyle.wickDownColor":Dr.b.$colorFlame,"mainSeriesProperties.candleStyle.upColor":Dr.b.$colorGrass,"mainSeriesProperties.candleStyle.downColor":Dr.b.$colorFlame},loading_screen:{backgroundColor:"#171d2a"},studies:["MACD@tv-basicstudies"]};this.tvWidget=new xr.widget(r),this.tvWidget.onChartReady(function(){console.debug("Chart has loaded!"),e.updateCbs.resetData=function(){e.tvWidget.activeChart().resetData(),e.tvWidget.activeChart().setSymbol(e.props.quoteSymbol.replace("JADE.","")+"/"+e.props.baseSymbol.replace("JADE.",""))},e.tvWidget.chart().onIntervalChanged().subscribe(null,function(t,n){console.debug("TVChart: ","onIntervalChanged: ",t,n),e.props.onChangeBucket(Br[t]||86400)})})}},{key:"componentWillUnmount",value:function(){null!==this.tvWidget&&(this.tvWidget.remove(),this.tvWidget=null)}},{key:"render",value:function(){return r.createElement("div",{id:this.props.containerId,className:"TVChartContainer",style:{height:this.props.height,width:"100%",marginBottom:"15px",borderBottom:"1px solid #2f3239"}})}}]),t}();Vr.defaultProps={symbol:"ETH/USDT",interval:"60",containerId:"tv_chart_container",libraryPath:"/charting_library/",chartsStorageUrl:"https://saveload.tradingview.com",chartsStorageApiVersion:"1.0",clientId:"tradingview.com",userId:"anonymous",fullscreen:!1,autosize:!0,studiesOverrides:{}};var Ur=n(1659),Hr=n(35),zr=n(214),Wr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Jr=n(39),Gr=n(1694),$r=(r.createClass({displayName:"NotificationSet",getInitialState:function(){return{notifications:[]}},componentDidMount:function(){Jr.subscribe(this.props.id,function(e,t){"clearall"===t?this.clearAll():this.addNotification(t)}.bind(this))},addNotification:function(e){e.id=Jr.generateUuid();var t=this.state.notifications.concat(e);this.setState({notifications:t})},removeNotifcation:function(e){return function(t){var n=[];this.state.notifications.forEach(function(t){t.id!==e&&n.push(t)}),this.setState({notifications:n}),t.preventDefault()}.bind(this)},clearAll:function(){this.setState({notifications:[]})},render:function(){var e=this.state.notifications.map(function(e){return r.createElement(Gr,Wr({key:e.id},e,{closeHandler:this.removeNotifcation(e.id),className:"is-active"}),e.content)}.bind(this));return r.createElement("div",null,e)}}),n(1694)),Yr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Kr=(n(26),n(39)),Qr=r.createClass({displayName:"NotificationStatic",getInitialState:function(){return{open:!1}},componentDidMount:function(){Kr.subscribe(this.props.id,function(e,t){"open"===t?this.setState({open:!0}):"close"===t&&this.setState({open:!1})}.bind(this))},componentWillUnmount:function(){Kr.unsubscribe(this.props.id)},closeHandler:function(e){this.setState({open:!1}),e.preventDefault(),e.stopPropagation()},render:function(){return r.createElement(zr.a,{active:this.state.open,animationIn:"fadeIn",animationOut:"fadeOut"},r.createElement($r.default,Yr({},this.props,{closeHandler:this.closeHandler}),this.props.children))}}),Xr=n(346),Zr=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var ea,ta=dn.c.operations,na=Object.keys(ta),ra=((ea=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["Component"]),Zr(t,[{key:"componentWillReceiveProps",value:function(e){if(e.account.size&&this.props.account.get("history")){var t=this.props.account.get("history")&&this.props.account.get("history").first()?this.props.account.get("history").first().toJS():null,n=e.account.get("history")&&e.account.get("history").first()?e.account.get("history").first().toJS():null;n&&t&&"fill_order"===na[n.op[0]]&&(!t&&n.id||n.id!==t.id)&&(or.a.publish("account-notify","open"),setTimeout(function(){or.a.publish("account-notify","close")},5e3))}}},{key:"shouldComponentUpdate",value:function(e){return!Pt.is(e.account.get("history"),this.props.account.get("history"))||!Pt.is(e.account,this.props.account)}},{key:"render",value:function(){var e=this.props.account;if(!e)return r.createElement("div",null);var t=void 0,n=void 0;return this.props.account.get("history")&&this.props.account.get("history").size&&(t=this.props.account.get("history").first().toJS())&&(n=r.createElement(Xr.a,{key:t.id,op:t.op,result:t.result,block:t.block_num,current:e.get("id"),hideDate:!0,hideFee:!0})),t?r.createElement(Qr,{id:"account-notify",title:null,image:"",wrapperElement:"div"},r.createElement("table",{className:"table"},r.createElement("tbody",null,n))):r.createElement("div",null)}}]),t}()).propTypes={account:Cn.a.ChainAccount.isRequired},ea),aa=ra=Object(Sn.a)(ra,{keep_updating:!0}),oa=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var sa=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["Component"]),oa(t,[{key:"render",value:function(){return r.createElement(u.a,{stores:[s.a],inject:{account:function(){return s.a.getState().currentAccount}}},r.createElement(aa,null))}}]),t}(),ia=n(91),la=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var ca=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["Component"]),la(t,[{key:"show",value:function(){var e="modal_confirm_"+this.props.type;or.a.publish(e,"open")}},{key:"_onForce",value:function(e,t){var n="modal_confirm_"+this.props.type;t.preventDefault(),or.a.publish(n,"close"),e&&this.props.onForce()}},{key:"render",value:function(){var e=this.props,t=e.type,n=e.diff,a=e.hasOrders;return r.createElement(sr.a,{id:"modal_confirm_"+t,overlay:!0},r.createElement(b.a,{component:"h3",content:"transaction.confirm"}),r.createElement("div",{className:"grid-block vertical"},a?r.createElement(b.a,{content:"exchange.confirm_"+t,diff:m.a.format_number(n,2)}):r.createElement(b.a,{content:"exchange.confirm_no_orders_"+t}),r.createElement("div",{className:"button-group",style:{paddingTop:"2rem"}},r.createElement("input",{onClick:this._onForce.bind(this,!0),className:"button success",type:"submit",value:"Yes"}),r.createElement(ia.a,{close:"modal_confirm_"+t},r.createElement("input",{className:"button info",type:"submit",value:"No"})))))}}]),t}(),ua=(n(64),n(347)),pa=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function da(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ha(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function ma(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var fa=function(e){function t(){return da(this,t),ha(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return ma(t,r["Component"]),pa(t,[{key:"render",value:function(){var e=this.props,t=e.baseSymbol,n=e.quoteSymbol;return r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",{style:{textAlign:"center"}},r.createElement(b.a,{content:"exchange.price"})," ",t?r.createElement("span",{className:"header-sub-title"},"(",r.createElement(_.a,{name:t}),"/",r.createElement(_.a,{name:n}),")"):null),r.createElement("th",{style:{textAlign:"center"}},r.createElement(b.a,{content:"transfer.amount"})," ",n?r.createElement("span",{className:"header-sub-title"},"(",r.createElement(_.a,{name:n}),")"):null),r.createElement("th",{style:{textAlign:"center"}},r.createElement(b.a,{content:"transaction.settlement_date"})," ",r.createElement("span",{style:{visibility:"hidden"},className:"header-sub-title"},"d"))))}}]),t}();fa.defaultProps={quoteSymbol:null,baseSymbol:null};var ba=function(e){function t(){return da(this,t),ha(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return ma(t,r["Component"]),pa(t,[{key:"render",value:function(){var e=this.props,t=e.quote,n=e.order,a=e.showSymbols?" "+t.get("symbol"):null;return r.createElement("tr",null,r.createElement("td",null,m.a.format_number(n.getPrice(),t.get("precision"))," ",a),r.createElement("td",null,r.createElement(An.a,{amount:n[n.isBid()?"amountToReceive":"amountForSale"]().getAmount(),asset:n[n.isBid()?"amountToReceive":"amountForSale"]().asset_id})),r.createElement("td",null,r.createElement(ua.a,{time:n.settlement_date})))}}]),t}();ba.defaultProps={showSymbols:!1,invert:!1};var ga=function(e){function t(){return da(this,t),ha(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return ma(t,r["Component"]),pa(t,[{key:"shouldComponentUpdate",value:function(e){return e.currentAccount!==this.props.currentAccount||e.orders!==this.props.orders}},{key:"render",value:function(){var e=this.props,t=e.orders,n=e.base,a=e.quote,o=e.quoteSymbol,s=e.baseSymbol,i=null;if(!(t.size>0&&n&&a))return null;var l=0;return i=t.sort(function(e,t){return e.isBefore(t)?-1:1}).map(function(e){return r.createElement(ba,{key:l++,order:e,base:n,quote:a})}).toArray(),r.createElement("div",{key:"open_orders",className:"grid-block no-overflow small-12 no-padding vertical medium-horizontal middle-content"},r.createElement("div",{className:"small-12 order-1",style:{paddingBottom:"1rem"}},r.createElement("div",{className:"exchange-bordered"},this.props.withHeader&&r.createElement("div",{className:"exchange-content-header"},r.createElement(b.a,{content:"exchange.settle_orders"})),r.createElement("div",{className:"grid-block",style:{maxHeight:"400px",overflow:"hidden"},ref:"orders"},r.createElement("table",{className:"table order-table text-right table-hover"},r.createElement(fa,{type:"buy",baseSymbol:s,quoteSymbol:o}),r.createElement("tbody",{ref:"orders"},i))))))}}]),t}();ga.defaultProps={base:{},quote:{},orders:{},quoteSymbol:"",baseSymbol:""},ga.propTypes={base:p.object.isRequired,quote:p.object.isRequired,orders:p.object.isRequired,quoteSymbol:p.string.isRequired,baseSymbol:p.string.isRequired};var ya=ga,va=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var _a=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["Component"]),va(t,[{key:"_addMarket",value:function(e,t){var n=e+"_"+t;this.props.starredMarkets.has(n)?un.a.removeStarMarket(e,t):un.a.addStarMarket(e,t)}},{key:"render",value:function(){var e=this.props,t=e.quoteAsset,n=e.baseAsset,a=e.starredMarkets,o=e.hasPrediction,s=e.feedPrice,i=e.showCallLimit,l=e.lowestCallPrice,c=e.marketReady,u=e.latestPrice,p=(e.currentPeriod,e.marketStats),d=(e.showDepthChart,e.buckets,e.bucketSize,e.showIndicators,e.onBorrowBase,e.onBorrowQuote,e.indicators,e.indicatorSettings,e.currentMouseItem,n.get("symbol")),h=t.get("symbol"),m=h+"_"+d,f=a.has(m)?"gold-star":"grey-star",g=p.get("change"),y=0===parseFloat(g)?"":parseFloat(g)<0?"negative":"positive",v=""===y?"":"positive"===y?"change-up":"change-down",E=p.get("volumeBase"),k=p.get("volumeQuote");return r.createElement("div",{className:"grid-block shrink no-padding overflow-visible top-bar"},r.createElement("div",{className:"grid-block overflow-visible"},r.createElement("div",{className:"grid-block shrink show-for-large"},r.createElement("span",{className:"v-align clickable",onClick:this._addMarket.bind(this,h,d)},r.createElement("span",{style:{paddingRight:0},className:"market-symbol"},r.createElement(Pn.a,{className:f,name:"fi-star"})),r.createElement("span",{className:"market-symbol"},r.createElement("span",{style:{fontSize:"1.2em"}},r.createElement(_.a,{name:h}))," / ",r.createElement(_.a,{name:d})))),r.createElement("div",{className:"grid-block vertical",style:{overflow:"visible"}},r.createElement("ul",{className:"market-stats stats top-stats medium-12"},u?r.createElement(O,{ready:c,price:u.full,hideBase:!0,withYuan:!0,quote:t,base:n,hideQuote:!0,content:"exchange.latest"}):null,r.createElement("li",{className:"stat"},r.createElement("span",null,r.createElement(b.a,{className:"nowrap",component:"span",content:"account.hour_24"}),r.createElement("br",null),r.createElement("b",{className:"value "+y},c?g:0,r.createElement("span",{className:v}," ",""===v?null:"change-up"===v?r.createElement("span",null,"↑"):r.createElement("span",null,"↓"))),r.createElement("span",null,"%"))),E>=0?r.createElement(O,{ready:c,decimals:0,volume:!0,price:E,volume2:k,base:n,quote:t,content:"exchange.volume_24"}):null,!o&&s?r.createElement(O,{toolTip:D.a.translate("tooltip.settle_price"),ready:c,price:s.toReal(),quote:t,base:n,content:"exchange.settle"}):null,l&&i?r.createElement(O,{toolTip:D.a.translate("tooltip.call_limit"),ready:c,className:"is-call",price:l,quote:t,base:n,content:"explorer.block.call_limit"}):null,s&&i?r.createElement(O,{toolTip:D.a.translate("tooltip.margin_price"),ready:c,className:"is-call",price:s.getSqueezePrice({real:!0}),quote:t,base:n,content:"exchange.squeeze"}):null))))}}]),t}(),Ea=n(4),ka=n(344),wa=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var s,i=e[Symbol.iterator]();!(r=(s=i.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{!r&&i.return&&i.return()}finally{if(a)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),Aa=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function Ca(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Sa=[{key:"my-market",label:"exchange.tabs.market"},{key:"my-order",label:"exchange.tabs.orders"},{key:"order-book-buy",label:"exchange.tabs.bidask"},{key:"depth-chart",label:"exchange.tabs.depthChart"},{key:"market-history",label:"exchange.tabs.trades"},{key:"open-settle-order",label:"exchange.tabs.settle"}],Oa=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state=n._initialState(e),n._getWindowSize=Object(Ln.debounce)(n._getWindowSize.bind(n),150),n._checkFeeStatus=n._checkFeeStatus.bind(n),n.psInit=!0,n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["Component"]),Aa(t,[{key:"_initialState",value:function(e){var t=e.viewSettings,n={forSaleText:"",toReceiveText:"",priceText:"",for_sale:new wt.a({asset_id:e.baseAsset.get("id"),precision:e.baseAsset.get("precision")}),to_receive:new wt.a({asset_id:e.quoteAsset.get("id"),precision:e.quoteAsset.get("precision")}),price:null};n.price=new wt.f({base:n.for_sale,quote:n.to_receive});var r={forSaleText:"",toReceiveText:"",priceText:"",for_sale:new wt.a({asset_id:e.quoteAsset.get("id"),precision:e.quoteAsset.get("precision")}),to_receive:new wt.a({asset_id:e.baseAsset.get("id"),precision:e.baseAsset.get("precision")}),price:null};r.price=new wt.f({base:r.for_sale,quote:r.to_receive});var a=Sa[0];return{history:[],buySellOpen:t.get("buySellOpen",!0),bid:n,ask:r,favorite:!1,showDepthChart:t.get("showDepthChart",!1),leftOrderBook:t.get("leftOrderBook",!1),buyDiff:!1,sellDiff:!1,buySellTop:t.get("buySellTop",!0),buyFeeAssetIdx:t.get("buyFeeAssetIdx",0),sellFeeAssetIdx:t.get("sellFeeAssetIdx",0),currentMouseItem:{},currentInfoTab:a,height:window.innerHeight,width:window.innerWidth,chartHeight:t.get("chartHeight",425),currentPeriod:t.get("currentPeriod",7776e3)}}},{key:"_getLastMarketKey",value:function(){var e=Ea.a.instance().chain_id;return"lastMarket"+(e?"_"+e.substr(0,8):"")}},{key:"componentWillMount",value:function(){window.removeEventListener("optimizedResize",this._getWindowSize),this._checkFeeStatus()}},{key:"componentDidMount",value:function(){un.a.changeViewSetting.defer(Ca({},this._getLastMarketKey(),this.props.quoteAsset.get("symbol")+"_"+this.props.baseAsset.get("symbol"))),window.addEventListener("optimizedResize",this._getWindowSize)}},{key:"_checkFeeStatus",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[this.props.coreAsset,this.props.baseAsset,this.props.quoteAsset],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.props.currentAccount,r={},a=[];t.forEach(function(e){a.push(Object(ka.b)({accountID:n.get("id"),feeID:e.get("id"),type:"limit_order_create"}))}),Promise.all(a).then(function(n){t.forEach(function(e,t){r[e.get("id")]=n[t]}),m.a.are_equal_shallow(e.state.feeStatus,r)||e.setState({feeStatus:r})})}},{key:"_getWindowSize",value:function(){var e=window,t=e.innerHeight,n=e.innerWidth;if(t!==this.state.height||n!==this.state.width){this.setState({height:t,width:n});this.refs.center}}},{key:"componentWillReceiveProps",value:function(e){this.refs.center&&this.psInit&&(this.refs.center&&(this.psInit=!1));return e.quoteAsset===this.props.quoteAsset&&e.baseAsset===this.props.baseAsset&&e.currentAccount===this.props.currentAccount||this._checkFeeStatus([e.coreAsset,e.baseAsset,e.quoteAsset],e.currentAccount),e.quoteAsset.get("symbol")!==this.props.quoteAsset.get("symbol")||e.baseAsset.get("symbol")!==this.props.baseAsset.get("symbol")?(this.setState(this._initialState(e)),un.a.changeViewSetting(Ca({},this._getLastMarketKey(),e.quoteAsset.get("symbol")+"_"+e.baseAsset.get("symbol")))):this.props.sub&&e.bucketSize!==this.props.bucketSize?this._changeBucketSize(e.bucketSize):void 0}},{key:"_getFeeAssets",value:function(e,t,n){var r=this,a=this.props.currentAccount,o=this.state.feeStatus;function s(e,t){-1===e.indexOf(t)&&e.push(t)}var i=[n,e===n?t:e];s(i,e),s(i,t);var l=[n,t===n?e:t];s(l,e),s(l,t);var c={};function u(e,t,r){var a=void 0;return(e=e.filter(function(e){return!!t[e.get("id")]&&(function(e){return o[e]&&o[e].hasPoolBalance}(e.get("id"))&&function(e){return o[e]&&o[e].hasBalance}(e.get("id")))})).length?a=e[Math.min(e.length-1,r)]:(a=n,e.push(n)),{assets:e,asset:a}}a.get("balances",[]).filter(function(n,r){return["1.3.0",e.get("id"),t.get("id")].indexOf(r)>=0}).forEach(function(e,t){var n=dn.b.getObject(e);c[t]={balance:n?parseInt(n.get("balance"),10):0,fee:r._getFee(dn.b.getAsset(t))}});var p=u(i,c,this.state.sellFeeAssetIdx),d=p.assets,h=p.asset,m=u(l,c,this.state.buyFeeAssetIdx),f=m.assets,b=m.asset;return{sellFeeAsset:h,sellFeeAssets:d,sellFee:this._getFee(h),buyFeeAsset:b,buyFeeAssets:f,buyFee:this._getFee(b)}}},{key:"_getFee",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.coreAsset;return this.state.feeStatus[e.get("id")]&&this.state.feeStatus[e.get("id")].fee}},{key:"_verifyFee",value:function(e,t,n,r){var a=this._getFee(),o=e.getAmount()+t;return"1.3.0"===e.asset_id?a.getAmount()<=r?"1.3.0":null:o<=n?e.asset_id:a.getAmount()<=r&&"1.3.0"!==e.asset_id?"1.3.0":null}},{key:"_createLimitOrderConfirm",value:function(e,t,n,r,a,o){var s=!(arguments.length>6&&void 0!==arguments[6])||arguments[6];arguments[7].preventDefault();var i=this.props.marketData,l=i.highestBid,c=i.lowestAsk,u=this.state["sell"===o?"ask":"bid"];n=u.for_sale.clone(n?parseInt(dn.b.getObject(n).toJS().balance,10):0),r=new wt.a({amount:r?parseInt(dn.b.getObject(r).toJS().balance,10):0});var p=this._getFee(a),d=this._verifyFee(p,u.for_sale.getAmount(),n.getAmount(),r.getAmount());if(!d)return Hr.b.addNotification({message:"Insufficient funds to pay fees",level:"error"});if("buy"===o&&c){var h=this.state.bid.price.toReal()/c.getPrice();if(h>1.2)return this.refs.buy.show(),this.setState({buyDiff:h})}else if("sell"===o&&l){var m=1/(this.state.ask.price.toReal()/l.getPrice());if(m>1.2)return this.refs.sell.show(),this.setState({sellDiff:m})}var f=t.getIn(["bitasset","is_prediction_market"]);return u.for_sale.gt(n)&&!f?Hr.b.addNotification({message:"Insufficient funds to place order, you need at least "+u.for_sale.getAmount({real:!0})+" "+t.get("symbol"),level:"error"}):u.for_sale.getAmount()>0&&u.to_receive.getAmount()>0?"sell"===o&&f&&s?this._createPredictionShort(d):void this._createLimitOrder(o,d):Hr.b.addNotification({message:"Please enter a valid amount and price",level:"error"})}},{key:"_createLimitOrder",value:function(e,t){var n=this.state["sell"===e?"ask":"bid"],r=new wt.e({for_sale:n.for_sale,to_receive:n.to_receive,seller:this.props.currentAccount.get("id"),fee:{asset_id:t,amount:0}}),a=cn.a.getMarketID(this.props.baseAsset,this.props.quoteAsset),o=a.marketID,s=a.first,i=this.props.marketDirections.get(o);if(i&&s.get("id")!==this.props.baseAsset.get("id")||!i&&s.get("id")!==this.props.baseAsset.get("id")){var l={};l[o]=!i,un.a.changeMarketDirection(l)}return d.a.createLimitOrder2(r).then(function(e){e.error&&"wallet locked"!==e.error.message&&Hr.b.addNotification({message:"Unknown error. Failed to place order for "+n.to_receive.getAmount({real:!0})+" "+n.to_receive.asset_id,level:"error"})}).catch(function(e){console.log("order failed:",e)})}},{key:"_createPredictionShort",value:function(e){var t=this.state.ask,n=new wt.e({for_sale:t.for_sale,to_receive:t.to_receive,seller:this.props.currentAccount.get("id"),fee:{asset_id:e,amount:0}});Promise.all([Object(dn.f)("getAsset",this.props.quoteAsset.getIn(["bitasset","options","short_backing_asset"]))]).then(function(e){var t=wa(e,1)[0],r=new wt.a({amount:n.amount_for_sale.getAmount(),asset_id:t.get("id"),precision:t.get("precision")});d.a.createPredictionShort(n,r).then(function(e){e.error&&"wallet locked"!==e.error.message&&Hr.b.addNotification({message:"Unknown error. Failed to place order",level:"error"})})})}},{key:"_forceBuy",value:function(e,t,n,r){var a=this.state["sell"===e?"ask":"bid"];n=a.for_sale.clone(n?parseInt(dn.b.getObject(n).get("balance"),10):0),r=new wt.a({amount:r?parseInt(dn.b.getObject(r).toJS().balance,10):0});var o=this._getFee(t),s=this._verifyFee(o,a.for_sale.getAmount(),n.getAmount(),r.getAmount());s?this._createLimitOrder(e,s):console.error("Unable to pay fees, aborting limit order creation")}},{key:"_forceSell",value:function(e,t,n,r){var a=this.state["sell"===e?"ask":"bid"];n=a.for_sale.clone(n?parseInt(dn.b.getObject(n).get("balance"),10):0),r=new wt.a({amount:r?parseInt(dn.b.getObject(r).toJS().balance,10):0});var o=this._getFee(t),s=this._verifyFee(o,a.for_sale.getAmount(),n.getAmount(),r.getAmount());s?this._createLimitOrder(e,s):console.error("Unable to pay fees, aborting limit order creation")}},{key:"_cancelLimitOrder",value:function(e,t){t.preventDefault();var n=this.props.currentAccount;d.a.cancelLimitOrder(n.get("id"),e)}},{key:"_changeBucketSize",value:function(e,t){if(t&&t.preventDefault(),e!==this.props.bucketSize){d.a.changeBucketSize.defer(e);var n=this.props.sub.split("_");d.a.unSubscribeMarket.defer(n[0],n[1]),this.props.subToMarket(this.props,e)}}},{key:"_toggleOpenBuySell",value:function(){un.a.changeViewSetting({buySellOpen:!this.state.buySellOpen}),this.setState({buySellOpen:!this.state.buySellOpen})}},{key:"_toggleCharts",value:function(){un.a.changeViewSetting({showDepthChart:!this.state.showDepthChart}),this.setState({showDepthChart:!this.state.showDepthChart})}},{key:"_moveOrderBook",value:function(){un.a.changeViewSetting({leftOrderBook:!this.state.leftOrderBook}),this.setState({leftOrderBook:!this.state.leftOrderBook})}},{key:"_currentPriceClick",value:function(e,t){var n="bid"===e,r=this.state[e];r.price=t[n?"invert":"clone"](),r.priceText=r.price.toReal(),n?this._setForSale(r,n)||this._setReceive(r,n):this._setReceive(r,n)||this._setForSale(r,n),this.forceUpdate()}},{key:"_orderbookClick",value:function(e){var t=e.isBid(),n=e.totalToReceive({noCache:!0}),r=n.times(e.sellPrice()),a=new wt.f({base:t?r:n,quote:t?n:r}),o=this.state[t?"bid":"ask"];o.price=a,o.priceText=a.toReal();var s=Ca({},t?"ask":"bid",{for_sale:n,forSaleText:n.getAmount({real:!0}),to_receive:r,toReceiveText:r.getAmount({real:!0}),price:a,priceText:a.toReal()});t?this._setForSale(o,t)||this._setReceive(o,t):this._setReceive(o,t)||this._setForSale(o,t),this.setState(s)}},{key:"_borrowQuote",value:function(){this.refs.borrowQuote.show()}},{key:"_borrowBase",value:function(){this.refs.borrowBase.show()}},{key:"_getSettlementInfo",value:function(){var e=this.props,t=e.lowestCallPrice,n=e.feedPrice,r=e.quoteAsset,a=!1;return n&&(a=n.inverted?t<=n.toReal():t>=n.toReal()),!(!a||!t||r.getIn(["bitasset","is_prediction_market"]))}},{key:"onChangeFeeAsset",value:function(e,t){t.preventDefault(),"buy"===e?(this.setState({buyFeeAssetIdx:t.target.value}),un.a.changeViewSetting({buyFeeAssetIdx:t.target.value})):(this.setState({sellFeeAssetIdx:t.target.value}),un.a.changeViewSetting({sellFeeAssetIdx:t.target.value}))}},{key:"onChangeChartHeight",value:function(e){var t=e.value,n=e.increase,r=t||this.state.chartHeight+(n?20:-20);this.setState({chartHeight:r}),un.a.changeViewSetting({chartHeight:r})}},{key:"_toggleBuySellPosition",value:function(){this.setState({buySellTop:!this.state.buySellTop}),un.a.changeViewSetting({buySellTop:!this.state.buySellTop})}},{key:"_setReceive",value:function(e,t){return!(!e.price.isValid()||!e.for_sale.hasAmount())&&(e.to_receive=e.for_sale.times(e.price),e.toReceiveText=e.to_receive.getAmount({real:!0}).toString(),!0)}},{key:"_setForSale",value:function(e,t){return!(!e.price.isValid()||!e.to_receive.hasAmount())&&(e.for_sale=e.to_receive.times(e.price,!0),e.forSaleText=e.for_sale.getAmount({real:!0}).toString(),!0)}},{key:"_setPrice",value:function(e){return!(!e.for_sale.hasAmount()||!e.to_receive.hasAmount())&&(e.price=new wt.f({base:e.for_sale,quote:e.to_receive}),e.priceText=e.price.toReal().toString(),!0)}},{key:"_setPriceText",value:function(e,t){var n=e[t?"for_sale":"to_receive"],r=e[t?"to_receive":"for_sale"];n.hasAmount()&&r.hasAmount()&&(e.priceText=new wt.f({base:n,quote:r}).toReal().toString())}},{key:"_onInputPrice",value:function(e,t){var n=this.state[e],r="bid"===e;n.price=new wt.f({base:n[r?"for_sale":"to_receive"],quote:n[r?"to_receive":"for_sale"],real:parseFloat(t.target.value)||0}),r?this._setForSale(n,r)||this._setReceive(n,r):this._setReceive(n,r)||this._setForSale(n,r),n.priceText=t.target.value,this.forceUpdate()}},{key:"_onInputSell",value:function(e,t,n){var r=this.state[e];r.for_sale.setAmount({real:parseFloat(n.target.value)||0}),r.price.isValid()?this._setReceive(r,t):this._setPrice(r),r.forSaleText=n.target.value,this._setPriceText(r,"bid"===e),this.forceUpdate()}},{key:"_onInputReceive",value:function(e,t,n){var r=this.state[e];r.to_receive.setAmount({real:parseFloat(n.target.value)||0}),r.price.isValid()?this._setForSale(r,t):this._setPrice(r),r.toReceiveText=n.target.value,this._setPriceText(r,"bid"===e),this.forceUpdate()}},{key:"isMarketFrozen",value:function(){var e=this.props,t=e.baseAsset,n=e.quoteAsset,r=t.getIn(["options","whitelist_markets"]).toJS(),a=n.getIn(["options","whitelist_markets"]).toJS(),o=t.getIn(["options","blacklist_markets"]).toJS(),s=n.getIn(["options","blacklist_markets"]).toJS();return a.length&&-1===a.indexOf(t.get("id"))?{isFrozen:!0,frozenAsset:n.get("symbol")}:r.length&&-1===r.indexOf(n.get("id"))?{isFrozen:!0,frozenAsset:t.get("symbol")}:s.length&&-1!==s.indexOf(t.get("id"))?{isFrozen:!0,frozenAsset:n.get("symbol")}:o.length&&-1!==o.indexOf(n.get("id"))?{isFrozen:!0,frozenAsset:t.get("symbol")}:{isFrozen:!1}}},{key:"_toggleMiniChart",value:function(){un.a.changeViewSetting({miniDepthChart:!this.props.miniDepthChart})}},{key:"_handleMouseMove",value:function(e){var t=this;setTimeout(function(){return t.setState({currentMouseItem:e})})}},{key:"render",value:function(){var e=this.props,t=e.currentAccount,n=e.marketLimitOrders,a=e.marketCallOrders,o=e.marketData,s=e.activeMarketHistory,i=e.invertedCalls,l=e.starredMarkets,c=e.quoteAsset,u=e.baseAsset,p=e.lowestCallPrice,d=e.marketStats,m=e.marketReady,f=e.marketSettleOrders,b=e.bucketSize,g=e.totals,v=e.feedPrice,_=(e.buckets,e.coreAsset),E=o.combinedBids,k=o.combinedAsks,w=o.lowestAsk,A=o.highestBid,C=(o.flatBids,o.flatAsks,o.flatCalls,o.flatSettles,this.state),S=(C.elements,C.bid),O=C.ask,x=C.leftOrderBook,P=C.showDepthChart,D=(C.tools,C.chartHeight),N=C.buyDiff,I=C.sellDiff,F=C.width,j=C.buySellTop,M=(C.currentInfoTab,this.isMarketFrozen()),R=M.isFrozen,B=(M.frozenAsset,null),q=null,L=null,V=null,U=null,H=null,z=void 0,W=void 0,J=!1,G=void 0,$=void 0,Y="1.2.3"===t.get("id");if(c.size&&u.size&&t.size){if(q=c,W=(B=u).get("symbol"),z=q.get("symbol"),L=t.get("balances").toJS())for(var K in L)K===q.get("id")&&(V=L[K]),K===B.get("id")&&(U=L[K]),"1.3.0"===K&&(H=L[K]);J=this._getSettlementInfo()}var Q=!!c.get("bitasset_data_id"),X=!!u.get("bitasset_data_id");w&&A&&(w.getPrice(),A.getPrice());if(s.size){var Z=s.take(3),ee=Z.first(),te=Z.last(),ne=void 0,re=void 0,ae=!1;ee.pays.asset_id===B.get("id")?(ne=B,re=q,ae=!0):(ne=q,re=B);var oe=B.get("id").split(".")[2]>q.get("id").split(".")[2];if(G=cn.a.parse_order_history(ee,ne,re,ae,oe),ae=!1,te){te.pays.asset_id===B.get("id")?(ne=B,re=q,ae=!0):(ne=q,re=B);var se=cn.a.parse_order_history(te,ne,re,ae,oe);$=G.full===se.full?"":G.full-se.full>0?"change-up":"change-down"}}if(!_||!this.state.feeStatus)return null;var ie=this._getFeeAssets(q,B,_),le=ie.sellFeeAsset,ce=ie.sellFeeAssets,ue=ie.sellFee,pe=ie.buyFeeAsset,de=ie.buyFeeAssets,he=ie.buyFee,me=B.getIn(["bitasset","is_prediction_market"])||q.getIn(["bitasset","is_prediction_market"]),fe=null;me&&(fe=c.getIn(["options","description"]),fe=wr.a.parseDescription(fe).main);var be=!1;F<1e3&&(be=!0,x=!1);var ge=x?2:1,ye=Math.max(this.state.height>1100?D:D-125,300),ve=R?null:r.createElement(Or,{onBorrow:!Y&&X?this._borrowBase.bind(this):null,currentAccount:t,backedCoin:B.get("symbol")in this.props.backedCoins,currentBridges:this.props.bridgeCoins.get(B.get("symbol"))||null,smallScreen:be,isOpen:this.state.buySellOpen,onToggleOpen:this._toggleOpenBuySell.bind(this),className:y()("bgcolor-primary small-12 medium-6 no-padding",{disabled:Y},this.state.flipBuySell?"order-"+(j?2:5*ge)+" sell-form":"order-"+(j?1:4*ge)+" buy-form"),type:"bid",amount:S.toReceiveText,price:S.priceText,total:S.forSaleText,quote:q,base:B,amountChange:this._onInputReceive.bind(this,"bid",!0),priceChange:this._onInputPrice.bind(this,"bid"),setPrice:this._currentPriceClick.bind(this),totalChange:this._onInputSell.bind(this,"bid",!1),balance:U,balanceId:B.get("id"),onSubmit:this._createLimitOrderConfirm.bind(this,q,B,U,H,pe,"buy"),balancePrecision:B.get("precision"),quotePrecision:q.get("precision"),totalPrecision:B.get("precision"),currentPrice:w.getPrice(),currentPriceObject:w,account:t.get("name"),fee:he,hasFeeBalance:this.state.feeStatus[he.asset_id].hasBalance,feeAssets:de,feeAsset:pe,onChangeFeeAsset:this.onChangeFeeAsset.bind(this,"buy"),isPredictionMarket:B.getIn(["bitasset","is_prediction_market"]),onTogglePosition:this._toggleBuySellPosition.bind(this)}),_e=R?null:r.createElement(Or,{onBorrow:!Y&&Q?this._borrowQuote.bind(this):null,currentAccount:t,backedCoin:q.get("symbol")in this.props.backedCoins,currentBridges:this.props.bridgeCoins.get(q.get("symbol"))||null,smallScreen:be,isOpen:this.state.buySellOpen,onToggleOpen:this._toggleOpenBuySell.bind(this),className:y()("bgcolor-primary small-12 medium-6 no-padding",{disabled:Y},this.state.flipBuySell?"order-"+(j?1:4*ge)+" buy-form":"order-"+(j?2:5*ge)+" sell-form"),type:"ask",amount:O.forSaleText,price:O.priceText,total:O.toReceiveText,quote:q,base:B,amountChange:this._onInputSell.bind(this,"ask",!1),priceChange:this._onInputPrice.bind(this,"ask"),setPrice:this._currentPriceClick.bind(this),totalChange:this._onInputReceive.bind(this,"ask",!0),balance:V,balanceId:q.get("id"),onSubmit:this._createLimitOrderConfirm.bind(this,B,q,V,H,le,"sell"),balancePrecision:q.get("precision"),quotePrecision:q.get("precision"),totalPrecision:B.get("precision"),currentPrice:A.getPrice(),currentPriceObject:A,account:t.get("name"),fee:ue,hasFeeBalance:this.state.feeStatus[ue.asset_id].hasBalance,feeAssets:ce,feeAsset:le,onChangeFeeAsset:this.onChangeFeeAsset.bind(this,"sell"),isPredictionMarket:q.getIn(["bitasset","is_prediction_market"])}),Ee=r.createElement(ln,{latest:G,changeClass:$,orders:n,calls:a,invertedCalls:i,combinedBids:E,combinedAsks:k,highestBid:A,lowestAsk:w,totalBids:g.bid,totalAsks:g.ask,base:B,quote:q,baseSymbol:W,quoteSymbol:z,height:ye,width:F,onClick:this._orderbookClick.bind(this),horizontal:!1,moveOrderBook:this._moveOrderBook.bind(this),flipOrderBook:this.props.viewSettings.get("flipOrderBook"),marketReady:m,currentAccount:this.props.currentAccount.get("id")});return r.createElement("div",{className:"market-layout"},r.createElement("div",{className:"market-main _scroll-bar",style:{overflowX:"hidden",boxShadow:"0 0 2px 2px "+T.f.$colorNoir}},r.createElement(_a,{quoteAsset:c,baseAsset:u,hasPrediction:me,starredMarkets:l,lowestAsk:w,highestBid:A,lowestCallPrice:p,showCallLimit:J,feedPrice:v,marketReady:m,latestPrice:G,showDepthChart:P,marketStats:d,onToggleCharts:this._toggleCharts.bind(this)}),r.createElement("div",{className:"grid-block shrink no-overflow",id:"market-charts"},r.createElement(Vr,{priceData:Ir.a.getState()[""+z+W+b]||[],onChangeBucket:this._changeBucketSize.bind(this),base:B,quote:q,latestPrice:G,baseSymbol:W,quoteSymbol:z,height:366,bucketSize:b})),r.createElement("div",{className:"grid-block no-padding exchange-forms"},ve,_e,r.createElement(ca,{type:"buy",ref:"buy",onForce:this._forceBuy.bind(this,"buy",pe,U,H),diff:N,hasOrders:k.length>0}),r.createElement(ca,{type:"sell",ref:"sell",onForce:this._forceSell.bind(this,"sell",le,V,H),diff:I,hasOrders:E.length>0})),r.createElement(h.a,{smallScreen:this.props.smallScreen,className:y()({disabled:Y},"align-spaced ps-container middle-content order-6"),key:"open_orders",orders:n,currentAccount:t,base:B,quote:q,baseSymbol:W,quoteSymbol:z,onCancel:this._cancelLimitOrder.bind(this),flipMyOrders:this.props.viewSettings.get("flipMyOrders")}),r.createElement(ya,{withHeader:!1,key:"settle_orders",className:y()(be||x?"":"medium-6 xlarge-4 order-12","small-12 medium-6 no-padding align-spaced ps-container middle-content order-12"),orders:f,base:B,quote:q,baseSymbol:W,quoteSymbol:z})),r.createElement("div",{className:"market-markets"},r.createElement(nr,{className:"left-order-book no-padding no-overflow",headerStyle:{paddingTop:0},columns:[{name:"star",index:1},{name:"market",index:2},{name:"vol",index:3},{name:"price",index:4},{name:"change",index:5}],findColumns:[{name:"market",index:1},{name:"issuer",index:2},{name:"vol",index:3},{name:"add",index:4}],current:z+"_"+W})),r.createElement("div",{className:"market-orders",style:{borderTop:"1px solid "+T.i.$colorDark}},r.createElement(wn,{className:"no-padding no-overflow middle-content small-12",headerStyle:{paddingTop:0},history:s,currentAccount:t,myHistory:t.get("history"),base:B,quote:q,baseSymbol:W,quoteSymbol:z,isNullAccount:Y})),r.createElement("div",{className:"market-orderbook",id:"orderBook"},Ee),r.createElement("div",null),!Y&&Q?r.createElement(Ur.a,{ref:"borrowQuote",quote_asset:c.get("id"),backing_asset:c.getIn(["bitasset","options","short_backing_asset"]),account:t}):null,!Y&&X?r.createElement(Ur.a,{ref:"borrowBase",quote_asset:u.get("id"),backing_asset:u.getIn(["bitasset","options","short_backing_asset"]),account:t}):null,r.createElement(sa,null))}}]),t}();Oa.propTypes={marketCallOrders:p.object.isRequired,activeMarketHistory:p.object.isRequired,viewSettings:p.object.isRequired,priceData:p.array.isRequired,volumeData:p.array.isRequired},Oa.defaultProps={marketCallOrders:[],activeMarketHistory:{},viewSettings:{},priceData:[],volumeData:[]};var xa=Oa,Ta=n(153),Pa=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function Da(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Na(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Ia(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Fa=function(e){function t(){return Da(this,t),Na(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Ia(t,r["Component"]),Pa(t,[{key:"render",value:function(){var e=this.props.match.params.marketID.split("_");return r.createElement(u.a,{stores:[o.a,s.a,i.b],inject:{marketLimitOrders:function(){return o.a.getState().marketLimitOrders},marketCallOrders:function(){return o.a.getState().marketCallOrders},invertedCalls:function(){return o.a.getState().invertedCalls},marketSettleOrders:function(){return o.a.getState().marketSettleOrders},marketData:function(){return o.a.getState().marketData},totals:function(){return o.a.getState().totals},priceData:function(){return o.a.getState().priceData},volumeData:function(){return o.a.getState().volumeData},activeMarketHistory:function(){return o.a.getState().activeMarketHistory},bucketSize:function(){return o.a.getState().bucketSize},buckets:function(){return o.a.getState().buckets},lowestCallPrice:function(){return o.a.getState().lowestCallPrice},feedPrice:function(){return o.a.getState().feedPrice},currentAccount:function(){return s.a.getState().currentAccount},linkedAccounts:function(){return s.a.getState().linkedAccounts},viewSettings:function(){return i.b.getState().viewSettings},settings:function(){return i.b.getState().settings},preferredBases:function(){return i.b.getState().preferredBases},starredMarkets:function(){return i.b.getState().starredMarkets},marketDirections:function(){return i.b.getState().marketDirections},marketStats:function(){return o.a.getState().marketStats},marketReady:function(){return o.a.getState().marketReady},backedCoins:function(){return l.b.getState().backedCoins.get("JADE",[])},bridgeCoins:function(){return l.b.getState().bridgeCoins},miniDepthChart:function(){return i.b.getState().viewSettings.get("miniDepthChart",!0)}}},r.createElement(Va,{router:this.props.history,quoteAsset:e[0],baseAsset:e[1]}))}}]),t}(),ja=Object(dn.e)(),Ma=void 0,Ra=void 0,Ba=void 0,qa=void 0,La=void 0,Va=((Ua=function(e){function t(e){Da(this,t);var n=Na(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={sub:null},n._subToMarket=n._subToMarket.bind(n),n}return Ia(t,r["Component"]),Pa(t,[{key:"componentWillMount",value:function(){var e=this;this.props.quoteAsset.toJS&&this.props.baseAsset.toJS&&this._subToMarket(this.props),ja.on("cancel-order",Ra=d.a.cancelLimitOrderSuccess),ja.on("close-call",Ma=d.a.closeCallOrderSuccess),ja.on("call-order-update",Ba=d.a.callOrderUpdate),ja.on("bitasset-update",qa=d.a.feedUpdate),ja.on("settle-order-update",La=function(t){var n=cn.a.isMarketAsset(e.props.quoteAsset,e.props.baseAsset),r=n.isMarketAsset,a=n.marketAsset;console.log("settle-order-update:",t,"isMarketAsset:",r,"marketAsset:",a),r&&a.id===t.balance.asset_id&&d.a.settleOrderUpdate(a.id)})}},{key:"componentWillReceiveProps",value:function(e){var t=e.baseAsset,n=e.quoteAsset,r=(e.preferredBases,Object(Ta.a)(t.get("symbol"),n.get("symbol")));if(e.baseAsset&&e.baseAsset.getIn(["bitasset","is_prediction_market"])&&!e.quoteAsset&&e.quoteAsset.getIn(["bitasset","is_prediction_market"])?this.props.router.push("/market/"+e.baseAsset.get("symbol")+"_"+e.quoteAsset.get("symbol")):t.get("symbol")===r.base||e.baseAsset.getIn(["bitasset","is_prediction_market"])||e.quoteAsset.getIn(["bitasset","is_prediction_market"])||this.props.router.push("/market/"+e.baseAsset.get("symbol")+"_"+e.quoteAsset.get("symbol")),e.quoteAsset&&e.baseAsset&&!this.state.sub)return this._subToMarket(e);if(e.quoteAsset.get("symbol")!==this.props.quoteAsset.get("symbol")||e.baseAsset.get("symbol")!==this.props.baseAsset.get("symbol")){var a=this.state.sub.split("_");return d.a.unSubscribeMarket(a[0],a[1]),this._subToMarket(e)}}},{key:"componentWillUnmount",value:function(){var e=this.props,t=e.quoteAsset,n=e.baseAsset;d.a.unSubscribeMarket(t.get("id"),n.get("id")),ja&&(ja.off("cancel-order",Ra),ja.off("close-call",Ma),ja.off("call-order-update",Ba),ja.off("bitasset-update",qa),ja.off("settle-order-update",La))}},{key:"_subToMarket",value:function(e,t){var n=e.quoteAsset,r=e.baseAsset,a=e.bucketSize;t&&(a=t),n.get("id")&&r.get("id")&&(d.a.subscribeMarket.defer(r,n,a),this.setState({sub:n.get("id")+"_"+r.get("id")}))}},{key:"render",value:function(){return r.createElement(r.Fragment,null,this.props.marketReady?null:r.createElement(Un.a,null),r.createElement(xa,Object.assign({},this.props,{sub:this.state.sub,subToMarket:this._subToMarket})))}}]),t}()).propTypes={currentAccount:Cn.a.ChainAccount.isRequired,quoteAsset:Cn.a.ChainAsset.isRequired,baseAsset:Cn.a.ChainAsset.isRequired,coreAsset:Cn.a.ChainAsset.isRequired},Ua.defaultProps={currentAccount:"1.2.3",coreAsset:"1.3.0"},Ua);Va=Object(Sn.a)(Va,{keep_updating:!0,show_loader:!0}),Fa=Object(Dn.a)(Fa);var Ua;t.default=Fa}}]);