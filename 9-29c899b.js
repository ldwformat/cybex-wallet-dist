(window.webpackJsonp=window.webpackJsonp||[]).push([[9,8,17],{1549:
/*!*****************************************!*\
  !*** ./components/Forms/MyAccounts.jsx ***!
  \*****************************************/
/*! exports provided: default */
/*! exports used: default */function(e,t,n){"use strict";var a=n(/*! react */0),r=n(/*! prop-types */2),i=n(/*! stores/AccountStore */28),o=n(/*! components/Utility/ChainTypes */20),l=n(/*! components/Forms/AccountSelect */291),s=n(/*! components/Utility/BindToChainState */23),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["Component"]),c(t,[{key:"render",value:function(){var e=this.props.accounts.filter(function(e){return!!e}).filter(function(e){return i.a.isMyAccount(e)}).map(function(e){return e.get("name")}).sort();this.props.className;return a.createElement(l.a,{className:!0,onChange:this.onAccountSelect.bind(this),account_names:e,center:!0})}},{key:"onAccountSelect",value:function(e){this.props.onChange(e)}}]),t}();u.propTypes={accounts:o.a.ChainAccountsList.isRequired,onChange:r.func.isRequired},t.a=Object(s.a)(u,{keep_updating:!0})},1561:
/*!***********************************************!*\
  !*** ./components/Wallet/PasswordConfirm.jsx ***!
  \***********************************************/
/*! exports provided: default */
/*! exports used: default */function(e,t,n){"use strict";var a=n(/*! react */0),r=n.n(a),i=n(/*! react-translate-component */1),o=n.n(i),l=n(/*! immutable */7),s=n.n(l),c=n(/*! classnames */37),u=n.n(c),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var f=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={password:"",confirm:"",errors:s.a.Map(),valid:!1},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.a.Component),p(t,[{key:"componentDidMount",value:function(){this.refs.firstPassword&&this.refs.firstPassword.focus()}},{key:"render",value:function(){var e=this.state,t=(e.password,e.confirm,e.valid,e.errors),n=this.props.newPassword,a=1;return r.a.createElement("div",{className:u()({"has-error":t.size})},r.a.createElement(o.a,{component:"label",content:n?"wallet.new_password":"wallet.password"}),r.a.createElement("section",null,r.a.createElement("input",{className:"full",type:"password",id:"password",ref:"firstPassword",onChange:this.formChange.bind(this),value:this.state.password,tabIndex:a++})),r.a.createElement(o.a,{component:"label",content:n?"wallet.new_confirm":"wallet.confirm"}),r.a.createElement("section",null,r.a.createElement("input",{className:"full",type:"password",id:"confirm",onChange:this.formChange.bind(this),value:this.state.confirm,tabIndex:a++})),r.a.createElement("div",{style:{paddingBottom:10}},t.get("password_match")||t.get("password_length")),this.props.children,r.a.createElement("br",null))}},{key:"formChange",value:function(e){var t=this.state;t[e.target.id]=e.target.value,this.setState(t),this.validate(t)}},{key:"validate",value:function(e){var t=e.password,n=e.confirm;n=n.trim(),t=t.trim();var a=s.a.Map();0!==t.length&&t.length<8&&(a=a.set("password_length","Password must be 8 characters or more")),""!==t&&""!==n&&t!==n&&(a=a.set("password_match","Passwords do not match"));var r=t.length>=8&&t===n;this.setState({errors:a,valid:r}),this.props.onValid(r?t:null)}}]),t}();f.propTypes={onValid:a.PropTypes.func.isRequired},t.a=f},1579:
/*!*********************************************!*\
  !*** ./components/Wallet/BrainkeyInput.jsx ***!
  \*********************************************/
/*! exports provided: default */
/*! exports used: default */function(e,t,n){"use strict";var a,r=n(/*! react */0),i=n.n(r),o=n(/*! classnames */37),l=n.n(o),s=n(/*! cybexjs */3),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();function u(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var m=function(e){function t(){u(this,t);var e=p(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={brnkey:"",loading:!0},e}return f(t,i.a.Component),c(t,[{key:"componentWillMount",value:function(){var e=n(/*! common/dictionary.json */827);console.debug("Result: ",e),a=new Set(e.en.split(",")),this.setState({loading:!1})}},{key:"_checkBrainKey",value:function(){var e=[];this.state.brnkey.split(" ").forEach(function(t,n){if(""!==t){var r=t.toLowerCase();null===(r=r.match(/[a-z]+/))||a.has(r[0])?e.push(i.a.createElement("span",{key:n,style:{padding:"1px",margin:"1px"}},t)):e.push(i.a.createElement(h,{key:n},t))}});var t=void 0,n=!0,r=!0;return e.length>0&&(this.state.brnkey.length<50?(t=this.state.brnkey.length+" characters (50 minimum)",r=!1):e.length<16?t=e.length+" words (16 recommended)":(t=e.length+" words",n=!1)),{warn:n,valid:r,word_count_label:t,checked_words:e}}},{key:"render",value:function(){if(this.state.loading||!a)return i.a.createElement("div",{style:{padding:20}},"Fetching dictionary....");var e=this._checkBrainKey(),t=e.warn,n=e.word_count_label,r=e.checked_words;return i.a.createElement("span",{className:""},i.a.createElement("div",null,i.a.createElement("textarea",{tabIndex:this.props.tabIndex||1,onChange:this.formChange.bind(this),value:this.state.brnkey,id:"brnkey",style:{height:100,minWidth:450}}),i.a.createElement("div",{style:{textAlign:"left"},className:"grid-content no-padding no-overflow"},r),this.state.check_digits&&!this.props.hideCheckDigits?i.a.createElement("div",null,i.a.createElement("br",null),i.a.createElement("pre",{className:"no-overflow"},this.state.check_digits," * Check Digits"),i.a.createElement("br",null)):null,i.a.createElement("p",null,i.a.createElement("i",{className:l()({error:t})},n))))}},{key:"formChange",value:function(e){var t=e.target,n=t.id,a=t.value,r=this._checkBrainKey().valid,i={};if(i[n]=a,"brnkey"===n){var o=s.o.normalize_brainKey(a);this.props.onChange(o.length<50?null:o),i.check_digits=o.length<50?null:s.n.sha1(o).toString("hex").substring(0,4)}this.setState(i),this.props.errorCallback&&this.props.errorCallback(r)}}]),t}();m.propTypes={onChange:r.PropTypes.func.isRequired},t.a=m;var h=function(e){function t(){return u(this,t),p(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return f(t,i.a.Component),c(t,[{key:"render",value:function(){return i.a.createElement("span",{style:{borderBottom:"1px dotted #ff0000",padding:"1px",margin:"1px"}},i.a.createElement("span",{style:{borderBottom:"1px dotted #ff0000"}},this.props.children))}}]),t}()},169:
/*!**************************************************************!*\
  !*** ./components/Wallet/BalanceClaimActive.jsx + 1 modules ***!
  \**************************************************************/
/*! exports provided: default */
/*! all exports used */
/*! ModuleConcatenation bailout: Cannot concat with ./actions/NotificationActions.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./components/LoadingIndicator.tsx */
/*! ModuleConcatenation bailout: Cannot concat with ./actions/BalanceClaimActiveActions.js */
/*! ModuleConcatenation bailout: Cannot concat with ./actions/WalletActions.js */
/*! ModuleConcatenation bailout: Cannot concat with ./components/Forms/MyAccounts.jsx */
/*! ModuleConcatenation bailout: Cannot concat with ./components/Utility/FormattedAsset.jsx */
/*! ModuleConcatenation bailout: Cannot concat with ./lib/alt-react/lib/index.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ./stores/AccountRefsStore.js */
/*! ModuleConcatenation bailout: Cannot concat with ./stores/BalanceClaimActiveStore.js */
/*! ModuleConcatenation bailout: Cannot concat with ./stores/PrivateKeyStore.js */
/*! ModuleConcatenation bailout: Cannot concat with ../node_modules/classnames/index.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ../node_modules/immutable/dist/immutable.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ../node_modules/react-translate-component/index.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ../node_modules/react/index.js (<- Module is not an ECMAScript module) */function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(24),o=n(7),l=n.n(o),s=n(37),c=n.n(s),u=n(65),p=n(156),f=n(52),m=n(135),h=n(290),d=n(168),y=n(18),_=n(1),b=n.n(_),v=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var g=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.a.Component),v(t,[{key:"componentWillReceiveProps",value:function(e){e.claim_account_name&&this.onClaimAccount(e.claim_account_name,e.checked)}},{key:"render",value:function(){var e=this;if(void 0===this.props.balances||!this.props.total_by_account_asset.size)return r.a.createElement("div",null);var t=-1;return r.a.createElement("div",null,r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null),r.a.createElement("th",{style:{textAlign:"center"}},r.a.createElement(b.a,{content:"wallet.unclaimed"})),r.a.createElement("th",{style:{textAlign:"center"}},r.a.createElement(b.a,{content:"wallet.unclaimed_vesting"})),r.a.createElement("th",{style:{textAlign:"center"}},r.a.createElement(b.a,{content:"account.name"})))),r.a.createElement("tbody",null,this.props.total_by_account_asset.map(function(n,a){return r.a.createElement("tr",{key:++t},r.a.createElement("td",null,r.a.createElement("input",{type:"checkbox",checked:!!e.props.checked.get(t),onChange:e.onCheckbox.bind(e,t,n.balances)})),r.a.createElement("td",{style:{textAlign:"right"}},n.unclaimed?r.a.createElement(y.a,{color:"info",amount:n.unclaimed,asset:a.get(1)}):null),r.a.createElement("td",{style:{textAlign:"right"}},n.vesting.unclaimed?r.a.createElement("div",null,r.a.createElement(y.a,{color:"info",amount:n.vesting.unclaimed,hide_asset:!0,asset:a.get(1)}),r.a.createElement("span",null," of "),r.a.createElement(y.a,{color:"info",amount:n.vesting.total,asset:a.get(1)})):null),r.a.createElement("td",null," ",a.get(0)," "))}).toArray())))}},{key:"onCheckbox",value:function(e,t){var n=this.props.checked;n=n.get(e)?n.delete(e):n.set(e,t),d.a.setSelectedBalanceClaims(n)}},{key:"onClaimAccount",value:function(e,t){if(!t.size){var n=-1;this.props.total_by_account_asset.forEach(function(a,r){n++,r.get(0)===e&&(a.unclaimed||a.vesting.unclaimed)&&(t=t.set(n,a.balances))}),t.size&&d.a.setSelectedBalanceClaims(t)}}}]),t}(),w=g=Object(i.connect)(g,{listenTo:function(){return[h.a]},getProps:function(){var e=h.a.getState(),t=e.balances,n=e.address_to_pubkey,a=f.a.getState().keys,r=l.a.Map().asMutable();return t&&(e.total_by_account_asset=t.groupBy(function(e){var t="",i=n.get(e.owner),o=a.get(i);o&&o.import_account_names&&(t=o.import_account_names.join(", "));var s=Math.ceil(function(e,t){var n=r.get(e);return n||(n=l.a.Set().asMutable(),r.set(e,n)),n.add(t),n.size}(l.a.List([t,e.balance.asset_id]),e.owner)/60);return l.a.List([t,e.balance.asset_id,s])}).map(function(e){return e.reduce(function(e,t){return t.public_key_string=n.get(t.owner),e.balances=e.balances.add(t),void 0!=t.vested_balance?(e.vesting.unclaimed+=Number(t.vested_balance.amount),e.vesting.total+=Number(t.balance.amount)):e.unclaimed+=Number(t.balance.amount),e},{unclaimed:0,vesting:{unclaimed:0,total:0},balances:l.a.Set()})}).sortBy(function(e){return e})),e}}),k=n(55),E=n(1549),C=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var O=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.a.Component),C(t,[{key:"componentWillMount",value:function(){var e=f.a.getState().keys.keySeq();d.a.setPubkeys(e),this.existing_keys=e}},{key:"componentWillReceiveProps",value:function(e){var t=f.a.getState().keys.keySeq();t.equals(this.existing_keys)||(this.existing_keys=t,d.a.setPubkeys(t))}},{key:"render",value:function(){if(!this.props.account_refs.size)return r.a.createElement("div",null,r.a.createElement("h5",null,r.a.createElement(b.a,{content:"wallet.no_balance"})));if(this.props.loading)return r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("h5",null,r.a.createElement(b.a,{content:"wallet.loading_balances"}),"…"),r.a.createElement("br",null),r.a.createElement(p.a,{type:"three-bounce"}));if(!this.props.balances||!this.props.balances.size)return r.a.createElement("div",null,r.a.createElement("br",null),r.a.createElement("h5",null,r.a.createElement(b.a,{content:"wallet.no_balance"})));var e=this.props.selected_balances.size&&this.props.claim_account_name,t=e?" ("+this.props.claim_account_name+")":null;return r.a.createElement("div",null,r.a.createElement("div",{className:"content-block center-content"},r.a.createElement("h3",{className:"no-border-bottom"},r.a.createElement(b.a,{content:"wallet.claim_balances"}))),r.a.createElement("div",{className:"grid-block vertical"},r.a.createElement("div",{className:"grid-content",style:{overflowY:"hidden !important"}},r.a.createElement("div",{className:"full-width-content center-content"},r.a.createElement(E.a,{key:this.props.balances,accounts:l.a.List(this.props.account_refs),onChange:this.onClaimAccountChange.bind(this)})),r.a.createElement("br",null)),r.a.createElement("br",null),r.a.createElement(w,null)),r.a.createElement("br",null),r.a.createElement("br",null),r.a.createElement("div",{className:c()("button success",{disabled:!e}),onClick:this.onClaimBalance.bind(this)},r.a.createElement(b.a,{content:"wallet.claim_balance"}),t),r.a.createElement("div",{className:"button cancel",onClick:this.onBack.bind(this)},r.a.createElement(b.a,{content:"wallet.cancel"})))}},{key:"onBack",value:function(e){e.preventDefault(),window.history.back()}},{key:"onClaimAccountChange",value:function(e){d.a.claimAccountChange(e)}},{key:"onClaimBalance",value:function(){k.a.importBalance(this.props.claim_account_name,this.props.selected_balances,!0).catch(function(e){console.error("claimBalance",e);var t=e;try{t=e.data.message}catch(e){}throw u.b.error("Error claiming balance: "+t),e})}}]),t}();O=Object(i.connect)(O,{listenTo:function(){return[h.a,m.a,f.a]},getProps:function(){var e=h.a.getState();return e.account_refs=m.a.getAccountRefs(),e}});t.default=O},1773:
/*!*******************************************!*\
  !*** ./components/Wallet/ImportKeys.scss ***!
  \*******************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){},1774:
/*!***********************************************************************************************************************************!*\
  !*** ../node_modules/file-loader/dist/cjs.js?name=cyb_genesiskeys_bloom_[sha1:hash:hex:7].dat!./assets/cyb_genesiskeys_bloom.dat ***!
  \***********************************************************************************************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){e.exports=n.p+"cyb_genesiskeys_bloom_3cee441.dat"},1775:
/*!************************************!*\
  !*** ./lib/chain/GenesisFilter.js ***!
  \************************************/
/*! exports provided: default */
/*! exports used: default */
/*! ModuleConcatenation bailout: Module uses injected variables (Buffer) */function(t,n,a){"use strict";(function(t){var r=a(/*! cybexjs */3),i=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var o=void 0;try{var l=a(/*! file-loader?name=cyb_genesiskeys_bloom_[sha1:hash:hex:7].dat!assets/cyb_genesiskeys_bloom.dat */1774);if(-1===l.indexOf("3cee441"))throw new Error("Incorrect hash: cyb_genesiskeys_bloom.dat");o=l}catch(e){console.log("WARN: Will be unable to filter CYB 1.0 wallet imports, did not find assets/cyb_genesiskeys_bloom.dat",e)}var s=function(){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),e&&(this.bloom_buffer=e,this.bits_in_filter=8*e.length)}return i(n,[{key:"isAvailable",value:function(){return void 0!==o}},{key:"init",value:function(n){var a=this;if(this.bloom_buffer)n();else{if(!this.isAvailable())throw new Error("Genesis bloom file was not deployed");var r=new XMLHttpRequest;r.responseType="blob",r.onload=function(){if(404!==r.status){var e=new FileReader;e.onload=function(e){var r=new t(e.target.result,"binary");if(1048576!==r.length)throw new Error("Wrong length");a.bits_in_filter=8*r.length,a.bloom_buffer=r,n()},e.readAsBinaryString(r.response)}},r.onerror=function(){console.error("xhr.onerror",e)},r.open("GET",o),r.send()}}},{key:"inGenesis",value:function(e){if(!this.bloom_buffer)throw new Error("Call init() first");for(var t=0;t<3;t++){var n=r.n.sha256(t+":"+e),a=parseInt(n.slice(-3).toString("hex"),16)%this.bits_in_filter,i=a>>3,o=1<<(7&a);if(0==(this.bloom_buffer[i]&o))return!1}return!0}},{key:"filter",value:function(e,t){var n=this;if(!this.isAvailable())return console.log("WARN: Missing bloom filter for CYB 0.9.x wallets"),void t({error:"missing_bloom"});var a=!0;t({initalizing:a}),this.init(function(){try{t({initalizing:a=!1});for(var i=1,o=0;o<e.length;o++){var l=0,s=0,c=e[o],u=c.encrypted_private_keys.length;t({importing:!0,account_name:c.account_name,count:s,total:u});for(var p=c.encrypted_private_keys.length-1;p>=0;p--){if(++s%i==0&&(i=47,t({importing:!0,account_name:c.account_name,count:s,total:u})),!c.public_keys)return void t({error:"missing_public_keys"});var f=c.public_keys[p];if(/^GPH/.test(f)&&(f="CYB"+f.substring(3)),!n.inGenesis(f)){for(var m=r.o.addresses(f,"CYB"),h=!1,d=0;d<m.length;d++)if(n.inGenesis(m[d])){h=!0;break}h||(delete c.encrypted_private_keys[p],delete c.public_keys[p],l++)}}var y=[],_=[];for(p=c.encrypted_private_keys.length-1;p>=0;p--)c.encrypted_private_keys[p]&&(y.push(c.encrypted_private_keys[p]),_.push(c.public_keys[p]));c.encrypted_private_keys=y,t({importing:!1,account_name:c.account_name,count:s-l,total:u}),c.public_keys=_}t({success:!0})}finally{a&&t({initalizing:a=!1})}})}}]),n}();n.a=s}).call(this,a(/*! ./../../../node_modules/buffer/index.js */40).Buffer)},184:
/*!********************************************!*\
  !*** ./components/Wallet/WalletCreate.tsx ***!
  \********************************************/
/*! exports provided: WalletCreate, CreateWalletFromBrainkey */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is referenced from these modules with unsupported syntax: ./Routes.jsx (referenced with import()) */function(e,t,n){"use strict";n.r(t),n.d(t,"WalletCreate",function(){return C}),n.d(t,"CreateWalletFromBrainkey",function(){return O});var a,r=n(/*! react */0),i=n(/*! prop-types */2),o=n(/*! react-router */5),l=n(/*! react-translate-component */1),s=n.n(l),c=n(/*! components/Wallet/BrainkeyInput */1579),u=n(/*! components/Wallet/PasswordConfirm */1561),p=n(/*! stores/WalletDb */14),f=n(/*! stores/WalletManagerStore */61),m=n(/*! actions/WalletActions */55),h=n(/*! alt-react */24),d=n(/*! actions/SettingsActions */21),y=n(/*! components/Common */132),_=n(/*! counterpart */13),b=n.n(_),v=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function k(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var E=((a=function(e){function t(e){g(this,t);var n=w(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={wallet_public_name:"default",valid_password:null,errors:{validBrainkey:!1},isValid:!1,create_submitted:!1,custom_brainkey:e.restoreBrainkey||!1,brnkey:null},n.validate=n.validate.bind(n),n}return k(t,r["Component"]),v(t,[{key:"onBack",value:function(e){e.preventDefault(),window.history.back()}},{key:"onPassword",value:function(e){this.state.valid_password=e,this.setState({valid_password:e},this.validate)}},{key:"onCustomBrainkey",value:function(){this.setState({custom_brainkey:!0})}},{key:"onBrainkey",value:function(e){this.state.brnkey=e,this.setState({brnkey:e},this.validate)}},{key:"onSubmit",value:function(e){e.preventDefault();var t=this.state,n=t.wallet_public_name,a=t.valid_password,r=t.custom_brainkey,i=t.errors;!a||i.wallet_public_name||r&&!i.validBrainkey||(m.a.setWallet(n,a,this.state.brnkey),d.a.changeSetting({setting:"passwordLogin",value:!1}),this.setState({create_submitted:!0}))}},{key:"formChange",value:function(e){var t=e.target.id,n=e.target.value;"wallet_public_name"===t&&(n=n.toLowerCase(),/[^a-z0-9_-]/.test(n))||(this.state[t]=n,this.setState(this.state),this.validate())}},{key:"validate",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state,t=e.errors,n=this.props.wallet_names;t.wallet_public_name=n.has(e.wallet_public_name)?"Wallet "+e.wallet_public_name.toUpperCase()+" exists, please change the name":null;var a=null===t.wallet_public_name&&null!==e.valid_password;e.custom_brainkey&&a&&(a=null!==e.brnkey),this.setState({isValid:a,errors:t})}},{key:"render",value:function(){var e=this,t=this.state.errors,n=!!this.props.current_wallet;return this.state.create_submitted&&this.state.wallet_public_name===this.props.current_wallet?r.createElement("div",null,r.createElement("h4",null,r.createElement(s.a,{content:"wallet.wallet_created"})),r.createElement(o.b,{to:"/dashboard"},r.createElement("div",{className:"button success"},r.createElement(s.a,{content:"wallet.done"})))):r.createElement("div",null,r.createElement("form",{style:{maxWidth:"40rem"},onSubmit:this.onSubmit.bind(this),onChange:this.formChange.bind(this),noValidate:!0},r.createElement("div",{className:"grid-content",style:{textAlign:"left"}},this.props.restoreBrainkey?null:r.createElement(s.a,{component:"p",content:"wallet.create_importkeys_text"}),this.props.restoreBrainkey?null:r.createElement(s.a,{component:"p",content:"wallet.create_text"})),r.createElement(u.a,{onValid:this.onPassword.bind(this)}),n?r.createElement("div",{className:"no-overflow"},r.createElement("br",null),r.createElement("section",null,r.createElement("label",null,r.createElement(s.a,{content:"wallet.name"})),r.createElement("input",{tabIndex:3,type:"text",id:"wallet_public_name",defaultValue:this.state.wallet_public_name})),r.createElement("div",{className:"has-error"},t.wallet_public_name),r.createElement("br",null)):null,r.createElement("div",{className:"no-overflow"},this.state.custom_brainkey?r.createElement("div",null,r.createElement("label",null,r.createElement(s.a,{content:"wallet.brainkey"})),r.createElement(c.a,{tabIndex:4,onChange:this.onBrainkey.bind(this),errorCallback:function(t){var n=e.state.errors;n.validBrainkey=t,e.setState({errors:n})}})):null,r.createElement(y.g,{type:"primary",size:"small",disabled:!this.state.isValid,style:{marginRight:"1em"}},b.a.translate("wallet.create_wallet")),r.createElement(y.g,{type:"secondary",size:"small",onClick:this.onBack.bind(this)},b.a.translate("wallet.cancel"))),this.state.custom_brainkey?null:r.createElement("div",{style:{paddingTop:20}},r.createElement("label",null,r.createElement("a",{onClick:this.onCustomBrainkey.bind(this)},r.createElement(s.a,{content:"wallet.custom_brainkey"}))))))}}]),t}()).propTypes={hideTitle:i.bool},a);E=Object(h.connect)(E,{listenTo:function(){return[f.a]},getProps:function(){return f.a.getState()}});var C=function(e){function t(){return g(this,t),w(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return k(t,r["Component"]),v(t,[{key:"render",value:function(){return p.a.getWallet()&&this.props.children?r.createElement("div",null,this.props.children):r.createElement(E,Object.assign({},this.props))}}]),t}(),O=function(e){return e.nested?r.createElement(C,Object.assign({restoreBrainkey:!0},e)):r.createElement("div",{className:"grid-container",style:{paddingTop:30,textAlign:"center"}},r.createElement("div",{className:"wrapper readable",style:{display:"inline-block",margin:"auto"}},r.createElement(s.a,{content:"settings.backup_brainkey",component:"h3"}),r.createElement(s.a,{content:"settings.restore_brainkey_text",component:"p",style:{maxWidth:"40rem",paddingBottom:10}}),r.createElement(C,Object.assign({restoreBrainkey:!0},e))))}},778:
/*!******************************************************!*\
  !*** ./components/Wallet/ImportKeys.jsx + 2 modules ***!
  \******************************************************/
/*! exports provided: default */
/*! all exports used */
/*! ModuleConcatenation bailout: Cannot concat with ./actions/NotificationActions.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./components/LoadingIndicator.tsx */
/*! ModuleConcatenation bailout: Cannot concat with ./components/Wallet/WalletCreate.tsx (<- Module is referenced from these modules with unsupported syntax: ./Routes.jsx (referenced with import())) */
/*! ModuleConcatenation bailout: Cannot concat with ./actions/BalanceClaimActiveActions.js */
/*! ModuleConcatenation bailout: Cannot concat with ./actions/WalletUnlockActions.js */
/*! ModuleConcatenation bailout: Cannot concat with ./alt-instance.js */
/*! ModuleConcatenation bailout: Cannot concat with ./components/Utility/FormattedAsset.jsx */
/*! ModuleConcatenation bailout: Cannot concat with ./components/Wallet/BalanceClaimActive.jsx (<- Module is referenced from these modules with unsupported syntax: ./Routes.jsx (referenced with import())) */
/*! ModuleConcatenation bailout: Cannot concat with ./cybex/cybexjs-ws/index-umd.js */
/*! ModuleConcatenation bailout: Cannot concat with ./cybex/cybexjs/index.js */
/*! ModuleConcatenation bailout: Cannot concat with ./lib/alt-react/lib/index.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ./lib/chain/GenesisFilter.js (<- Module uses injected variables (Buffer)) */
/*! ModuleConcatenation bailout: Cannot concat with ./lib/counterpart/index.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ./stores/BalanceClaimActiveStore.js */
/*! ModuleConcatenation bailout: Cannot concat with ./stores/BaseStore.js */
/*! ModuleConcatenation bailout: Cannot concat with ./stores/PrivateKeyStore.js */
/*! ModuleConcatenation bailout: Cannot concat with ./stores/WalletDb.js (<- Module uses injected variables (Buffer)) */
/*! ModuleConcatenation bailout: Cannot concat with ../node_modules/classnames/index.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ../node_modules/react-translate-component/index.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ../node_modules/react/index.js (<- Module is not an ECMAScript module) */function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),i=n(24),o=n(37),l=n.n(o),s=n(65),c=n(3),u=n(4),p=n(52),f=n(46),m=n(184),h=n(156),d=n(1),y=n.n(d),_=n(13),b=n.n(_),v=n(169),g=n(168),w=n(290),k=n(18),E=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var C=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.a.Component),E(t,[{key:"render",value:function(){if(void 0===this.props.balances)return r.a.createElement("div",null,r.a.createElement(y.a,{content:"wallet.loading_balances"}),"…");var e=this.props.balances.groupBy(function(e){return e.balance.asset_id}).map(function(e){return e.reduce(function(e,t){return e+Number(t.balance.amount)},0)});return e.size?r.a.createElement("div",null,e.map(function(e,t){return r.a.createElement("div",{key:t},r.a.createElement(k.a,{color:"info",amount:e,asset:t}))}).toArray()):r.a.createElement("div",null,"None")}}]),t}(),O=C=Object(i.connect)(C,{listenTo:function(){return[w.a]},getProps:function(){return w.a.getState()}}),S=n(14),x=n(10),j=n(42),P=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var B=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state=e._getInitialState(),e._export("importing"),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,j["a"]),P(t,[{key:"_getInitialState",value:function(){return{importing:!1}}},{key:"importing",value:function(e){this.setState({importing:e})}}]),t}(),N=x.a.createStore(B,"ImportKeysStore"),T=n(1775),A=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();n(/*! ./ImportKeys.scss */1773);var I=function(e){var t=e.key_count;return t?r.a.createElement("span",null,"Found ",t," private keys"):r.a.createElement("span",null)},z=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state=e._getInitialState(),e._renderBalanceClaims=e._renderBalanceClaims.bind(e),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.a.Component),A(t,[{key:"_getInitialState",value:function(){return{keys_to_account:{},no_file:!0,account_keys:[],reset_file_name:arguments.length>0&&void 0!==arguments[0]&&arguments[0]?this.state.reset_file_name:Date.now(),reset_password:Date.now(),password_checksum:null,import_file_message:null,import_password_message:null,imported_keys_public:{},key_text_message:null,genesis_filtering:!1,genesis_filter_status:[],genesis_filter_finished:void 0,importSuccess:!1}}},{key:"reset",value:function(e,t){var n=this;e&&e.preventDefault();var a=this._getInitialState(t);this.setState(a,function(){return n.updateOnChange()})}},{key:"onWif",value:function(e){e.preventDefault();var t=this.refs.wifInput.value;this.addByPattern(t)}},{key:"onCancel",value:function(e){e&&e.preventDefault(),this.setState(this._getInitialState())}},{key:"updateOnChange",value:function(){g.a.setPubkeys(Object.keys(this.state.imported_keys_public))}},{key:"getImportAccountKeyCount",value:function(e){var t={},n=!1;for(var a in e){var r=!0,i=!1,o=void 0;try{for(var l,s=e[a].account_names[Symbol.iterator]();!(r=(l=s.next()).done);r=!0){var c=l.value;t[c]=(t[c]||0)+1,n=!0}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}}return n?t:null}},{key:"upload",value:function(e){var t=this;this.reset(null,!0);var n=e.target.files[0],a=new FileReader;a.onload=function(e){var a=e.target.result;try{var r=void 0;try{r=JSON.parse(a),t._parseImportKeyUpload(r,n.name,function(e){t.setState(e,function(){e.genesis_filter_finished&&t._passwordCheck()})})}catch(e){try{r||n.name,t._parseWalletJson(r)}catch(e){if(!t.addByPattern(a))throw e}t._passwordCheck()}}catch(e){console.error("... ImportKeys upload error",e),t.setState({import_file_message:e})}},a.readAsText(n)}},{key:"_parseImportKeyUpload",value:function(e,t,n){var a=this,r=void 0,i=void 0;try{if(!(r=e.password_checksum))throw t+" is an unrecognized format";if(!Array.isArray(e.account_keys))throw t+" is an unrecognized format";i=e.account_keys}catch(e){throw e.message||e}var o=new T.a;o.isAvailable()?this.setState({genesis_filter_initalizing:!0},function(){return o.init(function(){var e=a.state.genesis_filter_status,t=i;o.filter(t,function(a){if("missing_public_keys"===a.error)return console.error("un-released format, just for testing"),void n({password_checksum:r,account_keys:i,genesis_filter_finished:!0,genesis_filtering:!1});if(a.success)n({password_checksum:r,account_keys:t,genesis_filter_finished:!0,genesis_filtering:!1});else if(void 0===a.initalizing)if(void 0!==a.importing){if(e.length)e[e.length-1].account_name===a.account_name?e[e.length-1]=a:e.push(a);else e.push(a);n({genesis_filter_status:e})}else console.error("unknown status",a);else n({genesis_filter_initalizing:a.initalizing,genesis_filtering:!0})})})}):n({password_checksum:r,account_keys:i,genesis_filter_finished:!0,genesis_filtering:!1})}},{key:"_parseWalletJson",value:function(e){var t=void 0,n=void 0,a={},r={},i=function(e,t){e=u.b.address_prefix+e.substring(3);var n=c.i.fromPublicKeyString(e).toAddressString(),a=r[t]||[];n="CYB"+n.substring(3),a.push(n),r[t]=a};try{if(!Array.isArray(e))throw new Error("Invalid wallet format");var o=!0,l=!1,s=void 0;try{for(var p,f=e[Symbol.iterator]();!(o=(p=f.next()).done);o=!0){var m=p.value;if("key_record_type"==m.type&&m.data.account_address&&m.data.encrypted_private_key){var h=m.data.account_address,d=a[h]||[];d.push(m.data.encrypted_private_key),a[h]=d}else if("account_record_type"!=m.type)if("property_record_type"!=m.type||"encrypted_brainkey"!=m.data.key){if("master_key_record_type"==m.type){if(!m.data)throw file.name+" invalid master_key_record record";if(!m.data.checksum)throw file.name+" is missing master_key_record checksum";t=m.data.checksum}}else n=m.data.value;else{var y=m.data.name;i(m.data.owner_key,y);var _=!0,b=!1,v=void 0;try{for(var g,w=m.data.active_key_history[Symbol.iterator]();!(_=(g=w.next()).done);_=!0){i(g.value[1],y)}}catch(e){b=!0,v=e}finally{try{!_&&w.return&&w.return()}finally{if(b)throw v}}}}}catch(e){l=!0,s=e}finally{try{!o&&f.return&&f.return()}finally{if(l)throw s}}if(!n)throw"Please use a CYB 1.0 wallet_export_keys file instead";if(!t)throw file.name+" is missing password_checksum";if(!enckeys.length)throw file.name+" does not contain any private keys"}catch(e){throw e.message||e}var k=[];for(var E in r){var C=[],O=!0,S=!1,x=void 0;try{for(var j,P=r[E][Symbol.iterator]();!(O=(j=P.next()).done);O=!0){var B=a[j.value];if(B){var N=!0,T=!1,A=void 0;try{for(var I,z=B[Symbol.iterator]();!(N=(I=z.next()).done);N=!0){var R=I.value;C.push(R)}}catch(e){T=!0,A=e}finally{try{!N&&z.return&&z.return()}finally{if(T)throw A}}}}}catch(e){S=!0,x=e}finally{try{!O&&P.return&&P.return()}finally{if(S)throw x}}k.push({account_name:E,encrypted_private_keys:C})}this.setState({password_checksum:t,account_keys:k})}},{key:"_passwordCheck",value:function(e){var t=this;e&&"preventDefault"in e&&e.preventDefault();var n=this.refs.password,a=n?n.value:"";if(this.state.password_checksum!=c.n.sha512(c.n.sha512(a)).toString("hex"))return this.setState({no_file:!1,import_password_message:a.length?"Incorrect password":null});this.setState({no_file:!1,reset_password:Date.now(),import_password_message:b.a.translate("wallet.import_pass_match")},function(){return t._decryptPrivateKeys(a)})}},{key:"_decryptPrivateKeys",value:function(e){var t=this,n=c.a.fromSeed(e),a=!0,r=!0,i=!1,o=void 0;try{for(var l,p=this.state.account_keys[Symbol.iterator]();!(r=(l=p.next()).done);r=!0){var f=l.value;if(f.encrypted_private_keys)for(var m=f.account_name.trim(),h=new RegExp("^"+u.b.address_prefix),d=0;d<f.encrypted_private_keys.length;d++){var y=f.encrypted_private_keys[d],_=f.public_keys?f.public_keys[d]:null;try{var b=n.decryptHex(y);if(_)h.test(_)||(_=u.b.address_prefix+_.substring(3));else _=c.h.fromHex(b).toPublicKey().toPublicKeyString();this.state.imported_keys_public[_]=!0;var v=(this.state.keys_to_account[b]||{account_names:[]}).account_names,g=!1,w=!0,k=!1,E=void 0;try{for(var C,O=v[Symbol.iterator]();!(w=(C=O.next()).done);w=!0){C.value==m&&(g=!0)}}catch(e){k=!0,E=e}finally{try{!w&&O.return&&O.return()}finally{if(k)throw E}}if(g)continue;v.push(m),this.state.keys_to_account[b]={account_names:v,public_key_string:_}}catch(e){console.log(e,e.stack);var S=e.message||e;s.b.error("Account "+m+" had a private key import error: "+S)}}else{var x="Account "+f.account_name+" missing encrypted_private_keys";console.error(x),a&&(s.b.error(x),a=!1)}}}catch(e){i=!0,o=e}finally{try{!r&&p.return&&p.return()}finally{if(i)throw o}}this.setState({import_file_message:null,import_password_message:null,password_checksum:null},function(){return t.updateOnChange()})}},{key:"_saveImport",value:function(e){var t=this;e.preventDefault();var n=p.a.getState().keys,a={};for(var r in this.state.imported_keys_public)n.has(r)&&(delete this.state.imported_keys_public[r],a[r]=!0);if(0!==Object.keys(this.state.imported_keys_public).length){var i=this.state.keys_to_account,o=!0,l=!1,c=void 0;try{for(var u,m=Object.keys(i)[Symbol.iterator]();!(o=(u=m.next()).done);o=!0){var h=u.value,d=i[h];d.account_names;a[d.public_key_string]&&delete i[h]}}catch(e){l=!0,c=e}finally{try{!o&&m.return&&m.return()}finally{if(l)throw c}}f.a.unlock().then(function(){N.importing(!0),setTimeout(function(){return t.saveImport()},200)})}else s.b.error("This wallet has already been imported")}},{key:"saveImport",value:function(){var e=this,t=this.state.keys_to_account,n=[],a=!0,r=!1,i=void 0;try{for(var o,l=Object.keys(t)[Symbol.iterator]();!(a=(o=l.next()).done);a=!0){var c=o.value,u=t[c],p=u.account_names,f=u.public_key_string;n.push({private_plainhex:c,import_account_names:p,public_key_string:f})}}catch(e){r=!0,i=e}finally{try{!a&&l.return&&l.return()}finally{if(r)throw i}}this.reset(),S.a.importKeysWorker(n).then(function(t){N.importing(!1);var a=n.length;s.b.success(b.a.translate("wallet.import_key_success",{count:a})),e.setState({importSuccess:!0})}).catch(function(e){console.log("error:",e),N.importing(!1);var t=e;try{t=e.target.error.message}catch(e){}s.b.error("Key import error: "+t)})}},{key:"addByPattern",value:function(e){var t=this;if(!e)return!1;var n=0,a=0,r=!0,i=!1,o=void 0;try{for(var l,s=(e.match(/5[HJK][1-9A-Za-z]{49}/g)||[])[Symbol.iterator]();!(r=(l=s.next()).done);r=!0){var u=l.value;try{var p=c.h.fromWif(u),f=p.toBuffer().toString("hex"),m=p.toPublicKey().toPublicKeyString();this.state.imported_keys_public[m]=!0,this.state.keys_to_account[f]={account_names:[],public_key_string:m},n++}catch(e){a++}}}catch(e){i=!0,o=e}finally{try{!r&&s.return&&s.return()}finally{if(i)throw o}}return this.setState({key_text_message:"Found "+(n?n+" valid":"")+(a?" and "+a+" invalid":"")+" key"+(n>1||a>1?"s":"")+"."},function(){return t.updateOnChange()}),this.state.key_text_message=null,n}},{key:"_renderBalanceClaims",value:function(){return r.a.createElement("div",null,r.a.createElement(v.default,null),r.a.createElement("div",{style:{paddingTop:15}},r.a.createElement("div",{className:"button success",onClick:this.onCancel.bind(this)},r.a.createElement(y.a,{content:"wallet.done"}))))}},{key:"render",value:function(){var e=this,t=this.props.privateKey,n=this.state.keys_to_account,a=Object.keys(n).length,i=this.getImportAccountKeyCount(n);if(!S.a.getWallet())return r.a.createElement(m.WalletCreate,{importKeys:!0,hideTitle:!0});if(this.props.importing)return r.a.createElement("div",null,r.a.createElement("div",{className:"center-content"},r.a.createElement(h.a,{type:"circle"})));var o=this.state.genesis_filtering,s=(!!this.state.genesis_filter_status.length&&this.state.genesis_filter_finished,null);if(this.state.genesis_filter_status.length){s=[];var c=!0,u=!1,p=void 0;try{for(var f,d=this.state.genesis_filter_status[Symbol.iterator]();!(c=(f=d.next()).done);c=!0){var _=f.value;_.count&&_.total&&s.push(r.a.createElement("tr",{key:_.account_name},r.a.createElement("td",null,_.account_name),r.a.createElement("td",null,o?r.a.createElement("span",null,"Filtering ",Math.round(_.count/_.total*100)," % "):r.a.createElement("span",null,_.count))))}}catch(e){u=!0,p=e}finally{try{!c&&d.return&&d.return()}finally{if(u)throw p}}}var v=0!==a,g=b.a.translate("wallet.import_password");if(v&&(g=""),!s&&i)for(var w in s=[],i)s.push(r.a.createElement("tr",{key:w},r.a.createElement("td",null,w),r.a.createElement("td",null,i[w])));var k=r.a.createElement("div",{className:"button success",onClick:this.onCancel.bind(this)},r.a.createElement(y.a,{content:"wallet.cancel"})),E=1;return this.state.importSuccess?this._renderBalanceClaims():r.a.createElement("div",null,r.a.createElement("div",{style:{padding:"10px 0"}},r.a.createElement("span",null,this.state.key_text_message?this.state.key_text_message:r.a.createElement(I,{key_count:a})),v?r.a.createElement("span",null," (",r.a.createElement("a",{onClick:this.reset.bind(this)},r.a.createElement(y.a,{content:"wallet.reset"})),")"):null),s?r.a.createElement("div",null,s.length?r.a.createElement("div",null,r.a.createElement("table",{className:"table"},r.a.createElement("thead",null,r.a.createElement("tr",null,r.a.createElement("th",null,r.a.createElement(y.a,{content:"explorer.account.title"})),r.a.createElement("th",null,r.a.createElement(y.a,{content:"settings.restore_key_count"})))),r.a.createElement("tbody",null,s)),r.a.createElement("br",null)):b.a.translate("wallet.no_accounts")):null,r.a.createElement("br",null),v||this.state.genesis_filter_initalizing?null:r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("div",null,t?r.a.createElement("form",{onSubmit:this.onWif.bind(this)},r.a.createElement(y.a,{component:"label",content:"wallet.paste_private"}),r.a.createElement("input",{ref:"wifInput",type:"password",id:"wif",tabIndex:E++}),r.a.createElement("button",{className:"button",type:"submit"},r.a.createElement(y.a,{content:"wallet.submit"})),k):r.a.createElement("form",{onSubmit:this._passwordCheck.bind(this)},r.a.createElement("label",null,r.a.createElement(y.a,{content:"wallet.cyb_09_export"}),this.state.no_file?null:r.a.createElement("span",null,"  (",r.a.createElement("a",{onClick:this.reset.bind(this)},"Reset"),")")),r.a.createElement("input",{type:"file",id:"file_input",accept:".json",style:{border:"solid",marginBottom:15},key:this.state.reset_file_name,onChange:this.upload.bind(this)}),r.a.createElement("div",null,this.state.import_file_message),this.state.no_file?null:r.a.createElement("div",null,r.a.createElement("input",{type:"password",ref:"password",key:this.state.reset_password,placeholder:g,onChange:function(){e.state.import_password_message&&e.state.import_password_message.length&&e.setState({import_password_message:null})}}),r.a.createElement("p",{className:"facolor-error"},this.state.import_password_message)),r.a.createElement("div",{className:"button-group"},r.a.createElement("button",{className:l()("button",{disabled:!!this.state.no_file}),type:"submit"},r.a.createElement(y.a,{content:"wallet.submit"})),k))),r.a.createElement("br",null),r.a.createElement("br",null))),this.state.genesis_filter_initalizing?r.a.createElement("div",null,r.a.createElement("div",{className:"center-content"},r.a.createElement(h.a,{type:"circle"}))):null,v?r.a.createElement("div",null,r.a.createElement("div",null,r.a.createElement("div",{className:"button-group"},r.a.createElement("div",{className:l()("button success",{disabled:!v}),onClick:this._saveImport.bind(this)},r.a.createElement(y.a,{content:"wallet.import_keys"})),r.a.createElement("div",{className:"button secondary",onClick:this.reset.bind(this)},r.a.createElement(y.a,{content:"wallet.cancel"})))),r.a.createElement("h4",null,r.a.createElement(y.a,{content:"wallet.unclaimed"})),r.a.createElement(y.a,{component:"p",content:"wallet.claim_later"}),r.a.createElement("div",{className:"grid-block"},r.a.createElement("div",{className:"grid-content no-overflow"},r.a.createElement(y.a,{component:"label",content:"wallet.totals"}),r.a.createElement(O,null))),r.a.createElement("br",null)):null)}}]),t}();z.defaultProps={privateKey:!0},z=Object(i.connect)(z,{listenTo:function(){return[N]},getProps:function(){return{importing:N.getState().importing}}});t.default=z}}]);