(window.webpackJsonp=window.webpackJsonp||[]).push([[29],{1392:
/*!*************************************************!*\
  !*** ./components/Utility/BalanceComponent.jsx ***!
  \*************************************************/
/*! exports provided: default */
/*! exports used: default */function(e,t,n){"use strict";var a=n(/*! react */0),i=n(/*! prop-types */3),s=n(/*! ./FormattedAsset */19),o=n(/*! ./ChainTypes */21),r=n(/*! ./BindToChainState */24),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["Component"]),c(t,[{key:"render",value:function(){var e=Number(this.props.balance.get("balance"));console.debug("NUMBER: ",e);var t=this.props.balance.get("asset_type");return a.createElement(s.a,{amount:e,asset:t,asPercentage:this.props.asPercentage,assetInfo:this.props.assetInfo,replace:this.props.replace,hide_asset:this.props.hide_asset})}}]),t}();l.propTypes={balance:o.a.ChainObject.isRequired,assetInfo:i.node,hide_asset:i.bool},l.defaultProps={hide_asset:!1},t.a=Object(r.a)(l,{keep_updating:!0})},1395:
/*!***********************************************!*\
  !*** ./components/Utility/AmountSelector.jsx ***!
  \***********************************************/
/*! exports provided: default */
/*! exports used: default */function(e,t,n){"use strict";var a=n(/*! react */0),i=n(/*! prop-types */3),s=n(/*! react-translate-component */1),o=n.n(s),r=n(/*! ../Utility/ChainTypes */21),c=n(/*! ../Utility/BindToChainState */24),l=n(/*! ./FormattedAsset */19),u=n(/*! ./FloatingDropdown */295),p=n(/*! immutable */7),d=n.n(p),h=n(/*! counterpart */14),m=n.n(h),_=n(/*! components/Common */109),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function g(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var w=function(e){function t(){return y(this,t),g(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return v(t,a["Component"]),f(t,[{key:"render",value:function(){return 0===this.props.assets.length?null:a.createElement(u.a,{entries:this.props.assets.map(function(e){return e&&e.get("symbol")}).filter(function(e){return!!e}),values:this.props.assets.reduce(function(e,t){return t&&t.get("symbol")&&(e[t.get("symbol")]=t),e},{}),singleEntry:this.props.assets[0]?a.createElement(l.a,{asset:this.props.assets[0].get("id"),amount:0,hide_amount:!0}):null,value:this.props.value,onChange:this.props.onChange})}}]),t}();w.propTypes={assets:r.a.ChainAssetsList,value:i.string,onChange:i.func},w=Object(c.a)(w);var b=function(e){function t(){return y(this,t),g(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return v(t,a["Component"]),f(t,[{key:"componentDidMount",value:function(){this.onAssetChange(this.props.asset)}},{key:"formatAmount",value:function(e){return e||(e=""),"number"==typeof e&&(e=e.toString()),e.trim().replace(/,/g,"")}},{key:"_onChange",value:function(e){var t=e.target.value;this.props.onChange({amount:t,asset:this.props.asset})}},{key:"onAssetChange",value:function(e){this.props.onChange({amount:this.props.amount,asset:e})}},{key:"render",value:function(){var e=this.props.error?m.a.translate(this.props.error):this.formatAmount(this.props.amount),t=this.props.isNumber;return a.createElement("div",{className:"amount-selector",style:this.props.style},a.createElement("label",{className:"right-label"},this.props.display_balance),a.createElement(o.a,{className:"left-label",component:"label",content:this.props.label}),a.createElement("div",{className:"inline-label input-wrapper"},t?a.createElement(_.l,{disabled:this.props.disabled,type:"number",valueFromOuter:!0,value:e||0,size:"small",placeholder:this.props.placeholder,onChange:this._onChange.bind(this),tabIndex:this.props.tabIndex,style:{width:"100%",marginBottom:0}}):a.createElement(_.l,{disabled:this.props.disabled,type:"text",valueFromOuter:!0,size:"small",value:e||"",placeholder:this.props.placeholder,onChange:this._onChange.bind(this),tabIndex:this.props.tabIndex,style:{width:"100%",marginBottom:0}}),a.createElement("div",{className:"form-label select floating-dropdown"},a.createElement(w,{ref:this.props.refCallback,value:this.props.asset.get("symbol"),assets:d.a.List(this.props.assets),onChange:this.onAssetChange.bind(this)}))))}}]),t}();b.propTypes={label:i.string,asset:r.a.ChainAsset.isRequired,assets:i.array,amount:i.any,placeholder:i.string,onChange:i.func.isRequired,tabIndex:i.number,error:i.string},b.defaultProps={disabled:!1},b=Object(c.a)(b),t.a=b},1397:
/*!***********************************!*\
  !*** ./services/GatewayConfig.ts ***!
  \***********************************/
/*! exports provided: JadePool, GATEWAY_URI, GATEWAY_QUERY_URI, GATEWAY_ID, CALLBACK_URL */
/*! exports used: GATEWAY_ID, GATEWAY_QUERY_URI, GATEWAY_URI, JadePool */function(e,t,n){"use strict";n.d(t,"d",function(){return a}),n.d(t,"c",function(){return i}),n.d(t,"b",function(){return s}),n.d(t,"a",function(){return o});var a={GATEWAY_ACCOUNT:"jade-gateway",ADDRESS_TYPES:{"TEST.ETH":"ETH","TEST.BTC":"BTC","TEST.USDT":"USDT","TEST.BAT":"BAT","TEST.OMG":"OMG","TEST.SNT":"SNT","TEST.NAS":"NAS","TEST.KNC":"KNC","TEST.MT":"MT","TEST.PAY":"PAY","TEST.GET":"GET","TEST.TCT":"TCT","TEST.DPY":"DPY","TEST.MAD":"MAD","TEST.GNX":"GNX","TEST.KEY":"KEY","TEST.ENG":"ENG"},ADDRESS_ASSETS:{ETH:"TEST.ETH",BTC:"TEST.BTC",USDT:"TEST.USDT",BAT:"TEST.BAT",OMG:"TEST.OMG",SNT:"TEST.SNT",NAS:"TEST.NAS",KNC:"TEST.KNC",PAY:"TEST.PAY",MT:"TEST.MT",GET:"TEST.GET",MAD:"TEST.MAD",TCT:"TEST.TCT",DPY:"TEST.DPY",GNX:"TEST.GNX",KEY:"TEST.KEY",ENG:"TEST.ENG"}},i="https://gatewaytest.cybex.io/gateway",s="https://gateway-query.cybex.io/",o="CybexGatewayDev"},1399:
/*!***********************************************!*\
  !*** ./actions/GatewayActions.ts + 1 modules ***!
  \***********************************************/
/*! exports provided: DEPOSIT_MODAL_ID, WITHDRAW_MODAL_ID, GatewayActions, default */
/*! exports used: DEPOSIT_MODAL_ID, GatewayActions, WITHDRAW_MODAL_ID, default */
/*! ModuleConcatenation bailout: Cannot concat with ./actions/NotificationActions.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./services/GatewayConfig.ts because of ./components/Account/AccountOverview.tsx */
/*! ModuleConcatenation bailout: Cannot concat with ./services/GatewayService.ts because of ./components/Gateway/WithdrawModal.tsx */
/*! ModuleConcatenation bailout: Cannot concat with ./stores/SettingsStore.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./utils/index.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./alt-instance.js */
/*! ModuleConcatenation bailout: Cannot concat with ./cybex/cybexjs/index.js */
/*! ModuleConcatenation bailout: Cannot concat with ./stores/WalletDb.js (<- Module uses injected variables (Buffer)) */function(e,t,n){"use strict";var a=n(11),i=n(15),s=n(13),o=n(201),r=n(1529),c=n(68),l=n(1397),u=n(2),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var d=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.op=t,this.signer=""}return p(e,[{key:"addSigner",value:function(e){this.signer=e}}]),e}();n.d(t,"a",function(){return f}),n.d(t,"c",function(){return y}),n.d(t,"b",function(){return w});var h=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var m=function(e,t,n,a){return new(n||(n=Promise))(function(i,s){function o(e){try{c(a.next(e))}catch(e){s(e)}}function r(e){try{c(a.throw(e))}catch(e){s(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(o,r)}c((a=a.apply(e,t||[])).next())})},_=Object(o.a)("GatewayActions"),f="DEPOSIT_MODAL_ID",y="WITHDRAW_MODAL_ID",g=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=[],a=!0,s=!1,o=void 0;try{for(var r,c=e[Symbol.iterator]();!(a=(r=c.next()).done);a=!0){var l=r.value,u=i.a.getPrivateKey(l);if(u&&(n.push(u),n.length>=t))break}}catch(e){s=!0,o=e}finally{try{!a&&c.return&&c.return()}finally{if(s)throw o}}return n},v=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return h(e,[{key:"showDepositModal",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:f;return m(this,void 0,void 0,regeneratorRuntime.mark(function a(){var i;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(i=l.d.ADDRESS_TYPES[t]){a.next=3;break}return a.abrupt("return",c.a.error("No suitable asset for "+t+" to be deposited"));case 3:return a.next=5,this.updateDepositAddress(e,i);case 5:if(a.sent){a.next=8;break}return a.abrupt("return");case 8:this.openModal(n);case 9:case"end":return a.stop()}},a,this)}))}},{key:"showWithdrawModal",value:function(e){return m(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(_("Withdraw: ",e),n=l.d.ADDRESS_TYPES[e]){t.next=4;break}return t.abrupt("return",c.a.error("No suitable asset for "+e+" to be withdrawn"));case 4:return t.next=6,this.updateWithdrawInfo(e,n);case 6:if(t.sent){t.next=9;break}return t.abrupt("return");case 9:this.openModal(y);case 10:case"end":return t.stop()}},t,this)}))}},{key:"updateDepositAddress",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return m(this,void 0,void 0,regeneratorRuntime.mark(function a(){var i,s,o;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return i=void 0,_("Update Deposit Address: ",e,t,n),a.prev=2,a.next=5,Object(r.a)(e,t,n);case 5:s=i=a.sent,o=s.address,_("Address: ",o),a.next=15;break;case 10:return a.prev=10,a.t0=a.catch(2),_(a.t0),c.a.error(a.t0.message),a.abrupt("return",!1);case 15:return this.afterUpdateDepositInfo(i),a.abrupt("return",i);case 17:case"end":return a.stop()}},a,this,[[2,10]])}))}},{key:"updateWithdrawInfo",value:function(e,t){return m(this,void 0,void 0,regeneratorRuntime.mark(function n(){var a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return a=void 0,n.prev=1,n.next=4,Object(r.b)(t);case 4:a=n.sent,_("WithdrawLimit: ",a),n.next=13;break;case 8:return n.prev=8,n.t0=n.catch(1),_(n.t0),c.a.error(n.t0.message),n.abrupt("return",!1);case 13:return this.afterUpdateWithdrawInfo(Object.assign({asset:e},a)),n.abrupt("return",!0);case 15:case"end":return n.stop()}},n,this,[[1,8]])}))}},{key:"queryFundRecords",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:20;return m(this,void 0,void 0,regeneratorRuntime.mark(function i(){var s,o,c,l;return regeneratorRuntime.wrap(function(i){for(;;)switch(i.prev=i.next){case 0:return _("[QueryFundRecord]",e),s=new d({accountName:e.get("name"),offset:n,size:a}),t.accountName===e.get("name")&&t.signer&&s.addSigner(t.signer),i.next=5,Object(r.d)(s);case 5:if(o=i.sent){i.next=15;break}return i.next=9,this.loginGatewayQuery(e);case 9:return c=i.sent,l=c.signer,s.addSigner(l),i.next=14,Object(r.d)(s);case 14:o=i.sent;case 15:o&&this.updateFundRecords(o);case 16:case"end":return i.stop()}},i,this)}))}},{key:"updateFundRecords",value:function(e){return e}},{key:"loginGatewayQuery",value:function(e){return m(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n,a,i,o,c,l,p;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(_("[LoginGatewayQuery]",e),_("[LoginGatewayQuery]",s.b.getSetting("walletLockTimeout")),n=new d({accountName:e.get("name"),expiration:Date.now()+1e3*s.b.getSetting("walletLockTimeout")}),a=u.p.fund_query.fromObject(n.op),e.getIn(["active","weight_threshold"]),i=e.getIn(["active","key_auths"]).filter(function(e){return e.get(1)>=1}).map(function(e){return e.get(0)}).toJS(),o=g(i)[0]){t.next=9;break}throw Error("Privkey Not Found");case 9:return _("[LoginGatewayQuery privKey]",e.getIn(["options","memo_key"]),o),c=u.p.fund_query.toBuffer(a),l=u.k.signBuffer(c,o).toHex(),_("[LoginGatewayQuery Signed]",l),n.addSigner(l),t.next=16,Object(r.c)(n);case 16:return p=t.sent,_("[LoginGatewayQuery LoginRes]",p),p&&this.updateLogin(p),t.abrupt("return",p);case 20:case"end":return t.stop()}},t,this)}))}},{key:"updateLogin",value:function(e){return e}},{key:"afterUpdateWithdrawInfo",value:function(e){return e}},{key:"afterUpdateDepositInfo",value:function(e){return e}},{key:"closeModal",value:function(e){return e}},{key:"openModal",value:function(e){return e}}]),e}(),w=a.a.createActions(v);t.d=w},1401:
/*!**************************************************!*\
  !*** ./components/Utility/TransitionWrapper.jsx ***!
  \**************************************************/
/*! exports provided: default */
/*! exports used: default */function(e,t,n){"use strict";var a=n(/*! react */0),i=(n(/*! prop-types */3),n(/*! react-transition-group/CSSTransitionGroup */1550)),s=n.n(i),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var r=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={animateEnter:!1},e.timer=null,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["Component"]),o(t,[{key:"componentDidMount",value:function(){this.enableAnimation()}},{key:"resetAnimation",value:function(){this.setState({animateEnter:!1}),this.enableAnimation()}},{key:"enableAnimation",value:function(){var e=this;this.timer=setTimeout(function(){e.timer&&e.setState({animateEnter:!0})},2e3)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timer),this.timer=null}},{key:"render",value:function(){return this.props.children?a.createElement(s.a,{className:this.props.className,component:this.props.component,transitionName:this.props.transitionName,transitionEnterTimeout:this.props.enterTimeout,transitionEnter:this.state.animateEnter,transitionLeave:!1},this.props.children):a.createElement(this.props.component)}}]),t}();r.defaultProps={component:"span",enterTimeout:2e3},t.a=r},1406:
/*!********************************!*\
  !*** ./stores/GatewayStore.ts ***!
  \********************************/
/*! exports provided: JADE_COINS, GatewayStore, default */
/*! exports used: JADE_COINS, default */function(e,t,n){"use strict";n.d(t,"a",function(){return h});var a=n(/*! ./BaseStore */42),i=n(/*! immutable */7),s=n(/*! alt-instance */11),o=n(/*! actions/GatewayActions */1399),r=n(/*! services/GatewayConfig */1397),c=n(/*! utils//Utils */127),l=n(/*! lib/common/localStorage */58),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var p=new l.a("__graphene__"),d=Object(c.a)("GatewayStore"),h=r.d.ADDRESS_TYPES,m=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={backedCoins:Object(i.Map)({JADE:h}),bridgeCoins:Object(i.Map)(Object(i.fromJS)(p.get("bridgeCoins",{}))),bridgeInputs:["btc","dash","eth","steem"],login:{accountName:"",signer:""},records:{total:0,records:[],offset:0,size:20},down:Object(i.Map)({}),modals:Object(i.Map)(),depositInfo:{},withdrawInfo:{}},e.bindListeners({handleDepositUpdate:o.b.afterUpdateDepositInfo,handleWithdrawUpdate:o.b.afterUpdateWithdrawInfo,handleLogin:o.b.updateLogin,handleRecordsUpdate:o.b.updateFundRecords,openModal:o.b.openModal,closeModal:o.b.closeModal}),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["a"]),u(t,[{key:"handleDepositUpdate",value:function(e){d("Open: ",e),this.setState({depositInfo:e})}},{key:"handleWithdrawUpdate",value:function(e){this.setState({withdrawInfo:e})}},{key:"handleLogin",value:function(e){this.setState({login:e})}},{key:"handleRecordsUpdate",value:function(e){this.setState({records:e})}},{key:"openModal",value:function(e){this.setState({modals:this.state.modals.set(e,!0)})}},{key:"closeModal",value:function(e){this.setState({modals:this.state.modals.set(e,!1)})}}]),t}(),_=s.a.createStore(m,"GatewayStore");t.b=_},1527:
/*!***********************************************!*\
  !*** ../node_modules/file-saver/FileSaver.js ***!
  \***********************************************/
/*! no static exports found */
/*! exports used: saveAs */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){var a,i=i||function(e){"use strict";if(!(void 0===e||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var t=function(){return e.URL||e.webkitURL||e},n=e.document.createElementNS("http://www.w3.org/1999/xhtml","a"),a="download"in n,i=/constructor/i.test(e.HTMLElement)||e.safari,s=/CriOS\/[\d]+/.test(navigator.userAgent),o=function(t){(e.setImmediate||e.setTimeout)(function(){throw t},0)},r=function(e){setTimeout(function(){"string"==typeof e?t().revokeObjectURL(e):e.remove()},4e4)},c=function(e){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e},l=function(l,u,p){p||(l=c(l));var d,h=this,m="application/octet-stream"===l.type,_=function(){!function(e,t,n){for(var a=(t=[].concat(t)).length;a--;){var i=e["on"+t[a]];if("function"==typeof i)try{i.call(e,n||e)}catch(e){o(e)}}}(h,"writestart progress write writeend".split(" "))};if(h.readyState=h.INIT,a)return d=t().createObjectURL(l),void setTimeout(function(){var e,t;n.href=d,n.download=u,e=n,t=new MouseEvent("click"),e.dispatchEvent(t),_(),r(d),h.readyState=h.DONE});!function(){if((s||m&&i)&&e.FileReader){var n=new FileReader;return n.onloadend=function(){var t=s?n.result:n.result.replace(/^data:[^;]*;/,"data:attachment/file;");e.open(t,"_blank")||(e.location.href=t),t=void 0,h.readyState=h.DONE,_()},n.readAsDataURL(l),void(h.readyState=h.INIT)}d||(d=t().createObjectURL(l)),m?e.location.href=d:e.open(d,"_blank")||(e.location.href=d);h.readyState=h.DONE,_(),r(d)}()},u=l.prototype;return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(e,t,n){return t=t||e.name||"download",n||(e=c(e)),navigator.msSaveOrOpenBlob(e,t)}:(u.abort=function(){},u.readyState=u.INIT=0,u.WRITING=1,u.DONE=2,u.error=u.onwritestart=u.onprogress=u.onwrite=u.onabort=u.onerror=u.onwriteend=null,function(e,t,n){return new l(e,t||e.name||"download",n)})}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);
/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */void 0!==e&&e.exports?e.exports.saveAs=i:null!==n(/*! !webpack amd define */825)&&null!==n(/*! !webpack amd options */1533)&&(void 0===(a=function(){return i}.call(t,n,t,e))||(e.exports=a))},1529:
/*!************************************!*\
  !*** ./services/GatewayService.ts ***!
  \************************************/
/*! exports provided: getDepositInfo, getWithdrawInfo, verifyAddress, queryFundRecords, loginQuery, GatewayService */
/*! exports used: getDepositInfo, getWithdrawInfo, loginQuery, queryFundRecords, verifyAddress */function(e,t,n){"use strict";n.d(t,"a",function(){return w}),n.d(t,"b",function(){return b}),n.d(t,"e",function(){return E}),n.d(t,"d",function(){return k}),n.d(t,"c",function(){return C});var a=n(/*! ./GatewayConfig */1397),i=n(/*! utils */201),s=n(/*! graphql-tag */1575),o=n.n(s),r=n(/*! apollo-client */1573),c=n(/*! apollo-link-http */1570),l=n(/*! apollo-cache-inmemory */1572),u=m(["\n    mutation GenNewAddress($accountName: String!, $asset: String!) {\n      newDepositAddress(accountName: $accountName, asset: $asset) {\n        address\n        accountName\n        asset\n        type\n        createAt\n      }\n    }\n  "],["\n    mutation GenNewAddress($accountName: String!, $asset: String!) {\n      newDepositAddress(accountName: $accountName, asset: $asset) {\n        address\n        accountName\n        asset\n        type\n        createAt\n      }\n    }\n  "]),p=m(["\n    query GetAddress($accountName: String!, $asset: String!) {\n      getDepositAddress(accountName: $accountName, asset: $asset) {\n        address\n        accountName\n        asset\n        type\n        createAt\n      }\n    }\n  "],["\n    query GetAddress($accountName: String!, $asset: String!) {\n      getDepositAddress(accountName: $accountName, asset: $asset) {\n        address\n        accountName\n        asset\n        type\n        createAt\n      }\n    }\n  "]),d=m(["\n    query WithdrawInfo($type: String!) {\n      withdrawInfo(type: $type) {\n        fee\n        minValue\n        precision\n        asset\n        type\n        gatewayAccount\n      }\n    }\n  "],["\n    query WithdrawInfo($type: String!) {\n      withdrawInfo(type: $type) {\n        fee\n        minValue\n        precision\n        asset\n        type\n        gatewayAccount\n      }\n    }\n  "]),h=m(["\n    query VerifyAddress(\n      $asset: String!\n      $accountName: String!\n      $address: String!\n    ) {\n      verifyAddress(\n        asset: $asset\n        accountName: $accountName\n        address: $address\n      ) {\n        valid\n        asset\n      }\n    }\n  "],["\n    query VerifyAddress(\n      $asset: String!\n      $accountName: String!\n      $address: String!\n    ) {\n      verifyAddress(\n        asset: $asset\n        accountName: $accountName\n        address: $address\n      ) {\n        valid\n        asset\n      }\n    }\n  "]);function m(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var _=function(e,t,n,a){return new(n||(n=Promise))(function(i,s){function o(e){try{c(a.next(e))}catch(e){s(e)}}function r(e){try{c(a.throw(e))}catch(e){s(e)}}function c(e){e.done?i(e.value):new n(function(t){t(e.value)}).then(o,r)}c((a=a.apply(e,t||[])).next())})},f=Object(i.a)("GatewayService"),y=new Headers;y.append("Content-Type","application/x-www-form-urlencoded");var g=new c.a({uri:a.c}),v=new r.a({link:g,cache:new l.a});function w(e,t,n){return _(this,void 0,void 0,regeneratorRuntime.mark(function a(){var i,s;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(f("Get Deposit: ",e,t,n),i=o()(u),s=o()(p),!n){a.next=9;break}return a.next=6,A("mutate",{mutation:i,variables:{accountName:e,asset:t}},"newDepositAddress");case 6:a.t0=a.sent,a.next=12;break;case 9:return a.next=11,A("query",{query:s,variables:{accountName:e,asset:t}},"getDepositAddress");case 11:a.t0=a.sent;case 12:return a.abrupt("return",a.t0);case 13:case"end":return a.stop()}},a,this)}))}function b(e){return _(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=o()(d),t.next=3,A("query",{query:n,variables:{type:e}},"withdrawInfo");case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}},t,this)}))}function E(e,t,n){return _(this,void 0,void 0,regeneratorRuntime.mark(function a(){var i;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return i=o()(h),a.next=3,A("query",{query:i,variables:{asset:n,accountName:t,address:e}},"verifyAddress");case 3:return a.abrupt("return",a.sent);case 4:case"end":return a.stop()}},a,this)}))}function k(e){return _(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S("records",e).then(function(e){return e.data});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)}))}function C(e){return _(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,S("login",e).then(function(e){return e.data});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)}))}function S(e,t){return _(this,void 0,void 0,regeneratorRuntime.mark(function n(){var i,s;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return(i=new Headers).append("Content-Type","application/json"),s={headers:i,method:"POST",body:JSON.stringify(t)},n.next=5,fetch(""+a.b+e,s).then(function(e){return e.json()}).catch(function(e){return{code:400,error:e.message}});case 5:return n.abrupt("return",n.sent);case 6:case"end":return n.stop()}},n,this)}))}function A(e,t,n){return _(this,void 0,void 0,regeneratorRuntime.mark(function a(){return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,v[e](t);case 3:return a.t0=n,a.abrupt("return",a.sent.data[a.t0]);case 7:throw a.prev=7,a.t1=a.catch(0),console.error("GatewayError: ",a.t1),a.t1;case 11:case"end":return a.stop()}},a,this,[[0,7]])}))}},1533:
/*!******************************************************!*\
  !*** ../node_modules/webpack/buildin/amd-options.js ***!
  \******************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){(function(t){e.exports=t}).call(this,{})},1536:
/*!***************************************************!*\
  !*** ./components/Account/RecentTransactions.jsx ***!
  \***************************************************/
/*! exports provided: RecentTransactions, TransactionWrapper */
/*! exports used: RecentTransactions, TransactionWrapper */function(e,t,n){"use strict";n.d(t,"a",function(){return T}),n.d(t,"b",function(){return N});var a=n(/*! react */0),i=n(/*! prop-types */3),s=n(/*! react-translate-component */1),o=n.n(s),r=n(/*! file-saver */1527),c=n(/*! ../Blockchain/Operation */302),l=n(/*! ../Utility/ChainTypes */21),u=n(/*! ../Utility/BindToChainState */24),p=n(/*! common/utils */8),d=n(/*! cybexjs */2),h=n(/*! ../Utility/TransitionWrapper */1401),m=n(/*! perfect-scrollbar */1569),_=n.n(m),f=n(/*! counterpart */14),y=n.n(f),g=n(/*! ../Icon/Icon */49),v=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();function w(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function E(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var k=d.c.operations,C={textAlign:"left"},S={textAlign:"right"};function A(e,t){return t.block_num===e.block_num?t.virtual_op-e.virtual_op:t.block_num-e.block_num}function O(e){return e?'"'+e.textContent.replace(/[\s\t\r\n]/gi," ")+'"':""}var T=function(e){function t(e){w(this,t);var n=b(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.state={limit:e.limit||20,csvExport:!1,headerHeight:85,filter:"all"},n}return E(t,a["Component"]),v(t,[{key:"componentDidMount",value:function(){if(!this.props.fullHeight){var e=this.refs.transactions;_.a.initialize(e),this._setHeaderHeight()}}},{key:"_setHeaderHeight",value:function(){var e=this.refs.header.offsetHeight;e!==this.state.headerHeight&&this.setState({headerHeight:e})}},{key:"shouldComponentUpdate",value:function(e,t){if(!p.a.are_equal_shallow(this.props.accountsList,e.accountsList))return!0;if(this.props.maxHeight!==e.maxHeight)return!0;if(this.state.headerHeight!==t.headerHeight)return!0;if(this.state.filter!==t.filter)return!0;if(this.props.customFilter&&(!p.a.are_equal_shallow(this.props.customFilter.fields,e.customFilter.fields)||!p.a.are_equal_shallow(this.props.customFilter.values,e.customFilter.values)))return!0;if(this.props.maxHeight!==e.maxHeight)return!0;if(t.limit!==this.state.limit||t.csvExport!==this.state.csvExport)return!0;for(var n=0;n<e.accountsList.length;++n){var a=e.accountsList[n],i=this.props.accountsList[n];if(a&&i&&a.get("history")!==i.get("history"))return!0}return!1}},{key:"componentDidUpdate",value:function(){if(this.state.csvExport){this.state.csvExport=!1;var e=document.getElementById("csv_export_container").childNodes,t="",n=!0,a=!1,i=void 0;try{for(var s,o=e[Symbol.iterator]();!(n=(s=o.next()).done);n=!0){var c=s.value.childNodes;""!==t&&(t+="\n"),t+=[O(c[0]),O(c[1]),O(c[2]),O(c[3])].join(",")}}catch(e){a=!0,i=e}finally{try{!n&&o.return&&o.return()}finally{if(a)throw i}}var l=new Blob([t],{type:"text/csv;charset=utf-8"}),u=new Date;Object(r.saveAs)(l,"cybhist-"+u.getFullYear()+"-"+("0"+(u.getMonth()+1)).slice(-2)+"-"+("0"+u.getDate()).slice(-2)+"-"+("0"+u.getHours()).slice(-2)+("0"+u.getMinutes()).slice(-2)+".csv")}if(!this.props.fullHeight){var p=this.refs.transactions;_.a.update(p),this._setHeaderHeight()}}},{key:"_onIncreaseLimit",value:function(){this.setState({limit:this.state.limit+30})}},{key:"_getHistory",value:function(e,t,n){var a=[],i=new Set,s=!0,o=!1,r=void 0;try{for(var c,l=e[Symbol.iterator]();!(s=(c=l.next()).done);s=!0){var u=c.value;if(u){var p=u.get("history");p&&(a=a.concat(p.toJS().filter(function(e){return!i.has(e.id)&&i.add(e.id)})))}}}catch(e){o=!0,r=e}finally{try{!s&&l.return&&l.return()}finally{if(o)throw r}}return t&&(a=a.filter(function(e){return e.op[0]===k[t]})),n&&(a=a.filter(function(e){return n.fields.reduce(function(t,a){switch(a){case"asset_id":return t&&e.op[1].amount[a]===n.values[a];default:return t&&e.op[1][a]===n.values[a]}},!0)})),a}},{key:"_downloadCSV",value:function(){this.setState({csvExport:!0})}},{key:"_onChangeFilter",value:function(e){this.setState({filter:e.target.value})}},{key:"render",value:function(){var e=this.props,t=e.accountsList,n=e.compactView,i=e.filter,s=e.customFilter,r=e.style,l=e.maxHeight,u=this.state,p=u.limit,d=u.headerHeight,m=1===t.length&&t[0]?t[0].get("id"):null,_=this._getHistory(t,this.props.showFilters&&"all"!==this.state.filter?this.state.filter:i,s).sort(A),f=_.length;r=r||{};var v=null;v=["all","transfer","limit_order_create","limit_order_cancel","fill_order","account_create","account_update","asset_create","witness_withdraw_pay","vesting_balance_withdraw"].map(function(e){return a.createElement("option",{value:e,key:e},y.a.translate("transaction.trxTypes."+e))});var w=_.length?_.slice(0,p).map(function(e){return a.createElement(c.a,{style:C,key:e.id,op:e.op,result:e.result,block:e.block_num,current:m,hideFee:!0,inverted:!1,hideOpLabel:n})}):[a.createElement("tr",{key:"no_recent"},a.createElement("td",{colSpan:n?"2":"3"},a.createElement(o.a,{content:"operation.no_recent"})))];return w.push(a.createElement("tr",{className:"total-value",key:"total_value"},a.createElement("td",{className:"column-hide-tiny"}),a.createElement("td",{style:S},f>0?a.createElement("span",null,a.createElement("a",{className:"inline-block",onClick:this._downloadCSV.bind(this),"data-tip":y.a.translate("transaction.csv_tip"),"data-place":"bottom"},a.createElement(g.a,{name:"excel",className:"icon-14px"}))):null),a.createElement("td",{style:{textAlign:"center"}}," ",this.props.showMore&&f>this.props.limit||p<f?a.createElement("a",{onClick:this._onIncreaseLimit.bind(this)},a.createElement(g.a,{name:"chevron-down",className:"icon-14px"})):null))),a.createElement("div",{className:"recent-transactions no-overflow",style:r},a.createElement("div",{className:"generic-bordered-box"},this.props.dashboard?null:a.createElement("div",{ref:"header"},a.createElement("div",{className:"block-content-header"},a.createElement("span",null,this.props.title?this.props.title:a.createElement(o.a,{content:"account.recent"})))),a.createElement("div",{className:"box-content grid-block no-margin",style:this.props.fullHeight?null:{maxHeight:l-d},ref:"transactions"},a.createElement("table",{className:"table"+(n?" compact":"")+(this.props.dashboard?" dashboard-table":"")},a.createElement("thead",null,a.createElement("tr",null,n?null:a.createElement("th",{style:C,className:"column-hide-tiny"},this.props.showFilters?a.createElement("select",{"data-place":"left","data-tip":y.a.translate("tooltip.filter_ops"),style:{paddingTop:5,width:"auto"},className:"cyb-select no-margin",value:this.state.filter,onChange:this._onChangeFilter.bind(this)},v):null),a.createElement("th",{style:C},a.createElement(o.a,{content:"account.votes.info"})),a.createElement("th",null))),a.createElement(h.a,{component:"tbody",transitionName:"newrow"},w))),f>0&&this.state.csvExport&&a.createElement("div",{id:"csv_export_container",style:{display:"none"}},a.createElement("div",null,a.createElement("div",null,"DATE"),a.createElement("div",null,"OPERATION"),a.createElement("div",null,"MEMO"),a.createElement("div",null,"AMOUNT")),_.map(function(e){return a.createElement(c.a,{key:e.id,op:e.op,result:e.result,block:e.block_num,inverted:!1,csvExportMode:!0})}))))}}]),t}();T.propTypes={accountsList:l.a.ChainAccountsList.isRequired,compactView:i.bool,limit:i.number,maxHeight:i.number,fullHeight:i.bool,showFilters:i.bool},T.defaultProps={limit:25,maxHeight:500,fullHeight:!1,showFilters:!1},T=Object(u.a)(T,{keep_updating:!0});var N=function(e){function t(){return w(this,t),b(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return E(t,a["Component"]),v(t,[{key:"render",value:function(){return a.createElement("span",{className:"wrapper"},this.props.children(this.props))}}]),t}();N.propTypes={asset:l.a.ChainAsset.isRequired,to:l.a.ChainAccount.isRequired,fromAccount:l.a.ChainAccount.isRequired},N.defaultProps={asset:"1.3.0"},N=Object(u.a)(N)},1574:
/*!******************************************!*\
  !*** ./lib/common/blockTradesMethods.js ***!
  \******************************************/
/*! exports provided: fetchCoins, fetchCoinsSimple, fetchBridgeCoins, getDepositLimit, estimateOutput, estimateInput, getActiveWallets, requestDepositAddress, getBackedCoins, validateAddress, getConversionJson, WithdrawAddresses */
/*! exports used: WithdrawAddresses, estimateInput, estimateOutput, getConversionJson, getDepositLimit, requestDepositAddress, validateAddress */function(e,t,n){"use strict";n.d(t,"e",function(){return o}),n.d(t,"c",function(){return r}),n.d(t,"b",function(){return c}),n.d(t,"f",function(){return u}),n.d(t,"g",function(){return p}),n.d(t,"d",function(){return h}),n.d(t,"a",function(){return m});var a=n(/*! ./localStorage */58),i=n(/*! api/apiConfig */89),s=new a.a("");function o(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:i.c.BASE+i.c.DEPOSIT_LIMIT;return fetch(n+"?inputCoinType="+encodeURIComponent(e)+"&outputCoinType="+encodeURIComponent(t),{method:"get",headers:new Headers({Accept:"application/json"})}).then(function(e){return e.json().then(function(e){return e})}).catch(function(n){console.log("error fetching deposit limit of",e,t,n)})}function r(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:i.c.BASE+i.c.ESTIMATE_OUTPUT;return fetch(a+"?inputAmount="+encodeURIComponent(e)+"&inputCoinType="+encodeURIComponent(t)+"&outputCoinType="+encodeURIComponent(n),{method:"get",headers:new Headers({Accept:"application/json"})}).then(function(e){return e.json().then(function(e){return e})}).catch(function(e){console.log("error fetching deposit limit of",t,n,e)})}function c(e,t,n){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:i.c.BASE+i.c.ESTIMATE_INPUT;return fetch(a+"?outputAmount="+encodeURIComponent(e)+"&inputCoinType="+encodeURIComponent(t)+"&outputCoinType="+encodeURIComponent(n),{method:"get",headers:new Headers({Accept:"application/json"})}).then(function(e){return e.json().then(function(e){return e})}).catch(function(e){console.log("error fetching deposit limit of",t,n,e)})}var l={};function u(e){var t=e.inputCoinType,n=e.outputCoinType,a=e.outputAddress,s=e.url,o=void 0===s?i.c.BASE_OL:s,r=e.stateCallback,c={inputCoinType:t,outputCoinType:n,outputAddress:a},u=JSON.stringify(c);l[u]||(l[u]=!0,fetch(o+"/simple-api/initiate-trade",{method:"post",headers:new Headers({Accept:"application/json","Content-Type":"application/json"}),body:u}).then(function(e){e.json().then(function(e){delete l[u];var t={address:e.inputAddress||"unknown",memo:e.inputMemo,error:e.error||null};r&&r(t)},function(e){delete l[u],r&&r(null)})},function(e){delete l[u],r&&r(null)}).catch(function(e){console.log("fetch error:",e),delete l[u]}))}function p(e){var t=e.url,n=void 0===t?i.c.BASE:t,a=e.walletType,s=e.newAddress;return s?fetch(n+"/wallets/"+a+"/address-validator?address="+encodeURIComponent(s),{method:"get",headers:new Headers({Accept:"application/json"})}).then(function(e){return e.json().then(function(e){return e.isValid})}).catch(function(e){console.log("validate error:",e)}):new Promise(function(e){return e()})}var d={};function h(e){var t=e.input_coin_type,n=e.output_coin_type,a=e.url,i=e.account_name;if(!t||!n)return Promise.reject();var s=JSON.stringify({inputCoinType:t,outputCoinType:n,outputAddress:i,inputMemo:"blocktrades conversion: "+t+"to"+n}),o=a+t+n+i;return new Promise(function(e,t){if(d[o])return e(d[o]);fetch(a+"/simple-api/initiate-trade",{method:"post",headers:new Headers({Accept:"application/json","Content-Type":"application/json"}),body:s}).then(function(n){n.json().then(function(t){d[o]=t,e(t)},t).catch(t)}).catch(t)})}var m={has:function(e){return s.has("history_address_"+e)},set:function(e){var t=e.wallet,n=e.addresses;s.set("history_address_"+t,n)},get:function(e){return s.get("history_address_"+e,[])},setLast:function(e){var t=e.wallet,n=e.address;s.set("history_address_last_"+t,n)},getLast:function(e){return s.get("history_address_last_"+e,"")}}},1583:
/*!***********************************************!*\
  !*** ./components/Account/AccountBalance.jsx ***!
  \***********************************************/
/*! exports provided: default */
/*! exports used: default */function(e,t,n){"use strict";var a=n(/*! react */0),i=(n(/*! prop-types */3),n(/*! ../Utility/AssetName */70)),s=n(/*! ../Utility/ChainTypes */21),o=n(/*! ../Utility/BindToChainState */24),r=n(/*! ../Utility/BalanceComponent */1392),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["Component"]),c(t,[{key:"render",value:function(){var e=this.props.asset.get("id"),t=this.props.account.getIn(["balances",e]);return t?a.createElement(r.a,{balance:t,replace:this.props.replace}):a.createElement("span",null,"0 ",a.createElement(i.a,{name:this.props.asset.get("symbol"),replace:this.props.replace}))}}]),t}();l.propTypes={account:s.a.ChainAccount.isRequired,asset:s.a.ChainAsset.isRequired},l.defaultProps={autosubscribe:!1},t.a=Object(o.a)(l,{keep_updating:!0})},1587:
/*!******************************************************!*\
  !*** ./lib/common/BlockTradesDepositAddressCache.js ***!
  \******************************************************/
/*! exports provided: default */
/*! exports used: default */function(e,t,n){"use strict";var a=n(/*! stores/WalletDb */15),i=n(/*! common/localStorage */58),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var o=new i.a("__cyb__"),r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.current_blocktrades_address_cache_version_string="2"}return s(e,[{key:"getIndexForDepositKeyInExchange",value:function(e,t,n){return[this.current_blocktrades_address_cache_version_string,e,t,n].reduce(function(e,t){return e.concat("[",t,"]")},"")}},{key:"getCachedInputAddress",value:function(e,t,n,i){a.a.getWallet();var s=this.getIndexForDepositKeyInExchange(t,n,i),r=o.get("deposit_keys",{});r[e]=r[e]||{},r[e][s]=r[e][s]||[];var c=r[e][s].length;return c?r[e][s][c-1]:null}},{key:"cacheInputAddress",value:function(e,t,n,i,s,r){if(s){a.a.getWallet();null;var c=this.getIndexForDepositKeyInExchange(t,n,i),l=o.get("deposit_keys",{});l[e]=l[e]||{},l[e][c]=l[e][c]||[],l[e][c].push({address:s,memo:r}),o.set("deposit_keys",l)}}}]),e}();t.a=r},1647:
/*!************************************!*\
  !*** ./lib/common/RuDexMethods.js ***!
  \************************************/
/*! exports provided: fetchCoinList, requestDepositAddress, validateAddress, WithdrawAddresses */
/*! exports used: WithdrawAddresses, validateAddress */function(e,t,n){"use strict";n.d(t,"b",function(){return o}),n.d(t,"a",function(){return r});var a=n(/*! ./localStorage */58),i=n(/*! api/apiConfig */89),s=new a.a("");function o(e){var t=e.url,n=void 0===t?i.d.BASE:t,a=e.walletType,s=e.newAddress;return s?fetch(n+"/wallets/"+a+"/check-address",{method:"post",headers:new Headers({Accept:"application/json","Content-Type":"application/json"}),body:JSON.stringify({address:s})}).then(function(e){return e.json().then(function(e){return e.isValid})}).catch(function(e){console.log("validate error:",e)}):new Promise(function(e){return e()})}var r={has:function(e){return s.has("history_address_"+e)},set:function(e){var t=e.wallet,n=e.addresses;s.set("history_address_"+t,n)},get:function(e){return s.get("history_address_"+e,[])},setLast:function(e){var t=e.wallet,n=e.address;s.set("history_address_last_"+t,n)},getLast:function(e){return s.get("history_address_last_"+e,"")}}},1648:
/*!*****************************************************************************!*\
  !*** ./components/DepositWithdraw/blocktrades/WithdrawModalBlocktrades.jsx ***!
  \*****************************************************************************/
/*! exports provided: default */
/*! exports used: default */
/*! ModuleConcatenation bailout: Module uses injected variables (Buffer) */function(e,t,n){"use strict";(function(e){var a=n(/*! react */0),i=n(/*! prop-types */3),s=n(/*! react-foundation-apps/src/trigger */81),o=n(/*! react-translate-component */1),r=n.n(o),c=n(/*! components/Utility/ChainTypes */21),l=n(/*! components/Utility/BindToChainState */24),u=n(/*! common/utils */8),p=n(/*! components/Utility/BalanceComponent */1392),d=n(/*! counterpart */14),h=n.n(d),m=n(/*! components/Utility/AmountSelector */1395),_=n(/*! actions/AccountActions */56),f=n(/*! react-foundation-apps/src/utils/foundation-api */35),y=n.n(f),g=n(/*! common/blockTradesMethods */1574),v=n(/*! cybexjs */2),w=n(/*! react-foundation-apps/src/modal */307),b=n(/*! common/trxHelper */296),E=n(/*! common/MarketClasses */33),k=n(/*! lodash */27),C=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var S=function(t){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.state={withdraw_amount:t.props.amount_to_withdraw,withdraw_address:g.a.getLast(e.output_wallet_type),withdraw_address_check_in_progress:!0,withdraw_address_is_valid:null,options_is_valid:!1,confirmation_is_valid:!1,withdraw_address_selected:g.a.getLast(e.output_wallet_type),memo:"",withdraw_address_first:!0,empty_withdraw_value:!1,from_account:e.account,fee_asset_id:"1.3.0",feeStatus:{}},t._validateAddress(t.state.withdraw_address,e),t._checkBalance=t._checkBalance.bind(t),t._updateFee=Object(k.debounce)(t._updateFee.bind(t),250),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,a["Component"]),C(n,[{key:"componentWillMount",value:function(){this._updateFee(),this._checkFeeStatus()}},{key:"componentWillUnmount",value:function(){this.unMounted=!0}},{key:"componentWillReceiveProps",value:function(e){var t=this;e.account!==this.state.from_account&&e.account!==this.props.account&&this.setState({from_account:e.account,feeStatus:{},fee_asset_id:"1.3.0",feeAmount:new E.a({amount:0})},function(){t._updateFee(),t._checkFeeStatus()})}},{key:"_updateFee",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state,n=t.fee_asset_id,a=t.from_account,i=this._getAvailableAssets(t).fee_asset_types;if(1===i.length&&i[0]!==n&&(n=i[0]),!a)return null;Object(b.b)({accountID:a.get("id"),feeID:n,options:["price_per_kbyte"],data:{type:"memo",content:this.props.output_coin_type+":"+t.withdraw_address+(t.memo?":"+t.memo:"")}}).then(function(t){var n=t.fee,a=t.hasBalance,i=t.hasPoolBalance;e.unMounted||e.setState({feeAmount:n,hasBalance:a,hasPoolBalance:i,error:!a||!i},e._checkBalance)})}},{key:"_checkFeeStatus",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state,n=t.from_account;if(n){var a=this._getAvailableAssets(t).fee_asset_types,i={},s=[];a.forEach(function(a){s.push(Object(b.b)({accountID:n.get("id"),feeID:a,options:["price_per_kbyte"],data:{type:"memo",content:e.props.output_coin_type+":"+t.withdraw_address+(t.memo?":"+t.memo:"")}}))}),Promise.all(s).then(function(n){a.forEach(function(e,t){i[e]=n[t]}),u.a.are_equal_shallow(t.feeStatus,i)||e.setState({feeStatus:i}),e._checkBalance()}).catch(function(e){console.error(e)})}}},{key:"onMemoChanged",value:function(e){this.setState({memo:e.target.value},this._updateFee)}},{key:"onWithdrawAmountChange",value:function(e){var t=e.amount;this.setState({withdraw_amount:t,empty_withdraw_value:void 0!==t&&!parseFloat(t)},this._checkBalance)}},{key:"onSelectChanged",value:function(e){var t=g.a.get(this.props.output_wallet_type)[e];g.a.setLast({wallet:this.props.output_wallet_type,address:t}),this.setState({withdraw_address_selected:t,options_is_valid:!1,withdraw_address:t,withdraw_address_check_in_progress:!0,withdraw_address_is_valid:null},this._updateFee),this._validateAddress(t)}},{key:"onWithdrawAddressChanged",value:function(e){var t=e.target.value.trim();this.setState({withdraw_address:t,withdraw_address_check_in_progress:!0,withdraw_address_selected:t,withdraw_address_is_valid:null},this._updateFee),this._validateAddress(t)}},{key:"_validateAddress",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.props;Object(g.g)({url:n.url,walletType:n.output_wallet_type,newAddress:e}).then(function(n){t.state.withdraw_address===e&&t.setState({withdraw_address_check_in_progress:!1,withdraw_address_is_valid:n})})}},{key:"_checkBalance",value:function(){var e=this.state,t=e.feeAmount,n=e.withdraw_amount,a=this.props,i=a.asset,s=a.balance;if(s&&t){var o=Object(b.a)(n,i,t,s);if(null!==o)return this.setState({balanceError:!o}),o}}},{key:"onSubmit",value:function(){if(!this.state.withdraw_address_check_in_progress&&this.state.withdraw_address&&this.state.withdraw_address.length&&null!==this.state.withdraw_amount)if(this.state.withdraw_address_is_valid)if(parseFloat(this.state.withdraw_amount)>0){if(g.a.has(this.props.output_wallet_type)){var t=g.a.get(this.props.output_wallet_type);-1==t.indexOf(this.state.withdraw_address)&&(t.push(this.state.withdraw_address),g.a.set({wallet:this.props.output_wallet_type,addresses:t}))}else{var n=[];n.push(this.state.withdraw_address),g.a.set({wallet:this.props.output_wallet_type,addresses:n})}g.a.setLast({wallet:this.props.output_wallet_type,address:this.state.withdraw_address});var a=this.props.asset,i=this.state.feeAmount,s=parseFloat(String.prototype.replace.call(this.state.withdraw_amount,/,/g,"")),o=parseFloat(String.prototype.replace.call(this.props.gateFee,/,/g,"")),r=new E.a({asset_id:a.get("id"),precision:a.get("precision"),real:s}),c=r.clone(this.props.balance.get("balance")),l=new E.a({asset_id:a.get("id"),precision:a.get("precision"),real:o});r.plus(l),c.lt(r)&&(r=c),_.a.transfer(this.props.account.get("id"),this.props.issuer.get("id"),r.getAmount(),a.get("id"),this.props.output_coin_type+":"+this.state.withdraw_address+(this.state.memo?":"+new e(this.state.memo,"utf-8"):""),null,i?i.asset_id:"1.3.0"),this.setState({empty_withdraw_value:!1})}else this.setState({empty_withdraw_value:!0});else y.a.publish(this.getWithdrawModalId(),"open")}},{key:"onSubmitConfirmation",value:function(){if(y.a.publish(this.getWithdrawModalId(),"close"),g.a.has(this.props.output_wallet_type)){var t=g.a.get(this.props.output_wallet_type);-1==t.indexOf(this.state.withdraw_address)&&(t.push(this.state.withdraw_address),g.a.set({wallet:this.props.output_wallet_type,addresses:t}))}else{var n=[];n.push(this.state.withdraw_address),g.a.set({wallet:this.props.output_wallet_type,addresses:n})}g.a.setLast({wallet:this.props.output_wallet_type,address:this.state.withdraw_address});var a=this.props.asset,i=u.a.get_asset_precision(a.get("precision")),s=String.prototype.replace.call(this.state.withdraw_amount,/,/g,""),o=this.state.feeAmount;_.a.transfer(this.props.account.get("id"),this.props.issuer.get("id"),parseInt(s*i,10),a.get("id"),this.props.output_coin_type+":"+this.state.withdraw_address+(this.state.memo?":"+new e(this.state.memo,"utf-8"):""),null,o?o.asset_id:"1.3.0")}},{key:"onDropDownList",value:function(){g.a.has(this.props.output_wallet_type)&&(!1===this.state.options_is_valid&&(this.setState({options_is_valid:!0}),this.setState({withdraw_address_first:!1})),!0===this.state.options_is_valid&&this.setState({options_is_valid:!1}))}},{key:"getWithdrawModalId",value:function(){return"confirmation"}},{key:"onAccountBalance",value:function(){var e=this.state.feeAmount;if(Object.keys(this.props.account.get("balances").toJS()).includes(this.props.asset.get("id"))){var t=new E.a({amount:this.props.balance.get("balance"),asset_id:this.props.asset.get("id"),precision:this.props.asset.get("precision")});t.asset_id===e.asset_id&&t.minus(e),this.setState({withdraw_amount:t.getAmount({real:!0}),empty_withdraw_value:!1},this._checkBalance)}}},{key:"setNestedRef",value:function(e){this.nestedRef=e}},{key:"onFeeChanged",value:function(e){var t=e.asset;this.setState({fee_asset_id:t.get("id")},this._updateFee)}},{key:"_getAvailableAssets",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state,t=e.from_account,n=e.feeStatus;var a=[];if(!t||!t.get("balances"))return{fee_asset_types:a};var i=e.from_account.get("balances").toJS();for(var s in a=Object.keys(i).sort(u.a.sortID),i){var o=v.b.getObject(s),r=v.b.getObject(i[s]);r&&0===r.get("balance")&&-1!==a.indexOf(s)&&a.splice(a.indexOf(s),1),o&&("1.3.0"===o.get("id")||u.a.isValidPrice(o.getIn(["options","core_exchange_rate"]))||a.splice(a.indexOf(s),1))}return{fee_asset_types:a=a.filter(function(e){return(void 0===n[t=e]||n[t]&&n[t].hasPoolBalance)&&function(e){return void 0===n[e]||n[e]&&n[e].hasBalance}(e);var t})}}},{key:"render",value:function(){var e=this.state,t=e.withdraw_address_selected,n=e.memo,i=g.a.get(this.props.output_wallet_type),o=null,c=this.props.account.get("balances").toJS(),l=Object.keys(c),u=this.getWithdrawModalId(),d=null,_=null,f=null;this.state.options_is_valid&&(_=a.createElement("div",{className:i.length?"blocktrades-options":"blocktrades-disabled-options"},i.map(function(e,t){return a.createElement("a",{key:t,onClick:this.onSelectChanged.bind(this,t)},e)},this))),!this.state.withdraw_address_check_in_progress&&this.state.withdraw_address&&this.state.withdraw_address.length&&(this.state.withdraw_address_is_valid||(d=a.createElement("div",{className:"has-error",style:{paddingTop:10}},a.createElement(r.a,{content:"gateway.valid_address",coin_type:this.props.output_coin_type})),f=a.createElement(w.a,{id:u,overlay:!0},a.createElement(s.a,{close:u},a.createElement("a",{href:"#",className:"close-button"},"×")),a.createElement("br",null),a.createElement("label",null,a.createElement(r.a,{content:"modal.confirmation.title"})),a.createElement("br",null),a.createElement("div",{className:"content-block"},a.createElement("input",{type:"submit",className:"button",onClick:this.onSubmitConfirmation.bind(this),value:h.a.translate("modal.confirmation.accept")}),a.createElement(s.a,{close:u},a.createElement("a",{href:!0,className:"secondary button"},a.createElement(r.a,{content:"modal.confirmation.cancel"})))))));var y=1,v=null;this.props.output_supports_memos&&(v=a.createElement("div",{className:"content-block"},a.createElement("label",null,a.createElement(r.a,{component:"span",content:"transfer.memo"})),a.createElement("textarea",{rows:"1",value:n,tabIndex:y++,onChange:this.onMemoChanged.bind(this)})));var b=this._getAvailableAssets().fee_asset_types;if(l.length>0){var E=this.props.asset.get("id");if(E){var k=c[E];o=a.createElement("span",{style:{borderBottom:"#A09F9F 1px dotted",cursor:"pointer"}},a.createElement(r.a,{component:"span",content:"transfer.available"})," : ",a.createElement("span",{className:"set-cursor",onClick:this.onAccountBalance.bind(this)},k?a.createElement(p.a,{balance:c[E]}):0))}else o="No funds"}else o="No funds";var C=this.state.error||this.state.balanceError||!this.state.withdraw_amount;return a.createElement("form",{className:"grid-block vertical full-width-content"},a.createElement("div",{className:"grid-container"},a.createElement("div",{className:"content-block"},a.createElement("h3",null,a.createElement(r.a,{content:"gateway.withdraw_coin",coin:this.props.output_coin_name,symbol:this.props.output_coin_symbol}))),a.createElement("div",{className:"content-block"},a.createElement(m.a,{label:"modal.withdraw.amount",amount:this.state.withdraw_amount,asset:this.props.asset.get("id"),assets:[this.props.asset.get("id")],placeholder:"0.0",onChange:this.onWithdrawAmountChange.bind(this),display_balance:o}),this.state.empty_withdraw_value?a.createElement("p",{className:"has-error no-margin",style:{paddingTop:10}},a.createElement(r.a,{content:"transfer.errors.valid"})):null,this.state.balanceError?a.createElement("p",{className:"has-error no-margin",style:{paddingTop:10}},a.createElement(r.a,{content:"transfer.errors.insufficient"})):null),this.state.feeAmount?a.createElement("div",{className:"content-block gate_fee"},a.createElement(m.a,{refCallback:this.setNestedRef.bind(this),label:"transfer.fee",disabled:!0,amount:this.state.feeAmount.getAmount({real:!0}),onChange:this.onFeeChanged.bind(this),asset:this.state.feeAmount.asset_id,assets:b,tabIndex:y++}),this.state.hasBalance?null:a.createElement("p",{className:"has-error no-margin",style:{paddingTop:10}},a.createElement(r.a,{content:"transfer.errors.noFeeBalance"})),this.state.hasPoolBalance?null:a.createElement("p",{className:"has-error no-margin",style:{paddingTop:10}},a.createElement(r.a,{content:"transfer.errors.noPoolBalance"}))):null,this.props.gateFee?a.createElement("div",{className:"amount-selector right-selector",style:{paddingBottom:20}},a.createElement("label",{className:"left-label"},a.createElement(r.a,{content:"gateway.fee"})),a.createElement("div",{className:"inline-label input-wrapper"},a.createElement("input",{type:"text",disabled:!0,value:this.props.gateFee}),a.createElement("div",{className:"form-label select floating-dropdown"},a.createElement("div",{className:"dropdown-wrapper inactive"},a.createElement("div",null,this.props.output_coin_symbol))))):null,a.createElement("div",{className:"content-block"},a.createElement("label",{className:"left-label"},a.createElement(r.a,{component:"span",content:"modal.withdraw.address"})),a.createElement("div",{className:"blocktrades-select-dropdown"},a.createElement("div",{className:"inline-label"},a.createElement("input",{type:"text",value:t,tabIndex:"4",onChange:this.onWithdrawAddressChanged.bind(this),autoComplete:"off"}),a.createElement("span",{onClick:this.onDropDownList.bind(this)},"▼"))),a.createElement("div",{className:"blocktrades-position-options"},_),d),v,a.createElement("div",{className:"button-group"},a.createElement("div",{onClick:this.onSubmit.bind(this),className:"button"+(C?" disabled":"")},a.createElement(r.a,{content:"modal.withdraw.submit"})),a.createElement(s.a,{close:this.props.modal_id},a.createElement("div",{className:"button"},a.createElement(r.a,{content:"account.perm.cancel"})))),f))}}]),n}();S.propTypes={account:c.a.ChainAccount.isRequired,issuer:c.a.ChainAccount.isRequired,asset:c.a.ChainAsset.isRequired,output_coin_name:i.string.isRequired,output_coin_symbol:i.string.isRequired,output_coin_type:i.string.isRequired,url:i.string,output_wallet_type:i.string,output_supports_memos:i.bool.isRequired,amount_to_withdraw:i.string,balance:c.a.ChainObject},t.a=Object(l.a)(S,{keep_updating:!0})}).call(this,n(/*! ./../../../../node_modules/buffer/index.js */37).Buffer)},1792:
/*!*****************************************************************!*\
  !*** ./components/DepositWithdraw/rudex/RuDexWithdrawModal.jsx ***!
  \*****************************************************************/
/*! exports provided: default */
/*! exports used: default */
/*! ModuleConcatenation bailout: Module uses injected variables (Buffer) */function(e,t,n){"use strict";(function(e){var a=n(/*! react */0),i=n(/*! prop-types */3),s=n(/*! react-foundation-apps/src/trigger */81),o=n(/*! react-translate-component */1),r=n.n(o),c=n(/*! components/Utility/ChainTypes */21),l=n(/*! components/Utility/BindToChainState */24),u=n(/*! common/utils */8),p=n(/*! components/Utility/BalanceComponent */1392),d=n(/*! counterpart */14),h=n.n(d),m=n(/*! components/Utility/AmountSelector */1395),_=n(/*! actions/AccountActions */56),f=n(/*! react-foundation-apps/src/utils/foundation-api */35),y=n.n(f),g=n(/*! common/RuDexMethods */1647),v=(n(/*! stores/AccountStore */28),n(/*! cybexjs */2)),w=n(/*! react-foundation-apps/src/modal */307),b=n(/*! common/trxHelper */296),E=n(/*! common/MarketClasses */33),k=n(/*! lodash */27),C=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var S=function(t){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.state={withdraw_amount:t.props.amount_to_withdraw,withdraw_address:g.a.getLast(e.output_wallet_type),withdraw_address_check_in_progress:!0,withdraw_address_is_valid:null,options_is_valid:!1,confirmation_is_valid:!1,withdraw_address_selected:g.a.getLast(e.output_wallet_type),memo:"",withdraw_address_first:!0,empty_withdraw_value:!1,from_account:e.account,fee_asset_id:"1.3.0",feeStatus:{}},t._validateAddress(t.state.withdraw_address,e),t._checkBalance=t._checkBalance.bind(t),t._checkMinAmount=t._checkMinAmount.bind(t),t._updateFee=Object(k.debounce)(t._updateFee.bind(t),250),t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,a["Component"]),C(n,[{key:"componentWillMount",value:function(){this._updateFee(),this._checkFeeStatus()}},{key:"componentWillUnmount",value:function(){this.unMounted=!0}},{key:"componentWillReceiveProps",value:function(e){var t=this;e.account!==this.state.from_account&&e.account!==this.props.account&&this.setState({from_account:e.account,feeStatus:{},fee_asset_id:"1.3.0",feeAmount:new E.a({amount:0})},function(){t._updateFee(),t._checkFeeStatus()})}},{key:"_updateFee",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state,n=t.fee_asset_id,a=t.from_account,i=this._getAvailableAssets(t).fee_asset_types;if(1===i.length&&i[0]!==n&&(n=i[0]),!a)return null;Object(b.b)({accountID:a.get("id"),feeID:n,options:["price_per_kbyte"],data:{type:"memo",content:this.props.output_coin_type+":"+t.withdraw_address+(t.memo?":"+t.memo:"")}}).then(function(t){var n=t.fee,a=t.hasBalance,i=t.hasPoolBalance;e.unMounted||e.setState({feeAmount:n,hasBalance:a,hasPoolBalance:i,error:!a||!i},e._checkBalance)})}},{key:"_checkFeeStatus",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state,n=t.from_account;if(n){var a=this._getAvailableAssets(t).fee_asset_types,i={},s=[];a.forEach(function(a){s.push(Object(b.b)({accountID:n.get("id"),feeID:a,options:["price_per_kbyte"],data:{type:"memo",content:e.props.output_coin_type+":"+t.withdraw_address+(t.memo?":"+t.memo:"")}}))}),Promise.all(s).then(function(n){a.forEach(function(e,t){i[e]=n[t]}),u.a.are_equal_shallow(t.feeStatus,i)||e.setState({feeStatus:i}),e._checkBalance()}).catch(function(e){console.error(e)})}}},{key:"onMemoChanged",value:function(e){this.setState({memo:e.target.value},this._updateFee)}},{key:"onWithdrawAmountChange",value:function(e){var t=e.amount;this.setState({withdraw_amount:t,empty_withdraw_value:void 0!==t&&!parseFloat(t)},function(){this._checkBalance,this._checkMinAmount()})}},{key:"onSelectChanged",value:function(e){var t=g.a.get(this.props.output_wallet_type)[e];g.a.setLast({wallet:this.props.output_wallet_type,address:t}),this.setState({withdraw_address_selected:t,options_is_valid:!1,withdraw_address:t,withdraw_address_check_in_progress:!0,withdraw_address_is_valid:null},this._updateFee),this._validateAddress(t)}},{key:"onWithdrawAddressChanged",value:function(e){var t=e.target.value.trim();this.setState({withdraw_address:t,withdraw_address_check_in_progress:!0,withdraw_address_selected:t,withdraw_address_is_valid:null},this._updateFee),this._validateAddress(t)}},{key:"_validateAddress",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.props;Object(g.b)({url:n.url,walletType:n.output_wallet_type,newAddress:e}).then(function(n){t.state.withdraw_address===e&&t.setState({withdraw_address_check_in_progress:!1,withdraw_address_is_valid:n})})}},{key:"_checkBalance",value:function(){var e=this.state,t=e.feeAmount,n=e.withdraw_amount,a=this.props,i=a.asset,s=a.balance;if(s&&t){var o=Object(b.a)(n,i,t,s);if(null!==o)return this.setState({balanceError:!o}),o}}},{key:"_checkMinAmount",value:function(){var e=this.state.withdraw_amount;if(null!==e){var t=e<this.props.min_amount/u.a.get_asset_precision(this.props.asset_precision);return console.log("X",e,this.props.min_amount/u.a.get_asset_precision(this.props.asset_precision)),this.setState({minAmountError:t}),t}}},{key:"onSubmit",value:function(){if(!this.state.withdraw_address_check_in_progress&&this.state.withdraw_address&&this.state.withdraw_address.length&&null!==this.state.withdraw_amount)if(this.state.withdraw_address_is_valid)if(parseFloat(this.state.withdraw_amount)>0){if(g.a.has(this.props.output_wallet_type)){var t=g.a.get(this.props.output_wallet_type);-1==t.indexOf(this.state.withdraw_address)&&(t.push(this.state.withdraw_address),g.a.set({wallet:this.props.output_wallet_type,addresses:t}))}else{var n=[];n.push(this.state.withdraw_address),g.a.set({wallet:this.props.output_wallet_type,addresses:n})}g.a.setLast({wallet:this.props.output_wallet_type,address:this.state.withdraw_address});var a=this.props.asset,i=this.state.feeAmount,s=parseFloat(String.prototype.replace.call(this.state.withdraw_amount,/,/g,"")),o=new E.a({asset_id:a.get("id"),precision:a.get("precision"),real:s});_.a.transfer(this.props.account.get("id"),this.props.issuer.get("id"),o.getAmount(),a.get("id"),this.props.output_coin_type+":"+this.state.withdraw_address+(this.state.memo?":"+new e(this.state.memo,"utf-8"):""),null,i?i.asset_id:"1.3.0"),this.setState({empty_withdraw_value:!1})}else this.setState({empty_withdraw_value:!0});else y.a.publish(this.getWithdrawModalId(),"open")}},{key:"onSubmitConfirmation",value:function(){if(y.a.publish(this.getWithdrawModalId(),"close"),g.a.has(this.props.output_wallet_type)){var t=g.a.get(this.props.output_wallet_type);-1==t.indexOf(this.state.withdraw_address)&&(t.push(this.state.withdraw_address),g.a.set({wallet:this.props.output_wallet_type,addresses:t}))}else{var n=[];n.push(this.state.withdraw_address),g.a.set({wallet:this.props.output_wallet_type,addresses:n})}g.a.setLast({wallet:this.props.output_wallet_type,address:this.state.withdraw_address});var a=this.props.asset,i=u.a.get_asset_precision(a.get("precision")),s=String.prototype.replace.call(this.state.withdraw_amount,/,/g,""),o=this.state.feeAmount;_.a.transfer(this.props.account.get("id"),this.props.issuer.get("id"),parseInt(s*i,10),a.get("id"),this.props.output_coin_type+":"+this.state.withdraw_address+(this.state.memo?":"+new e(this.state.memo,"utf-8"):""),null,o?o.asset_id:"1.3.0")}},{key:"onDropDownList",value:function(){g.a.has(this.props.output_wallet_type)&&(!1===this.state.options_is_valid&&(this.setState({options_is_valid:!0}),this.setState({withdraw_address_first:!1})),!0===this.state.options_is_valid&&this.setState({options_is_valid:!1}))}},{key:"getWithdrawModalId",value:function(){return"confirmation"}},{key:"onAccountBalance",value:function(){var e=this.state.feeAmount;if(Object.keys(this.props.account.get("balances").toJS()).includes(this.props.asset.get("id"))){var t=new E.a({amount:this.props.balance.get("balance"),asset_id:this.props.asset.get("id"),precision:this.props.asset.get("precision")});t.asset_id===e.asset_id&&t.minus(e),this.setState({withdraw_amount:t.getAmount({real:!0}),empty_withdraw_value:!1},this._checkBalance)}}},{key:"setNestedRef",value:function(e){this.nestedRef=e}},{key:"onFeeChanged",value:function(e){var t=e.asset;this.setState({fee_asset_id:t.get("id")},this._updateFee)}},{key:"_getAvailableAssets",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state,t=e.from_account,n=e.feeStatus;var a=[];if(!t||!t.get("balances"))return{fee_asset_types:a};var i=e.from_account.get("balances").toJS();for(var s in a=Object.keys(i).sort(u.a.sortID),i){var o=v.b.getObject(s),r=v.b.getObject(i[s]);r&&0===r.get("balance")&&-1!==a.indexOf(s)&&a.splice(a.indexOf(s),1),o&&("1.3.0"===o.get("id")||u.a.isValidPrice(o.getIn(["options","core_exchange_rate"]))||a.splice(a.indexOf(s),1))}return{fee_asset_types:a=a.filter(function(e){return(void 0===n[t=e]||n[t]&&n[t].hasPoolBalance)&&function(e){return void 0===n[e]||n[e]&&n[e].hasBalance}(e);var t})}}},{key:"render",value:function(){var e=this.state,t=e.withdraw_address_selected,n=e.memo,i=g.a.get(this.props.output_wallet_type),o=null,c=this.props.account.get("balances").toJS(),l=Object.keys(c),d=this.getWithdrawModalId(),_=null,f=null,y=null;this.state.options_is_valid&&(f=a.createElement("div",{className:i.length?"rudex-options":"rudex-disabled-options"},i.map(function(e,t){return a.createElement("a",{key:t,onClick:this.onSelectChanged.bind(this,t)},e)},this))),!this.state.withdraw_address_check_in_progress&&this.state.withdraw_address&&this.state.withdraw_address.length&&(this.state.withdraw_address_is_valid||(_=a.createElement("div",{className:"has-error",style:{paddingTop:10}},a.createElement(r.a,{content:"gateway.valid_address",coin_type:this.props.output_coin_type})),y=a.createElement(w.a,{id:d,overlay:!0},a.createElement(s.a,{close:d},a.createElement("a",{href:"#",className:"close-button"},"×")),a.createElement("br",null),a.createElement("label",null,a.createElement(r.a,{content:"modal.confirmation.title"})),a.createElement("br",null),a.createElement("div",{className:"content-block"},a.createElement("input",{type:"submit",className:"button",onClick:this.onSubmitConfirmation.bind(this),value:h.a.translate("modal.confirmation.accept")}),a.createElement(s.a,{close:d},a.createElement("a",{href:!0,className:"secondary button"},a.createElement(r.a,{content:"modal.confirmation.cancel"})))))));var v=1,b=null;this.props.output_supports_memos&&(b=a.createElement("div",{className:"content-block"},a.createElement("label",null,a.createElement(r.a,{component:"span",content:"transfer.memo"})),a.createElement("textarea",{rows:"1",value:n,tabIndex:v++,onChange:this.onMemoChanged.bind(this)})));var E=this._getAvailableAssets().fee_asset_types;if(l.length>0){var k=this.props.asset.get("id");if(k){var C=c[k];o=a.createElement("span",{style:{borderBottom:"#A09F9F 1px dotted",cursor:"pointer"}},a.createElement(r.a,{component:"span",content:"transfer.available"})," : ",a.createElement("span",{className:"set-cursor",onClick:this.onAccountBalance.bind(this)},C?a.createElement(p.a,{balance:c[k]}):0))}else o="No funds"}else o="No funds";return a.createElement("form",{className:"grid-block vertical full-width-content"},a.createElement("div",{className:"grid-container"},a.createElement("div",{className:"content-block"},a.createElement("h3",null,a.createElement(r.a,{content:"gateway.withdraw_coin",coin:this.props.output_coin_name,symbol:this.props.output_coin_symbol}))),a.createElement("div",{className:"content-block"},a.createElement(m.a,{label:"modal.withdraw.amount",amount:this.state.withdraw_amount,asset:this.props.asset.get("id"),assets:[this.props.asset.get("id")],placeholder:"0.0",onChange:this.onWithdrawAmountChange.bind(this),display_balance:o}),this.state.empty_withdraw_value?a.createElement("p",{className:"has-error no-margin",style:{paddingTop:10}},a.createElement(r.a,{content:"transfer.errors.valid"})):null,this.state.balanceError?a.createElement("p",{className:"has-error no-margin",style:{paddingTop:10}},a.createElement(r.a,{content:"transfer.errors.insufficient"})):null,this.state.minAmountError?a.createElement("p",{className:"has-error no-margin",style:{paddingTop:10}},a.createElement(r.a,{content:"gateway.rudex.min_amount_error"})):null,a.createElement("p",{className:"no-margin",style:{paddingTop:10}},a.createElement("b",null,a.createElement(r.a,{content:"gateway.rudex.min_amount",minAmount:u.a.format_number(this.props.min_amount/u.a.get_asset_precision(this.props.asset_precision),this.props.asset_precision,!1),symbol:this.props.output_coin_symbol})))),this.state.feeAmount?a.createElement("div",{className:"content-block gate_fee"},a.createElement(m.a,{refCallback:this.setNestedRef.bind(this),label:"transfer.fee",disabled:!0,amount:this.state.feeAmount.getAmount({real:!0}),onChange:this.onFeeChanged.bind(this),asset:this.state.feeAmount.asset_id,assets:E,tabIndex:v++}),this.state.hasBalance?null:a.createElement("p",{className:"has-error no-margin",style:{paddingTop:10}},a.createElement(r.a,{content:"transfer.errors.noFeeBalance"})),this.state.hasPoolBalance?null:a.createElement("p",{className:"has-error no-margin",style:{paddingTop:10}},a.createElement(r.a,{content:"transfer.errors.noPoolBalance"}))):null,this.props.gateFee?a.createElement("div",{className:"amount-selector right-selector",style:{paddingBottom:20}},a.createElement("label",{className:"left-label"},a.createElement(r.a,{content:"gateway.fee"})),a.createElement("div",{className:"inline-label input-wrapper"},a.createElement("input",{type:"text",disabled:!0,value:this.props.gateFee}),a.createElement("div",{className:"form-label select floating-dropdown"},a.createElement("div",{className:"dropdown-wrapper inactive"},a.createElement("div",null,this.props.output_coin_symbol))))):null,a.createElement("div",{className:"content-block"},a.createElement("label",{className:"left-label"},a.createElement(r.a,{component:"span",content:"modal.withdraw.address"})),a.createElement("div",{className:"rudex-select-dropdown"},a.createElement("div",{className:"inline-label"},a.createElement("input",{type:"text",value:t,tabIndex:"4",onChange:this.onWithdrawAddressChanged.bind(this),autoComplete:"off"}),a.createElement("span",{onClick:this.onDropDownList.bind(this)},"▼"))),a.createElement("div",{className:"rudex-position-options"},f),_),b,a.createElement("div",{className:"button-group"},a.createElement("div",{onClick:this.onSubmit.bind(this),className:"button"+(this.state.error||this.state.balanceError||this.state.minAmountError?" disabled":"")},a.createElement(r.a,{content:"modal.withdraw.submit"})),a.createElement(s.a,{close:this.props.modal_id},a.createElement("div",{className:"button"},a.createElement(r.a,{content:"account.perm.cancel"})))),y))}}]),n}();S.propTypes={account:c.a.ChainAccount.isRequired,issuer:c.a.ChainAccount.isRequired,asset:c.a.ChainAsset.isRequired,output_coin_name:i.string.isRequired,output_coin_symbol:i.string.isRequired,output_coin_type:i.string.isRequired,url:i.string,output_wallet_type:i.string,output_supports_memos:i.bool.isRequired,amount_to_withdraw:i.string,balance:c.a.ChainObject,min_amount:i.number},t.a=Object(l.a)(S,{keep_updating:!0})}).call(this,n(/*! ./../../../../node_modules/buffer/index.js */37).Buffer)},1793:
/*!***************************************************!*\
  !*** ./components/DepositWithdraw/BitKapital.jsx ***!
  \***************************************************/
/*! exports provided: default */
/*! exports used: default */
/*! ModuleConcatenation bailout: Module uses injected variables (Buffer) */function(e,t,n){"use strict";(function(e){var a=n(/*! react */0),i=(n(/*! prop-types */3),n(/*! ../Utility/ChainTypes */21)),s=n(/*! ../Utility/BindToChainState */24),o=n(/*! react-translate-component */1),r=n.n(o),c=n(/*! classnames */40),l=n.n(c),u=n(/*! stores/TransactionConfirmStore */241),p=n(/*! actions/AccountActions */56),d=n(/*! actions/SettingsActions */22),h=n(/*! ../Account/AccountBalance */1583),m=n(/*! common/utils */8),_=(n(/*! stores/SettingsStore */13),function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}());var f=function(t){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this));return t.state={action:e.viewSettings.get("bktAction","deposit"),min:50,max:1e5},t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,a["Component"]),_(n,[{key:"_renderDeposits",value:function(){}},{key:"_renderWithdrawals",value:function(){return a.createElement("form",{onSubmit:this._onSubmit.bind(this)},a.createElement("div",{style:{padding:"20px 0"}},a.createElement(r.a,{content:"gateway.balance"}),":  ",a.createElement("span",{style:{fontWeight:"bold",color:"#4A90E2",textAlign:"right"}},a.createElement(h.a,{account:this.props.account.get("name"),asset:this.props.asset.get("symbol")}))),a.createElement("label",null,a.createElement(r.a,{content:"exchange.quantity"}),a.createElement("input",{ref:"amount",required:!0,id:"amount",type:"number",min:this.state.min,max:this.state.max})),a.createElement("label",null,a.createElement(r.a,{content:"gateway.iban"}),a.createElement("input",{ref:"iban",required:!0,id:"iban",type:"text"})),a.createElement("button",{className:"button",type:"submit"},a.createElement(r.a,{content:"gateway.withdraw_now"})))}},{key:"changeAction",value:function(e){this.setState({action:e}),d.a.changeViewSetting({bktAction:e})}},{key:"_onSubmit",value:function(t){var n=this;t.preventDefault();var a=this.state,i=a.min,s=a.max,o=this.props,r=o.asset,c=o.account,l=o.bitKapital,d=parseInt(this.refs.amount.value,10),h=this.refs.iban.value;console.log("amount:",d,"iban:",h);var _=m.a.get_asset_precision(r.get("precision"));d<i||d>s||p.a.transfer(c.get("id"),l.get("id"),parseInt(d*_,10),r.get("id"),new e("BOZDURMA - "+h.toUpperCase(),"utf-8"),null,r.get("id")).then(function(){u.a.unlisten(n.onTrxIncluded),u.a.listen(n.onTrxIncluded)})}},{key:"onTrxIncluded",value:function(e){e.included&&e.broadcasted_transaction?(u.a.unlisten(this.onTrxIncluded),u.a.reset()):e.closed&&(u.a.unlisten(this.onTrxIncluded),u.a.reset())}},{key:"render",value:function(){var e=this.props,t=(e.jianjolly,e.onay,e.account,this.state.action);return a.createElement("div",{className:"BitKapital"},a.createElement("div",{className:"content-block"},a.createElement("div",{style:{paddingBottom:15}},a.createElement("div",{style:{marginRight:10},onClick:this.changeAction.bind(this,"deposit"),className:l()("button","deposit"===t?"active":"outline")},a.createElement(r.a,{content:"gateway.deposit"})),a.createElement("div",{onClick:this.changeAction.bind(this,"withdraw"),className:l()("button","withdraw"===t?"active":"outline")},a.createElement(r.a,{content:"gateway.withdraw"}))),"deposit"===t?this._renderDeposits():this._renderWithdrawals()))}}]),n}();f.propTypes={jianjolly:i.a.ChainAccount.isRequired,onay:i.a.ChainAccount.isRequired,bitKapital:i.a.ChainAccount.isRequired,asset:i.a.ChainAsset.isRequired},f.defaultProps={jianjolly:"1.2.126253",bitKapital:"1.2.130090",onay:"1.2.139289",asset:"KAPITAL"},t.a=Object(s.a)(f)}).call(this,n(/*! ./../../../node_modules/buffer/index.js */37).Buffer)},1794:
/*!************************************************************************************!*\
  !*** ./components/DepositWithdraw/blocktrades/BlockTradesBridgeDepositRequest.jsx ***!
  \************************************************************************************/
/*! exports provided: default */
/*! exports used: default */
/*! ModuleConcatenation bailout: Module uses injected variables (Buffer) */function(e,t,n){"use strict";(function(e){var a=n(/*! react */0),i=n(/*! prop-types */3),s=n(/*! react-translate-component */1),o=n.n(s),r=n(/*! components/Utility/ChainTypes */21),c=n(/*! components/Utility/BindToChainState */24),l=n(/*! ../../Modal/BaseModal */110),u=n(/*! react-foundation-apps/src/utils/foundation-api */35),p=n.n(u),d=n(/*! ../../Account/AccountBalance */1583),h=n(/*! ./WithdrawModalBlocktrades */1648),m=n(/*! common/BlockTradesDepositAddressCache */1587),_=n(/*! common/utils */8),f=n(/*! actions/AccountActions */56),y=n(/*! stores/TransactionConfirmStore */241),g=n(/*! api/apiConfig */89),v=n(/*! lodash */27),w=n(/*! common/trxHelper */296),b=n(/*! common/MarketClasses */33),E=(n(/*! cybexjs */2),n(/*! common/blockTradesMethods */1574)),k=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],a=!0,i=!1,s=void 0;try{for(var o,r=e[Symbol.iterator]();!(a=(o=r.next()).done)&&(n.push(o.value),!t||n.length!==t);a=!0);}catch(e){i=!0,s=e}finally{try{!a&&r.return&&r.return()}finally{if(i)throw s}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),C=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function A(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function O(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function T(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var N=function(t){function n(e){A(this,n);var t=O(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e));return t.state={error:null,conversion_memo:null,feeStatus:{}},t._updateFee=Object(v.debounce)(t._updateFee.bind(t),150),t._checkFeeStatus=t._checkFeeStatus.bind(t),t._checkBalance=t._checkBalance.bind(t),t}return T(n,a["Component"]),C(n,[{key:"_getFeeID",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=this._getCurrentBalance(e);return e.account.get("balances").has("1.3.0")?"1.3.0":t?t.get("asset_type"):"1.3.0"}},{key:"componentWillMount",value:function(){this._updateFee(),this._checkFeeStatus()}},{key:"componentWillUnmount",value:function(){this.unMounted=!0}},{key:"componentWillReceiveProps",value:function(e){e.amount.equals(this.props.amount)&&e.account_id===this.props.account_id||this._updateFee()}},{key:"_updateFee",value:function(){var e=this,t=this._getFeeID();Object(E.d)(this.props).then(function(n){Object(w.b)({accountID:e.props.account_id,feeID:t,options:["price_per_kbyte"],data:{type:"memo",content:n.inputMemo}}).then(function(t){var n=t.fee,a=t.hasBalance,i=t.hasPoolBalance;e.unMounted||e.setState({feeAmount:n,hasBalance:a,hasPoolBalance:i,error:!a||!i},e._checkFeeStatus)})})}},{key:"_checkFeeStatus",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.account;if(t){var n=Object.keys(this.props.account.get("balances").toJS());n.length||(n=["1.3.0"]);var a={},i=[];Object(E.d)(this.props).then(function(s){n.forEach(function(e){i.push(Object(w.b)({accountID:t.get("id"),feeID:e,options:["price_per_kbyte"],data:{type:"memo",content:s.inputMemo}}))}),Promise.all(i).then(function(t){e.unMounted||(n.forEach(function(e,n){a[e]=t[n]}),_.a.are_equal_shallow(e.state.feeStatus,a)||e.setState({feeStatus:a}),e._checkBalance())}).catch(function(e){console.error(e)})})}}},{key:"_getCurrentBalance",value:function(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props).balance}},{key:"_checkBalance",value:function(){var e=this.state.feeAmount,t=this.props,n=t.asset,a=t.amount,i=this._getCurrentBalance();if(i&&e){var s=Object(w.a)(a.getAmount({real:!0}),n,e,i);if(null!==s)return this.setState({balanceError:!s}),s}}},{key:"onTrxIncluded",value:function(e){e.included&&e.broadcasted_transaction?(y.a.unlisten(this.onTrxIncluded),y.a.reset()):e.closed&&(y.a.unlisten(this.onTrxIncluded),y.a.reset())}},{key:"onConvert",value:function(){var t=this,n=this.props,a=n.input_coin_type,i=n.output_coin_type,s=n.amount,o=this.state.balanceError;Object(E.d)(this.props).then(function(n){if(n.inputCoinType!=a||n.outputCoinType!=i)throw new Error("unexpected reply from initiate-trade");a!=n.inputCoinType||i!=n.outputCoinType||o||(t.setState({conversion_memo:n.inputMemo}),t.setState({error:null}),f.a.transfer(t.props.account_id,"1.2.32567",s.getAmount(),t.props.asset.get("id"),n.inputMemo?new e(n.inputMemo,"utf-8"):"",null,t._getFeeID()).then(function(){y.a.unlisten(t.onTrxIncluded),y.a.listen(t.onTrxIncluded)}).catch(function(e){var n=e.message?e.message.split("\n")[1]:null;console.log("error: ",e,n),t.setState({error:n})}))}).catch(function(){t.setState({conversion_memo:null})})}},{key:"render",value:function(){var e="button disabled";return Object.keys(this.props.account_balances.toJS()).includes(this.props.asset.get("id"))&&!this.state.balanceError&&this.state.hasBalance&&this.props.amount.getAmount()>0&&(e="button"),a.createElement("span",null,a.createElement("button",{className:e,onClick:this.onConvert.bind(this)},a.createElement(o.a,{content:""}),a.createElement(o.a,{content:"gateway.convert_now"})),this.state.balanceError?a.createElement("div",{style:{paddingTop:15},className:"has-error"},a.createElement(o.a,{content:"transfer.errors.insufficient"})):null)}}]),n}();N.propTypes={balance:r.a.ChainObject,input_coin_type:i.string.isRequired,output_coin_type:i.string.isRequired,account_name:i.string.isRequired,account_id:i.string.isRequired,url:i.string.isRequired},N=Object(c.a)(N);var j=function(e){function t(){return A(this,t),O(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return T(t,a["Component"]),C(t,[{key:"render",value:function(){var e=a.createElement(N,{asset:this.props.asset,account:this.props.account,input_coin_type:this.props.input_coin_type,output_coin_type:this.props.output_coin_type,account_name:this.props.account_name,amount:new b.a({real:this.props.amount,asset_id:this.props.asset.get("id"),precision:this.props.asset.get("precision")}),account_id:this.props.account_id,account_balances:this.props.account_balances,url:this.props.url,balance:this.props.account.get("balances").toJS()[this.props.asset.get("id")]});return a.createElement("span",null,e)}}]),t}();j.propTypes={asset:r.a.ChainAsset.isRequired,input_coin_type:i.string.isRequired,output_coin_type:i.string.isRequired,account_name:i.string.isRequired,account_id:i.string.isRequired,url:i.string.isRequired},j=Object(c.a)(j);var x=function(e){function t(){return A(this,t),O(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return T(t,a["Component"]),C(t,[{key:"getWithdrawModalId",value:function(){return"withdraw_asset_"+this.props.gateway+"_bridge"}},{key:"onWithdraw",value:function(){p.a.publish(this.getWithdrawModalId(),"open")}},{key:"render",value:function(){var e=this.getWithdrawModalId(),t="button disabled";return Object.keys(this.props.account.get("balances").toJS()).includes(this.props.asset.get("id"))&&!(this.props.amount_to_withdraw.indexOf(" ")>=0)&&!isNaN(this.props.amount_to_withdraw)&&this.props.amount_to_withdraw>0&&this.props.amount_to_withdraw<=this.props.balance.toJS().balance/_.a.get_asset_precision(this.props.asset.get("precision"))&&(t="button"),a.createElement("span",null,a.createElement("span",null,a.createElement("button",{className:t,onClick:this.onWithdraw.bind(this)},a.createElement(o.a,{content:""}),a.createElement(o.a,{content:"gateway.withdraw_now"})," ")),a.createElement(l.a,{id:e,overlay:!0},a.createElement("br",null),a.createElement("div",{className:"grid-block vertical"},a.createElement(h.a,{key:""+this.props.key,account:this.props.account.get("name"),issuer:this.props.issuer,asset:this.props.asset.get("id"),output_coin_name:this.props.output_coin_name,output_coin_symbol:this.props.output_coin_symbol,output_coin_type:this.props.output_coin_type,output_supports_memos:this.props.output_supports_memos,amount_to_withdraw:this.props.amount_to_withdraw,modal_id:e,url:this.props.url,output_wallet_type:this.props.output_wallet_type,balance:this.props.account.get("balances").toJS()[this.props.asset.get("id")]}))))}}]),t}();x.propTypes={balance:r.a.ChainObject,url:i.string.isRequired},x=Object(c.a)(x);var I=function(e){function t(){return A(this,t),O(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return T(t,a["Component"]),C(t,[{key:"render",value:function(){var e=a.createElement(x,{key:this.props.key,account:this.props.account,issuer:this.props.issuer,asset:this.props.asset,output_coin_name:this.props.output_coin_name,output_coin_symbol:this.props.output_coin_symbol,output_coin_type:this.props.output_coin_type,output_supports_memos:this.props.output_supports_memos,amount_to_withdraw:this.props.amount_to_withdraw,url:this.props.url,gateway:this.props.gateway,output_wallet_type:this.props.output_wallet_type,balance:this.props.account.get("balances").toJS()[this.props.asset.get("id")]});return a.createElement("span",null,e)}}]),t}();I.propTypes={account:r.a.ChainAccount.isRequired,asset:r.a.ChainAsset.isRequired,output_coin_type:i.string.isRequired,url:i.string.isRequired},I=Object(c.a)(I);var R=function(e){function t(e){A(this,t);var n=O(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.refresh_interval=12e4,n.deposit_address_cache=new m.a,n.coin_info_request_states={request_in_progress:0,request_complete:1,request_failed:2},n.estimation_directions={output_from_input:0,input_from_output:1},n.state={coin_symbol:"btc",key_for_withdrawal_dialog:"btc",supports_output_memos:"",url:g.c.BASE,error:null,deposit_input_coin_type:null,deposit_output_coin_type:null,input_address_and_memo:null,deposit_estimated_input_amount:n.props.initial_deposit_estimated_input_amount||"1.0",deposit_estimated_output_amount:null,deposit_limit:null,deposit_error:null,failed_calculate_deposit:null,withdraw_input_coin_type:null,withdraw_output_coin_type:null,withdraw_estimated_input_amount:n.props.initial_withdraw_estimated_input_amount||"1.0",withdraw_estimated_output_amount:null,withdraw_limit:null,withdraw_error:null,failed_calculate_withdraw:null,conversion_input_coin_type:null,conversion_output_coin_type:null,conversion_estimated_input_amount:n.props.initial_conversion_estimated_input_amount||"1.0",conversion_estimated_output_amount:null,conversion_limit:null,conversion_error:null,failed_calculate_conversion:null,coin_info_request_state:n.coin_info_request_states.request_in_progress,input_address_requests_in_progress:{},deposit_estimate_direction:n.estimation_directions.output_from_input,deposit_limit_cache:{},deposit_limit_requests_in_progress:{},coins_by_type:null,allowed_mappings_for_deposit:null,allowed_mappings_for_withdraw:null,allowed_mappings_for_conversion:null,conversion_memo:null},n}return T(t,a["Component"]),C(t,[{key:"urlConnection",value:function(e,t){var n=this;this.setState({url:e});var a=fetch(e+"/coins",{method:"get",headers:new Headers({Accept:"application/json"})}).then(function(e){return e.json()}),i=fetch(e+"/wallets",{method:"get",headers:new Headers({Accept:"application/json"})}).then(function(e){return e.json()}),s=fetch(e+"/trading-pairs",{method:"get",headers:new Headers({Accept:"application/json"})}).then(function(e){return e.json()}),o=fetch(e+"/active-wallets",{method:"get",headers:new Headers({Accept:"application/json"})}).then(function(e){return e.json()});Promise.all([a,i,s,o]).then(function(e){var t=k(e,4),a=t[0],i=(t[1],t[2]),s=t[3],o={};a.forEach(function(e){return o[e.coinType]=e});var r={},c={},l={};i.forEach(function(e){var t=o[e.inputCoinType],n=o[e.outputCoinType];t.backingCoinType!=e.outputCoinType&&n.backingCoinType!=e.inputCoinType&&0==t.restricted&&0==n.restricted&&-1!=s.indexOf(t.walletType)&&-1!=s.indexOf(n.walletType)&&("Cybex2"!=t.walletType&&"Cybex2"==n.walletType?(r[e.inputCoinType]=r[e.inputCoinType]||[],r[e.inputCoinType].push(e.outputCoinType)):"Cybex2"==t.walletType&&"Cybex2"!=n.walletType?(c[e.inputCoinType]=c[e.inputCoinType]||[],c[e.inputCoinType].push(e.outputCoinType)):"Cybex2"==t.walletType&&"Cybex2"==n.walletType&&(l[e.inputCoinType]=l[e.inputCoinType]||[],l[e.inputCoinType].push(e.outputCoinType)))});var u=null,p=null,d=Object.keys(r);if(d.forEach(function(e){r[e].sort()}),d.length){u=n.props.initial_deposit_input_coin_type&&n.props.initial_deposit_input_coin_type in r?n.props.initial_deposit_input_coin_type:d[0];var h=r[u];p=n.props.initial_deposit_output_coin_type&&-1!=h.indexOf(n.props.initial_deposit_output_coin_type)?n.props.initial_deposit_output_coin_type:h[0]}var m=null,_=null,f=null,y=null,g=Object.keys(c);if(g.forEach(function(e){c[e].sort()}),g.length){m=n.props.initial_withdraw_input_coin_type&&n.props.initial_withdraw_input_coin_type in c?n.props.initial_withdraw_input_coin_type:g[0];var v=c[m];_=n.props.initial_withdraw_output_coin_type&&-1!=v.indexOf(n.props.initial_withdraw_output_coin_type)?n.props.initial_withdraw_output_coin_type:v[0]}var w=Object.keys(l);if(w.forEach(function(e){l[e].sort()}),w.length){f=n.props.initial_conversion_input_coin_type&&n.props.initial_conversion_input_coin_type in l?n.props.initial_conversion_input_coin_type:w[0];var b=l[f];y=n.props.initial_conversion_output_coin_type&&-1!=b.indexOf(n.props.initial_conversion_output_coin_type)?n.props.initial_conversion_output_coin_type:b[0]}var E=n.getCachedOrGeneratedInputAddress(u,p),C=n.getCachedOrFreshDepositLimit("deposit",u,p),S=n.getAndUpdateOutputEstimate("deposit",u,p,n.state.deposit_estimated_input_amount),A=n.getAndUpdateOutputEstimate("withdraw",m,_,n.state.withdraw_estimated_input_amount),O=n.getCachedOrFreshDepositLimit("withdraw",m,_),T=n.getAndUpdateOutputEstimate("conversion",f,y,n.state.conversion_estimated_input_amount),N=n.getCachedOrFreshDepositLimit("conversion",f,y);n.unMounted||n.setState({coin_info_request_state:n.coin_info_request_states.request_complete,coins_by_type:o,allowed_mappings_for_deposit:r,allowed_mappings_for_withdraw:c,allowed_mappings_for_conversion:l,deposit_input_coin_type:u,deposit_output_coin_type:p,input_address_and_memo:E,deposit_limit:C,deposit_estimated_output_amount:S,deposit_estimate_direction:n.estimation_directions.output_from_input,withdraw_input_coin_type:m,withdraw_output_coin_type:_,withdraw_limit:O,withdraw_estimated_output_amount:A,conversion_input_coin_type:f,conversion_output_coin_type:y,conversion_limit:N,conversion_estimated_output_amount:T,withdraw_estimate_direction:n.estimation_directions.output_from_input,conversion_estimate_direction:n.estimation_directions.output_from_input,supports_output_memos:o.btc.supportsOutputMemos})}).catch(function(e){n.setState({coin_info_request_state:t,coins_by_type:null,allowed_mappings_for_deposit:null,allowed_mappings_for_withdraw:null,allowed_mappings_for_conversion:null})})}},{key:"updateEstimates",value:function(){if(this.state.deposit_input_coin_type&&this.state.deposit_output_coin_type){var e=this.getCachedOrGeneratedInputAddress(this.state.deposit_input_coin_type,this.state.deposit_output_coin_type),t=this.getCachedOrFreshDepositLimit("deposit",this.state.deposit_input_coin_type,this.state.deposit_output_coin_type),n=this.state.deposit_estimated_input_amount,a=this.state.deposit_estimated_output_amount;this.state.deposit_estimate_direction==this.estimation_directions.output_from_input?a=this.getAndUpdateOutputEstimate("deposit",this.state.deposit_input_coin_type,this.state.deposit_output_coin_type,n):n=this.getAndUpdateInputEstimate("deposit",this.state.deposit_input_coin_type,this.state.deposit_output_coin_type,a);var i=this.getCachedOrFreshDepositLimit("withdraw",this.state.withdraw_input_coin_type,this.state.withdraw_output_coin_type),s=this.state.withdraw_estimated_input_amount,o=this.state.withdraw_estimated_output_amount;this.state.withdraw_estimate_direction==this.estimation_directions.output_from_input?o=this.getAndUpdateOutputEstimate("withdraw",this.state.withdraw_input_coin_type,this.state.withdraw_output_coin_type,s):s=this.getAndUpdateinputEstimate("withdraw",this.state.withdraw_input_coin_type,this.state.withdraw_output_coin_type,o);var r=this.getCachedOrFreshDepositLimit("conversion",this.state.conversion_input_coin_type,this.state.conversion_output_coin_type),c=this.state.conversion_estimated_input_amount,l=this.state.conversion_estimated_output_amount;this.state.conversion_estimate_direction==this.estimation_directions.output_from_input?l=this.getAndUpdateOutputEstimate("conversion",this.state.conversion_input_coin_type,this.state.conversion_output_coin_type,c):c=this.getAndUpdateinputEstimate("conversion",this.state.conversion_input_coin_type,this.state.conversion_output_coin_type,l),this.setState({input_address_and_memo:e,deposit_limit:t,deposit_estimated_input_amount:n,deposit_estimated_output_amount:a,withdraw_limit:i,withdraw_estimated_input_amount:s,withdraw_estimated_output_amount:o,conversion_limit:r,conversion_estimated_input_amount:c,conversion_estimated_output_amount:l,key_for_withdrawal_dialog:s})}}},{key:"componentWillMount",value:function(){var e=this,t=this.state.url;this.urlConnection(t,0);var n=fetch(t+"/coins",{method:"get",headers:new Headers({Accept:"application/json"})}).then(function(e){return e.json()}),a=fetch(t+"/trading-pairs",{method:"get",headers:new Headers({Accept:"application/json"})}).then(function(e){return e.json()}),i=fetch(t+"/active-wallets",{method:"get",headers:new Headers({Accept:"application/json"})}).then(function(e){return e.json()});Promise.all([n,a,i]).then(function(e){var t=k(e,3),n=t[0],a=t[1],i=t[2],s={};n.forEach(function(e){return s[e.coinType]=e}),a.forEach(function(e){var t=s[e.inputCoinType],n=s[e.outputCoinType];t.backingCoinType!=e.outputCoinType&&n.backingCoinType!=e.inputCoinType&&-1!=i.indexOf(t.walletType)&&i.indexOf(n.walletType)})}).catch(function(t){e.urlConnection("https://api.blocktrades.info/v2",2),e.setState({coin_info_request_state:0,coins_by_type:null,allowed_mappings_for_deposit:null,allowed_mappings_for_withdraw:null,allowed_mappings_for_conversion:null})})}},{key:"componentDidMount",value:function(){this.update_timer=setInterval(this.updateEstimates.bind(this),this.refresh_interval)}},{key:"componentWillUnmount",value:function(){clearInterval(this.update_timer),this.unMounted=!0}},{key:"getCachedInputAddress",value:function(e,t,n){var a=this.props.account.get("name");return this.deposit_address_cache.getCachedInputAddress(this.props.gateway,a,e,t)}},{key:"cacheInputAddress",value:function(e,t,n,a){var i=this.props.account.get("name");this.deposit_address_cache.cacheInputAddress(this.props.gateway,i,e,t,n,a)}},{key:"getCachedOrGeneratedInputAddress",value:function(e,t){var n=this,a=this.getCachedInputAddress(e,t);if(a)return a;if(this.state.input_address_requests_in_progress[e]=this.state.input_address_requests_in_progress[e]||{},this.state.input_address_requests_in_progress[e][t])return null;var i=JSON.stringify({inputCoinType:e,outputCoinType:t,outputAddress:this.props.account.get("name")});return this.state.input_address_requests_in_progress[e][t]=!0,fetch(this.state.url+"/simple-api/initiate-trade",{method:"post",headers:new Headers({Accept:"application/json","Content-Type":"application/json"}),body:i}).then(function(a){a.json().then(function(a){if(console.assert(a.inputCoinType==e,"unexpected reply from initiate-trade"),console.assert(a.outputCoinType==t,"unexpected reply from initiate-trade"),a.inputCoinType!=e||a.outputCoinType!=t)throw Error("unexpected reply from initiate-trade");n.cacheInputAddress(a.inputCoinType,a.outputCoinType,a.inputAddress,a.inputMemo),delete n.state.input_address_requests_in_progress[e][t],n.state.deposit_input_coin_type==a.inputCoinType&&n.state.deposit_output_coin_type==a.outputCoinType&&n.setState({input_address_and_memo:{address:a.inputAddress,memo:a.inputMemo}})},function(a){delete n.state.input_address_requests_in_progress[e][t],n.state.deposit_input_coin_type==e&&n.state.deposit_output_coin_type==t&&n.setState({input_address_and_memo:{address:"error generating address",memo:null}})})},function(a){delete n.state.input_address_requests_in_progress[e][t],n.state.deposit_input_coin_type==e&&n.state.deposit_output_coin_type==t&&n.setState({input_address_and_memo:{address:"error generating address",memo:null}})}),null}},{key:"getCachedDepositLimit",value:function(e,t){if(this.state.deposit_limit_cache[e]=this.state.deposit_limit_cache[e]||{},this.state.deposit_limit_cache[e][t]){var n=this.state.deposit_limit_cache[e][t];if(new Date-n.timestamp<this.refresh_interval)return n;delete this.state.deposit_limit_cache[e][t]}return null}},{key:"cacheDepositLimit",value:function(e,t,n){n.timestamp=new Date,this.state.deposit_limit_cache[e]=this.state.deposit_limit_cache[e]||{},this.state.deposit_limit_cache[e][t]=n}},{key:"getCachedOrFreshDepositLimit",value:function(e,t,n){var a=this,i=this.getCachedDepositLimit(t,n);if(i)return i;this.state.deposit_limit_requests_in_progress[t]=this.state.input_address_requests_in_progress[t]||{},this.state.deposit_limit_requests_in_progress[t][n]=!0;var s=this.state.url+"/deposit-limits?inputCoinType="+encodeURIComponent(t)+"&outputCoinType="+encodeURIComponent(n);return fetch(s,{method:"get",headers:new Headers({Accept:"application/json"})}).then(function(e){return e.json()}).then(function(i){if(!a.unMounted){if(console.assert(i.inputCoinType==t&&i.outputCoinType==n,"unexpected reply from deposit-limits"),i.inputCoinType!=t||i.outputCoinType!=n)throw Error("unexpected reply from deposit-limits");var s={timestamp:new Date,limit:i.depositLimit};a.cacheDepositLimit(t,n,s),delete a.state.deposit_limit_requests_in_progress[t][n],a.state[e+"_input_coin_type"]==t&&a.state[e+"_output_coin_type"]==n&&a.setState(S({},e+"_limit",s))}},function(e){delete a.state.deposit_limit_requests_in_progress[t][n]}),null}},{key:"getAndUpdateOutputEstimate",value:function(e,t,n,a){var i=this;if(!this.unMounted){"deposit"==e&&this.setState({failed_calculate_deposit:null}),"withdraw"==e&&this.setState({failed_calculate_withdraw:null}),"conversion"==e&&this.setState({failed_calculate_conversion:null});var s=this.state.url+"timate-output-amount?inputAmount="+encodeURIComponent(a)+"&inputCoinType="+encodeURIComponent(t)+"&outputCoinType="+encodeURIComponent(n);return fetch(s,{method:"get",headers:new Headers({Accept:"application/json"})}).then(function(e){return e.json()}).then(function(s){if(!i.unMounted)if(s.error){if(i.state[e+"_input_coin_type"]==t&&i.state[e+"_output_coin_type"]==n&&i.state[e+"_estimated_input_amount"]==a&&i.state[e+"_estimate_direction"]==i.estimation_directions.output_from_input){var o=s.error.message;"deposit"==e&&i.setState({failed_calculate_deposit:"Failed to calculate"}),"withdraw"==e&&i.setState({failed_calculate_withdraw:"Failed to calculate"}),"conversion"==e&&i.setState({failed_calculate_conversion:"Failed to calculate"});o.startsWith("Internal Server Error: ")&&(o=o.substr("Internal Server Error: ".length)),i.setState(S({},e+"_error",o))}}else{var r;if(console.assert(s.inputCoinType==t&&s.outputCoinType==n&&s.inputAmount==a,"unexpected reply from estimate-output-amount"),s.inputCoinType!=t||s.outputCoinType!=n||s.inputAmount!=a)throw Error("unexpected reply from estimate-output-amount");i.state[e+"_input_coin_type"]==t&&i.state[e+"_output_coin_type"]==n&&i.state[e+"_estimated_input_amount"]==a&&i.state[e+"_estimate_direction"]==i.estimation_directions.output_from_input&&i.setState((S(r={},e+"_estimated_output_amount",s.outputAmount),S(r,e+"_error",null),r))}},function(e){}),null}}},{key:"getAndUpdateInputEstimate",value:function(e,t,n,a){var i=this;if(!this.unMounted){"deposit"==e&&this.setState({failed_calculate_deposit:null}),"withdraw"==e&&this.setState({failed_calculate_withdraw:null}),"conversion"==e&&this.setState({failed_calculate_conversion:null});var s=this.state.url+"timate-input-amount?outputAmount="+encodeURIComponent(a)+"&inputCoinType="+encodeURIComponent(t)+"&outputCoinType="+encodeURIComponent(n);return fetch(s,{method:"get",headers:new Headers({Accept:"application/json"})}).then(function(e){return e.json()}).then(function(s){var o;i.unMounted||(console.assert(s.inputCoinType==t&&s.outputCoinType==n&&s.outputAmount==a,"unexpected reply from estimate-input-amount"),s.inputCoinType==t&&s.outputCoinType==n&&s.outputAmount==a||("deposit"==e&&i.setState({failed_calculate_deposit:"Failed to calculate"}),"withdraw"==e&&i.setState({failed_calculate_withdraw:"Failed to calculate"}),"conversion"==e&&i.setState({failed_calculate_conversion:"Failed to calculate"})),i.state[e+"_input_coin_type"]==t&&i.state[e+"_output_coin_type"]==n&&i.state[e+"_estimated_output_amount"]==a&&i.state[e+"_estimate_direction"]==i.estimation_directions.input_from_output&&i.setState((S(o={},e+"_estimated_input_amount",s.inputAmount),S(o,"key_for_withdrawal_dialog",s.inputAmount),o)))},function(e){}),null}}},{key:"onInputAmountChanged",value:function(e,t){var n,a=t.target.value;""==a&&(a="0");var i=this.getAndUpdateOutputEstimate(e,this.state[e+"_input_coin_type"],this.state[e+"_output_coin_type"],a);this.setState((S(n={},e+"_estimated_input_amount",a),S(n,e+"_estimated_output_amount",i),S(n,e+"_estimate_direction",this.estimation_directions.output_from_input),S(n,"key_for_withdrawal_dialog",a),n))}},{key:"onOutputAmountChanged",value:function(e,t){var n,a=t.target.value;""==a&&(a="0");var i=this.getAndUpdateInputEstimate(e,this.state[e+"_input_coin_type"],this.state[e+"_output_coin_type"],a);this.setState((S(n={},e+"_estimated_output_amount",a),S(n,e+"_estimated_input_amount",i),S(n,e+"_estimate_direction",this.estimation_directions.input_from_output),n))}},{key:"getWithdrawModalId",value:function(){return"withdraw_asset_"+this.props.gateway+"_bridge"}},{key:"onWithdraw",value:function(){p.a.publish(this.getWithdrawModalId(),"open")}},{key:"onInputCoinTypeChanged",value:function(e,t){var n,a=this,i=null,s="_estimated_output_amount",o=t.target.value,r=this.state["allowed_mappings_for_"+e][o],c=r[0];-1!=r.indexOf(this.state[e+"_output_coin_type"])&&(c=this.state[e+"_output_coin_type"]);var l=this.state.input_address_and_memo;"deposit"==e&&(l=this.getCachedOrGeneratedInputAddress(o,c));var u=this.getCachedOrFreshDepositLimit(e,o,c);this.state[e+"_estimated_input_amount"]?i=this.getAndUpdateOutputEstimate(e,o,c,this.state[e+"_estimated_input_amount"]):(i=this.getAndUpdateInputEstimate(e,o,c,this.state[e+"_estimated_output_amount"]),s="_estimated_input_amount"),"withdraw"==e&&r.forEach(function(e){c===e&&a.setState({coin_symbol:o+"input",supports_output_memos:a.state.coins_by_type[e].supportsOutputMemos})}),this.setState((S(n={},e+"_input_coin_type",o),S(n,e+"_output_coin_type",c),S(n,"input_address_and_memo",l),S(n,e+"_limit",u),S(n,e+s,i),S(n,e+"_estimate_direction",this.estimation_directions.output_from_input),n))}},{key:"onOutputCoinTypeChanged",value:function(e,t){var n,a=this,i=null,s="_estimated_output_amount",o=t.target.value,r=this.state.allowed_mappings_for_withdraw[this.state.withdraw_input_coin_type];"withdraw"==e&&r.forEach(function(e){o===e&&a.setState({coin_symbol:o+"output",supports_output_memos:a.state.coins_by_type[e].supportsOutputMemos,key_for_withdrawal_dialog:o})});var c=this.state.input_address_and_memo;"deposit"==e&&(c=this.getCachedOrGeneratedInputAddress(this.state[e+"_input_coin_type"],o));var l=this.getCachedOrFreshDepositLimit(e,this.state[e+"_input_coin_type"],o);this.state[e+"_estimated_input_amount"]?i=this.getAndUpdateOutputEstimate(e,this.state[e+"_input_coin_type"],o,this.state[e+"_estimated_input_amount"]):(i=this.getAndUpdateInputEstimate(e,this.state[e+"_input_coin_type"],o,this.state[e+"_estimated_output_amount"]),s="_estimated_input_amount"),this.setState((S(n={},e+"_output_coin_type",o),S(n,"input_address_and_memo",c),S(n,e+"_limit",l),S(n,e+s,i),S(n,e+"_estimate_direction",this.estimation_directions.output_from_input),n))}},{key:"render",value:function(){var e=this;if(!this.props.account||!this.props.issuer_account||!this.props.gateway)return a.createElement("div",null);var t=void 0,n=void 0,i=void 0,s=void 0,r=void 0,c=void 0;if(this.state.coin_info_request_state==this.coin_info_request_states.request_failed)return a.createElement("div",null,a.createElement("p",null,"Error connecting to blocktrades.us, please try again later"));if(this.state.coin_info_request_state==this.coin_info_request_states.never_requested||this.state.coin_info_request_state==this.coin_info_request_states.request_in_progress)return a.createElement("div",null,a.createElement("p",null,"Retrieving current trade data from blocktrades.us"));var l=null,u=a.createElement(o.a,{content:"gateway.calc"});null!=this.state.failed_calculate_deposit&&(u=this.state.failed_calculate_deposit);var p=a.createElement(o.a,{content:"gateway.calc"});null!=this.state.failed_calculate_withdraw&&(p=this.state.failed_calculate_withdraw);var h=a.createElement(o.a,{content:"gateway.calc"});if(null!=this.state.failed_calculate_conversion&&(h=this.state.failed_calculate_conversion),Object.getOwnPropertyNames(this.state.allowed_mappings_for_deposit).length>0){var m=[];Object.keys(this.state.allowed_mappings_for_deposit).sort().forEach(function(t){m.push(a.createElement("option",{key:t,value:t||""},e.state.coins_by_type[t].symbol))});var f=a.createElement("select",{style:{width:"11rem"},className:"external-coin-types",value:this.state.deposit_input_coin_type||"",onChange:this.onInputCoinTypeChanged.bind(this,"deposit")},m),y=[];this.state.allowed_mappings_for_deposit[this.state.deposit_input_coin_type].forEach(function(t){y.push(a.createElement("option",{key:t,value:t||""},e.state.coins_by_type[t].walletSymbol))});var g=a.createElement("select",{style:{width:"11rem"},className:"native-coin-types",value:this.state.deposit_output_coin_type||"",onChange:this.onOutputCoinTypeChanged.bind(this,"deposit")},y),v=this.state.input_address_and_memo?this.state.input_address_and_memo:{address:"unknown",memo:null},w=this.state.deposit_estimated_input_amount,b=this.state.deposit_estimated_output_amount,E=w?a.createElement("input",{style:{width:"11rem"},type:"text",value:w||"",onChange:this.onInputAmountChanged.bind(this,"deposit")}):u,k=b?a.createElement("input",{style:{width:"11rem"},type:"text",value:b||"",onChange:this.onOutputAmountChanged.bind(this,"deposit")}):u,C=a.createElement("span",null,"updating");this.state.deposit_limit&&(C=this.state.deposit_limit.limit?a.createElement("div",{className:"blocktrades-bridge"},a.createElement("span",{className:"deposit-limit"},a.createElement(o.a,{content:"gateway.limit",amount:_.a.format_number(this.state.deposit_limit.limit,8),symbol:this.state.coins_by_type[this.state.deposit_input_coin_type].walletSymbol}))):null);var S=null;this.state.deposit_error&&(S=a.createElement("div",null,this.state.deposit_error)),n=a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",null,a.createElement(o.a,{content:"gateway.deposit"})),a.createElement("th",null,a.createElement(o.a,{content:"gateway.balance"})),a.createElement("th",null,a.createElement(o.a,{content:"gateway.deposit_to"}))));var A=null;A=v.memo?a.createElement(o.a,{unsafe:!0,content:"gateway.address_with_memo",address:v.address,memo:v.memo}):a.createElement("span",null,v.address),t=a.createElement("tbody",null,a.createElement("tr",null,a.createElement("td",null,a.createElement("div",{className:"blocktrades-bridge"},a.createElement("div",{className:"inline-block"},a.createElement("div",null,f),a.createElement("div",null,E)),"→",a.createElement("div",{className:"inline-block"},a.createElement("div",null,g),a.createElement("div",null,k)),a.createElement("div",null,S))),a.createElement("td",null,a.createElement(d.a,{account:this.props.account.get("name"),asset:this.state.coins_by_type[this.state.deposit_output_coin_type].walletSymbol})),a.createElement("td",null,A,a.createElement("br",null),C)))}if(Object.getOwnPropertyNames(this.state.allowed_mappings_for_withdraw).length>0){this.getWithdrawModalId();this.state.coins_by_type[this.state.withdraw_input_coin_type].symbol;l=this.state.withdraw_estimated_input_amount;var O=[];Object.keys(this.state.allowed_mappings_for_withdraw).sort().forEach(function(t){O.push(a.createElement("option",{key:t,value:t},e.state.coins_by_type[t].walletSymbol))});var T=a.createElement("select",{style:{width:"11rem"},className:"native-coin-types",value:this.state.withdraw_input_coin_type,onChange:this.onInputCoinTypeChanged.bind(this,"withdraw")},O),N=[];this.state.allowed_mappings_for_withdraw[this.state.withdraw_input_coin_type].forEach(function(t){N.push(a.createElement("option",{key:t,value:t},e.state.coins_by_type[t].symbol))});var x=a.createElement("select",{style:{width:"11rem"},className:"external-coin-types",value:this.state.withdraw_output_coin_type,onChange:this.onOutputCoinTypeChanged.bind(this,"withdraw")},N),R=this.state.withdraw_estimated_input_amount,P=R?a.createElement("input",{style:{width:"11rem"},type:"text",value:R||"",onChange:this.onInputAmountChanged.bind(this,"withdraw")}):p,D=this.state.withdraw_estimated_output_amount,F=D?a.createElement("input",{style:{width:"11rem"},type:"text",value:D||"",onChange:this.onOutputAmountChanged.bind(this,"withdraw")}):p,M=a.createElement(I,{key:this.state.key_for_withdrawal_dialog,account:this.props.account.get("name"),issuer:this.props.issuer_account.get("name"),asset:this.state.coins_by_type[this.state.withdraw_input_coin_type].walletSymbol,output_coin_name:this.state.coins_by_type[this.state.withdraw_output_coin_type].name,output_coin_symbol:this.state.coins_by_type[this.state.withdraw_output_coin_type].symbol,output_coin_type:this.state.withdraw_output_coin_type,output_supports_memos:this.state.supports_output_memos,amount_to_withdraw:l,url:this.state.url,gateway:this.props.gateway,output_wallet_type:this.state.coins_by_type[this.state.withdraw_output_coin_type].walletType}),q=null;this.state.withdraw_error&&(q=a.createElement("div",null,this.state.withdraw_error));var B=a.createElement("span",null,"...");this.state.withdraw_limit&&(B=this.state.withdraw_limit.limit?a.createElement("div",{className:"blocktrades-bridge"},a.createElement("span",{className:"deposit-limit"},a.createElement(o.a,{content:"gateway.limit",amount:_.a.format_number(this.state.withdraw_limit.limit,8),symbol:this.state.coins_by_type[this.state.withdraw_input_coin_type].walletSymbol}))):a.createElement("div",{className:"blocktrades-bridge"},a.createElement("span",{className:"deposit-limit"},"no limit"))),s=a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",null,a.createElement(o.a,{content:"gateway.withdraw"})),a.createElement("th",null,a.createElement(o.a,{content:"gateway.balance"})),a.createElement("th",null))),i=a.createElement("tbody",null,a.createElement("tr",null,a.createElement("td",null,a.createElement("div",{className:"blocktrades-bridge"},a.createElement("div",{className:"inline-block"},a.createElement("div",null,T),a.createElement("div",null,P)),"→",a.createElement("div",{className:"inline-block"},a.createElement("div",null,x),a.createElement("div",null,F)),a.createElement("div",null,q))),a.createElement("td",null,a.createElement(d.a,{account:this.props.account.get("name"),asset:this.state.coins_by_type[this.state.withdraw_input_coin_type].walletSymbol})),a.createElement("td",null,M,a.createElement("br",null),B)))}if(Object.getOwnPropertyNames(this.state.allowed_mappings_for_conversion).length>0){var W=[];Object.keys(this.state.allowed_mappings_for_conversion).sort().forEach(function(t){W.push(a.createElement("option",{key:t,value:t},e.state.coins_by_type[t].walletSymbol))});var L=a.createElement("select",{style:{width:"11rem"},className:"native-coin-types",value:this.state.conversion_input_coin_type,onChange:this.onInputCoinTypeChanged.bind(this,"conversion")},W),U=[];this.state.allowed_mappings_for_conversion[this.state.conversion_input_coin_type].forEach(function(t){U.push(a.createElement("option",{key:t,value:t},e.state.coins_by_type[t].symbol))});var H=a.createElement("select",{style:{width:"11rem"},className:"external-coin-types",value:this.state.conversion_output_coin_type,onChange:this.onOutputCoinTypeChanged.bind(this,"conversion")},U),G=this.state.conversion_estimated_input_amount,J=G?a.createElement("input",{style:{width:"11rem"},type:"text",value:G||"",onChange:this.onInputAmountChanged.bind(this,"conversion")}):h,$=this.state.conversion_estimated_output_amount,V=$?a.createElement("input",{style:{width:"11rem"},type:"text",value:$||"",onChange:this.onOutputAmountChanged.bind(this,"conversion")}):h,K=a.createElement(j,{asset:this.state.coins_by_type[this.state.conversion_input_coin_type].walletSymbol,account:this.props.account,input_coin_type:this.state.conversion_input_coin_type,output_coin_type:this.state.conversion_output_coin_type,account_name:this.props.account.get("name"),amount:this.state.conversion_estimated_input_amount,account_id:this.props.account.get("id"),account_balances:this.props.account.get("balances"),url:this.state.url}),Y=null;this.state.conversion_error&&(Y=a.createElement("div",null,this.state.conversion_error));var z=a.createElement("span",null,"...");this.state.conversion_limit&&(z=this.state.conversion_limit.limit?a.createElement("div",{className:"blocktrades-bridge"},a.createElement("span",{className:"deposit-limit"},a.createElement(o.a,{content:"gateway.limit",amount:_.a.format_number(this.state.conversion_limit.limit,8),symbol:this.state.coins_by_type[this.state.conversion_input_coin_type].walletSymbol}))):a.createElement("div",{className:"blocktrades-bridge"},a.createElement("span",{className:"deposit-limit"},"no limit"))),c=a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",null,a.createElement(o.a,{content:"gateway.convert"})),a.createElement("th",null,a.createElement(o.a,{content:"gateway.balance"})),a.createElement("th",null))),r=a.createElement("tbody",null,a.createElement("tr",null,a.createElement("td",null,a.createElement("div",{className:"blocktrades-bridge"},a.createElement("div",{className:"inline-block"},a.createElement("div",null,L),a.createElement("div",null,J)),"→",a.createElement("div",{className:"inline-block"},a.createElement("div",null,H),a.createElement("div",null,V)),a.createElement("div",null,Y))),a.createElement("td",null,a.createElement(d.a,{account:this.props.account.get("name"),asset:this.state.coins_by_type[this.state.conversion_input_coin_type].walletSymbol})),a.createElement("td",null,K,a.createElement("br",null),z)))}return a.createElement("div",null,a.createElement("div",{style:{paddingBottom:15}},a.createElement(o.a,{component:"h5",content:"gateway.bridge_text"})),a.createElement("table",{className:"table"},n,t,s,i,c,r))}}]),t}();R.propTypes={url:i.string,gateway:i.string,account:r.a.ChainAccount,issuer_account:r.a.ChainAccount,initial_deposit_input_coin_type:i.string,initial_deposit_output_coin_type:i.string,initial_deposit_estimated_input_amount:i.string,initial_withdraw_input_coin_type:i.string,initial_withdraw_output_coin_type:i.string,initial_withdraw_estimated_input_amount:i.string,initial_conversion_input_coin_type:i.string,initial_conversion_output_coin_type:i.string,initial_conversion_estimated_input_amount:i.string},t.a=Object(c.a)(R,{keep_updating:!0})}).call(this,n(/*! ./../../../../node_modules/buffer/index.js */37).Buffer)},2023:
/*!*******************************************************************!*\
  !*** ./components/Account/AccountDepositWithdraw.jsx + 9 modules ***!
  \*******************************************************************/
/*! exports provided: default */
/*! all exports used */
/*! ModuleConcatenation bailout: Cannot concat with ./actions/GatewayActions.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./components/Account/AccountImage.tsx */
/*! ModuleConcatenation bailout: Cannot concat with ./components/LoadingIndicator.tsx */
/*! ModuleConcatenation bailout: Cannot concat with ./components/Modal/BaseModal.tsx */
/*! ModuleConcatenation bailout: Cannot concat with ./lib/common/utils.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./stores/GatewayStore.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./stores/SettingsStore.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./actions/AccountActions.js */
/*! ModuleConcatenation bailout: Cannot concat with ./actions/SettingsActions.js */
/*! ModuleConcatenation bailout: Cannot concat with ./api/apiConfig.js */
/*! ModuleConcatenation bailout: Cannot concat with ./components/Account/AccountBalance.jsx because of ./components/DepositWithdraw/BitKapital.jsx */
/*! ModuleConcatenation bailout: Cannot concat with ./components/Account/RecentTransactions.jsx */
/*! ModuleConcatenation bailout: Cannot concat with ./components/DepositWithdraw/BitKapital.jsx (<- Module uses injected variables (Buffer)) */
/*! ModuleConcatenation bailout: Cannot concat with ./components/DepositWithdraw/blocktrades/BlockTradesBridgeDepositRequest.jsx (<- Module uses injected variables (Buffer)) */
/*! ModuleConcatenation bailout: Cannot concat with ./components/DepositWithdraw/blocktrades/WithdrawModalBlocktrades.jsx (<- Module uses injected variables (Buffer)) */
/*! ModuleConcatenation bailout: Cannot concat with ./components/DepositWithdraw/rudex/RuDexWithdrawModal.jsx (<- Module uses injected variables (Buffer)) */
/*! ModuleConcatenation bailout: Cannot concat with ./components/Utility/AmountSelector.jsx */
/*! ModuleConcatenation bailout: Cannot concat with ./components/Utility/AssetName.jsx */
/*! ModuleConcatenation bailout: Cannot concat with ./components/Utility/BalanceComponent.jsx */
/*! ModuleConcatenation bailout: Cannot concat with ./components/Utility/BindToChainState.jsx */
/*! ModuleConcatenation bailout: Cannot concat with ./components/Utility/ChainTypes.js */
/*! ModuleConcatenation bailout: Cannot concat with ./components/Utility/HelpContent.jsx */
/*! ModuleConcatenation bailout: Cannot concat with ./components/Utility/LinkToAccountById.jsx */
/*! ModuleConcatenation bailout: Cannot concat with ./cybex/cybexjs-ws/index-umd.js */
/*! ModuleConcatenation bailout: Cannot concat with ./cybex/cybexjs/index.js */
/*! ModuleConcatenation bailout: Cannot concat with ./lib/alt-react/lib/index.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ./lib/common/BlockTradesDepositAddressCache.js */
/*! ModuleConcatenation bailout: Cannot concat with ./lib/common/RuDexMethods.js because of ./components/DepositWithdraw/rudex/RuDexWithdrawModal.jsx */
/*! ModuleConcatenation bailout: Cannot concat with ./lib/common/account_utils.js */
/*! ModuleConcatenation bailout: Cannot concat with ./lib/common/blockTradesMethods.js */
/*! ModuleConcatenation bailout: Cannot concat with ./lib/counterpart/index.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ./lib/react-foundation-apps/src/modal/index.jsx */
/*! ModuleConcatenation bailout: Cannot concat with ./lib/react-foundation-apps/src/trigger/index.jsx */
/*! ModuleConcatenation bailout: Cannot concat with ./lib/react-foundation-apps/src/utils/foundation-api.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ./stores/AccountStore.js */
/*! ModuleConcatenation bailout: Cannot concat with ./stores/WalletDb.js (<- Module uses injected variables (Buffer)) */
/*! ModuleConcatenation bailout: Cannot concat with ../node_modules/immutable/dist/immutable.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ../node_modules/prop-types/index.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ../node_modules/react-translate-component/index.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ../node_modules/react/index.js (<- Module is not an ECMAScript module) */function(e,t,n){"use strict";n.r(t);var a=n(0),i=n(3),s=n(25),o=n(128),r=n(8),c=n(1),l=n.n(c),u=n(21),p=n(24),d=n(2),h=n(1648),m=n(110),_=n(35),f=n.n(_),y=n(1583),g=n(1587),v=n(70),w=n(125),b=n(1574),E=n(89),k=n(168),C=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var S=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.deposit_address_cache=new g.a;var a={blocktrades:E.c.BASE,openledger:E.c.BASE_OL};return n.state={receive_address:null,url:e.url||a[e.gateway]},n.addDepositAddress=n.addDepositAddress.bind(n),n._copy=n._copy.bind(n),document.addEventListener("copy",n._copy),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["Component"]),C(t,[{key:"_copy",value:function(e){try{e.clipboardData.setData("text/plain",this.state.clipboardText),e.preventDefault()}catch(e){console.error(e)}}},{key:"_getDepositObject",value:function(){return{inputCoinType:this.props.deposit_coin_type,outputCoinType:this.props.receive_coin_type,outputAddress:this.props.account.get("name"),url:this.state.url,stateCallback:this.addDepositAddress}}},{key:"componentWillMount",value:function(){var e=this.props.account.get("name"),t=this.deposit_address_cache.getCachedInputAddress(this.props.gateway,e,this.props.deposit_coin_type,this.props.receive_coin_type);t&&"unknown"!==t.address?this.setState({receive_address:t}):Object(b.f)(this._getDepositObject())}},{key:"componentWillUnmount",value:function(){document.removeEventListener("copy",this._copy)}},{key:"addDepositAddress",value:function(e){var t=this.props.account.get("name");this.deposit_address_cache.cacheInputAddress(this.props.gateway,t,this.props.deposit_coin_type,this.props.receive_coin_type,e.address,e.memo),this.setState({receive_address:e})}},{key:"getWithdrawModalId",value:function(){return"withdraw_asset_"+this.props.issuer_account.get("name")+"_"+this.props.receive_asset.get("symbol")}},{key:"onWithdraw",value:function(){f.a.publish(this.getWithdrawModalId(),"open")}},{key:"toClipboard",value:function(e){try{this.setState({clipboardText:e},function(){document.execCommand("copy")})}catch(e){console.error(e)}}},{key:"render",value:function(){var e="deposit"===this.props.action,t=a.createElement("div",{style:{display:"none",minHeight:150}});if(!this.props.account||!this.props.issuer_account||!this.props.receive_asset)return t;var n=this.props.account.get("balances"),i=this.props.gateFee;this.props.receive_asset.get("symbol");if(this.props.deprecated_in_favor_of){var s=!1,o=n.get(this.props.receive_asset.get("id"));if(o){var r=d.b.getObject(o);if(r)0!=r.get("balance")&&(s=!0)}if(!s)return t}var c=this.state.receive_address;if(!c){var u=this.props.account.get("name");c=this.deposit_address_cache.getCachedInputAddress(this.props.gateway,u,this.props.deposit_coin_type,this.props.receive_coin_type)}if(!c)return Object(b.f)(this._getDepositObject()),a.createElement("div",{style:{margin:"3rem"}},a.createElement(k.a,{type:"three-bounce"}));var p=this.getWithdrawModalId(),_=null,f=null,g="",E=void 0;if(this.props.deposit_account){_=a.createElement("span",null,this.props.deposit_account),g=this.props.receive_coin_type+":"+this.props.account.get("name"),f=a.createElement("span",null,g);var C=this.props.deposit_coin_type+":"}else{c.memo?(E=c.memo,g=c.address,_=a.createElement("span",null,c.address),f=a.createElement("span",null,c.memo)):(g=c.address,_=a.createElement("span",null,c.address));C=""}return!this.props.isAvailable||e&&!this.props.deposit_account&&!this.state.receive_address?a.createElement("div",null,a.createElement(l.a,{className:"txtlabel cancel",content:"gateway.unavailable",component:"h4"})):e?a.createElement("div",{className:"Blocktrades__gateway grid-block no-padding no-margin"},a.createElement("div",{className:"small-12 medium-5"},a.createElement(l.a,{component:"h4",content:"gateway.deposit_summary"}),a.createElement("div",{className:"small-12 medium-10"},a.createElement("table",{className:"table"},a.createElement("tbody",null,a.createElement("tr",null,a.createElement(l.a,{component:"td",content:"gateway.asset_to_deposit"}),a.createElement("td",{style:{fontWeight:"bold",color:"#4A90E2",textAlign:"right"}},this.props.deposit_asset)),a.createElement("tr",null,a.createElement(l.a,{component:"td",content:"gateway.asset_to_receive"}),a.createElement("td",{style:{fontWeight:"bold",color:"#4A90E2",textAlign:"right"}},a.createElement(v.a,{name:this.props.receive_asset.get("symbol"),replace:!1}))),a.createElement("tr",null,a.createElement(l.a,{component:"td",content:"gateway.intermediate"}),a.createElement("td",{style:{fontWeight:"bold",color:"#4A90E2",textAlign:"right"}},a.createElement(w.a,{account:this.props.issuer_account.get("id")}))),a.createElement("tr",null,a.createElement(l.a,{component:"td",content:"gateway.your_account"}),a.createElement("td",{style:{fontWeight:"bold",color:"#4A90E2",textAlign:"right"}},a.createElement(w.a,{account:this.props.account.get("id")}))),a.createElement("tr",null,a.createElement("td",null,a.createElement(l.a,{content:"gateway.balance"}),":"),a.createElement("td",{style:{fontWeight:"bold",color:"#4A90E2",textAlign:"right"}},a.createElement(y.a,{account:this.props.account.get("name"),asset:this.props.receive_asset.get("symbol"),replace:!1}))))))),a.createElement("div",{className:"small-12 medium-7"},a.createElement(l.a,{component:"h4",content:"gateway.deposit_inst"}),a.createElement("label",{className:"left-label"},a.createElement(l.a,{content:"gateway.deposit_to",asset:this.props.deposit_asset}),":"),a.createElement("div",{style:{padding:"10px 0",fontSize:"1.1rem",fontWeight:"bold"}},a.createElement("table",{className:"table"},a.createElement("tbody",null,a.createElement("tr",null,a.createElement("td",null,_)),f?a.createElement("tr",null,a.createElement("td",null,"memo: ",f)):null)),a.createElement("div",{className:"button-group",style:{paddingTop:10}},_?a.createElement("div",{className:"button",onClick:this.toClipboard.bind(this,g)},"Copy address"):null,E?a.createElement("div",{className:"button",onClick:this.toClipboard.bind(this,E)},"Copy memo"):null,a.createElement("button",{className:"button",onClick:b.f.bind(null,this._getDepositObject())},a.createElement(l.a,{content:"gateway.generate_new"})))))):a.createElement("div",{className:"Blocktrades__gateway grid-block no-padding no-margin"},a.createElement("div",{className:"small-12 medium-5"},a.createElement(l.a,{component:"h4",content:"gateway.withdraw_summary"}),a.createElement("div",{className:"small-12 medium-10"},a.createElement("table",{className:"table"},a.createElement("tbody",null,a.createElement("tr",null,a.createElement(l.a,{component:"td",content:"gateway.asset_to_withdraw"}),a.createElement("td",{style:{fontWeight:"bold",color:"#4A90E2",textAlign:"right"}},a.createElement(v.a,{name:this.props.receive_asset.get("symbol"),replace:!1}))),a.createElement("tr",null,a.createElement(l.a,{component:"td",content:"gateway.asset_to_receive"}),a.createElement("td",{style:{fontWeight:"bold",color:"#4A90E2",textAlign:"right"}},this.props.deposit_asset)),a.createElement("tr",null,a.createElement(l.a,{component:"td",content:"gateway.intermediate"}),a.createElement("td",{style:{fontWeight:"bold",color:"#4A90E2",textAlign:"right"}},a.createElement(w.a,{account:this.props.issuer_account.get("id")}))),a.createElement("tr",null,a.createElement("td",null,a.createElement(l.a,{content:"gateway.balance"}),":"),a.createElement("td",{style:{fontWeight:"bold",color:"#4A90E2",textAlign:"right"}},a.createElement(y.a,{account:this.props.account.get("name"),asset:this.props.receive_asset.get("symbol"),replace:!1}))))))),a.createElement("div",{className:"small-12 medium-7"},a.createElement(l.a,{component:"h4",content:"gateway.withdraw_inst"}),a.createElement("label",{className:"left-label"},a.createElement(l.a,{content:"gateway.withdraw_to",asset:this.props.deposit_asset}),":"),a.createElement("div",{className:"button-group",style:{paddingTop:20}},a.createElement("button",{className:"button success",style:{fontSize:"1.3rem"},onClick:this.onWithdraw.bind(this)},a.createElement(l.a,{content:"gateway.withdraw_now"})," "))),a.createElement(m.a,{id:p,overlay:!0},a.createElement("br",null),a.createElement("div",{className:"grid-block vertical"},a.createElement(h.a,{account:this.props.account.get("name"),issuer:this.props.issuer_account.get("name"),asset:this.props.receive_asset.get("symbol"),url:this.state.url,output_coin_name:this.props.deposit_asset_name,gateFee:i,output_coin_symbol:this.props.deposit_asset,output_coin_type:this.props.deposit_coin_type,output_wallet_type:this.props.deposit_wallet_type,output_supports_memos:this.props.supports_output_memos,memo_prefix:C,modal_id:p,balance:this.props.account.get("balances").toJS()[this.props.receive_asset.get("id")]}))))}}]),t}();S.propTypes={url:i.string,gateway:i.string,deposit_coin_type:i.string,deposit_asset_name:i.string,deposit_account:i.string,receive_coin_type:i.string,account:u.a.ChainAccount,issuer_account:u.a.ChainAccount,deposit_asset:i.string,deposit_wallet_type:i.string,receive_asset:u.a.ChainAsset,deprecated_in_favor_of:u.a.ChainAsset,deprecated_message:i.string,action:i.string,supports_output_memos:i.bool.isRequired},S.defaultProps={autosubscribe:!1};var A=Object(p.a)(S,{keep_updating:!0}),O=n(13),T=n(22),N=n(1536),j=n(7),x=n.n(j),I=(n(40),function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}());var R=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this)),a=e.viewSettings.get(e.provider+"Action","deposit");return n.state={activeCoin:n._getActiveCoin(e,{action:a}),action:a},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["Component"]),I(t,[{key:"_getActiveCoin",value:function(e,t){var n=e.viewSettings.get("activeCoin_"+e.provider+"_"+t.action,null),a=null;return"blocktrades"==e.provider&&"deposit"==t.action&&(a="BTC"),"openledger"==e.provider&&"deposit"==t.action&&(a="BTC"),"blocktrades"==e.provider&&"withdraw"==t.action&&(a="TRADE.BTC"),"openledger"==e.provider&&"withdraw"==t.action&&(a="OPEN.BTC"),n||a}},{key:"componentWillReceiveProps",value:function(e){e.provider!==this.props.provider&&this.setState({activeCoin:this._getActiveCoin(e,this.state.action)})}},{key:"onSelectCoin",value:function(e){this.setState({activeCoin:e.target.value});var t={};t["activeCoin_"+this.props.provider+"_"+this.state.action]=e.target.value,T.a.changeViewSetting(t)}},{key:"changeAction",value:function(e){var t,n,a,i=this._getActiveCoin(this.props,{action:e});this.setState({action:e,activeCoin:i}),T.a.changeViewSetting((t={},n=this.props.provider+"Action",a=e,n in t?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a,t))}},{key:"render",value:function(){var e=this,t=this.props,n=t.coins,i=t.account,s=t.provider,o=this.state,r=o.activeCoin,c=o.action;if(!n.length)return a.createElement(k.a,null);var u=n.filter(function(e){return!(!e||!e.symbol)&&("deposit"===c?e.depositAllowed:e.withdrawalAllowed)}),p=u.map(function(e){var t="deposit"===c?e.backingCoinType.toUpperCase():e.symbol;return a.createElement("option",{value:t,key:e.symbol},t)}).filter(function(e){return null!==e}),d=u.filter(function(e){return"deposit"===c?e.backingCoinType.toUpperCase()===r:e.symbol===r})[0];d||(d=u[0]);var h={blocktrades:{name:"blocktrades",id:"1.2.32567",support:"support@blocktrades.us"},openledger:{name:d.intermediateAccount,id:"1.2.96397",support:"https://openledger.freshdesk.com"}}[s],m="deposit"===this.state.action;return a.createElement("div",{style:this.props.style},a.createElement("div",{className:"grid-block no-margin vertical medium-horizontal no-padding"},a.createElement("div",{className:"medium-4"},a.createElement("div",null,a.createElement("label",{style:{minHeight:"2rem"},className:"left-label"},a.createElement(l.a,{content:"gateway.choose_"+c}),":"," "),a.createElement("select",{className:"external-coin-types cyb-select",onChange:this.onSelectCoin.bind(this),value:r},p))),a.createElement("div",{className:"medium-6 medium-offset-1"},a.createElement("label",{style:{minHeight:"2rem"},className:"left-label"},a.createElement(l.a,{content:"gateway.gateway_text"}),":"),a.createElement("div",{style:{paddingBottom:15}},a.createElement("ul",{className:"button-group segmented no-margin"},a.createElement("li",{className:"deposit"===c?"is-active":""},a.createElement("a",{onClick:this.changeAction.bind(this,"deposit")},a.createElement(l.a,{content:"gateway.deposit"}))),a.createElement("li",{className:"withdraw"===c?"is-active":""},a.createElement("a",{onClick:this.changeAction.bind(this,"withdraw")},a.createElement(l.a,{content:"gateway.withdraw"}))))))),d?a.createElement("div",null,a.createElement("div",{style:{marginBottom:15}},a.createElement(A,{key:s+"."+d.symbol,gateway:s,issuer_account:h.name,account:i,deposit_asset:d.backingCoinType.toUpperCase(),deposit_asset_name:d.name,deposit_coin_type:d.backingCoinType.toLowerCase(),deposit_account:d.depositAccount,deposit_wallet_type:d.walletType,gateFee:d.gateFee,receive_asset:d.symbol,receive_coin_type:d.symbol.toLowerCase(),supports_output_memos:d.supportsMemos,isAvailable:d.isAvailable,action:this.state.action}),a.createElement("label",{className:"left-label"},"Support"),a.createElement("div",null,a.createElement(l.a,{content:"gateway.support_block"}),a.createElement("br",null),a.createElement("br",null),a.createElement("a",{href:(-1===h.support.indexOf("@")?"":"mailto:")+h.support},h.support))),d&&d.symbol?a.createElement(N.b,{asset:d.symbol,fromAccount:m?h.id:this.props.account.get("id"),to:m?this.props.account.get("id"):h.id},function(t){var n=t.asset,i=t.to,s=t.fromAccount;return a.createElement(N.a,{accountsList:x.a.List([e.props.account.get("id")]),limit:10,compactView:!0,fullHeight:!0,filter:"transfer",title:a.createElement(l.a,{content:"gateway.recent_"+e.state.action}),customFilter:{fields:["to","from","asset_id"],values:{to:i.get("id"),from:s.get("id"),asset_id:n.get("id")}}})}):null):null)}}]),t}(),P=Object(s.connect)(R,{listenTo:function(){return[O.b]},getProps:function(){return{viewSettings:O.b.getState().viewSettings}}}),D=n(15),F=n(81),M=n(1392),q=n(14),B=n.n(q),W=n(1395),L=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var U=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={deposit_amount:null,deposit_info:null,deposit_error:null},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["Component"]),L(t,[{key:"onDepositAmountChange",value:function(e){var t=e.amount;e.asset;this.setState({deposit_amount:t})}},{key:"onSubmitDeposit",value:function(){var e=this,t=this.props.receive_asset,n=(r.a.get_asset_precision(t.get("precision")),this.state.deposit_amount.replace(/,/g,""));console.log("deposit_amount: ",n);var a={jsonrpc:"2.0",method:"getDepositAccount",params:{CybexAccountName:this.props.account.get("name"),currency:this.props.deposit_asset,amount:n},id:1};fetch(this.props.rpc_url,{method:"POST",headers:new Headers({Accept:"application/json","content-type":"application/x-www-form-urlencoded"}),body:"rq="+encodeURIComponent(JSON.stringify(a))}).then(function(e){return e.json()}).then(function(t){"result"in t?e.setState({deposit_info:t.result}):"error"in json_reponse&&"message"in t.error?e.setState({deposit_error:t.error.message}):e.setState({deposit_error:"Unable to approve deposit, please contact OpenLedger or try again later"})}).catch(function(t){e.setState({deposit_error:"Unable to approve deposit, please contact OpenLedger or try again later"})})}},{key:"onClose",value:function(){this.setState({deposit_amount:null,deposit_info:null,deposit_error:null}),f.a.publish(this.props.modal_id,"close")}},{key:"render",value:function(){if(this.state.deposit_error)return a.createElement("form",{className:"grid-block vertical full-width-content"},a.createElement("div",{className:"grid-container"},a.createElement("div",{className:"content-block"},a.createElement("h3",null,"Deposit Error")),a.createElement("div",{className:"content-block"},a.createElement("p",null,this.state.deposit_error)),a.createElement("div",{className:"content-block"},a.createElement("input",{type:"submit",className:"button",onClick:this.onClose.bind(this),value:"Close"}))));if(this.state.deposit_info){if("link"in this.state.deposit_info)return a.createElement("form",{className:"grid-block vertical full-width-content"},a.createElement("div",{className:"grid-container"},a.createElement("div",{className:"content-block"},a.createElement("h3",null,"Deposit Information")),a.createElement("div",{className:"content-block"},a.createElement("p",null,"Click"," ",a.createElement("a",{href:this.state.deposit_info.link,rel:"noopener noreferrer",target:"_blank"},"here")," ","for deposit instructions")),a.createElement("div",{className:"content-block"},a.createElement("input",{type:"submit",className:"button",onClick:this.onClose.bind(this),value:"Close"}))));var e=[];for(var t in this.state.deposit_info)this.state.deposit_info.hasOwnProperty(t)&&e.push(a.createElement("tr",null,a.createElement("td",null,t),a.createElement("td",null,this.state.deposit_info[t])));return a.createElement("form",{className:"grid-block vertical full-width-content"},a.createElement("div",{className:"grid-container"},a.createElement("div",{className:"content-block"},a.createElement("h3",null,"Deposit Information")),a.createElement("div",{className:"content-block"},a.createElement("table",{className:"table"},a.createElement("tbody",null,e))),a.createElement("div",{className:"content-block"},a.createElement("input",{type:"submit",className:"button",onClick:this.onClose.bind(this),value:B.a.translate("account.perm.cancel")}))))}return a.createElement("form",{className:"grid-block vertical full-width-content"},a.createElement("div",{className:"grid-container"},a.createElement("div",{className:"content-block"},a.createElement("h3",null,"Deposit ",this.props.deposit_asset)),a.createElement("div",{className:"content-block"},a.createElement(W.a,{label:"modal.deposit.amount",amount:this.state.deposit_amount,asset:this.props.receive_asset.get("id"),assets:[this.props.receive_asset.get("id")],placeholder:"0.0",onChange:this.onDepositAmountChange.bind(this),display_balance:null})),a.createElement("div",{className:"content-block"},a.createElement("input",{type:"submit",className:"button",onClick:this.onSubmitDeposit.bind(this),value:B.a.translate("modal.deposit.submit")}),a.createElement("input",{type:"submit",className:" button",onClick:this.onClose.bind(this),value:B.a.translate("account.perm.cancel")}))))}}]),t}();U.propTypes={account:u.a.ChainAccount.isRequired,issuer_account:u.a.ChainAccount.isRequired,deposit_asset:i.string,receive_asset:u.a.ChainAsset.isRequired,rpc_url:i.string};var H=Object(p.a)(U,{keep_updating:!0}),G=n(56),J=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var $=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={withdraw_amount:null},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["Component"]),J(t,[{key:"onWithdrawAmountChange",value:function(e){var t=e.amount;e.asset;this.setState({withdraw_amount:t})}},{key:"onSubmit",value:function(){var e=this,t=this.props.receive_asset,n=r.a.get_asset_precision(t.get("precision")),a=this.state.withdraw_amount.replace(/,/g,""),i={jsonrpc:"2.0",method:"getMemoForFiatWithdrawal",params:{CybexAccountName:this.props.account.get("name"),currency:this.props.deposit_asset,amount:a},id:1};fetch(this.props.rpc_url,{method:"POST",headers:new Headers({Accept:"application/json","content-type":"application/x-www-form-urlencoded"}),body:"rq="+encodeURIComponent(JSON.stringify(i))}).then(function(e){return e.json()}).then(function(i){if(!("result"in i))throw"error"in i&&"message"in i.error?json_repsonse.error.message:"Unable to approve withdrawal, please contact OpenLedger or try again later";G.a.transfer(e.props.account.get("id"),e.props.issuer_account.get("id"),parseInt(a*n,10),t.get("id"),i.result)}).catch(function(e){alert(e)})}},{key:"render",value:function(){var e=null,t=this.props.account.get("balances").toJS();if(Object.keys(t).length>0){var n=this.props.receive_asset.get("id");e=n?a.createElement("span",null,a.createElement(l.a,{component:"span",content:"transfer.available"}),":"," ",a.createElement(M.a,{balance:t[n]})):"No funds"}else e="No funds";return a.createElement("form",{className:"grid-block vertical full-width-content"},a.createElement("div",{className:"grid-container"},a.createElement("div",{className:"content-block"},a.createElement("h3",null,"Withdraw ",this.props.deposit_asset)),a.createElement("div",{className:"content-block"},a.createElement(W.a,{label:"modal.withdraw.amount",amount:this.state.withdraw_amount,asset:this.props.receive_asset.get("id"),assets:[this.props.receive_asset.get("id")],placeholder:"0.0",onChange:this.onWithdrawAmountChange.bind(this),display_balance:e})),a.createElement("div",{className:"content-block"},a.createElement("input",{type:"submit",className:"button",onClick:this.onSubmit.bind(this),value:B.a.translate("modal.withdraw.submit")}),a.createElement(F.a,{close:this.props.modal_id},a.createElement("div",{className:"button"},a.createElement(l.a,{content:"account.perm.cancel"}))))))}}]),t}();$.propTypes={account:u.a.ChainAccount.isRequired,issuer_account:u.a.ChainAccount.isRequired,deposit_asset:i.string,receive_asset:u.a.ChainAsset.isRequired,rpc_url:i.string};var V=Object(p.a)($,{keep_updating:!0}),K=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();function Y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function z(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function X(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Q=function(e){function t(e){Y(this,t);var n=z(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={},n}return X(t,a["Component"]),K(t,[{key:"getWithdrawModalId",value:function(){return"withdraw_fiat_openledger_"+this.props.receive_asset.get("symbol")}},{key:"getDepositModalId",value:function(){return"deposit_fiat_openledger_"+this.props.receive_asset.get("symbol")}},{key:"onWithdraw",value:function(){f.a.publish(this.getWithdrawModalId(),"open")}},{key:"onDeposit",value:function(){f.a.publish(this.getDepositModalId(),"open")}},{key:"render",value:function(){if(!this.props.account||!this.props.issuer_account||!this.props.receive_asset)return a.createElement("tr",{style:{display:"none"}},a.createElement("td",null),a.createElement("td",null),a.createElement("td",null),a.createElement("td",null));D.a.getWallet();var e=this.props.account.get("balances"),t=(this.props.receive_asset.get("symbol"),e.toJS());if(Object.keys(t).length>0){var n=this.props.receive_asset.get("id");n&&a.createElement("span",null,a.createElement(l.a,{component:"span",content:"transfer.available"}),":"," ",a.createElement(M.a,{balance:t[n]}))}var i=this.getDepositModalId(),s=this.getWithdrawModalId(),o=null;o=this.props.deposit_allowed?a.createElement("td",null,a.createElement("button",{className:"button outline",onClick:this.onDeposit.bind(this)}," ",a.createElement(l.a,{content:"gateway.deposit"})," "),a.createElement(m.a,{id:i,overlay:!0},a.createElement(F.a,{close:i},a.createElement("a",{href:"#",className:"close-button"},"×")),a.createElement("br",null),a.createElement("div",{className:"grid-block vertical"},a.createElement(H,{account:this.props.account.get("name"),issuer_account:this.props.issuer_account.get("name"),receive_asset:this.props.receive_asset.get("symbol"),rpc_url:this.props.rpc_url,deposit_asset:this.props.deposit_asset,modal_id:i})))):a.createElement("td",null,"Click"," ",a.createElement("a",{href:"https://openledger.info/v/",rel:"noopener noreferrer",target:"_blank"},"here")," ","to register for deposits of ",this.props.deposit_asset);var r=null;return r=this.props.withdraw_allowed?a.createElement("td",null,a.createElement("button",{className:"button outline",onClick:this.onWithdraw.bind(this)}," ",a.createElement(l.a,{content:"gateway.withdraw"})," "),a.createElement(m.a,{id:s,overlay:!0},a.createElement(F.a,{close:s},a.createElement("a",{href:"#",className:"close-button"},"×")),a.createElement("br",null),a.createElement("div",{className:"grid-block vertical"},a.createElement(V,{account:this.props.account.get("name"),issuer_account:this.props.issuer_account.get("name"),receive_asset:this.props.receive_asset.get("symbol"),rpc_url:this.props.rpc_url,deposit_asset:this.props.deposit_asset,modal_id:s})))):a.createElement("td",null,"Click"," ",a.createElement("a",{href:"https://openledger.info/v/",rel:"noopener noreferrer",target:"_blank"},"here")," ","to register for withdrawals of ",this.props.deposit_asset),a.createElement("tr",null,a.createElement("td",null,this.props.deposit_asset),o,a.createElement("td",null,a.createElement(y.a,{account:this.props.account.get("name"),asset:this.props.receive_asset.get("symbol")})),r)}}]),t}();Q.propTypes={url:i.string,gateway:i.string,deposit_coin_type:i.string,deposit_asset_name:i.string,deposit_account:i.string,receive_coin_type:i.string,account:u.a.ChainAccount,issuer_account:u.a.ChainAccount,deposit_asset:i.string,receive_asset:u.a.ChainAsset,deposit_allowed:i.bool,withdraw_allowed:i.bool},Q=Object(p.a)(Q,{keep_updating:!0});var Z=function(e){function t(e){Y(this,t);var n=z(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));n.state={allowedFiatCurrencies:{deposit:[],withdraw:[]}};var a={jsonrpc:"2.0",id:1,method:"isValidatedForFiat",params:{CybexAccountName:n.props.account.get("name")}};return fetch(n.props.rpc_url,{method:"POST",headers:new Headers({Accept:"application/json","content-type":"application/x-www-form-urlencoded"}),body:"rq="+encodeURIComponent(JSON.stringify(a))}).then(function(e){return e.json()}).then(function(e){"result"in e&&n.setState({allowedFiatCurrencies:e.result})}).catch(function(e){n.setState({allowedFiatCurrencies:{deposit:[],withdraw:[]}})}),n}return X(t,a["Component"]),K(t,[{key:"componentWillUnmount",value:function(){clearInterval(this.update_timer)}},{key:"render",value:function(){return this.props.account&&this.props.issuer_account?a.createElement("table",{className:"table"},a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",null,a.createElement(l.a,{content:"gateway.symbol"})),a.createElement("th",null,a.createElement(l.a,{content:"gateway.deposit_to"})),a.createElement("th",null,a.createElement(l.a,{content:"gateway.balance"})),a.createElement("th",null,a.createElement(l.a,{content:"gateway.withdraw"})))),a.createElement("tbody",null,a.createElement(Q,{rpc_url:this.props.rpc_url,account:this.props.account,issuer_account:this.props.issuer_account,deposit_asset:"USD",receive_asset:"OPEN.USD",deposit_allowed:this.state.allowedFiatCurrencies.deposit.indexOf("USD")>-1,withdraw_allowed:this.state.allowedFiatCurrencies.withdraw.indexOf("USD")>-1}),a.createElement(Q,{rpc_url:this.props.rpc_url,account:this.props.account,issuer_account:this.props.issuer_account,deposit_asset:"EUR",receive_asset:"OPEN.EUR",deposit_allowed:this.state.allowedFiatCurrencies.deposit.indexOf("EUR")>-1,withdraw_allowed:this.state.allowedFiatCurrencies.withdraw.indexOf("EUR")>-1}),a.createElement(Q,{rpc_url:this.props.rpc_url,account:this.props.account,issuer_account:this.props.issuer_account,deposit_asset:"CNY",receive_asset:"OPEN.CNY",deposit_allowed:this.state.allowedFiatCurrencies.deposit.indexOf("CNY")>-1,withdraw_allowed:this.state.allowedFiatCurrencies.withdraw.indexOf("CNY")>-1}))):a.createElement("div",null)}}]),t}();Z.propTypes={rpc_url:i.string,account:u.a.ChainAccount,issuer_account:u.a.ChainAccount};var ee=Z=Object(p.a)(Z,{keep_updating:!0}),te=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var ne=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={current_status:"never_loaded",withdrawals:null,deposits:null,error:null},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["Component"]),te(t,[{key:"onShowOpenLedgerTransactionHistory",value:function(){var e=this,t={jsonrpc:"2.0",method:"getRequestsList",params:{CybexAccountName:this.props.account.get("name")},id:1};fetch(this.props.rpc_url,{method:"POST",headers:new Headers({Accept:"application/json","content-type":"application/x-www-form-urlencoded"}),body:"rq="+encodeURIComponent(JSON.stringify(t))}).then(function(e){return e.json()}).then(function(t){if(!("result"in t))throw"error"in t&&"message"in t.error?json_repsonse.error.message:"Unexpected response";e.setState({current_status:"loaded",withdrawals:t.result.withdrawals,deposits:t.result.deposits,error:null})}).catch(function(t){e.setState({current_status:"error",withdrawals:null,deposits:null,error:"Error getting transaction history: "+t})})}},{key:"render",value:function(){if(!this.props.account)return null;var e=null;if("loaded"===this.state.current_status){var t=[];if(this.state.withdrawals.length){for(var n=0;n<this.state.withdrawals.length;++n)t.push(a.createElement("tr",null,a.createElement("td",null,this.state.withdrawals[n].amount," ",this.state.withdrawals[n].currency),a.createElement("td",null,this.state.withdrawals[n].status)));e=a.createElement("table",{className:"table"},a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",null,"Withdrawal Amount"),a.createElement("th",null,"Status"))),a.createElement("tbody",null,t))}else e=a.createElement("p",null,"No withdrawals")}var i=null;if("loaded"===this.state.current_status)if(this.state.deposits.length){var s=[];for(n=0;n<this.state.deposits.length;++n)s.push(a.createElement("tr",null,a.createElement("td",null,this.state.deposits[n].amount," ",this.state.deposits[n].currency),a.createElement("td",null,a.createElement("a",{href:this.state.deposits[n].link,rel:"noopener noreferrer",target:"_blank"},"link")),a.createElement("td",null,this.state.deposits[n].status)));i=a.createElement("table",{className:"table"},a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",null,"Deposit Amount"),a.createElement("th",null,"Details"),a.createElement("th",null,"Status"))),a.createElement("tbody",null,s))}else i=a.createElement("p",null,"No deposits");var o=null;if("error"===this.state.current_status)o=a.createElement("div",{className:"content-block"},a.createElement("button",{className:"button outline",onClick:this.onShowOpenLedgerTransactionHistory.bind(this)}," ","Retry"," "),a.createElement("p",null,this.state.error));else if("loading"===this.state.current_status)o=a.createElement("div",{className:"content-block"},a.createElement("button",{className:"button outline",onClick:this.onShowOpenLedgerTransactionHistory.bind(this),disabled:"true"}," ","Show Transaction History"," "),a.createElement("p",null,"Loading..."));else{var r="never_loaded"===this.state.current_status?"Show Transaction History":"Refresh";o=a.createElement("div",{className:"content-block"},a.createElement("br",null),a.createElement("h4",null,"Transaction History"),a.createElement("button",{className:"button outline",onClick:this.onShowOpenLedgerTransactionHistory.bind(this)}," ",r," "),e,i)}return o}}]),t}();ne.propTypes={rpc_url:i.string,account:u.a.ChainAccount};var ae=Object(p.a)(ne,{keep_updating:!0}),ie=n(1794),se=n(297),oe=n(28),re=n(4),ce=n(1793),le=n(1792),ue=n(307),pe=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var de=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.current_rudex_address_cache_version_string="1"}return pe(e,[{key:"getIndexForDepositKeyInExchange",value:function(e,t,n){return[this.current_rudex_address_cache_version_string,e,t,n].reduce(function(e,t){return e.concat("[",t,"]")},"")}},{key:"getCachedInputAddress",value:function(e,t,n,a){var i=D.a.getWallet();if(!i)return null;i.deposit_keys=i.deposit_keys||{},i.deposit_keys[e]=i.deposit_keys[e]||{};var s=this.getIndexForDepositKeyInExchange(t,n,a);i.deposit_keys[e][s]=i.deposit_keys[e][s]||[];var o=i.deposit_keys[e][s].length;return o?i.deposit_keys[e][s][o-1]:null}},{key:"cacheInputAddress",value:function(e,t,n,a,i,s){var o=D.a.getWallet();if(!o)return null;o.deposit_keys=o.deposit_keys||{},o.deposit_keys[e]=o.deposit_keys[e]||{};var r=this.getIndexForDepositKeyInExchange(t,n,a);o.deposit_keys[e][r]=o.deposit_keys[e][r]||[],o.deposit_keys[e][r].push({address:i,memo:s}),D.a._updateWallet()}}]),e}(),he=(n(1647),function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}());var me=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.deposit_address_cache=new de,n.state={receive_address:null},n.addDepositAddress=n.addDepositAddress.bind(n),n._copy=n._copy.bind(n),document.addEventListener("copy",n._copy),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["Component"]),he(t,[{key:"_copy",value:function(e){try{e.clipboardData.setData("text/plain",this.state.clipboardText),e.preventDefault()}catch(e){console.error(e)}}},{key:"_getDepositObject",value:function(){return{inputCoinType:this.props.deposit_coin_type,outputCoinType:this.props.receive_coin_type,outputAddress:this.props.account.get("name"),stateCallback:this.addDepositAddress}}},{key:"componentWillMount",value:function(){var e=this.props.account.get("name");this.deposit_address_cache.getCachedInputAddress(this.props.gateway,e,this.props.deposit_coin_type,this.props.receive_coin_type)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("copy",this._copy)}},{key:"addDepositAddress",value:function(e){var t=this.props.account.get("name");this.deposit_address_cache.cacheInputAddress(this.props.gateway,t,this.props.deposit_coin_type,this.props.receive_coin_type,e.address,e.memo),this.setState({receive_address:e})}},{key:"getWithdrawModalId",value:function(){return"withdraw_asset_"+this.props.issuer_account.get("name")+"_"+this.props.receive_asset.get("symbol")}},{key:"onWithdraw",value:function(){f.a.publish(this.getWithdrawModalId(),"open")}},{key:"toClipboard",value:function(e){try{this.setState({clipboardText:e},function(){document.execCommand("copy")})}catch(e){console.error(e)}}},{key:"render",value:function(){var e=a.createElement("div",{style:{display:"none",minHeight:150}});if(!this.props.account||!this.props.issuer_account||!this.props.receive_asset)return e;var t=this.props.account.get("balances");this.props.receive_asset.get("symbol");if(this.props.deprecated_in_favor_of){var n=!1,i=t.get(this.props.receive_asset.get("id"));if(i){var s=d.b.getObject(i);if(s)0!=s.get("balance")&&(n=!0)}if(!n)return e}var o=this.state.receive_address;if(!o){var c=this.props.account.get("name");o=this.deposit_address_cache.getCachedInputAddress(this.props.gateway,c,this.props.deposit_coin_type,this.props.receive_coin_type)}var u=this.getWithdrawModalId(),p=null,h=null,m="",_=void 0;if(this.props.deposit_account){p=a.createElement("span",null,this.props.deposit_account),m=this.props.deposit_account,_="dex:"+this.props.account.get("name"),h=a.createElement("span",null,_);var f=this.props.deposit_coin_type+":"}else{o.memo?(_=o.memo,m=o.address,p=a.createElement("span",null,o.address),h=a.createElement("span",null,o.memo)):(m=o.address,p=a.createElement("span",null,o.address));f=""}return"deposit"===this.props.action?a.createElement("div",{className:"rudex__gateway grid-block no-padding no-margin"},a.createElement("div",{className:"small-12 medium-5"},a.createElement(l.a,{component:"h4",content:"gateway.deposit_summary"}),a.createElement("div",{className:"small-12 medium-10"},a.createElement("table",{className:"table"},a.createElement("tbody",null,a.createElement("tr",null,a.createElement(l.a,{component:"td",content:"gateway.asset_to_deposit"}),a.createElement("td",{style:{fontWeight:"bold",color:"#4A90E2",textAlign:"right"}},this.props.deposit_asset)),a.createElement("tr",null,a.createElement(l.a,{component:"td",content:"gateway.asset_to_receive"}),a.createElement("td",{style:{fontWeight:"bold",color:"#4A90E2",textAlign:"right"}},a.createElement(v.a,{name:this.props.receive_asset.get("symbol"),replace:!1}))),a.createElement("tr",null,a.createElement(l.a,{component:"td",content:"gateway.intermediate"}),a.createElement("td",{style:{fontWeight:"bold",color:"#4A90E2",textAlign:"right"}},a.createElement(w.a,{account:this.props.issuer_account.get("id")}))),a.createElement("tr",null,a.createElement(l.a,{component:"td",content:"gateway.your_account"}),a.createElement("td",{style:{fontWeight:"bold",color:"#4A90E2",textAlign:"right"}},a.createElement(w.a,{account:this.props.account.get("id")}))),a.createElement("tr",null,a.createElement("td",null,a.createElement(l.a,{content:"gateway.balance"}),":"),a.createElement("td",{style:{fontWeight:"bold",color:"#4A90E2",textAlign:"right"}},a.createElement(y.a,{account:this.props.account.get("name"),asset:this.props.receive_asset.get("symbol"),replace:!1}))))))),a.createElement("div",{className:"small-12 medium-7"},a.createElement(l.a,{component:"h4",content:"gateway.deposit_inst"}),a.createElement("label",{className:"left-label"},a.createElement(l.a,{content:"gateway.deposit_to",asset:this.props.deposit_asset}),":"),a.createElement("label",{className:"left-label"},a.createElement("b",null,a.createElement(l.a,{content:"gateway.rudex.min_amount",minAmount:r.a.format_number(this.props.min_amount/r.a.get_asset_precision(this.props.asset_precision),this.props.asset_precision,!1),symbol:this.props.deposit_coin_type}))),a.createElement("div",{style:{padding:"10px 0",fontSize:"1.1rem"}},a.createElement("table",{className:"table"},a.createElement("tbody",null,a.createElement("tr",null,a.createElement("td",null,"ADDRESS: ",a.createElement("b",null,p))),h?a.createElement("tr",null,a.createElement("td",null,"MEMO: ",a.createElement("b",null,h))):null)),a.createElement("div",{className:"button-group",style:{paddingTop:10}},p?a.createElement("div",{className:"button",onClick:this.toClipboard.bind(this,m)},"Copy address"):null,_?a.createElement("div",{className:"button",onClick:this.toClipboard.bind(this,_)},"Copy memo"):null)))):a.createElement("div",{className:"rudex__gateway grid-block no-padding no-margin"},a.createElement("div",{className:"small-12 medium-5"},a.createElement(l.a,{component:"h4",content:"gateway.withdraw_summary"}),a.createElement("div",{className:"small-12 medium-10"},a.createElement("table",{className:"table"},a.createElement("tbody",null,a.createElement("tr",null,a.createElement(l.a,{component:"td",content:"gateway.asset_to_withdraw"}),a.createElement("td",{style:{fontWeight:"bold",color:"#4A90E2",textAlign:"right"}},a.createElement(v.a,{name:this.props.receive_asset.get("symbol"),replace:!1}))),a.createElement("tr",null,a.createElement(l.a,{component:"td",content:"gateway.asset_to_receive"}),a.createElement("td",{style:{fontWeight:"bold",color:"#4A90E2",textAlign:"right"}},this.props.deposit_asset)),a.createElement("tr",null,a.createElement(l.a,{component:"td",content:"gateway.intermediate"}),a.createElement("td",{style:{fontWeight:"bold",color:"#4A90E2",textAlign:"right"}},a.createElement(w.a,{account:this.props.issuer_account.get("id")}))),a.createElement("tr",null,a.createElement("td",null,a.createElement(l.a,{content:"gateway.balance"}),":"),a.createElement("td",{style:{fontWeight:"bold",color:"#4A90E2",textAlign:"right"}},a.createElement(y.a,{account:this.props.account.get("name"),asset:this.props.receive_asset.get("symbol"),replace:!1}))))))),a.createElement("div",{className:"small-12 medium-7"},a.createElement(l.a,{component:"h4",content:"gateway.withdraw_inst"}),a.createElement("label",{className:"left-label"},a.createElement(l.a,{content:"gateway.withdraw_to",asset:this.props.deposit_asset}),":"),a.createElement("div",{className:"button-group",style:{paddingTop:20}},a.createElement("button",{className:"button success",style:{fontSize:"1.3rem"},onClick:this.onWithdraw.bind(this)},a.createElement(l.a,{content:"gateway.withdraw_now"})," "))),a.createElement(ue.a,{id:u,overlay:!0},a.createElement(F.a,{close:u},a.createElement("a",{href:"#",className:"close-button"},"×")),a.createElement("br",null),a.createElement("div",{className:"grid-block vertical"},a.createElement(le.a,{account:this.props.account.get("name"),issuer:this.props.issuer_account.get("name"),asset:this.props.receive_asset.get("symbol"),output_coin_name:this.props.deposit_asset_name,output_coin_symbol:this.props.deposit_asset,output_coin_type:this.props.deposit_coin_type,output_wallet_type:this.props.deposit_wallet_type,output_supports_memos:this.props.supports_output_memos,memo_prefix:f,modal_id:u,min_amount:this.props.min_amount,asset_precision:this.props.asset_precision,balance:this.props.account.get("balances").toJS()[this.props.receive_asset.get("id")]}))))}}]),t}();me.propTypes={gateway:i.string,deposit_coin_type:i.string,deposit_asset_name:i.string,deposit_account:i.string,receive_coin_type:i.string,account:u.a.ChainAccount,issuer_account:u.a.ChainAccount,deposit_asset:i.string,deposit_wallet_type:i.string,receive_asset:u.a.ChainAsset,deprecated_in_favor_of:u.a.ChainAsset,deprecated_message:i.string,action:i.string,supports_output_memos:i.bool.isRequired,min_amount:i.number,asset_precision:i.number};var _e=Object(p.a)(me,{keep_updating:!0}),fe=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var ye=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.state={activeCoin:n._getActiveCoin(e,{action:"deposit"}),action:e.viewSettings.get("rudexAction","deposit")},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["Component"]),fe(t,[{key:"_getActiveCoin",value:function(e,t){var n=e.viewSettings.get("activeCoin_rudex_"+t.action,null),a=null;return"deposit"==t.action&&(a="PPY"),"withdraw"==t.action&&(a="PPY"),n||a}},{key:"componentWillReceiveProps",value:function(e){e.provider!==this.props.provider&&this.setState({activeCoin:this._getActiveCoin(e,this.state.action)})}},{key:"onSelectCoin",value:function(e){this.setState({activeCoin:e.target.value});var t={};t["activeCoin_rudex_"+this.state.action]=e.target.value,T.a.changeViewSetting(t)}},{key:"changeAction",value:function(e){var t,n,a,i=this._getActiveCoin(this.props,{action:e});this.setState({action:e,activeCoin:i}),T.a.changeViewSetting((a=e,(n="rudexAction")in(t={})?Object.defineProperty(t,n,{value:a,enumerable:!0,configurable:!0,writable:!0}):t[n]=a,t))}},{key:"render",value:function(){var e=this,t=this.props,n=t.coins,i=t.account,s=this.state,o=s.activeCoin,r=s.action;if(!n.length)return a.createElement(k.a,null);var c=n.filter(function(e){return!(!e||!e.symbol)&&("deposit"===r?e.depositAllowed:e.withdrawalAllowed)}),u=c.map(function(e){var t="deposit"===r?e.backingCoin.toUpperCase():e.symbol;return a.createElement("option",{value:t,key:e.symbol},t)}).filter(function(e){return null!==e}),p=c.filter(function(e){return"deposit"===r?e.backingCoin.toUpperCase()===o:e.symbol===o})[0];p||(p=c[0]);var d="deposit"===this.state.action;return a.createElement("div",{style:this.props.style},a.createElement("div",{className:"grid-block no-margin vertical medium-horizontal no-padding"},a.createElement("div",{className:"medium-4"},a.createElement("div",null,a.createElement("label",{style:{minHeight:"2rem"},className:"left-label"},a.createElement(l.a,{content:"gateway.choose_"+r}),":"," "),a.createElement("select",{className:"external-coin-types cyb-select",onChange:this.onSelectCoin.bind(this),value:o},u))),a.createElement("div",{className:"medium-6 medium-offset-1"},a.createElement("label",{style:{minHeight:"2rem"},className:"left-label"},a.createElement(l.a,{content:"gateway.gateway_text"}),":"),a.createElement("div",{style:{paddingBottom:15}},a.createElement("ul",{className:"button-group segmented no-margin"},a.createElement("li",{className:"deposit"===r?"is-active":""},a.createElement("a",{onClick:this.changeAction.bind(this,"deposit")},a.createElement(l.a,{content:"gateway.deposit"}))),a.createElement("li",{className:"withdraw"===r?"is-active":""},a.createElement("a",{onClick:this.changeAction.bind(this,"withdraw")},a.createElement(l.a,{content:"gateway.withdraw"}))))))),p?a.createElement("div",null,a.createElement("div",{style:{marginBottom:15}},a.createElement(_e,{key:""+p.symbol,gateway:p.gatewayWallet,issuer_account:p.issuer,account:i,deposit_asset:p.backingCoin.toUpperCase(),deposit_asset_name:p.name,deposit_coin_type:p.backingCoin.toLowerCase(),deposit_account:p.gatewayWallet,deposit_wallet_type:p.walletType,receive_asset:p.symbol,receive_coin_type:p.symbol.toLowerCase(),supports_output_memos:p.memoSupport,min_amount:p.minAmount,asset_precision:p.precision,action:this.state.action}),a.createElement("label",{className:"left-label"},"Support"),a.createElement("div",null,a.createElement(l.a,{content:"gateway.rudex.support_block"}),a.createElement("br",null),a.createElement("br",null),a.createElement("a",{href:"https://rudex.freshdesk.com"},"https://rudex.freshdesk.com"))),p&&p.symbol?a.createElement(N.b,{asset:p.symbol,fromAccount:d?p.issuerId:this.props.account.get("id"),to:d?this.props.account.get("id"):p.issuerId},function(t){var n=t.asset,i=t.to,s=t.fromAccount;return a.createElement(N.a,{accountsList:x.a.List([e.props.account.get("id")]),limit:10,compactView:!0,fullHeight:!0,filter:"transfer",title:a.createElement(l.a,{content:"gateway.recent_"+e.state.action}),customFilter:{fields:["to","from","asset_id"],values:{to:i.get("id"),from:s.get("id"),asset_id:n.get("id")}}})}):null):null)}}]),t}(),ge=Object(s.connect)(ye,{listenTo:function(){return[O.b]},getProps:function(){return{viewSettings:O.b.getState().viewSettings}}}),ve=n(1406),we=n(1399),be=n(169),Ee=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();function ke(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ce(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Se(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Ae=function(e){function t(e){ke(this,t);var n=Ce(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.state={olService:e.viewSettings.get("olService","gateway"),rudexService:e.viewSettings.get("rudexService","gateway"),btService:e.viewSettings.get("btService","bridge"),metaService:e.viewSettings.get("metaService","bridge"),activeService:e.viewSettings.get("activeService",0)},n}return Se(t,a["Component"]),Ee(t,[{key:"shouldComponentUpdate",value:function(e,t){return e.account!==this.props.account||e.servicesDown!==this.props.servicesDown||!r.a.are_equal_shallow(e.blockTradesBackedCoins,this.props.blockTradesBackedCoins)||!r.a.are_equal_shallow(e.openLedgerBackedCoins,this.props.openLedgerBackedCoins)||t.olService!==this.state.olService||t.rudexService!==this.state.rudexService||t.btService!==this.state.btService||t.metaService!==this.state.metaService||t.activeService!==this.state.activeService}},{key:"componentWillMount",value:function(){o.a.getFinalFeeAsset(this.props.account,"transfer")}},{key:"toggleOLService",value:function(e){this.setState({olService:e}),T.a.changeViewSetting({olService:e})}},{key:"toggleRuDEXService",value:function(e){this.setState({rudexService:e}),T.a.changeViewSetting({rudexService:e})}},{key:"toggleBTService",value:function(e){this.setState({btService:e}),T.a.changeViewSetting({btService:e})}},{key:"toggleMetaService",value:function(e){this.setState({metaService:e}),T.a.changeViewSetting({metaService:e})}},{key:"onSetService",value:function(e){this.setState({activeService:parseInt(e.target.value)}),T.a.changeViewSetting({activeService:parseInt(e.target.value)})}},{key:"renderServices",value:function(e,t){var n=[],i=this.props.account,s=this.state,o=s.olService,r=s.btService,c=s.rudexService;return n.push({name:"Openledger (OPEN.X)",template:a.createElement("div",{className:"content-block"},a.createElement("div",{className:"service-selector"},a.createElement("ul",{className:"button-group segmented no-margin"},a.createElement("li",{onClick:this.toggleOLService.bind(this,"gateway"),className:"gateway"===o?"is-active":""},a.createElement("a",null,a.createElement(l.a,{content:"gateway.gateway"}))),a.createElement("li",{onClick:this.toggleOLService.bind(this,"fiat"),className:"fiat"===o?"is-active":""},a.createElement("a",null,"Fiat")))),"gateway"===o&&e.length?a.createElement(P,{account:i,coins:e,provider:"openledger"}):null,"fiat"===o?a.createElement("div",null,a.createElement("div",{style:{paddingBottom:15}},a.createElement(l.a,{component:"h5",content:"gateway.fiat_text"})),a.createElement(ee,{rpc_url:E.e.RPC_URL,account:i,issuer_account:"openledger-fiat"}),a.createElement(ae,{rpc_url:E.e.RPC_URL,account:i})):null)}),n.push({name:"RuDEX (RUDEX.X)",template:a.createElement("div",{className:"content-block"},a.createElement("div",{className:"service-selector"},a.createElement("ul",{className:"button-group segmented no-margin"},a.createElement("li",{onClick:this.toggleRuDEXService.bind(this,"gateway"),className:"gateway"===c?"is-active":""},a.createElement("a",null,a.createElement(l.a,{content:"gateway.gateway"}))),a.createElement("li",{onClick:this.toggleRuDEXService.bind(this,"fiat"),className:"fiat"===c?"is-active":""},a.createElement("a",null,"Fiat")))),"gateway"===c&&t.length?a.createElement(ge,{account:i,coins:t}):null,"fiat"===c?a.createElement("div",null,a.createElement(l.a,{content:"gateway.rudex.coming_soon"})):null)}),n.push({name:"BlockTrades",template:a.createElement("div",null,a.createElement("div",{className:"content-block"},a.createElement("div",{className:"service-selector"},a.createElement("ul",{className:"button-group segmented no-margin"},a.createElement("li",{onClick:this.toggleBTService.bind(this,"bridge"),className:"bridge"===r?"is-active":""},a.createElement("a",null,a.createElement(l.a,{content:"gateway.bridge"}))))),a.createElement(ie.a,{gateway:"blocktrades",issuer_account:"blocktrades",account:i,initial_deposit_input_coin_type:"btc",initial_deposit_output_coin_type:"cyb",initial_deposit_estimated_input_amount:"1.0",initial_withdraw_input_coin_type:"cyb",initial_withdraw_output_coin_type:"btc",initial_withdraw_estimated_input_amount:"100000",initial_conversion_input_coin_type:"cyb",initial_conversion_output_coin_type:"bitbtc",initial_conversion_estimated_input_amount:"1000"})),a.createElement("div",{className:"content-block"}))}),n.push({name:"BitKapital",template:a.createElement(ce.a,{viewSettings:this.props.viewSettings,account:i})}),n}},{key:"render",value:function(){var e=this.props,t=e.account,n=e.servicesDown,i=this.state.activeService,s=this.props.openLedgerBackedCoins.map(function(e){return e}).sort(function(e,t){return e.symbol<t.symbol?-1:e.symbol>t.symbol?1:0}),o=this.props.rudexBackedCoins.map(function(e){return e}).sort(function(e,t){return e.symbol<t.symbol?-1:e.symbol>t.symbol?1:0}),r=this.renderServices(s,o),c=r.map(function(e,t){return a.createElement("option",{key:t,value:t},e.name)}),u=["OPEN","RUDEX","TRADE","BITKAPITAL"][i],p=n.get(u);return a.createElement("div",{className:this.props.contained?"grid-content":"grid-container"},a.createElement("div",{className:this.props.contained?"":"grid-content",style:{paddingTop:"2rem"}},a.createElement(l.a,{content:"gateway.title",component:"h2"}),a.createElement("div",{className:"grid-block vertical medium-horizontal no-margin no-padding"},a.createElement("div",{className:"medium-6 show-for-medium"},a.createElement(se.a,{path:"components/DepositWithdraw",section:"deposit-short"})),a.createElement("div",{className:"medium-5 medium-offset-1"},a.createElement(se.a,{account:t.get("name"),path:"components/DepositWithdraw",section:"receive"}))),a.createElement("div",null,a.createElement("div",{className:"grid-block vertical medium-horizontal no-margin no-padding"},a.createElement("div",{className:"medium-6 small-order-2 medium-order-1"},a.createElement(l.a,{component:"label",className:"left-label",content:"gateway.service"}),a.createElement("select",{onChange:this.onSetService.bind(this),className:"cyb-select",value:i},c),p?a.createElement(l.a,{style:{color:"red",marginBottom:"1em",display:"block"},content:"gateway.unavailable_"+u}):null),a.createElement("div",{className:"medium-5 medium-offset-1 small-order-1 medium-order-2",style:{paddingBottom:20}},a.createElement(l.a,{component:"label",className:"left-label",content:"gateway.your_account"}),a.createElement("div",{className:"inline-label"},a.createElement(be.a,{size:{height:40,width:40},account:t.get("name"),custom_image:null}),a.createElement("input",{type:"text",value:t.get("name"),placeholder:null,disabled:!0,onChange:function(){},onKeyDown:function(){},tabIndex:1}))))),a.createElement("div",{className:"grid-content no-padding",style:{paddingTop:15}},p?null:i&&r[i]?r[i].template:r[0].template)))}}]),t}();Ae.propTypes={account:u.a.ChainAccount.isRequired,contained:i.bool},Ae.defaultProps={contained:!1},Ae=Object(p.a)(Ae);var Oe=function(e){function t(){return ke(this,t),Ce(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Se(t,a["Component"]),Ee(t,[{key:"componentWillMount",value:function(){"4018d784"===re.a.instance().chain_id.substr(0,8)&&(we.d.fetchCoins.defer(),we.d.fetchCoinsSimple.defer({backer:"RUDEX",url:E.d.BASE+E.d.COINS_LIST}),we.d.fetchCoins.defer({backer:"TRADE"}))}},{key:"render",value:function(){return a.createElement(Ae,this.props)}}]),t}();t.default=Object(s.connect)(Oe,{listenTo:function(){return[oe.a,O.b,ve.b]},getProps:function(){return{account:oe.a.getState().currentAccount,viewSettings:O.b.getState().viewSettings,openLedgerBackedCoins:ve.b.getState().backedCoins.get("OPEN",[]),rudexBackedCoins:ve.b.getState().backedCoins.get("RUDEX",[]),blockTradesBackedCoins:ve.b.getState().backedCoins.get("TRADE",[]),servicesDown:ve.b.getState().down||{}}}})}}]);