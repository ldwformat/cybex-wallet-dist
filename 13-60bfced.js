(window.webpackJsonp=window.webpackJsonp||[]).push([[13,31],{125:
/*!**********************************************!*\
  !*** ./components/Account/AccountOrders.tsx ***!
  \**********************************************/
/*! exports provided: default */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is referenced from these modules with unsupported syntax: ./Routes.jsx (referenced with import()) */function(e,t,n){"use strict";n.r(t);var a=n(/*! react */0),r=n(/*! ../Exchange/MyOpenOrders */1588),o=n(/*! counterpart */14),s=n.n(o),i=n(/*! actions/MarketsActions */47),c=n(/*! cybexjs */2),l=n(/*! common/MarketClasses */33),u=n(/*! alt-react */25),p=n(/*! stores/SettingsStore */13),d=n(/*! actions/SettingsActions */22),m=n(/*! common/market_utils */63),f=n(/*! utils/Market */170),h=n(/*! qtb */66),b=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();function g(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var y=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["Component"]),b(t,[{key:"_cancelLimitOrder",value:function(e,t){t.preventDefault(),i.a.cancelLimitOrder(this.props.account.get("id"),e).catch(function(e){console.log("cancel order error:",e)})}},{key:"onFlip",value:function(e){var t={};t[e]=!this.props.marketDirections.get(e),d.a.changeMarketDirection(t)}},{key:"render",value:function(){var e=this,t=this.props,n=t.account,o=(t.marketDirections,s.a.translate("account.perm.cancel")),i={},u={};if(!n.get("orders"))return null;n.get("orders").forEach(function(t){var n=c.b.getObject(t).toJS(),s=c.b.getAsset(n.sell_price.base.asset_id),p=c.b.getAsset(n.sell_price.quote.asset_id);if(!s||!p)return null;if(Object(h.a)(s.get("symbol"))||Object(h.a)(p.get("symbol")))return null;var d=Object(f.b)(s,p),b=d.base,y=d.quote;if(b&&y){var v,_=(g(v={},b.get("id"),{precision:b.get("precision")}),g(v,y.get("id"),{precision:y.get("precision")}),v),E=m.a.getMarketID(b,y).marketID;i[E]||(i[E]={base:{id:b.get("id"),symbol:b.get("symbol"),precision:b.get("precision")},quote:{id:y.get("id"),symbol:y.get("symbol"),precision:y.get("precision")}});var w=new l.d(n,_,i[E].quote.id),k=c.b.getAsset(i[E].base.id),O=c.b.getAsset(i[E].quote.id);u[E]||(u[E]=[]),u[E].push(a.createElement(r.b,{ref:i[E].base.symbol,key:n.id,order:w,base:k,quote:O,cancel_text:o,showSymbols:!1,invert:!0,onCancel:e._cancelLimitOrder.bind(e,n.id),price:w.getPrice(),dashboard:!0,isMyAccount:e.props.isMyAccount,settings:e.props.settings,onFlip:e.onFlip.bind(e,E)}))}});var p=[];for(var d in u)u[d].length&&(p.push(a.createElement("tbody",{key:d},u[d].sort(function(e,t){return e.props.price-t.props.price}))),0);return a.createElement("div",{className:"grid-content no-overflow no-padding",style:{paddingBottom:15}},a.createElement("table",{className:"table table-striped dashboard-table"},a.createElement(r.c,{settings:this.props.settings,dashboard:!0,isMyAccount:this.props.isMyAccount}),p,this.props.children))}}]),t}();y=Object(u.connect)(y,{listenTo:function(){return[p.b]},getProps:function(){return{marketDirections:p.b.getState().marketDirections}}}),t.default=y},1391:
/*!*************************************************!*\
  !*** ./components/Utility/BalanceComponent.jsx ***!
  \*************************************************/
/*! exports provided: default */
/*! exports used: default */function(e,t,n){"use strict";var a=n(/*! react */0),r=n(/*! prop-types */3),o=n(/*! ./FormattedAsset */19),s=n(/*! ./ChainTypes */21),i=n(/*! ./BindToChainState */24),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var l=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["Component"]),c(t,[{key:"render",value:function(){var e=Number(this.props.balance.get("balance"));console.debug("NUMBER: ",e);var t=this.props.balance.get("asset_type");return a.createElement(o.a,{amount:e,asset:t,asPercentage:this.props.asPercentage,assetInfo:this.props.assetInfo,replace:this.props.replace,hide_asset:this.props.hide_asset})}}]),t}();l.propTypes={balance:s.a.ChainObject.isRequired,assetInfo:r.node,hide_asset:r.bool},l.defaultProps={hide_asset:!1},t.a=Object(i.a)(l,{keep_updating:!0})},1394:
/*!***********************************************!*\
  !*** ./components/Utility/AmountSelector.jsx ***!
  \***********************************************/
/*! exports provided: default */
/*! exports used: default */function(e,t,n){"use strict";var a=n(/*! react */0),r=n(/*! prop-types */3),o=n(/*! react-translate-component */1),s=n.n(o),i=n(/*! ../Utility/ChainTypes */21),c=n(/*! ../Utility/BindToChainState */24),l=n(/*! ./FormattedAsset */19),u=n(/*! ./FloatingDropdown */295),p=n(/*! immutable */7),d=n.n(p),m=n(/*! counterpart */14),f=n.n(m),h=n(/*! components/Common */108),b=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();function g(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function v(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _=function(e){function t(){return g(this,t),y(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return v(t,a["Component"]),b(t,[{key:"render",value:function(){return 0===this.props.assets.length?null:a.createElement(u.a,{entries:this.props.assets.map(function(e){return e&&e.get("symbol")}).filter(function(e){return!!e}),values:this.props.assets.reduce(function(e,t){return t&&t.get("symbol")&&(e[t.get("symbol")]=t),e},{}),singleEntry:this.props.assets[0]?a.createElement(l.a,{asset:this.props.assets[0].get("id"),amount:0,hide_amount:!0}):null,value:this.props.value,onChange:this.props.onChange})}}]),t}();_.propTypes={assets:i.a.ChainAssetsList,value:r.string,onChange:r.func},_=Object(c.a)(_);var E=function(e){function t(){return g(this,t),y(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return v(t,a["Component"]),b(t,[{key:"componentDidMount",value:function(){this.onAssetChange(this.props.asset)}},{key:"formatAmount",value:function(e){return e||(e=""),"number"==typeof e&&(e=e.toString()),e.trim().replace(/,/g,"")}},{key:"_onChange",value:function(e){var t=e.target.value;this.props.onChange({amount:t,asset:this.props.asset})}},{key:"onAssetChange",value:function(e){this.props.onChange({amount:this.props.amount,asset:e})}},{key:"render",value:function(){var e=this.props.error?f.a.translate(this.props.error):this.formatAmount(this.props.amount),t=this.props.isNumber;return a.createElement("div",{className:"amount-selector",style:this.props.style},a.createElement("label",{className:"right-label"},this.props.display_balance),a.createElement(s.a,{className:"left-label",component:"label",content:this.props.label}),a.createElement("div",{className:"inline-label input-wrapper"},t?a.createElement(h.l,{disabled:this.props.disabled,type:"number",valueFromOuter:!0,value:e||0,size:"small",placeholder:this.props.placeholder,onChange:this._onChange.bind(this),tabIndex:this.props.tabIndex,style:{width:"100%",marginBottom:0}}):a.createElement(h.l,{disabled:this.props.disabled,type:"text",valueFromOuter:!0,size:"small",value:e||"",placeholder:this.props.placeholder,onChange:this._onChange.bind(this),tabIndex:this.props.tabIndex,style:{width:"100%",marginBottom:0}}),a.createElement("div",{className:"form-label select floating-dropdown"},a.createElement(_,{ref:this.props.refCallback,value:this.props.asset.get("symbol"),assets:d.a.List(this.props.assets),onChange:this.onAssetChange.bind(this)}))))}}]),t}();E.propTypes={label:r.string,asset:i.a.ChainAsset.isRequired,assets:r.array,amount:r.any,placeholder:r.string,onChange:r.func.isRequired,tabIndex:r.number,error:r.string},E.defaultProps={disabled:!1},E=Object(c.a)(E),t.a=E},1396:
/*!***********************************!*\
  !*** ./services/GatewayConfig.ts ***!
  \***********************************/
/*! exports provided: JadePool, GATEWAY_URI, GATEWAY_QUERY_URI, GATEWAY_ID, CALLBACK_URL */
/*! exports used: GATEWAY_ID, GATEWAY_QUERY_URI, GATEWAY_URI, JadePool */function(e,t,n){"use strict";n.d(t,"d",function(){return a}),n.d(t,"c",function(){return r}),n.d(t,"b",function(){return o}),n.d(t,"a",function(){return s});var a={GATEWAY_ACCOUNT:"jade-gateway",ADDRESS_TYPES:{"TEST.ETH":"ETH","TEST.BTC":"BTC","TEST.USDT":"USDT","TEST.BAT":"BAT","TEST.VEN":"VEN","TEST.OMG":"OMG","TEST.SNT":"SNT","TEST.NAS":"NAS","TEST.KNC":"KNC","TEST.MT":"MT","TEST.PAY":"PAY","TEST.GET":"GET","TEST.TCT":"TCT","TEST.DPY":"DPY","TEST.MAD":"MAD","TEST.GNX":"GNX","TEST.KEY":"KEY","TEST.ENG":"ENG"},ADDRESS_ASSETS:{ETH:"TEST.ETH",BTC:"TEST.BTC",USDT:"TEST.USDT",BAT:"TEST.BAT",VEN:"TEST.VEN",OMG:"TEST.OMG",SNT:"TEST.SNT",NAS:"TEST.NAS",KNC:"TEST.KNC",PAY:"TEST.PAY",MT:"TEST.MT",GET:"TEST.GET",MAD:"TEST.MAD",TCT:"TEST.TCT",DPY:"TEST.DPY",GNX:"TEST.GNX",KEY:"TEST.KEY",ENG:"TEST.ENG"}},r="https://gatewaytest.cybex.io/gateway",o="https://gateway-query.cybex.io/",s="CybexGatewayDev"},1398:
/*!***********************************************!*\
  !*** ./actions/GatewayActions.ts + 1 modules ***!
  \***********************************************/
/*! exports provided: DEPOSIT_MODAL_ID, WITHDRAW_MODAL_ID, GatewayActions, default */
/*! exports used: DEPOSIT_MODAL_ID, GatewayActions, WITHDRAW_MODAL_ID, default */
/*! ModuleConcatenation bailout: Cannot concat with ./actions/NotificationActions.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./services/GatewayConfig.ts because of ./components/Account/AccountOverview.tsx */
/*! ModuleConcatenation bailout: Cannot concat with ./services/GatewayService.ts because of ./components/Gateway/WithdrawModal.tsx */
/*! ModuleConcatenation bailout: Cannot concat with ./stores/SettingsStore.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./utils/index.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./alt-instance.js */
/*! ModuleConcatenation bailout: Cannot concat with ./cybex/cybexjs/index.js */
/*! ModuleConcatenation bailout: Cannot concat with ./stores/WalletDb.js (<- Module uses injected variables (Buffer)) */function(e,t,n){"use strict";var a=n(11),r=n(15),o=n(13),s=n(201),i=n(1529),c=n(68),l=n(1396),u=n(2),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var d=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.op=t,this.signer=""}return p(e,[{key:"addSigner",value:function(e){this.signer=e}}]),e}();n.d(t,"a",function(){return b}),n.d(t,"c",function(){return g}),n.d(t,"b",function(){return _});var m=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var f=function(e,t,n,a){return new(n||(n=Promise))(function(r,o){function s(e){try{c(a.next(e))}catch(e){o(e)}}function i(e){try{c(a.throw(e))}catch(e){o(e)}}function c(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(s,i)}c((a=a.apply(e,t||[])).next())})},h=Object(s.a)("GatewayActions"),b="DEPOSIT_MODAL_ID",g="WITHDRAW_MODAL_ID",y=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=[],a=!0,o=!1,s=void 0;try{for(var i,c=e[Symbol.iterator]();!(a=(i=c.next()).done);a=!0){var l=i.value,u=r.a.getPrivateKey(l);if(u&&(n.push(u),n.length>=t))break}}catch(e){o=!0,s=e}finally{try{!a&&c.return&&c.return()}finally{if(o)throw s}}return n},v=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return m(e,[{key:"showDepositModal",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:b;return f(this,void 0,void 0,regeneratorRuntime.mark(function a(){var r;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(r=l.d.ADDRESS_TYPES[t]){a.next=3;break}return a.abrupt("return",c.a.error("No suitable asset for "+t+" to be deposited"));case 3:return a.next=5,this.updateDepositAddress(e,r);case 5:if(a.sent){a.next=8;break}return a.abrupt("return");case 8:this.openModal(n);case 9:case"end":return a.stop()}},a,this)}))}},{key:"showWithdrawModal",value:function(e){return f(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(h("Withdraw: ",e),n=l.d.ADDRESS_TYPES[e]){t.next=4;break}return t.abrupt("return",c.a.error("No suitable asset for "+e+" to be withdrawn"));case 4:return t.next=6,this.updateWithdrawInfo(e,n);case 6:if(t.sent){t.next=9;break}return t.abrupt("return");case 9:this.openModal(g);case 10:case"end":return t.stop()}},t,this)}))}},{key:"updateDepositAddress",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return f(this,void 0,void 0,regeneratorRuntime.mark(function a(){var r,o,s;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return r=void 0,h("Update Deposit Address: ",e,t,n),a.prev=2,a.next=5,Object(i.a)(e,t,n);case 5:o=r=a.sent,s=o.address,h("Address: ",s),a.next=15;break;case 10:return a.prev=10,a.t0=a.catch(2),h(a.t0),c.a.error(a.t0.message),a.abrupt("return",!1);case 15:return this.afterUpdateDepositInfo(r),a.abrupt("return",r);case 17:case"end":return a.stop()}},a,this,[[2,10]])}))}},{key:"updateWithdrawInfo",value:function(e,t){return f(this,void 0,void 0,regeneratorRuntime.mark(function n(){var a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return a=void 0,n.prev=1,n.next=4,Object(i.b)(t);case 4:a=n.sent,h("WithdrawLimit: ",a),n.next=13;break;case 8:return n.prev=8,n.t0=n.catch(1),h(n.t0),c.a.error(n.t0.message),n.abrupt("return",!1);case 13:return this.afterUpdateWithdrawInfo(Object.assign({asset:e},a)),n.abrupt("return",!0);case 15:case"end":return n.stop()}},n,this,[[1,8]])}))}},{key:"queryFundRecords",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:20;return f(this,void 0,void 0,regeneratorRuntime.mark(function r(){var o,s,c,l;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return h("[QueryFundRecord]",e),o=new d({accountName:e.get("name"),offset:n,size:a}),t.accountName===e.get("name")&&t.signer&&o.addSigner(t.signer),r.next=5,Object(i.d)(o);case 5:if(s=r.sent){r.next=15;break}return r.next=9,this.loginGatewayQuery(e);case 9:return c=r.sent,l=c.signer,o.addSigner(l),r.next=14,Object(i.d)(o);case 14:s=r.sent;case 15:s&&this.updateFundRecords(s);case 16:case"end":return r.stop()}},r,this)}))}},{key:"updateFundRecords",value:function(e){return e}},{key:"loginGatewayQuery",value:function(e){return f(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n,a,r,s,c,l,p;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(h("[LoginGatewayQuery]",e),h("[LoginGatewayQuery]",o.b.getSetting("walletLockTimeout")),n=new d({accountName:e.get("name"),expiration:Date.now()+1e3*o.b.getSetting("walletLockTimeout")}),a=u.p.fund_query.fromObject(n.op),e.getIn(["active","weight_threshold"]),r=e.getIn(["active","key_auths"]).filter(function(e){return e.get(1)>=1}).map(function(e){return e.get(0)}).toJS(),s=y(r)[0]){t.next=9;break}throw Error("Privkey Not Found");case 9:return h("[LoginGatewayQuery privKey]",e.getIn(["options","memo_key"]),s),c=u.p.fund_query.toBuffer(a),l=u.k.signBuffer(c,s).toHex(),h("[LoginGatewayQuery Signed]",l),n.addSigner(l),t.next=16,Object(i.c)(n);case 16:return p=t.sent,h("[LoginGatewayQuery LoginRes]",p),p&&this.updateLogin(p),t.abrupt("return",p);case 20:case"end":return t.stop()}},t,this)}))}},{key:"updateLogin",value:function(e){return e}},{key:"afterUpdateWithdrawInfo",value:function(e){return e}},{key:"afterUpdateDepositInfo",value:function(e){return e}},{key:"closeModal",value:function(e){return e}},{key:"openModal",value:function(e){return e}}]),e}(),_=a.a.createActions(v);t.d=_},1399:
/*!*************************************!*\
  !*** ./components/Utility/Tabs.jsx ***!
  \*************************************/
/*! exports provided: Tabs, Tab */
/*! exports used: Tab, Tabs */function(e,t,n){"use strict";n.d(t,"b",function(){return g}),n.d(t,"a",function(){return b});var a=n(/*! react */0),r=n(/*! prop-types */3),o=n(/*! react-translate-component */1),s=n.n(o),i=n(/*! classnames */40),c=n.n(i),l=n(/*! alt-react */25),u=n(/*! actions/SettingsActions */22),p=n(/*! stores/SettingsStore */13),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function f(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function h(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var b=function(e){function t(){return m(this,t),f(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return h(t,a["Component"]),d(t,[{key:"render",value:function(){var e=this.props,t=e.isActive,n=e.index,r=e.changeTab,o=e.title,i=e.className,l=e.disabled,u=c()({"is-active":t},i);return this.props.collapsed?a.createElement("option",{value:n},"string"==typeof o&&o.indexOf(".")>0?a.createElement(s.a,{className:"tab-title",content:o}):a.createElement("span",{className:"tab-title"},o)):a.createElement("li",{className:u,onClick:l?null:r.bind(this,n)},a.createElement("a",null,"string"==typeof o&&o.indexOf(".")>0?a.createElement(s.a,{className:"tab-title",content:o}):a.createElement("span",{className:"tab-title"},o),this.props.subText?a.createElement("div",{className:"tab-subtext"},this.props.subText):null))}}]),t}();b.propTypes={changeTab:r.func,isActive:r.bool.isRequired,index:r.number.isRequired,className:r.string},b.defaultProps={isActive:!1,index:0,className:""};var g=function(e){function t(e){m(this,t);var n=f(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.state={activeTab:e.setting?e.viewSettings.get(e.setting,e.defaultActiveTab):e.defaultActiveTab,width:window.innerWidth},n._setDimensions=n._setDimensions.bind(n),n}return h(t,a["Component"]),d(t,[{key:"componentDidMount",value:function(){this._setDimensions(),window.addEventListener("resize",this._setDimensions,{capture:!1,passive:!0})}},{key:"componentWillReceiveProps",value:function(e){var t=e.viewSettings.get(e.setting);t!==this.props.viewSettings.get(this.props.setting)&&this.setState({activeTab:t})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this._setDimensions)}},{key:"_setDimensions",value:function(){var e=window.innerWidth;e!==this.state.width&&this.setState({width:e})}},{key:"_changeTab",value:function(e){e!==this.state.activeTab&&(this.props.setting&&u.a.changeViewSetting(function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},this.props.setting,e)),this.setState({activeTab:e}),this.props.onChangeTab&&this.props.onChangeTab(e))}},{key:"render",value:function(){var e=this,t=this.props,n=t.children,r=t.contentClass,o=t.tabsClass,s=t.style,i=t.segmented,l=this.state.width<900,u=null,p=[],d=a.Children.map(n,function(t,n){if(!t)return null;if(l&&t.props.disabled)return null;var r=n===e.state.activeTab;return r&&(u=t.props.children),a.cloneElement(t,{collapsed:l,isActive:r,changeTab:e._changeTab.bind(e),index:n})}).filter(function(e){return e&&p.push(e.props.index),null!==e});return u||(u=d[0].props.children),a.createElement("div",{className:c()(this.props.actionButtons?"with-buttons":"",this.props.className)},a.createElement("div",{className:"service-selector"},a.createElement("ul",{style:s,className:c()("button-group no-margin",o,{segmented:i})},l?a.createElement("li",{style:{paddingLeft:10,paddingRight:10,minWidth:"15rem"}},a.createElement("select",{value:this.state.activeTab,style:{marginTop:10,marginBottom:10},className:"cyb-select",onChange:function(t){e._changeTab(parseInt(t.target.value,10))}},d)):d,this.props.actionButtons?a.createElement("li",{className:"tabs-action-buttons"},this.props.actionButtons):null)),a.createElement("div",{className:r+" tab-content"},u))}}]),t}();g.propTypes={setting:r.string,defaultActiveTab:r.number,segmented:r.bool},g.defaultProps={active:0,defaultActiveTab:0,segmented:!0,contentClass:"",style:{}},g=Object(l.connect)(g,{listenTo:function(){return[p.b]},getProps:function(){return{viewSettings:p.b.getState().viewSettings}}})},1400:
/*!**************************************************!*\
  !*** ./components/Utility/TransitionWrapper.jsx ***!
  \**************************************************/
/*! exports provided: default */
/*! exports used: default */function(e,t,n){"use strict";var a=n(/*! react */0),r=(n(/*! prop-types */3),n(/*! react-transition-group/CSSTransitionGroup */1549)),o=n.n(r),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var i=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={animateEnter:!1},e.timer=null,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["Component"]),s(t,[{key:"componentDidMount",value:function(){this.enableAnimation()}},{key:"resetAnimation",value:function(){this.setState({animateEnter:!1}),this.enableAnimation()}},{key:"enableAnimation",value:function(){var e=this;this.timer=setTimeout(function(){e.timer&&e.setState({animateEnter:!0})},2e3)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timer),this.timer=null}},{key:"render",value:function(){return this.props.children?a.createElement(o.a,{className:this.props.className,component:this.props.component,transitionName:this.props.transitionName,transitionEnterTimeout:this.props.enterTimeout,transitionEnter:this.state.animateEnter,transitionLeave:!1},this.props.children):a.createElement(this.props.component)}}]),t}();i.defaultProps={component:"span",enterTimeout:2e3},t.a=i},1526:
/*!***********************************************!*\
  !*** ../node_modules/file-saver/FileSaver.js ***!
  \***********************************************/
/*! no static exports found */
/*! exports used: saveAs */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){var a,r=r||function(e){"use strict";if(!(void 0===e||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var t=function(){return e.URL||e.webkitURL||e},n=e.document.createElementNS("http://www.w3.org/1999/xhtml","a"),a="download"in n,r=/constructor/i.test(e.HTMLElement)||e.safari,o=/CriOS\/[\d]+/.test(navigator.userAgent),s=function(t){(e.setImmediate||e.setTimeout)(function(){throw t},0)},i=function(e){setTimeout(function(){"string"==typeof e?t().revokeObjectURL(e):e.remove()},4e4)},c=function(e){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e},l=function(l,u,p){p||(l=c(l));var d,m=this,f="application/octet-stream"===l.type,h=function(){!function(e,t,n){for(var a=(t=[].concat(t)).length;a--;){var r=e["on"+t[a]];if("function"==typeof r)try{r.call(e,n||e)}catch(e){s(e)}}}(m,"writestart progress write writeend".split(" "))};if(m.readyState=m.INIT,a)return d=t().createObjectURL(l),void setTimeout(function(){var e,t;n.href=d,n.download=u,e=n,t=new MouseEvent("click"),e.dispatchEvent(t),h(),i(d),m.readyState=m.DONE});!function(){if((o||f&&r)&&e.FileReader){var n=new FileReader;return n.onloadend=function(){var t=o?n.result:n.result.replace(/^data:[^;]*;/,"data:attachment/file;");e.open(t,"_blank")||(e.location.href=t),t=void 0,m.readyState=m.DONE,h()},n.readAsDataURL(l),void(m.readyState=m.INIT)}d||(d=t().createObjectURL(l)),f?e.location.href=d:e.open(d,"_blank")||(e.location.href=d);m.readyState=m.DONE,h(),i(d)}()},u=l.prototype;return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(e,t,n){return t=t||e.name||"download",n||(e=c(e)),navigator.msSaveOrOpenBlob(e,t)}:(u.abort=function(){},u.readyState=u.INIT=0,u.WRITING=1,u.DONE=2,u.error=u.onwritestart=u.onprogress=u.onwrite=u.onabort=u.onerror=u.onwriteend=null,function(e,t,n){return new l(e,t||e.name||"download",n)})}}("undefined"!=typeof self&&self||"undefined"!=typeof window&&window||this.content);
/*! @source http://purl.eligrey.com/github/FileSaver.js/blob/master/FileSaver.js */void 0!==e&&e.exports?e.exports.saveAs=r:null!==n(/*! !webpack amd define */825)&&null!==n(/*! !webpack amd options */1533)&&(void 0===(a=function(){return r}.call(t,n,t,e))||(e.exports=a))},1529:
/*!************************************!*\
  !*** ./services/GatewayService.ts ***!
  \************************************/
/*! exports provided: getDepositInfo, getWithdrawInfo, verifyAddress, queryFundRecords, loginQuery, GatewayService */
/*! exports used: getDepositInfo, getWithdrawInfo, loginQuery, queryFundRecords, verifyAddress */function(e,t,n){"use strict";n.d(t,"a",function(){return _}),n.d(t,"b",function(){return E}),n.d(t,"e",function(){return w}),n.d(t,"d",function(){return k}),n.d(t,"c",function(){return O});var a=n(/*! ./GatewayConfig */1396),r=n(/*! utils */201),o=n(/*! graphql-tag */1574),s=n.n(o),i=n(/*! apollo-client */1571),c=n(/*! apollo-link-http */1570),l=n(/*! apollo-cache-inmemory */1572),u=f(["\n    mutation GenNewAddress($accountName: String!, $asset: String!) {\n      newDepositAddress(accountName: $accountName, asset: $asset) {\n        address\n        accountName\n        asset\n        type\n        createAt\n      }\n    }\n  "],["\n    mutation GenNewAddress($accountName: String!, $asset: String!) {\n      newDepositAddress(accountName: $accountName, asset: $asset) {\n        address\n        accountName\n        asset\n        type\n        createAt\n      }\n    }\n  "]),p=f(["\n    query GetAddress($accountName: String!, $asset: String!) {\n      getDepositAddress(accountName: $accountName, asset: $asset) {\n        address\n        accountName\n        asset\n        type\n        createAt\n      }\n    }\n  "],["\n    query GetAddress($accountName: String!, $asset: String!) {\n      getDepositAddress(accountName: $accountName, asset: $asset) {\n        address\n        accountName\n        asset\n        type\n        createAt\n      }\n    }\n  "]),d=f(["\n    query WithdrawInfo($type: String!) {\n      withdrawInfo(type: $type) {\n        fee\n        minValue\n        precision\n        asset\n        type\n        gatewayAccount\n      }\n    }\n  "],["\n    query WithdrawInfo($type: String!) {\n      withdrawInfo(type: $type) {\n        fee\n        minValue\n        precision\n        asset\n        type\n        gatewayAccount\n      }\n    }\n  "]),m=f(["\n    query VerifyAddress(\n      $asset: String!\n      $accountName: String!\n      $address: String!\n    ) {\n      verifyAddress(\n        asset: $asset\n        accountName: $accountName\n        address: $address\n      ) {\n        valid\n        asset\n      }\n    }\n  "],["\n    query VerifyAddress(\n      $asset: String!\n      $accountName: String!\n      $address: String!\n    ) {\n      verifyAddress(\n        asset: $asset\n        accountName: $accountName\n        address: $address\n      ) {\n        valid\n        asset\n      }\n    }\n  "]);function f(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var h=function(e,t,n,a){return new(n||(n=Promise))(function(r,o){function s(e){try{c(a.next(e))}catch(e){o(e)}}function i(e){try{c(a.throw(e))}catch(e){o(e)}}function c(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(s,i)}c((a=a.apply(e,t||[])).next())})},b=Object(r.a)("GatewayService"),g=new Headers;g.append("Content-Type","application/x-www-form-urlencoded");var y=new c.a({uri:a.c}),v=new i.a({link:y,cache:new l.a});function _(e,t,n){return h(this,void 0,void 0,regeneratorRuntime.mark(function a(){var r,o;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:if(b("Get Deposit: ",e,t,n),r=s()(u),o=s()(p),!n){a.next=9;break}return a.next=6,C("mutate",{mutation:r,variables:{accountName:e,asset:t}},"newDepositAddress");case 6:a.t0=a.sent,a.next=12;break;case 9:return a.next=11,C("query",{query:o,variables:{accountName:e,asset:t}},"getDepositAddress");case 11:a.t0=a.sent;case 12:return a.abrupt("return",a.t0);case 13:case"end":return a.stop()}},a,this)}))}function E(e){return h(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=s()(d),t.next=3,C("query",{query:n,variables:{type:e}},"withdrawInfo");case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}},t,this)}))}function w(e,t,n){return h(this,void 0,void 0,regeneratorRuntime.mark(function a(){var r;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return r=s()(m),a.next=3,C("query",{query:r,variables:{asset:n,accountName:t,address:e}},"verifyAddress");case 3:return a.abrupt("return",a.sent);case 4:case"end":return a.stop()}},a,this)}))}function k(e){return h(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j("records",e).then(function(e){return e.data});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)}))}function O(e){return h(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,j("login",e).then(function(e){return e.data});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)}))}function j(e,t){return h(this,void 0,void 0,regeneratorRuntime.mark(function n(){var r,o;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return(r=new Headers).append("Content-Type","application/json"),o={headers:r,method:"POST",body:JSON.stringify(t)},n.next=5,fetch(""+a.b+e,o).then(function(e){return e.json()}).catch(function(e){return{code:400,error:e.message}});case 5:return n.abrupt("return",n.sent);case 6:case"end":return n.stop()}},n,this)}))}function C(e,t,n){return h(this,void 0,void 0,regeneratorRuntime.mark(function a(){return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,v[e](t);case 3:return a.t0=n,a.abrupt("return",a.sent.data[a.t0]);case 7:throw a.prev=7,a.t1=a.catch(0),console.error("GatewayError: ",a.t1),a.t1;case 11:case"end":return a.stop()}},a,this,[[0,7]])}))}},1530:
/*!*********************************************************!*\
  !*** ./components/Utility/EquivalentValueComponent.jsx ***!
  \*********************************************************/
/*! exports provided: EquivalentValueComponent, BalanceValueComponent */
/*! exports used: BalanceValueComponent, EquivalentValueComponent */function(e,t,n){"use strict";n.d(t,"b",function(){return k}),n.d(t,"a",function(){return O});var a=n(/*! react */0),r=(n(/*! prop-types */3),n(/*! ./FormattedAsset */19)),o=n(/*! ./ChainTypes */21),s=n(/*! ./BindToChainState */24),i=n(/*! common/utils */8),c=n(/*! alt-react */25),l=n(/*! stores/MarketsStore */88),u=n(/*! react-translate-component */1),p=n.n(u),d=n(/*! counterpart */14),m=n.n(d),f=n(/*! react-tooltip */60),h=n.n(f),b=n(/*! ../Utility/EquivalentPrice */301),g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},y=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function E(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var w=function(e){function t(e){return v(this,t),_(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return E(t,b["a"]),y(t,[{key:"componentDidMount",value:function(){h.a.rebuild()}},{key:"shouldComponentUpdate",value:function(e){return function e(t,n,a){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,a)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(a):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"shouldComponentUpdate",this).call(this,e)||e.toAsset!==this.props.toAsset||e.fromAsset!==this.props.fromAsset||e.amount!==this.props.amount}},{key:"getValue",value:function(){var e=this.props,t=e.amount,n=e.toAsset,a=e.fromAsset,r=e.fullPrecision,o=e.marketStats,s=e.coreAsset,c=void 0,l=void 0,u=n.get("id"),p=n.get("symbol"),d=a.get("id"),m=a.get("symbol");if(r||(t=i.a.get_asset_amount(t,a)),s&&o){var f=s.get("symbol");c=o.get(p+"_"+f),l=o.get(m+"_"+f)}var h=i.a.convertPrice(l&&l.close?l.close:"1.3.0"===d||a.has("bitasset")?a:null,c&&c.close?c.close:"1.3.0"===u||n.has("bitasset")?n:null,d,u);return h?i.a.convertValue(h,t,a,n):null}},{key:"render",value:function(){var e=this.props,t=e.amount,n=e.toAsset,o=e.fromAsset,s=e.fullPrecision,c=n.get("id");n.get("symbol");s||(t=i.a.get_asset_amount(t,o));var l=this.getValue();return l||0===l?a.createElement(r.a,{hide_asset:this.props.hide_asset,noPrefix:!0,amount:l,asset:c,decimalOffset:0}):a.createElement("div",{className:"tooltip inline-block","data-place":"bottom","data-tip":m.a.translate("tooltip.no_price"),style:{fontSize:"0.9rem"}},a.createElement(p.a,{content:"account.no_price"}))}}]),t}();w.propTypes={toAsset:o.a.ChainAsset.isRequired,fromAsset:o.a.ChainAsset.isRequired,coreAsset:o.a.ChainAsset.isRequired},w.defaultProps={toAsset:"1.3.0",fullPrecision:!0,noDecimals:!1,hide_asset:!1,coreAsset:"1.3.0"},w=Object(s.a)(w,{keep_updating:!0});var k=function(e){function t(){return v(this,t),_(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return E(t,a["Component"]),y(t,[{key:"render",value:function(){var e=this.props,t=e.refCallback,n=function(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}(e,["refCallback"]);return a.createElement(w,g({},n,{ref:t}))}}]),t}();k=Object(c.connect)(k,{listenTo:function(){return[l.a]},getProps:function(){return{marketStats:l.a.getState().allMarketStats}}});var O=function(e){function t(){return v(this,t),_(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return E(t,a["Component"]),y(t,[{key:"render",value:function(){var e=this.props.balance,t=!!e.getIn(["balance","amount"]),n=Number(t?e.getIn(["balance","amount"]):e.get("balance")),r=t?e.getIn(["balance","asset_id"]):e.get("asset_type");return isNaN(n)?a.createElement("span",null,"--"):a.createElement(k,{refCallback:this.props.refCallback,hide_asset:this.props.hide_asset,amount:n,fromAsset:r,noDecimals:!0,toAsset:this.props.toAsset})}}]),t}();O.propTypes={balance:o.a.ChainObject.isRequired},O=Object(s.a)(O,{keep_updating:!0})},1533:
/*!******************************************************!*\
  !*** ../node_modules/webpack/buildin/amd-options.js ***!
  \******************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t){(function(t){e.exports=t}).call(this,{})},1535:
/*!***************************************************!*\
  !*** ./components/Account/RecentTransactions.jsx ***!
  \***************************************************/
/*! exports provided: RecentTransactions, TransactionWrapper */
/*! exports used: RecentTransactions, TransactionWrapper */function(e,t,n){"use strict";n.d(t,"a",function(){return N}),n.d(t,"b",function(){return S});var a=n(/*! react */0),r=n(/*! prop-types */3),o=n(/*! react-translate-component */1),s=n.n(o),i=n(/*! file-saver */1526),c=n(/*! ../Blockchain/Operation */302),l=n(/*! ../Utility/ChainTypes */21),u=n(/*! ../Utility/BindToChainState */24),p=n(/*! common/utils */8),d=n(/*! cybexjs */2),m=n(/*! ../Utility/TransitionWrapper */1400),f=n(/*! perfect-scrollbar */1568),h=n.n(f),b=n(/*! counterpart */14),g=n.n(b),y=n(/*! ../Icon/Icon */50),v=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function w(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var k=d.c.operations,O={textAlign:"left"},j={textAlign:"right"};function C(e,t){return t.block_num===e.block_num?t.virtual_op-e.virtual_op:t.block_num-e.block_num}function A(e){return e?'"'+e.textContent.replace(/[\s\t\r\n]/gi," ")+'"':""}var N=function(e){function t(e){_(this,t);var n=E(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.state={limit:e.limit||20,csvExport:!1,headerHeight:85,filter:"all"},n}return w(t,a["Component"]),v(t,[{key:"componentDidMount",value:function(){if(!this.props.fullHeight){var e=this.refs.transactions;h.a.initialize(e),this._setHeaderHeight()}}},{key:"_setHeaderHeight",value:function(){var e=this.refs.header.offsetHeight;e!==this.state.headerHeight&&this.setState({headerHeight:e})}},{key:"shouldComponentUpdate",value:function(e,t){if(!p.a.are_equal_shallow(this.props.accountsList,e.accountsList))return!0;if(this.props.maxHeight!==e.maxHeight)return!0;if(this.state.headerHeight!==t.headerHeight)return!0;if(this.state.filter!==t.filter)return!0;if(this.props.customFilter&&(!p.a.are_equal_shallow(this.props.customFilter.fields,e.customFilter.fields)||!p.a.are_equal_shallow(this.props.customFilter.values,e.customFilter.values)))return!0;if(this.props.maxHeight!==e.maxHeight)return!0;if(t.limit!==this.state.limit||t.csvExport!==this.state.csvExport)return!0;for(var n=0;n<e.accountsList.length;++n){var a=e.accountsList[n],r=this.props.accountsList[n];if(a&&r&&a.get("history")!==r.get("history"))return!0}return!1}},{key:"componentDidUpdate",value:function(){if(this.state.csvExport){this.state.csvExport=!1;var e=document.getElementById("csv_export_container").childNodes,t="",n=!0,a=!1,r=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var c=o.value.childNodes;""!==t&&(t+="\n"),t+=[A(c[0]),A(c[1]),A(c[2]),A(c[3])].join(",")}}catch(e){a=!0,r=e}finally{try{!n&&s.return&&s.return()}finally{if(a)throw r}}var l=new Blob([t],{type:"text/csv;charset=utf-8"}),u=new Date;Object(i.saveAs)(l,"cybhist-"+u.getFullYear()+"-"+("0"+(u.getMonth()+1)).slice(-2)+"-"+("0"+u.getDate()).slice(-2)+"-"+("0"+u.getHours()).slice(-2)+("0"+u.getMinutes()).slice(-2)+".csv")}if(!this.props.fullHeight){var p=this.refs.transactions;h.a.update(p),this._setHeaderHeight()}}},{key:"_onIncreaseLimit",value:function(){this.setState({limit:this.state.limit+30})}},{key:"_getHistory",value:function(e,t,n){var a=[],r=new Set,o=!0,s=!1,i=void 0;try{for(var c,l=e[Symbol.iterator]();!(o=(c=l.next()).done);o=!0){var u=c.value;if(u){var p=u.get("history");p&&(a=a.concat(p.toJS().filter(function(e){return!r.has(e.id)&&r.add(e.id)})))}}}catch(e){s=!0,i=e}finally{try{!o&&l.return&&l.return()}finally{if(s)throw i}}return t&&(a=a.filter(function(e){return e.op[0]===k[t]})),n&&(a=a.filter(function(e){return n.fields.reduce(function(t,a){switch(a){case"asset_id":return t&&e.op[1].amount[a]===n.values[a];default:return t&&e.op[1][a]===n.values[a]}},!0)})),a}},{key:"_downloadCSV",value:function(){this.setState({csvExport:!0})}},{key:"_onChangeFilter",value:function(e){this.setState({filter:e.target.value})}},{key:"render",value:function(){var e=this.props,t=e.accountsList,n=e.compactView,r=e.filter,o=e.customFilter,i=e.style,l=e.maxHeight,u=this.state,p=u.limit,d=u.headerHeight,f=1===t.length&&t[0]?t[0].get("id"):null,h=this._getHistory(t,this.props.showFilters&&"all"!==this.state.filter?this.state.filter:r,o).sort(C),b=h.length;i=i||{};var v=null;v=["all","transfer","limit_order_create","limit_order_cancel","fill_order","account_create","account_update","asset_create","witness_withdraw_pay","vesting_balance_withdraw"].map(function(e){return a.createElement("option",{value:e,key:e},g.a.translate("transaction.trxTypes."+e))});var _=h.length?h.slice(0,p).map(function(e){return a.createElement(c.a,{style:O,key:e.id,op:e.op,result:e.result,block:e.block_num,current:f,hideFee:!0,inverted:!1,hideOpLabel:n})}):[a.createElement("tr",{key:"no_recent"},a.createElement("td",{colSpan:n?"2":"3"},a.createElement(s.a,{content:"operation.no_recent"})))];return _.push(a.createElement("tr",{className:"total-value",key:"total_value"},a.createElement("td",{className:"column-hide-tiny"}),a.createElement("td",{style:j},b>0?a.createElement("span",null,a.createElement("a",{className:"inline-block",onClick:this._downloadCSV.bind(this),"data-tip":g.a.translate("transaction.csv_tip"),"data-place":"bottom"},a.createElement(y.a,{name:"excel",className:"icon-14px"}))):null),a.createElement("td",{style:{textAlign:"center"}}," ",this.props.showMore&&b>this.props.limit||p<b?a.createElement("a",{onClick:this._onIncreaseLimit.bind(this)},a.createElement(y.a,{name:"chevron-down",className:"icon-14px"})):null))),a.createElement("div",{className:"recent-transactions no-overflow",style:i},a.createElement("div",{className:"generic-bordered-box"},this.props.dashboard?null:a.createElement("div",{ref:"header"},a.createElement("div",{className:"block-content-header"},a.createElement("span",null,this.props.title?this.props.title:a.createElement(s.a,{content:"account.recent"})))),a.createElement("div",{className:"box-content grid-block no-margin",style:this.props.fullHeight?null:{maxHeight:l-d},ref:"transactions"},a.createElement("table",{className:"table"+(n?" compact":"")+(this.props.dashboard?" dashboard-table":"")},a.createElement("thead",null,a.createElement("tr",null,n?null:a.createElement("th",{style:O,className:"column-hide-tiny"},this.props.showFilters?a.createElement("select",{"data-place":"left","data-tip":g.a.translate("tooltip.filter_ops"),style:{paddingTop:5,width:"auto"},className:"cyb-select no-margin",value:this.state.filter,onChange:this._onChangeFilter.bind(this)},v):null),a.createElement("th",{style:O},a.createElement(s.a,{content:"account.votes.info"})),a.createElement("th",null))),a.createElement(m.a,{component:"tbody",transitionName:"newrow"},_))),b>0&&this.state.csvExport&&a.createElement("div",{id:"csv_export_container",style:{display:"none"}},a.createElement("div",null,a.createElement("div",null,"DATE"),a.createElement("div",null,"OPERATION"),a.createElement("div",null,"MEMO"),a.createElement("div",null,"AMOUNT")),h.map(function(e){return a.createElement(c.a,{key:e.id,op:e.op,result:e.result,block:e.block_num,inverted:!1,csvExportMode:!0})}))))}}]),t}();N.propTypes={accountsList:l.a.ChainAccountsList.isRequired,compactView:r.bool,limit:r.number,maxHeight:r.number,fullHeight:r.bool,showFilters:r.bool},N.defaultProps={limit:25,maxHeight:500,fullHeight:!1,showFilters:!1},N=Object(u.a)(N,{keep_updating:!0});var S=function(e){function t(){return _(this,t),E(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return w(t,a["Component"]),v(t,[{key:"render",value:function(){return a.createElement("span",{className:"wrapper"},this.props.children(this.props))}}]),t}();S.propTypes={asset:l.a.ChainAsset.isRequired,to:l.a.ChainAccount.isRequired,fromAccount:l.a.ChainAccount.isRequired},S.defaultProps={asset:"1.3.0"},S=Object(u.a)(S)},1545:
/*!******************************************!*\
  !*** ./components/Utility/PriceText.jsx ***!
  \******************************************/
/*! exports provided: default */
/*! exports used: default */function(e,t,n){"use strict";var a=n(/*! react */0),r=n(/*! common/utils */8),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["Component"]),o(t,[{key:"render",value:function(){var e=this.props,t=e.price,n=e.preFormattedPrice,o=e.quote,s=e.base,i=(e.component,e.precision),c=n||r.a.price_to_text(t,o,s,i);return c.full>=1?a.createElement("span",null,a.createElement("span",{className:"price-integer"},c.int,"."),c.dec?a.createElement("span",{className:"price-integer"},c.dec):null,c.trailing?a.createElement("span",{className:"price-decimal"},c.trailing):null):c.full>=.1?a.createElement("span",null,a.createElement("span",{className:"price-decimal"},c.int,"."),c.dec?a.createElement("span",{className:"price-integer"},c.dec):null,c.trailing?a.createElement("span",{className:"price-decimal"},c.trailing):null):a.createElement("span",null,a.createElement("span",{className:"price-decimal"},c.int,"."),c.dec?a.createElement("span",{className:"price-decimal"},c.dec):null,c.trailing?a.createElement("span",{className:"price-integer"},c.trailing):null)}}]),t}();t.a=s},1565:
/*!*****************************************!*\
  !*** ./components/Forms/MyAccounts.jsx ***!
  \*****************************************/
/*! exports provided: default */
/*! exports used: default */function(e,t,n){"use strict";var a=n(/*! react */0),r=n(/*! prop-types */3),o=n(/*! stores/AccountStore */28),s=n(/*! components/Utility/ChainTypes */21),i=n(/*! components/Forms/AccountSelect */300),c=n(/*! components/Utility/BindToChainState */24),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["Component"]),l(t,[{key:"render",value:function(){var e=this.props.accounts.filter(function(e){return!!e}).filter(function(e){return o.a.isMyAccount(e)}).map(function(e){return e.get("name")}).sort();this.props.className;return a.createElement(i.a,{className:!0,onChange:this.onAccountSelect.bind(this),account_names:e,center:!0})}},{key:"onAccountSelect",value:function(e){this.props.onChange(e)}}]),t}();u.propTypes={accounts:s.a.ChainAccountsList.isRequired,onChange:r.func.isRequired},t.a=Object(c.a)(u,{keep_updating:!0})},1576:
/*!***************************************************!*\
  !*** ../node_modules/moment/locale sync ^\.\/.*$ ***!
  \***************************************************/
/*! no static exports found */
/*! all exports used */
/*! ModuleConcatenation bailout: Module is not an ECMAScript module */function(e,t,n){var a={"./af":1523,"./af.js":1523,"./ar":1522,"./ar-dz":1521,"./ar-dz.js":1521,"./ar-kw":1520,"./ar-kw.js":1520,"./ar-ly":1519,"./ar-ly.js":1519,"./ar-ma":1518,"./ar-ma.js":1518,"./ar-sa":1517,"./ar-sa.js":1517,"./ar-tn":1516,"./ar-tn.js":1516,"./ar.js":1522,"./az":1515,"./az.js":1515,"./be":1514,"./be.js":1514,"./bg":1513,"./bg.js":1513,"./bm":1512,"./bm.js":1512,"./bn":1511,"./bn.js":1511,"./bo":1510,"./bo.js":1510,"./br":1509,"./br.js":1509,"./bs":1508,"./bs.js":1508,"./ca":1507,"./ca.js":1507,"./cs":1506,"./cs.js":1506,"./cv":1505,"./cv.js":1505,"./cy":1504,"./cy.js":1504,"./da":1503,"./da.js":1503,"./de":1502,"./de-at":1501,"./de-at.js":1501,"./de-ch":1500,"./de-ch.js":1500,"./de.js":1502,"./dv":1499,"./dv.js":1499,"./el":1498,"./el.js":1498,"./en-au":1497,"./en-au.js":1497,"./en-ca":1496,"./en-ca.js":1496,"./en-gb":1495,"./en-gb.js":1495,"./en-ie":1494,"./en-ie.js":1494,"./en-nz":1493,"./en-nz.js":1493,"./eo":1492,"./eo.js":1492,"./es":1491,"./es-do":1490,"./es-do.js":1490,"./es-us":1489,"./es-us.js":1489,"./es.js":1491,"./et":1488,"./et.js":1488,"./eu":1487,"./eu.js":1487,"./fa":1486,"./fa.js":1486,"./fi":1485,"./fi.js":1485,"./fo":1484,"./fo.js":1484,"./fr":1483,"./fr-ca":1482,"./fr-ca.js":1482,"./fr-ch":1481,"./fr-ch.js":1481,"./fr.js":1483,"./fy":1480,"./fy.js":1480,"./gd":1479,"./gd.js":1479,"./gl":1478,"./gl.js":1478,"./gom-latn":1477,"./gom-latn.js":1477,"./gu":1476,"./gu.js":1476,"./he":1475,"./he.js":1475,"./hi":1474,"./hi.js":1474,"./hr":1473,"./hr.js":1473,"./hu":1472,"./hu.js":1472,"./hy-am":1471,"./hy-am.js":1471,"./id":1470,"./id.js":1470,"./is":1469,"./is.js":1469,"./it":1468,"./it.js":1468,"./ja":1467,"./ja.js":1467,"./jv":1466,"./jv.js":1466,"./ka":1465,"./ka.js":1465,"./kk":1464,"./kk.js":1464,"./km":1463,"./km.js":1463,"./kn":1462,"./kn.js":1462,"./ko":1461,"./ko.js":1461,"./ky":1460,"./ky.js":1460,"./lb":1459,"./lb.js":1459,"./lo":1458,"./lo.js":1458,"./lt":1457,"./lt.js":1457,"./lv":1456,"./lv.js":1456,"./me":1455,"./me.js":1455,"./mi":1454,"./mi.js":1454,"./mk":1453,"./mk.js":1453,"./ml":1452,"./ml.js":1452,"./mr":1451,"./mr.js":1451,"./ms":1450,"./ms-my":1449,"./ms-my.js":1449,"./ms.js":1450,"./my":1448,"./my.js":1448,"./nb":1447,"./nb.js":1447,"./ne":1446,"./ne.js":1446,"./nl":1445,"./nl-be":1444,"./nl-be.js":1444,"./nl.js":1445,"./nn":1443,"./nn.js":1443,"./pa-in":1442,"./pa-in.js":1442,"./pl":1441,"./pl.js":1441,"./pt":1440,"./pt-br":1439,"./pt-br.js":1439,"./pt.js":1440,"./ro":1438,"./ro.js":1438,"./ru":1437,"./ru.js":1437,"./sd":1436,"./sd.js":1436,"./se":1435,"./se.js":1435,"./si":1434,"./si.js":1434,"./sk":1433,"./sk.js":1433,"./sl":1432,"./sl.js":1432,"./sq":1431,"./sq.js":1431,"./sr":1430,"./sr-cyrl":1429,"./sr-cyrl.js":1429,"./sr.js":1430,"./ss":1428,"./ss.js":1428,"./sv":1427,"./sv.js":1427,"./sw":1426,"./sw.js":1426,"./ta":1425,"./ta.js":1425,"./te":1424,"./te.js":1424,"./tet":1423,"./tet.js":1423,"./th":1422,"./th.js":1422,"./tl-ph":1421,"./tl-ph.js":1421,"./tlh":1420,"./tlh.js":1420,"./tr":1419,"./tr.js":1419,"./tzl":1418,"./tzl.js":1418,"./tzm":1417,"./tzm-latn":1416,"./tzm-latn.js":1416,"./tzm.js":1417,"./uk":1415,"./uk.js":1415,"./ur":1414,"./ur.js":1414,"./uz":1413,"./uz-latn":1412,"./uz-latn.js":1412,"./uz.js":1413,"./vi":1411,"./vi.js":1411,"./x-pseudo":1410,"./x-pseudo.js":1410,"./yo":1409,"./yo.js":1409,"./zh-cn":1408,"./zh-cn.js":1408,"./zh-hk":1407,"./zh-hk.js":1407,"./zh-tw":1406,"./zh-tw.js":1406};function r(e){var t=o(e);return n(t)}function o(e){var t=a[e];if(!(t+1)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t}r.keys=function(){return Object.keys(a)},r.resolve=o,e.exports=r,r.id=1576},1583:
/*!*************************************!*\
  !*** ./actions/CrowdFundActions.ts ***!
  \*************************************/
/*! exports provided: default */
/*! exports used: default */function(e,t,n){"use strict";var a=n(/*! alt-instance */11),r=n(/*! cybexjs-ws */4),o=n(/*! stores/WalletDb */15),s=n(/*! api/WalletApi */144),i=n(/*! utils */201),c=n(/*! moment */1387),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var u=function(e,t,n,a){return new(n||(n=Promise))(function(r,o){function s(e){try{c(a.next(e))}catch(e){o(e)}}function i(e){try{c(a.throw(e))}catch(e){o(e)}}function c(e){e.done?r(e.value):new n(function(t){t(e.value)}).then(s,i)}c((a=a.apply(e,t||[])).next())})},p=Object(i.a)("CrowdFundActions"),d=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return l(e,[{key:"queryAllCrowdFunds",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,n=arguments[2];return u(this,void 0,void 0,regeneratorRuntime.mark(function a(){var o,s,i;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return o="1.16."+e.toString(),a.next=3,r.a.instance().db_api().exec("list_crowdfund_objects",[o,t]);case 3:if(s=(s=a.sent).map(function(e){return Object.assign({},e,{beginMoment:c.utc(e.begin)})}),!n){a.next=10;break}return a.next=8,Promise.all([this.queryAccountInitCrowds(n),this.queryAccountPartiCrowds(n)]);case 8:i=a.sent,p("AccountCrowd: ",i);case 10:p("Query All Funds RES: ",s),this.allFundsFetched({start:e,size:t,res:s});case 12:case"end":return a.stop()}},a,this)}))}},{key:"queryAccountInitCrowds",value:function(e){return u(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.a.instance().db_api().exec("get_crowdfund_objects",[e]);case 2:return n=t.sent,p("Query Init RES: ",n),this.accountInitFundsFetched(n),t.abrupt("return",n);case 6:case"end":return t.stop()}},t,this)}))}},{key:"queryAccountPartiCrowds",value:function(e){return u(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,r.a.instance().db_api().exec("get_crowdfund_contract_objects",[e]);case 2:return n=(n=t.sent).map(function(e){return Object.assign({},e,{whenM:c.utc(e.when)})}),p("Query Fund RES: ",n),this.accountPartiFundsFetched(n),t.abrupt("return",n);case 7:case"end":return t.stop()}},t,this)}))}},{key:"initCrowdFund",value:function(e){return u(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object.assign({fee:{asset_id:0,amount:0}},e),(a=s.a.new_transaction()).add_type_operation("initiate_crowdfund",n),t.prev=3,t.next=6,o.a.process_transaction(a,null,!0);case 6:return t.abrupt("return",function(e){return e(!0)});case 9:return t.prev=9,t.t0=t.catch(3),t.abrupt("return",function(e){return e(!1)});case 12:case"end":return t.stop()}},t,this,[[3,9]])}))}},{key:"partiCrowd",value:function(e){return u(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n,a;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object.assign({fee:{asset_id:0,amount:0}},e),(a=s.a.new_transaction()).add_type_operation("participate_crowdfund",n),t.prev=3,t.next=6,o.a.process_transaction(a,null,!0);case 6:return t.abrupt("return",function(e){return e(!0)});case 9:return t.prev=9,t.t0=t.catch(3),t.abrupt("return",function(e){return e(!1)});case 12:case"end":return t.stop()}},t,this,[[3,9]])}))}},{key:"withdrawCrowdFund",value:function(e,t){return u(this,void 0,void 0,regeneratorRuntime.mark(function n(){var a,r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return a={fee:{amount:0,asset_id:"1.3.0"},buyer:e,crowdfund_contract:t},(r=s.a.new_transaction()).add_type_operation("withdraw_crowdfund",a),n.prev=3,n.next=6,o.a.process_transaction(r,null,!0);case 6:return n.abrupt("return",function(e){return e(!0)});case 9:return n.prev=9,n.t0=n.catch(3),n.abrupt("return",function(e){return e(!1)});case 12:case"end":return n.stop()}},n,this,[[3,9]])}))}},{key:"allFundsFetched",value:function(e){return e}},{key:"accountInitFundsFetched",value:function(e){return e}},{key:"accountPartiFundsFetched",value:function(e){return e}}]),e}(),m=a.a.createActions(d);t.a=m},1588:
/*!**********************************************!*\
  !*** ./components/Exchange/MyOpenOrders.tsx ***!
  \**********************************************/
/*! exports provided: OrderRow, TableHeader, MyOpenOrders */
/*! exports used: MyOpenOrders, OrderRow, TableHeader */function(e,t,n){"use strict";n.d(t,"b",function(){return O}),n.d(t,"c",function(){return k}),n.d(t,"a",function(){return j});var a=n(/*! react */0),r=n(/*! prop-types */3),o=n(/*! react-router */5),s=n(/*! react-intl */69),i=n(/*! common/utils */8),c=n(/*! react-translate-component */1),l=n.n(c),u=n(/*! ../Utility/PriceText */1545),p=n(/*! ../Utility/TransitionWrapper */1400),d=n(/*! ../Utility/AssetName */70),m=n(/*! ../Icon/Icon */50),f=n(/*! cybexjs */2),h=n(/*! common/MarketClasses */33),b=n(/*! ../Utility/EquivalentValueComponent */1530),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();function y(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function E(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var w={textAlign:"right"},k=function(e){function t(){return v(this,t),_(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return E(t,a["Component"]),g(t,[{key:"render",value:function(){var e=this.props,t=e.baseSymbol,n=e.quoteSymbol,r=e.dashboard,o=e.isMyAccount,s=e.settings,i=s?s.get("unit"):"1.3.0";return r?a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",null,a.createElement(l.a,{content:"account.cyb_market"})),a.createElement("th",{style:w},a.createElement(l.a,{content:"exchange.price"})),a.createElement("th",{style:w},a.createElement(l.a,{content:"account.qty"})),a.createElement("th",{style:w},a.createElement(l.a,{content:"exchange.total"})),a.createElement("th",{style:w},a.createElement(l.a,{content:"exchange.order_value"})," (",a.createElement(d.a,{name:i}),")"),a.createElement("th",null,a.createElement(l.a,{content:"account.trade"})),o?a.createElement("th",null,a.createElement(l.a,{content:"wallet.cancel"})):null)):a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",{className:"text-right"},a.createElement(l.a,{className:"header-sub-title",content:"exchange.price"})),a.createElement("th",{className:"text-right"},t?a.createElement("span",{className:"header-sub-title"},a.createElement(d.a,{dataPlace:"top",name:n})):null),a.createElement("th",{className:"text-right"},t?a.createElement("span",{className:"header-sub-title"},a.createElement(d.a,{dataPlace:"top",name:t})):null),a.createElement("th",{className:"text-right",style:{width:"28%"}},a.createElement(l.a,{className:"header-sub-title",content:"transaction.expiration"})),a.createElement("th",{style:{whiteSpace:"nowrap"}},a.createElement(l.a,{content:"wallet.cancel"}))))}}]),t}();k.defaultProps={quoteSymbol:null,baseSymbol:null};var O=function(e){function t(){return v(this,t),_(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return E(t,a["Component"]),g(t,[{key:"shouldComponentUpdate",value:function(e){return e.order.for_sale!==this.props.order.for_sale||e.order.id!==this.props.order.id||e.isMyAccount!==this.props.isMyAccount||e.quote!==this.props.quote||e.base!==this.props.base||e.order.market_base!==this.props.order.market_base}},{key:"render",value:function(){var e=this.props,t=e.base,n=e.quote,r=e.order,c=e.showSymbols,l=e.dashboard,p=e.isMyAccount,f=e.settings,h=r.isBid(),g=r.isCall(),y=(g?"orderHistoryCall":h?"orderHistoryBid":"orderHistoryAsk")+" text-right",v=c?a.createElement("span",null," "+t.get("symbol")+"/"+n.get("symbol")):null,_=c?" "+t.get("symbol"):null,E=c?" "+n.get("symbol"):null,k=f?f.get("unit"):"1.3.0";return l?a.createElement("tr",{key:r.id},a.createElement("td",{style:{textAlign:"center",paddingLeft:0,borderRight:"none"}},a.createElement(o.b,{to:"/asset/"+n.get("symbol")},a.createElement(d.a,{noTip:!0,name:n.get("symbol")})),"/",a.createElement(o.b,{to:"/asset/"+t.get("symbol")},a.createElement(d.a,{noTip:!0,name:t.get("symbol")}))),a.createElement("td",{className:y,style:w},a.createElement(u.a,{price:r.getPrice(),base:t,quote:n}),v),a.createElement("td",{style:w},i.a.format_number(r[h?"amountToReceive":"amountForSale"]().getAmount({real:!0}),n.get("precision"))," ",E),a.createElement("td",{style:w},i.a.format_number(r[h?"amountForSale":"amountToReceive"]().getAmount({real:!0}),t.get("precision"))," ",_),a.createElement("td",{className:"text-right"},a.createElement(b.b,{hide_asset:!0,amount:r.amountForSale().getAmount(),fromAsset:r.amountForSale().asset_id,noDecimals:!0,toAsset:k})),a.createElement("td",null,a.createElement(o.b,{to:"/market/"+n.get("symbol")+"_"+t.get("symbol")},a.createElement(m.a,{name:"trade",className:"icon-14px"}))),p?a.createElement("td",{className:"text-center",style:{padding:"2px 5px"}},g?null:a.createElement("a",{style:{marginRight:0},className:"order-cancel",onClick:this.props.onCancel},a.createElement(m.a,{name:"cross-circle",className:"icon-14px"}))):null):a.createElement("tr",{key:r.id},a.createElement("td",{className:y,style:{paddingLeft:10}},a.createElement(u.a,{price:r.getPrice(),base:t,quote:n}),v),a.createElement("td",{className:"text-right"},i.a.format_number(r[h?"amountToReceive":"amountForSale"]().getAmount({real:!0}),n.get("precision"))," ",E),a.createElement("td",{className:"text-right"},i.a.format_number(r[h?"amountForSale":"amountToReceive"]().getAmount({real:!0}),t.get("precision"))," ",_),a.createElement("td",{className:"text-right",style:{width:"28%"}},g?null:a.createElement(s.a,{value:r.expiration,format:"short"})),a.createElement("td",{className:"text-center",style:{padding:"2px 5px"}},g?null:a.createElement("a",{style:{marginRight:0},className:"order-cancel",onClick:this.props.onCancel},a.createElement(m.a,{name:"cross-circle",className:"icon-14px"}))))}}]),t}();O.defaultProps={showSymbols:!1};var j=function(e){function t(e){v(this,t);var n=_(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._getOrders=n._getOrders.bind(n),n}return E(t,a["Component"]),g(t,[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(){}},{key:"_getOrders",value:function(){var e,t=this,n=this.props,a=n.currentAccount,r=n.base,o=n.quote,s=a.get("orders"),i=a.get("call_orders"),c=r.get("id"),l=o.get("id"),u=(y(e={},r.get("id"),{precision:r.get("precision")}),y(e,o.get("id"),{precision:o.get("precision")}),e),p=s.toArray().map(function(e){var t=f.b.getObject(e);if(!t)return null;var n=t.getIn(["sell_price","base","asset_id"]),a=t.getIn(["sell_price","quote","asset_id"]);return n===c&&a===l||n===l&&a===c?new h.d(t.toJS(),u,o.get("id")):void 0}).filter(function(e){return!!e}),d=i.toArray().map(function(e){var n=f.b.getObject(e);if(!n)return null;var a=n.getIn(["call_price","base","asset_id"]),r=n.getIn(["call_price","quote","asset_id"]);return a===c&&r===l||a===l&&r===c?t.props.feedPrice?new h.b(n.toJS(),u,o.get("id"),t.props.feedPrice):null:void 0}).filter(function(e){return!!e}).filter(function(e){return e.isMarginCalled()});return p.concat(d)}},{key:"render",value:function(){var e=this,t=this.props,n=t.base,r=t.quote,o=t.quoteSymbol,s=t.baseSymbol;if(!n||!r)return null;var i=this._getOrders(),c=a.createElement("tr",null,a.createElement("td",{style:{textAlign:"center"},colSpan:5},a.createElement(l.a,{content:"account.no_orders"}))),u=i.filter(function(e){return e.isBid()}).sort(function(e,t){return t.getPrice()-e.getPrice()}).map(function(t){var o=t.getPrice();return a.createElement(O,{price:o,key:t.id,order:t,base:n,quote:r,onCancel:e.props.onCancel.bind(e,t.id)})}),d=i.filter(function(e){return!e.isBid()}).sort(function(e,t){return e.getPrice()-t.getPrice()}).map(function(t){var o=t.getPrice();return a.createElement(O,{price:o,key:t.id,order:t,base:n,quote:r,onCancel:e.props.onCancel.bind(e,t.id)})}),m=[];return d.length&&(m=m.concat(d)),u.length&&(m=m.concat(u)),m.sort(function(e,t){return e.props.price-t.props.price}),a.createElement(a.Fragment,null,a.createElement("div",{className:"exchange-content-header"},a.createElement(l.a,{content:"exchange.my_orders"})),a.createElement("table",{className:"table order-table table-hover"},a.createElement(k,{type:"sell",baseSymbol:s,quoteSymbol:o})),a.createElement("div",{className:"grid-block no-padding market-right-padding _scroll-bar",ref:"asks",style:{overflow:"auto",maxHeight:720}},a.createElement("table",{style:{paddingBottom:5},className:"table order-table table-hover"},a.createElement(p.a,{component:"tbody",transitionName:"newrow"},m.length?m:c))))}}]),t}();j.defaultProps={base:{},quote:{},orders:{},quoteSymbol:"",baseSymbol:""},j.propTypes={base:r.object.isRequired,quote:r.object.isRequired,orders:r.object.isRequired,quoteSymbol:r.string.isRequired,baseSymbol:r.string.isRequired}},1598:
/*!******************************************!*\
  !*** ./components/Modal/BorrowModal.jsx ***!
  \******************************************/
/*! exports provided: default */
/*! exports used: default */function(e,t,n){"use strict";var a=n(/*! react */0),r=n(/*! prop-types */3),o=n(/*! lodash */27),s=n(/*! react-foundation-apps/src/utils/foundation-api */35),i=n.n(s),c=n(/*! ./BaseModal */109),l=n(/*! react-foundation-apps/src/trigger */81),u=n(/*! react-translate-component */1),p=n.n(u),d=n(/*! ../Utility/ChainTypes */21),m=n(/*! ../Utility/BindToChainState */24),f=n(/*! ../Utility/FormattedAsset */19),h=n(/*! common/utils */8),b=n(/*! classnames */40),g=n.n(b),y=n(/*! ../Utility/AmountSelector */1394),v=n(/*! ../Utility/BalanceComponent */1391),_=n(/*! api/WalletApi */144),E=n(/*! stores/WalletDb */15),w=n(/*! ../Utility/FormattedPrice */76),k=n(/*! counterpart */14),O=n.n(k),j=n(/*! ../Utility/HelpContent */297),C=n(/*! immutable */7),A=n.n(C),N=n(/*! cybexjs */2),S=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();function x(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function P(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function T(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var q=function(e){function t(e){x(this,t);var n=P(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.state=n._initialState(e),n}return T(t,a["Component"]),S(t,[{key:"_initialState",value:function(e){var t=e?this._getCurrentPosition(e):{};if(t.collateral){var n=h.a.get_asset_amount(t.debt,e.quote_asset),a=h.a.get_asset_amount(t.collateral,e.backing_asset);return{short_amount:n?n.toString():null,collateral:a?a.toString():null,collateral_ratio:this._getCollateralRatio(n,a),errors:this._getInitialErrors(),isValid:!1,original_position:{debt:n,collateral:a}}}return{short_amount:0,collateral:0,collateral_ratio:this._getInitialCollateralRatio(e),errors:this._getInitialErrors(),isValid:!1,original_position:{debt:0,collateral:0}}}},{key:"componentDidMount",value:function(){var e=this._initialState(this.props);this.setState(e),this._setUpdatedPosition(e)}},{key:"shouldComponentUpdate",value:function(e,t){return!(h.a.are_equal_shallow(t,this.state)&&A.a.is(e.quote_asset,this.props.quote_asset)&&!e.backing_asset.get("symbol")!==this.props.backing_asset.get("symbol")&&A.a.is(e.account,this.props.account)&&A.a.is(e.call_orders,this.props.call_orders))}},{key:"componentWillReceiveProps",value:function(e){e.account===this.props.account&&e.hasCallOrders===this.props.hasCallOrders&&e.quote_asset.get("id")===this.props.quote_asset.get("id")||this.setState(this._initialState(e))}},{key:"_getInitialErrors",value:function(){return{collateral_balance:null,ratio_too_high:null}}},{key:"confirmClicked",value:function(e){e.preventDefault(),i.a.publish(this.props.modalId,"close")}},{key:"_onBorrowChange",value:function(e){var t=this._getFeedPrice(),n=e.amount.replace(/,/g,""),a={short_amount:n,collateral:(this.state.collateral_ratio*(n/t)).toFixed(this.props.backing_asset.get("precision")),collateral_ratio:this.state.collateral_ratio};this.setState(a),this._validateFields(a),this._setUpdatedPosition(a)}},{key:"_onCollateralChange",value:function(e){var t=e.amount.replace(/,/g,""),n=this._getFeedPrice(),a=t/(this.state.short_amount/n),r=this._isPredictionMarket(this.props)?{short_amount:t,collateral:t,collateral_ratio:1}:{short_amount:this.state.short_amount,collateral:t,collateral_ratio:Object(o.isFinite)(a)?a:this._getInitialCollateralRatio(this.props)};this.setState(r),this._validateFields(r),this._setUpdatedPosition(r)}},{key:"_onRatioChange",value:function(e){var t=this._getFeedPrice(),n=e.target.value,a={short_amount:this.state.short_amount,collateral:(this.state.short_amount/t*n).toFixed(this.props.backing_asset.get("precision")),collateral_ratio:n};this.setState(a),this._validateFields(a),this._setUpdatedPosition(a)}},{key:"_setUpdatedPosition",value:function(e){this.setState({newPosition:parseFloat(e.short_amount)/parseFloat(e.collateral)})}},{key:"_validateFields",value:function(e){var t=this._getInitialErrors(),n=this.state.original_position,a=this.props.backing_balance?this.props.backing_balance.toJS():{balance:0};parseFloat(e.collateral)-n.collateral>h.a.get_asset_amount(a.balance,this.props.backing_asset.toJS())&&(t.collateral_balance=O.a.translate("borrow.errors.collateral"));var r=e.short_amount>=0&&e.collateral>=0&&(e.short_amount!=n.debt||e.collateral!=n.collateral),o=this.props.quote_asset.getIn(["bitasset","current_feed","maintenance_collateral_ratio"])/1e3;parseFloat(e.collateral_ratio)<(this._isPredictionMarket(this.props)?1:o)?(t.below_maintenance=O.a.translate("borrow.errors.below",{mr:o}),r=!1):parseFloat(e.collateral_ratio)<(this._isPredictionMarket(this.props)?1:o+.5)&&(t.close_maintenance=O.a.translate("borrow.errors.close",{mr:o}),r=!0),this.setState({errors:t,isValid:r})}},{key:"_onSubmit",value:function(e){e.preventDefault();var t=h.a.get_asset_precision(this.props.quote_asset.get("precision")),n=h.a.get_asset_precision(this.props.backing_asset.get("precision")),a=this._getCurrentPosition(this.props),r=_.a.new_transaction();r.add_type_operation("call_order_update",{fee:{amount:0,asset_id:0},funding_account:this.props.account.get("id"),delta_collateral:{amount:parseInt(this.state.collateral*n-a.collateral,10),asset_id:this.props.backing_asset.get("id")},delta_debt:{amount:parseInt(this.state.short_amount*t-a.debt,10),asset_id:this.props.quote_asset.get("id")}}),E.a.process_transaction(r,null,!0).catch(function(e){}),i.a.publish(this.props.modalId,"close")}},{key:"_getCurrentPosition",value:function(e){var t={collateral:null,debt:null};if(e&&e.hasCallOrders&&e.call_orders)for(var n in e.call_orders)e.call_orders.hasOwnProperty(n)&&e.call_orders[n]&&e.quote_asset.get("id")===e.call_orders[n].getIn(["call_price","quote","asset_id"])&&(t=e.call_orders[n].toJS());return t}},{key:"_getFeedPrice",value:function(){return this.props?this._isPredictionMarket(this.props)?1:1/h.a.get_asset_price(this.props.quote_asset.getIn(["bitasset","current_feed","settlement_price","quote","amount"]),this.props.backing_asset,this.props.quote_asset.getIn(["bitasset","current_feed","settlement_price","base","amount"]),this.props.quote_asset):1}},{key:"_getInitialCollateralRatio",value:function(e){return this._isPredictionMarket(e)?1:0}},{key:"_getCollateralRatio",value:function(e,t){return t/(e/this._getFeedPrice())}},{key:"_isPredictionMarket",value:function(e){return e.quote_asset.getIn(["bitasset","is_prediction_market"])}},{key:"render",value:function(){var e=this,t=this.props,n=t.quote_asset,r=t.bitasset_balance,o=t.backing_asset,s=t.backing_balance,i=this.state,c=i.short_amount,u=i.collateral,d=i.collateral_ratio,m=i.errors,b=i.isValid,_=h.a.get_asset_precision(this.props.quote_asset.get("precision")),E=h.a.get_asset_precision(this.props.backing_asset.get("precision"));d&&!isNaN(d)&&d>0&&d<1e3||(d=0),r=r?r.toJS():{balance:0,id:null},s=s?s.toJS():{balance:0,id:null};var k=g()("form-group",{"has-error":m.collateral_balance}),O=g()("form-group",{"has-error":m.below_maintenance},{"has-warning":m.close_maintenance}),C=g()("button",{disabled:m.collateral_balance||!b},{success:b}),A=this._getCurrentPosition(this.props),S=s.id?N.b.getObject(s.id):null,x=(S?S.get("balance"):0)-parseInt(this.state.collateral*E-A.collateral,10),P=a.createElement("span",null,a.createElement(p.a,{component:"span",content:"transfer.available"}),":"," ",r.id?a.createElement(v.a,{balance:r.id}):a.createElement(f.a,{amount:0,asset:n.get("id")})),T=a.createElement("span",null,a.createElement(p.a,{component:"span",content:"transfer.available"}),":"," ",s.id?a.createElement(f.a,{amount:x,asset:o.get("id")}):a.createElement(f.a,{amount:0,asset:o.get("id")})),q=this._getFeedPrice(),R=this.props.quote_asset.getIn(["bitasset","current_feed","maintenance_collateral_ratio"])/1e3,F=(this.props.quote_asset.getIn(["bitasset","current_feed","maximum_short_squeeze_ratio"]),this._isPredictionMarket(this.props));return!F&&isNaN(q)?a.createElement("div",null,a.createElement("form",{className:"grid-container text-center no-overflow",noValidate:!0},a.createElement(p.a,{component:"h3",content:"borrow.no_valid",asset_symbol:n.get("symbol")})),a.createElement("div",{className:"grid-content button-group text-center no-overflow"},a.createElement(l.a,{close:this.props.modalId},a.createElement("div",{className:" button warning"},a.createElement(p.a,{content:"account.perm.cancel"}))))):a.createElement("div",null,a.createElement("form",{className:"grid-container small-10 small-offset-1 no-overflow",noValidate:!0},a.createElement(p.a,{component:"h3",content:"borrow.title",asset_symbol:n.get("symbol")}),a.createElement("div",{style:{textAlign:"left"}},this.props.hide_help?null:a.createElement(j.a,{path:"components/"+(F?"BorrowModalPrediction":"BorrowModal"),debt:n.get("symbol"),collateral:o.get("symbol"),borrower:this.props.account.get("name"),mr:R}),F?null:a.createElement("div",{style:{paddingBottom:"1rem"}},a.createElement("div",{className:"borrow-price-feeds"},a.createElement("span",{className:"borrow-price-label"},a.createElement(p.a,{content:"transaction.feed_price"}),": "),a.createElement(w.a,{noPopOver:!0,quote_amount:n.getIn(["bitasset","current_feed","settlement_price","base","amount"]),quote_asset:n.getIn(["bitasset","current_feed","settlement_price","base","asset_id"]),base_asset:n.getIn(["bitasset","current_feed","settlement_price","quote","asset_id"]),base_amount:n.getIn(["bitasset","current_feed","settlement_price","quote","amount"])})),a.createElement("b",null),a.createElement("div",{className:"borrow-price-final "+(m.below_maintenance?"has-error":m.close_maintenance?"has-warning":"")},a.createElement("span",{className:"borrow-price-label"},a.createElement(p.a,{content:"exchange.your_price"}),": "),this.state.newPosition?a.createElement(w.a,{noPopOver:!0,quote_amount:R*this.state.short_amount*_,quote_asset:n.get("id"),base_asset:o.get("id"),base_amount:this.state.collateral*E}):null)),a.createElement("div",{className:"form-group"},a.createElement(y.a,{label:"transaction.borrow_amount",amount:c.toString(),onChange:this._onBorrowChange.bind(this),asset:n.get("id"),assets:[n.get("id")],display_balance:P,placeholder:"0.0",tabIndex:1})),a.createElement("div",{className:k},a.createElement(y.a,{label:"transaction.collateral",amount:u.toString(),onChange:this._onCollateralChange.bind(this),asset:o.get("id"),assets:[o.get("id")],display_balance:T,placeholder:"0.0",tabIndex:1}),m.collateral_balance?a.createElement("div",{style:{paddingTop:"0.5rem"}},m.collateral_balance):null),F?null:a.createElement("div",{className:O},a.createElement(p.a,{component:"label",content:"borrow.coll_ratio"}),a.createElement("input",{min:"0",max:"6",step:"0.05",onChange:this._onRatioChange.bind(this),value:d,type:"range",disabled:!c}),a.createElement("div",{className:"inline-block"},h.a.format_number(d,2)),m.below_maintenance||m.close_maintenance?a.createElement("div",{style:{maxWidth:"calc(100% - 50px)"},className:"float-right"},m.below_maintenance,m.close_maintenance):null),a.createElement("div",{className:"no-padding grid-content button-group no-overflow"},a.createElement("div",{onClick:this._onSubmit.bind(this),href:!0,className:C},a.createElement(p.a,{content:"borrow.adjust"})),a.createElement("div",{onClick:function(t){t.preventDefault(),e.setState(e._initialState(e.props))},href:!0,className:"button info"},a.createElement(p.a,{content:"wallet.reset"}))))))}}]),t}();q.propTypes={quote_asset:d.a.ChainAsset.isRequired,bitasset_balance:d.a.ChainObject,backing_asset:d.a.ChainAsset.isRequired,backing_balance:d.a.ChainObject,call_orders:d.a.ChainObjectsList,hasCallOrders:r.bool},q=Object(m.a)(q,{keep_updating:!0});var R=function(e){function t(){x(this,t);var e=P(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={smallScreen:!1},e}return T(t,a["Component"]),S(t,[{key:"show",value:function(){var e="borrow_modal_"+this.props.quote_asset;i.a.publish(e,"open")}},{key:"componentWillMount",value:function(){this.setState({smallScreen:window.innerHeight<=800})}},{key:"render",value:function(){var e=this.props,t=e.quote_asset,n=e.backing_asset,r=e.account,o="borrow_modal_"+t,s=r.get("balances").toJS(),i=void 0,l=void 0;if(s)for(var u in s)u===n&&(i=s[u]),u===t&&(l=s[u]);return a.createElement(c.a,{id:o,overlay:!0,ref:o},a.createElement("div",{className:"grid-block vertical"},a.createElement(q,{quote_asset:t,call_orders:r.get("call_orders"),hasCallOrders:r.get("call_orders")&&r.get("call_orders").size>0,modalId:o,bitasset_balance:l,backing_balance:i,backing_asset:n,hide_help:this.state.smallScreen,account:r})))}}]),t}();t.a=R},1613:
/*!**********************************!*\
  !*** ./stores/CrowdFundStore.ts ***!
  \**********************************/
/*! exports provided: default */
/*! exports used: default */function(e,t,n){"use strict";var a=n(/*! ./BaseStore */42),r=n(/*! immutable */7),o=n(/*! alt-instance */11),s=n(/*! actions/CrowdFundActions */1583),i=n(/*! utils//Utils */135),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var l=Object(i.a)("CrowdFundStore"),u=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={allFunds:Object(r.List)(),initCrowds:[],partiCrowds:[]},e.bindListeners({onAllFundsFetched:s.a.allFundsFetched,onAccountPartiFundsFetched:s.a.accountPartiFundsFetched,onAccountInitFundsFetched:s.a.accountInitFundsFetched}),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["a"]),c(t,[{key:"onAllFundsFetched",value:function(e){var t=e.res,n=e.start,a=(e.size,this.state.allFunds.take(n));a=a.concat(t),this.setState({allFunds:a}),l("onAllFundsFetched: ",this)}},{key:"onAccountInitFundsFetched",value:function(e){this.setState({initCrowds:e}),l("onAccountInitFundsFetched: ",this)}},{key:"onAccountPartiFundsFetched",value:function(e){this.setState({partiCrowds:e}),l("onAccountPartiFundsFetched: ",this)}}]),t}();t.a=o.a.createStore(u,"CrowdFundStore")},1999:
/*!*************************************************************!*\
  !*** ./components/Account/AccountOverview.tsx + 15 modules ***!
  \*************************************************************/
/*! exports provided: default */
/*! all exports used */
/*! ModuleConcatenation bailout: Cannot concat with ./actions/CrowdFundActions.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./actions/GatewayActions.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./actions/NotificationActions.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./components/Account/AccountOrders.tsx (<- Module is referenced from these modules with unsupported syntax: ./Routes.jsx (referenced with import())) */
/*! ModuleConcatenation bailout: Cannot concat with ./components/Modal/BaseModal.tsx */
/*! ModuleConcatenation bailout: Cannot concat with ./components/Utility/EquivalentPrice.tsx */
/*! ModuleConcatenation bailout: Cannot concat with ./components/Utility/TotalBalanceValue.tsx */
/*! ModuleConcatenation bailout: Cannot concat with ./lib/common/MarketClasses.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./lib/common/utils.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./lib/qtb/index.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./services/GatewayConfig.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./stores/CrowdFundStore.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./utils/ClassName.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./utils/index.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./actions/BalanceClaimActiveActions.js */
/*! ModuleConcatenation bailout: Cannot concat with ./actions/SettingsActions.js */
/*! ModuleConcatenation bailout: Cannot concat with ./actions/WalletActions.js */
/*! ModuleConcatenation bailout: Cannot concat with ./api/WalletApi.js */
/*! ModuleConcatenation bailout: Cannot concat with ./components/Account/RecentTransactions.jsx */
/*! ModuleConcatenation bailout: Cannot concat with ./components/Blockchain/ProposedOperation.jsx */
/*! ModuleConcatenation bailout: Cannot concat with ./components/Forms/AccountSelect.jsx */
/*! ModuleConcatenation bailout: Cannot concat with ./components/Forms/MyAccounts.jsx */
/*! ModuleConcatenation bailout: Cannot concat with ./components/Icon/Icon.jsx */
/*! ModuleConcatenation bailout: Cannot concat with ./components/Modal/BorrowModal.jsx */
/*! ModuleConcatenation bailout: Cannot concat with ./components/Utility/AmountSelector.jsx */
/*! ModuleConcatenation bailout: Cannot concat with ./components/Utility/AssetName.jsx */
/*! ModuleConcatenation bailout: Cannot concat with ./components/Utility/BalanceComponent.jsx */
/*! ModuleConcatenation bailout: Cannot concat with ./components/Utility/BindToChainState.jsx */
/*! ModuleConcatenation bailout: Cannot concat with ./components/Utility/ChainTypes.js */
/*! ModuleConcatenation bailout: Cannot concat with ./components/Utility/EquivalentValueComponent.jsx */
/*! ModuleConcatenation bailout: Cannot concat with ./components/Utility/FormattedAsset.jsx */
/*! ModuleConcatenation bailout: Cannot concat with ./components/Utility/FormattedPrice.jsx */
/*! ModuleConcatenation bailout: Cannot concat with ./components/Utility/LinkToAccountById.jsx */
/*! ModuleConcatenation bailout: Cannot concat with ./components/Utility/LinkToAssetById.jsx */
/*! ModuleConcatenation bailout: Cannot concat with ./components/Utility/Tabs.jsx */
/*! ModuleConcatenation bailout: Cannot concat with ./components/Utility/TranslateWithLinks.jsx */
/*! ModuleConcatenation bailout: Cannot concat with ./cybex/cybexjs/index.js */
/*! ModuleConcatenation bailout: Cannot concat with ./lib/alt-react/lib/index.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ./lib/common/asset_utils.js */
/*! ModuleConcatenation bailout: Cannot concat with ./lib/counterpart/index.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ./lib/react-foundation-apps/src/utils/foundation-api.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ./stores/AccountRefsStore.js */
/*! ModuleConcatenation bailout: Cannot concat with ./stores/AccountStore.js */
/*! ModuleConcatenation bailout: Cannot concat with ./stores/BalanceClaimActiveStore.js */
/*! ModuleConcatenation bailout: Cannot concat with ./stores/MarketsStore.js */
/*! ModuleConcatenation bailout: Cannot concat with ./stores/NotificationStore.js */
/*! ModuleConcatenation bailout: Cannot concat with ./stores/PrivateKeyStore.js */
/*! ModuleConcatenation bailout: Cannot concat with ./stores/WalletDb.js (<- Module uses injected variables (Buffer)) */
/*! ModuleConcatenation bailout: Cannot concat with ../node_modules/classnames/index.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ../node_modules/immutable/dist/immutable.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ../node_modules/lodash/index.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ../node_modules/moment/moment.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ../node_modules/prop-types/index.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ../node_modules/react-intl/lib/index.es.js */
/*! ModuleConcatenation bailout: Cannot concat with ../node_modules/react-router/es/index.js */
/*! ModuleConcatenation bailout: Cannot concat with ../node_modules/react-tooltip/dist/index.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ../node_modules/react-translate-component/index.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ../node_modules/react/index.js (<- Module is not an ECMAScript module) */function(e,t,n){"use strict";n.r(t);var a=n(0),r=n(7),o=n.n(r),s=n(1),i=n.n(s),c=n(1391),l=n(306),u=n(3),p=n(35),d=n.n(p),m=n(109),f=n(21),h=n(24),b=n(8),g=n(144),y=n(15),v=n(14),_=n.n(v),E=n(2),w=n(1394),k=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();function O(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function j(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function C(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var A=function(e){function t(){O(this,t);var e=j(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={amount:0},e}return C(t,a["Component"]),k(t,[{key:"onAmountChanged",value:function(e){var t=e.amount;e.asset;this.setState({amount:t})}},{key:"onSubmit",value:function(e){e.preventDefault(),d.a.publish("settlement_modal","close");var t=b.a.get_asset_precision(this.props.asset.get("precision")),n=this.state.amount.replace(/,/g,"");n*=t;var a=g.a.new_transaction();return a.add_type_operation("asset_settle",{fee:{amount:0,asset_id:0},account:this.props.account.get("id"),amount:{amount:n,asset_id:this.props.asset.get("id")}}),y.a.process_transaction(a,null,!0).then(function(e){return!0}).catch(function(e){return console.error("asset settle error: ",e),!1})}},{key:"render",value:function(){var e=this.props,t=e.asset,n=e.account,r=this.state.amount;if(!t)return null;var o=t.get("id"),s=n.get("balances"),l=null,u=0;s&&s.forEach(function(e){var t=E.b.getObject(e);if(!t.get("balance"))return null;t.get("asset_type")===o&&(l=e,u=t.get("balance"))});var p=b.a.get_asset_precision(t.get("precision")),d=r?r.replace(/,/g,""):0,m=parseFloat(d)>0&&parseFloat(d)*p<=parseFloat(u)?"button success":"button disabled",f=l?a.createElement("span",null,a.createElement(i.a,{content:"exchange.balance"}),": ",a.createElement(c.a,{balance:l})):null;return a.createElement("form",{className:"grid-block vertical full-width-content"},a.createElement(i.a,{component:"h3",content:"modal.settle.title",asset:t.get("symbol")}),a.createElement("div",{className:"grid-container ",style:{paddingTop:"2rem"}},a.createElement("div",{className:"content-block",style:{maxWidth:"25rem"}},a.createElement(w.a,{label:"modal.settle.amount",amount:r,onChange:this.onAmountChanged.bind(this),display_balance:f,asset:o,assets:[o],tabIndex:1})),a.createElement("div",{className:"content-block"},a.createElement("input",{type:"submit",className:m,onClick:this.onSubmit.bind(this),value:_.a.translate("modal.settle.submit")}))))}}]),t}();A.propTypes={asset:f.a.ChainAsset.isRequired,account:f.a.ChainAccount.isRequired},A=Object(h.a)(A,{keep_updating:!0});var N=function(e){function t(){return O(this,t),j(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return C(t,a["Component"]),k(t,[{key:"show",value:function(){d.a.publish("settlement_modal","open")}},{key:"render",value:function(){return a.createElement(m.a,{id:"settlement_modal",overlay:!0,ref:"settlement_modal"},a.createElement("div",{className:"grid-block vertical"},a.createElement(A,this.props)))}}]),t}(),S=n(1530),x=n(69),P=n(25),T=n(88),q=n(60),R=n.n(q),F=n(301),I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},D=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();function M(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function L(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function H(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var B=function(e){function t(e){return M(this,t),L(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return H(t,F["a"]),D(t,[{key:"componentDidMount",value:function(){R.a.rebuild()}},{key:"shouldComponentUpdate",value:function(e){return function e(t,n,a){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,a)}if("value"in r)return r.value;var s=r.get;return void 0!==s?s.call(a):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"shouldComponentUpdate",this).call(this,e)||e.fromAsset!==this.props.fromAsset}},{key:"getValue",value:function(){var e=this.props,t=e.fromAsset,n=e.marketStats,a=e.toAsset,r=void 0,o=t.get("symbol");if(a&&n){var s=a.get("symbol");r=n.get(o+"_"+s)}return r&&r.change?r.change:0}},{key:"render",value:function(){var e=this.getValue(),t=0===parseFloat(e)?"":parseFloat(e)<0?"change-down":"change-up",n=a.createElement(x.b,{style:"decimal",value:e,minimumFractionDigits:2,maximumFractionDigits:2});return a.createElement("span",{className:"value "+t},n,"%")}}]),t}();B.propTypes={toAsset:f.a.ChainAsset.isRequired,fromAsset:f.a.ChainAsset.isRequired,coreAsset:f.a.ChainAsset.isRequired},B.defaultProps={toAsset:"1.3.0",fullPrecision:!1,noDecimals:!1,hide_asset:!1,coreAsset:"1.3.0"},B=Object(h.a)(B,{keep_updating:!0});var W=function(e){function t(){return M(this,t),L(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return H(t,a["Component"]),D(t,[{key:"render",value:function(){var e=this.props,t=e.refCallback,n=function(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}(e,["refCallback"]);return a.createElement(B,I({},n,{ref:t}))}}]),t}();W=Object(P.connect)(W,{listenTo:function(){return[T.a]},getProps:function(){return{marketStats:T.a.getState().allMarketStats}}});var z=n(70),U=n(19),V=n(76),G=n(1598),Y=n(50),$=n(5),K=n(20),J=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Q=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();function X(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Z(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ee(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function te(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var ne={textAlign:"right"},ae={textAlign:"left"},re=function(e){function t(){return Z(this,t),ee(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return te(t,a["Component"]),Q(t,[{key:"_onUpdatePosition",value:function(e){e.preventDefault();var t="cp_modal_"+this.props.object.getIn(["call_price","quote","asset_id"]);this.refs[t].show()}},{key:"_onClosePosition",value:function(e){e.preventDefault();var t=g.a.new_transaction();t.add_type_operation("call_order_update",{fee:{amount:0,asset_id:0},funding_account:this.props.object.get("borrower"),delta_collateral:{amount:-this.props.object.get("collateral"),asset_id:this.props.object.getIn(["call_price","base","asset_id"])},delta_debt:{amount:-this.props.object.get("debt"),asset_id:this.props.object.getIn(["call_price","quote","asset_id"])}}),y.a.process_transaction(t,null,!0)}},{key:"_getFeedPrice",value:function(){return this.props?1/b.a.get_asset_price(this.props.debtAsset.getIn(["bitasset","current_feed","settlement_price","quote","amount"]),this.props.collateralAsset,this.props.debtAsset.getIn(["bitasset","current_feed","settlement_price","base","amount"]),this.props.debtAsset):1}},{key:"_getCollateralRatio",value:function(){var e=this.props.object.toJS();return b.a.get_asset_amount(e.collateral,this.props.collateralAsset)/(b.a.get_asset_amount(e.debt,this.props.debtAsset)/this._getFeedPrice())}},{key:"_getMR",value:function(){return this.props.debtAsset.getIn(["bitasset","current_feed","maintenance_collateral_ratio"])/1e3}},{key:"_getStatusClass",value:function(){var e=this._getCollateralRatio(),t=this._getMR();return isNaN(e)?null:e<t?"danger":e<t+.5?"warning":""}},{key:"_getCRTip",value:function(){var e=this._getStatusClass(),t=this._getMR();return e&&""!==e?"danger"===e?_.a.translate("tooltip.cr_danger",{mr:t}):"warning"===e?_.a.translate("tooltip.cr_warning",{mr:t}):null:null}},{key:"_onNavigate",value:function(e,t){t.preventDefault(),this.context.router.push(e)}},{key:"render",value:function(){var e=this.props,t=e.debtAsset,n=e.collateralAsset,o=e.object.toJS(),s=this._getCollateralRatio(),c=b.a.get_asset_amount(o.debt,this.props.debtAsset),u=this._getStatusClass(),p="/asset/"+t.get("symbol"),d="/market/"+t.get("symbol")+"_"+n.get("symbol"),m=a.createElement("ul",null,a.createElement("li",null,a.createElement("a",{href:p,onClick:this._onNavigate.bind(this,p)},a.createElement(i.a,{content:"account.asset_details"}))),a.createElement("li",null,a.createElement("a",{href:d,onClick:this._onNavigate.bind(this,d)},a.createElement(z.a,{name:t.get("symbol")})," :"," ",a.createElement(z.a,{name:n.get("symbol")}))));return a.createElement("tr",{className:"margin-row"},a.createElement("td",{style:ae},a.createElement($.b,{to:"/asset/"+t.get("symbol")},a.createElement(z.a,{noTip:!0,name:t.get("symbol")}))),a.createElement("td",{style:ne},a.createElement(U.a,{amount:o.debt,asset:o.call_price.quote.asset_id,assetInfo:m,hide_asset:!0})),a.createElement("td",{style:ne,className:"column-hide-medium"},a.createElement(U.a,{decimalOffset:5,amount:o.collateral,asset:o.call_price.base.asset_id})),a.createElement("td",{"data-place":"bottom","data-tip":this._getCRTip(),className:"center-content "+u},b.a.format_number(s,2)),a.createElement("td",{style:ne},a.createElement(l.a,{noTip:!0,balances:Object(r.List)(),debt:X({},t.get("id"),o.debt),collateral:X({},n.get("id"),parseInt(o.collateral,10)),hide_asset:!0})),a.createElement("td",{style:ne,className:"column-hide-small"},a.createElement(V.a,{base_amount:o.call_price.base.amount,base_asset:o.call_price.base.asset_id,quote_amount:o.call_price.quote.amount,quote_asset:o.call_price.quote.asset_id,hide_symbols:!0})),a.createElement("td",{style:ne,className:"column-hide-small"},a.createElement(F.b,{forceDirection:!1,fromAsset:o.call_price.base.asset_id,toAsset:o.call_price.quote.asset_id,hide_symbols:!0})),a.createElement("td",{className:"center-content column-hide-small",style:ae},a.createElement(V.a,{base_amount:o.call_price.base.amount,base_asset:o.call_price.base.asset_id,quote_amount:o.call_price.quote.amount,quote_asset:o.call_price.quote.asset_id,hide_value:!0})),a.createElement("td",null,a.createElement("div",{"data-place":"left","data-tip":_.a.translate("tooltip.update_position"),style:{paddingBottom:5}},a.createElement("a",{onClick:this._onUpdatePosition.bind(this)},a.createElement(Y.a,{name:"adjust",className:"icon-14px rotate90"})))),a.createElement("td",null,a.createElement("div",{"data-place":"left","data-tip":_.a.translate("tooltip.close_position",{amount:c,asset:t.get("symbol")}),style:{paddingBottom:5}},a.createElement("a",{onClick:this._onClosePosition.bind(this)},a.createElement(Y.a,{name:"cross-circle",className:"icon-14px"}))),t?a.createElement(G.a,{ref:"cp_modal_"+o.call_price.quote.asset_id,quote_asset:o.call_price.quote.asset_id,backing_asset:t.getIn(["bitasset","options","short_backing_asset"]),account:this.props.account}):null))}}]),t}();re.propTypes={debtAsset:f.a.ChainAsset.isRequired,collateralAsset:f.a.ChainAsset.isRequired},re.defaultProps={tempComponent:"tr"},re.contextTypes={router:u.object},re=Object(h.a)(re,{keep_updating:!0});var oe=function(e){function t(){return Z(this,t),ee(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return te(t,a["Component"]),Q(t,[{key:"render",value:function(){var e=this.props.object,t=e.getIn(["call_price","quote","asset_id"]),n=e.getIn(["call_price","base","asset_id"]);return a.createElement(re,J({debtAsset:t,collateralAsset:n},this.props))}}]),t}();oe.propTypes={object:f.a.ChainObject.isRequired},oe=Object(h.a)(oe,{keep_updating:!0});var se=function(e){function t(){return Z(this,t),ee(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return te(t,a["Component"]),Q(t,[{key:"_onUpdatePosition",value:function(e){e.preventDefault();var t="cp_modal_"+this.props.debtAsset.get("id");this.refs[t].show()}},{key:"_getFeedPrice",value:function(){return this.props?1/b.a.get_asset_price(this.props.debtAsset.getIn(["bitasset","current_feed","settlement_price","quote","amount"]),this.props.collateralAsset,this.props.debtAsset.getIn(["bitasset","current_feed","settlement_price","base","amount"]),this.props.debtAsset):1}},{key:"_onNavigate",value:function(e,t){t.preventDefault(),this.context.router.push(e)}},{key:"render",value:function(){var e=this.props,t=e.debtAsset,n=e.collateralAsset,r="/asset/"+t.get("symbol"),o="/market/"+t.get("symbol")+"_"+n.get("symbol"),s=a.createElement("ul",null,a.createElement("li",null,a.createElement("a",{href:r,onClick:this._onNavigate.bind(this,r)},a.createElement(i.a,{content:"account.asset_details"}))),a.createElement("li",null,a.createElement("a",{href:o,onClick:this._onNavigate.bind(this,o)},a.createElement(z.a,{name:t.get("symbol")})," :"," ",a.createElement(z.a,{name:n.get("symbol")}))));return a.createElement("tr",{className:"margin-row"},a.createElement("td",{style:ae},a.createElement($.b,{to:"/asset/"+t.get("symbol")},a.createElement(z.a,{noTip:!0,name:t.get("symbol")}))),a.createElement("td",{style:ne},a.createElement(U.a,{amount:0,asset:t.get("id"),assetInfo:s,hide_asset:!0})),a.createElement("td",{style:ne,className:"column-hide-medium"},a.createElement(U.a,{decimalOffset:5,amount:0,asset:n.get("id")})),a.createElement("td",null),a.createElement("td",{style:ne}),a.createElement("td",{style:ne,className:"column-hide-small"}),a.createElement("td",{style:ne,className:"column-hide-small"}),a.createElement("td",{className:"center-content column-hide-small",style:ae}),a.createElement("td",null,a.createElement("div",{"data-place":"left","data-tip":_.a.translate("tooltip.update_position"),style:{paddingBottom:5}},a.createElement("a",{onClick:this._onUpdatePosition.bind(this)},a.createElement(Y.a,{name:"adjust",className:"icon-14px rotate90"})))),a.createElement("td",null,t?a.createElement(G.a,{ref:"cp_modal_"+t.get("id"),quote_asset:t.get("id"),backing_asset:t.getIn(["bitasset","options","short_backing_asset"]),account:this.props.account}):null))}}]),t}();se.propTypes={debtAsset:f.a.ChainAsset.isRequired,collateralAsset:f.a.ChainAsset.isRequired},se.defaultProps={tempComponent:"tr"},se.contextTypes={router:u.object},se=Object(h.a)(se);var ie=function(e){function t(){return Z(this,t),ee(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return te(t,a["Component"]),Q(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.objects,r=t.optionals;if(n=n.filter(function(e){return!!e}),!(r=r.filter(function(e){return!!e})).length)return null;if(n.forEach(function(e){if(e){var t=r.findIndex(function(t){return t&&t.get("id")===e.getIn(["call_price","quote","asset_id"])});-1!==t&&r.splice(t,1)}}),!r.length)return null;var o=r.map(function(t){return a.createElement(se,J({key:t.get("id"),debtAsset:t.get("id"),collateralAsset:t.getIn(["bitasset","options","short_backing_asset"])},e.props))});return a.createElement("tbody",null,o)}}]),t}();ie.propTypes={objects:f.a.ChainObjectsList,optionals:f.a.ChainAssetsList},ie.defaultProps={optionals:o.a.List(["1.3.103","1.3.113","1.3.120","1.3.121","1.3.958","1.3.1325","1.3.1362"])},ie=Object(h.a)(ie,{keep_updating:!0});var ce=n(1535),le=n(229),ue=n(300),pe=n(28),de=n(133),me={AccountPermission:function(e,t,n){var a=this;this.id=e.get("id"),this.weight=t,this.threshold=e.getIn([n,"weight_threshold"]),this.accounts=[],this.keys=e.getIn([n,"key_auths"]).map(function(e){return new function(e){var t=this;this.id=e.toJS?e.get(0):e[0],this.weight=e.toJS?e.get(1):e[1],this.isAvailable=function(e){return e.includes?e.includes(t.id):-1!==e.indexOf(t)}}(e)}).toArray(),this.isAvailable=function(e){return e.includes?e.includes(a.id):-1!==e.indexOf(a)},this._sumWeights=function(e){if(a.isNested()||a.isMultiSig()){var t=a.accounts.reduce(function(t,n){return t+(n._sumWeights(e)?n.weight:0)},0);return Math.floor(t/a.threshold)}return a.isAvailable(e)?a.weight:0},this.getStatus=function(e,t){if(a.isNested()){var n=a.accounts.reduce(function(t,n){return t+n._sumWeights(e)},0);return a.keys.length&&(n+=a.sumKeys(t)),n}var r=a._sumWeights(e);return a.isMultiSig()&&(r+=a.sumKeys(t)),r},this.sumKeys=function(e){return a.keys.reduce(function(t,n){return t+(n.isAvailable(e)?n.weight:0)},0)},this.isNested=function(){return a.accounts.length>0},this.isMultiSig=function(){return a.keys.reduce(function(e,t){return e||t.weight<a.threshold},!1)},this.getMissingSigs=function(e){var t=[],n=[];return a.isNested()?n=a.accounts.reduce(function(t,n){return t.concat(n.getMissingSigs(e))},[]):a.isAvailable(e)||t.push(a.id),t.concat(n)},this.getMissingKeys=function(e){var t=[],n=[];return a.keys.length&&(a.isNested()||a.isMultiSig())&&a.keys.forEach(function(n){n.isAvailable(e)||t.push(n.id)}),a.isNested()&&(n=a.accounts.reduce(function(t,n){return t.concat(n.getMissingKeys(e))},[])),t.concat(n)}},listToIDs:function(e){var t=[];return e.forEach(function(e){e&&t.push(e.get?e.get("id"):e)}),t},unravel:function(e,t){var n=this,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(a<3){var r=E.b.getAccount(e.id);r&&r.getIn([t,"account_auths"]).size&&r.getIn([t,"account_auths"]).forEach(function(r){var o=E.b.getAccount(r.get(0));o&&e.accounts.push(n.unravel(new n.AccountPermission(o,r.get(1),t),t,a+1))})}return e},unnest:function(e,t){var n=this,a=[];return e.forEach(function(e){var r=E.b.getAccount(e),o=n.unravel(new n.AccountPermission(r,null,t),t);a.push(o)}),a},flatten_auths:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.a.List();return e.size?(e.forEach(function(e){t.includes(e.get(0))||(t=t.push(e.get(0)))}),t):t}},fe=n(27),he=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},be=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();function ge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ye(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function ve(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _e=function(e){function t(){return ge(this,t),ye(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return ve(t,a["Component"]),be(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.account,r=t.available,o=t.availableKeys,s=t.permission,i=t.threshold,c=s.isAvailable(r),l=s.isNested(),u=s.isMultiSig(),p=[],d=i&&i>10?b.a.get_percentage(s.weight,this.props.threshold):s.weight,m=s&&s.threshold>10?b.a.get_percentage(s.getStatus(r,o),s.threshold)+" / 100%":s.getStatus(r,o)+" / "+s.threshold;return p.push(a.createElement("div",{key:n.get("id"),style:{textAlign:"left",width:"100%",clear:"both",paddingBottom:5}},a.createElement("div",{className:"inline-block",style:{paddingLeft:5*this.props.indent+"%"}},a.createElement(de.a,{subpage:"permissions",account:n.get("id")}),!l&&d?(d&&2===d.length?"  ":"")+"("+d+") ":null),a.createElement("div",{className:"float-right",style:{paddingLeft:20,marginRight:10}},l||u?a.createElement("span",{className:c?"success-text":""},m):a.createElement("span",null,c?a.createElement(Y.a,{name:"checkmark-circle",size:"1x",className:"success"}):a.createElement(Y.a,{name:"cross-circle",size:"1x",className:"error"}))))),(l||u)&&(s.accounts.forEach(function(t){p.push(a.createElement(Ee,{key:t.id,indent:e.props.indent+1,account:t.id,accounts:t.accounts,permission:t,available:r,availableKeys:o,threshold:s.threshold}))}),s.keys.length&&s.keys.forEach(function(t){p.push(a.createElement(we,{key:t.id,permission:t,available:o,indent:e.props.indent+1}))})),a.createElement("div",null,p)}}]),t}();_e.propTypes={account:f.a.ChainAccount.isRequired,accounts:f.a.ChainAccountsList,indent:u.number.isRequired},_e.defaultProps={indent:0};var Ee=Object(h.a)(_e),we=function(e){function t(){return ge(this,t),ye(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return ve(t,a["Component"]),be(t,[{key:"render",value:function(){var e=this.props,t=e.available,n=e.permission,r=n.isAvailable(t),o=[];return o.push(a.createElement("div",{key:n.id,style:{textAlign:"left",width:"100%",paddingBottom:5}},a.createElement("div",{className:"inline-block",style:{paddingLeft:5*this.props.indent+"%"}},a.createElement("span",null,n.id.substr(0,20-4*this.props.indent),"... (",n.weight,")")),a.createElement("div",{className:"float-right",style:{paddingLeft:20,marginRight:10}},a.createElement("span",null,r?a.createElement(Y.a,{name:"checkmark-circle",size:"1x",className:"success"}):a.createElement(Y.a,{name:"cross-circle",size:"1x",className:"error"}))))),a.createElement("div",null,o)}}]),t}();we.propTypes={indent:u.number.isRequired},we.defaultProps={indent:0};var ke=function(e){function t(){return ge(this,t),ye(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return ve(t,a["Component"]),be(t,[{key:"render",value:function(){var e=this.props,t=e.requiredPermissions,n=e.available,r=e.availableKeys,o=(e.type,[]);return t.forEach(function(e){o.push(a.createElement(Ee,{key:e.id,account:e.id,accounts:e.accounts,permission:e,available:n,availableKeys:r}))}),a.createElement("div",null,o)}}]),t}(),Oe=function(e){function t(){ge(this,t);var e=ye(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={requiredPermissions:[]},e._updateState=e._updateState.bind(e),e}return ve(t,a["Component"]),be(t,[{key:"componentWillMount",value:function(){this._updateState(),E.b.subscribe(this._updateState)}},{key:"componentWillUnmount",value:function(){E.b.unsubscribe(this._updateState)}},{key:"_updateState",value:function(){var e=me.listToIDs(this.props.required),t=me.listToIDs(this.props.available);this.setState({requiredPermissions:me.unnest(e,this.props.type),required:e,available:t})}},{key:"render",value:function(){var e=this.props,t=e.type,n=(e.proposal,e.added),r=e.removed,o=e.availableKeys,s=this.state,i=s.requiredPermissions,c=s.required,l=s.available;return l=Object(fe.cloneDeep)(l),o=o.toJS(),n&&(l.push(n),o.push(n)),r&&(-1!==l.indexOf(r)&&l.splice(l.indexOf(r),1),-1!==o.indexOf(r)&&o.splice(o.indexOf(r),1)),a.createElement(ke,{type:t,added:n,removed:r,required:c,available:l,availableKeys:o,requiredPermissions:i})}}]),t}();Oe.propTypes={required:f.a.ChainAccountsList,available:f.a.ChainAccountsList},Oe.defaultProps={type:"active",added:null,removed:null},Oe=Object(h.a)(Oe,{keep_updating:!0});var je=function(e){function t(){return ge(this,t),ye(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return ve(t,a["Component"]),be(t,[{key:"render",value:function(){var e=this.props,t=e.proposal,n=e.type,r=t.get("available_"+n+"_approvals"),o=t.get("available_key_approvals"),s=t.get("required_"+n+"_approvals");return a.createElement(Oe,he({},this.props,{required:s,available:r,availableKeys:o}))}}]),t}();je.propTypes={proposal:f.a.ChainObject.isRequired,type:u.string.isRequired},je.defaultProps={type:"active",added:null};var Ce=Object(h.a)(je,{keep_updating:!0}),Ae=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},Ne=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();function Se(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function xe(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Pe(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Te=function(e){function t(e){Se(this,t);var n=xe(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.state={active:null,key:null,owner:null,payee:null},n}return Pe(t,a["Component"]),Ne(t,[{key:"onActiveAccount",value:function(e,t,n,a){var r={};t[a]?(r.key=a,r[n]=null):a?(r[n]=e[a],r.key=null):(r[n]=null,r.key=null),this.setState(r)}},{key:"_onProposalAction",value:function(e){var t=this,n=e.toJS(),a=this.state,r=a.active,o=(a.key,a.owner,{fee_paying_account:a.payee||r,proposal:n.id,active_approvals_to_add:[],active_approvals_to_remove:[],owner_approvals_to_add:[],owner_approvals_to_remove:[],key_approvals_to_add:[],key_approvals_to_remove:[]}),s="approve"===this.props.action,i=[];["active","owner","key"].forEach(function(e){var a=t.state[e];if(a){var r=-1!==n["available_"+e+"_approvals"].indexOf(a);(s&&!r||!s&&r)&&("approve"===t.props.action?(o[e+"_approvals_to_add"]=[a],"key"===e&&i.push(a)):"reject"===t.props.action&&(o[e+"_approvals_to_remove"]=[a],"key"===e&&i.push(a)))}});var c=g.a.new_transaction();c.add_type_operation("proposal_update",o),y.a.process_transaction(c,null,!0,i),d.a.publish(this.props.modalId,"close")}},{key:"onChangePayee",value:function(e){var t=E.b.getAccount(e);t&&this.setState({payee:t.get("id")})}},{key:"onCancel",value:function(){d.a.publish(this.props.modalId,"close")}},{key:"render",value:function(){var e=this.props,t=e.proposal,n=e.type,r=[],o={},s="approve"===this.props.action;this.props.accounts.length&&this.props.accounts.forEach(function(e){(s?e&&!t.get("available_"+n+"_approvals").includes(e.get("id")):e&&t.get("available_"+n+"_approvals").includes(e.get("id")))&&(o[e.get("name")]=e.get("id"),r.push(e.get("name")))});var c=[],l={};this.props.keys.length&&this.props.keys.forEach(function(e){pe.a.isMyKey(e)&&!t.get("available_key_approvals").includes(e)&&(l[e]=!0,c.push(e))});var u=pe.a.getMyAccounts();return a.createElement("form",{className:"grid-block vertical full-width-content"},a.createElement("div",{className:"grid-container"},a.createElement("div",{className:"content-block"},a.createElement("h4",null,s?"Add approval":"Remove approval")),a.createElement("div",{className:"content-block",style:{paddingRight:"20%"}},a.createElement(Ce,{proposal:t.get("id"),type:n,added:s?this.state.key?this.state.key:this.state[n]||null:null,removed:s?null:this.state.key?this.state.key:this.state[n]||null})),a.createElement("div",{className:"content-block full-width-content"},a.createElement("div",{className:"full-width-content form-group"},a.createElement(i.a,{content:"modal.proposals.pay_with",component:"label"}),a.createElement(ue.a,{account_names:u,onChange:this.onChangePayee.bind(this)})),r.length||c.length?a.createElement("div",{className:"full-width-content form-group"},a.createElement(i.a,{content:"modal.proposals.approval_"+(s?"add":"remove"),component:"label"}),a.createElement(ue.a,{account_names:r.concat(c),onChange:this.onActiveAccount.bind(this,o,l,n)})):null,null),a.createElement("div",{className:"content-block"},a.createElement("button",{type:"submit",className:"button",onClick:this._onProposalAction.bind(this,t)},a.createElement(i.a,{content:s?"account.perm.approve":"account.perm.remove"})),a.createElement("div",{onClick:this.onCancel.bind(this),className:" button"},a.createElement(i.a,{content:"account.perm.cancel"})))))}}]),t}();Te.propTypes={accounts:f.a.ChainAccountsList},Te=Object(h.a)(Te);var qe=function(e){function t(){Se(this,t);var e=xe(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._updateState=e._updateState.bind(e),e}return Pe(t,a["Component"]),Ne(t,[{key:"componentWillMount",value:function(){this._updateState(),E.b.subscribe(this._updateState)}},{key:"componentWillUnmount",value:function(){E.b.unsubscribe(this._updateState)}},{key:"_updateState",value:function(){var e=this.props,t=e.proposal,n=(e.account,t.get("required_active_approvals").size?"active":"owner"),a=me.listToIDs(t.get("required_"+n+"_approvals")),r=me.listToIDs(t.get("available_"+n+"_approvals")),o=me.listToIDs(t.get("available_key_approvals"));this.setState({requiredPermissions:me.unnest(a,n),available:r,availableKeys:o,type:n})}},{key:"render",value:function(){var e=this.props.action,t=this.state,n=t.requiredPermissions,r=t.available,o=t.availableKeys,s=t.type,i=[];n.forEach(function(e){i=i.concat(e.getMissingSigs(r))});var c=[];return n.forEach(function(e){c=c.concat(e.getMissingKeys(o))}),a.createElement(Te,Ae({},this.props,{type:s,accounts:"approve"===e?i:r,keys:"approve"===e?c:o}))}}]),t}();qe.propTypes={account:f.a.ChainAccount.isRequired,proposal:f.a.ChainObject.isRequired},qe=Object(h.a)(qe);var Re=function(e){function t(){Se(this,t);var e=xe(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={open:!1},e}return Pe(t,a["Component"]),Ne(t,[{key:"componentDidMount",value:function(){var e=this;d.a.subscribe(this.props.modalId,function(t,n){e.setState({open:"open"===n})})}},{key:"show",value:function(){d.a.publish(this.props.modalId,"open")}},{key:"render",value:function(){var e=this.props,t=e.modalId;e.proposal;return a.createElement(m.a,{id:t,overlay:!0,ref:t},this.state.open?a.createElement("div",{className:"grid-block vertical"},a.createElement(qe,this.props)):null)}}]),t}(),Fe=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var Ie=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["Component"]),Fe(t,[{key:"_onApproveModal",value:function(e,t){this.refs[e+"_"+t]&&this.refs[e+"_"+t].show()}},{key:"_canApprove",value:function(e,t){return-1!==e.required_active_approvals.indexOf(t)&&-1===e.available_active_approvals.indexOf(t)||-1!==e.required_owner_approvals.indexOf(t)&&-1===e.available_owner_approvals.indexOf(t)}},{key:"_canReject",value:function(e){return e.available_active_approvals.length||e.available_owner_approvals.length}},{key:"render",value:function(){var e=this,t=this.props.account;if(!t)return null;var n=[];t.get("proposals").size&&t.get("proposals").forEach(function(e){var a=E.b.getObject(e);if(a){var r=a.get("proposed_transaction").get("operations");n.push({operations:r,account:t,proposal:a})}});var r=n.sort(function(e,t){return b.a.sortID(e.proposal.get("id"),t.proposal.get("id"),!0)}).map(function(t){var n=!1,r=t.operations.map(function(e,r){return"1.2.153124"===e.getIn([1,"to"])&&(n=!0),a.createElement(le.a,{key:t.proposal.get("id")+"_"+r,expiration:t.proposal.get("expiration_time"),index:r,op:e.toJS(),inverted:!1,hideFee:!1,hideOpLabel:!0,hideDate:!0,proposal:!0,id:t.proposal.get("id")})}).toArray(),o=e._canReject(t.proposal.toJS()),s=t.proposal.get("id"),c=t.proposal.get("required_active_approvals").size?"active":"owner";return a.createElement("tr",{key:s},a.createElement("td",null,r),a.createElement("td",null,a.createElement(Ce,{proposal:t.proposal.get("id"),type:c})),a.createElement("td",null,o?a.createElement("button",{onClick:e._onApproveModal.bind(e,s,"reject"),className:"button outline"},a.createElement(i.a,{content:"proposal.reject"})):null,a.createElement(Re,{ref:s+"_reject",modalId:s+"_reject",account:t.account.get("id"),proposal:s,action:"reject"}),n?a.createElement("div",{"data-tip":_.a.translate("tooltip.propose_scam"),className:" tooltip has-error"},"SCAM"):a.createElement("button",{onClick:e._onApproveModal.bind(e,s,"approve"),className:"button outline"},a.createElement("span",null,a.createElement(i.a,{content:"proposal.approve"}))),a.createElement(Re,{ref:s+"_approve",modalId:s+"_approve",account:t.account.get("id"),proposal:s,action:"approve"})))});return a.createElement("table",{className:"table compact "+this.props.className},a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",null,a.createElement(i.a,{content:"account.votes.info"})),a.createElement("th",null,a.createElement(i.a,{content:"proposal.status"})),a.createElement("th",null,a.createElement(i.a,{content:"proposal.action"})))),a.createElement("tbody",null,r))}}]),t}();Ie.propTypes={account:f.a.ChainAccount.isRequired};var De=Object(h.a)(Ie,{keep_updating:!0}),Me=n(22),Le=n(202),He=n(141),Be=n(1399),We=n(125),ze=n(40),Ue=n.n(ze),Ve=n(33);var Ge=n(68),Ye=n(52),$e=n(146),Ke=n(299),Je=n(191),Qe=n(1387),Xe=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var Ze=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["PureComponent"]),Xe(t,[{key:"componentWillReceiveProps",value:function(e){e.claim_account_name!==this.props.claim_account_name&&this.onClaimAccount(e.claim_account_name,e.checked)}},{key:"render",value:function(){var e=this,t=this.props.total_by_account_asset&&this.props.total_by_account_asset.toArray()[0],n=t&&t.balances.sort(function(e,t){return e.id<t.id?-1:1});return a.createElement("div",null,a.createElement("table",{className:"table dashboard-table vest-table"},a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",null),a.createElement("th",{style:{textAlign:"center"}},a.createElement(i.a,{content:"account.asset"})),a.createElement("th",{style:{textAlign:"center"}},a.createElement(i.a,{content:"exchange.amount"})),a.createElement("th",{style:{textAlign:"center"}},a.createElement(i.a,{content:"vesting.end_time"})),a.createElement("th",{style:{textAlign:"center"}},a.createElement(i.a,{content:"vesting.progress"})),a.createElement("th",{style:{textAlign:"center"},title:_.a.translate("vesting.pubkey_tip"),className:"tooltip with-tooltip","data-place":"bottom","data-tip":_.a.translate("vesting.pubkey_tip")},a.createElement(i.a,{content:"vesting.pubkey"})))),a.createElement("tbody",null,n&&n.map(function(t){var n=t.id,r=t.vesting_policy,o=t.public_key_string,s=Qe.utc(r.begin_timestamp).add(r.vesting_cliff_seconds,"s"),i=Qe.utc(),c=r.vesting_cliff_seconds-(s.valueOf()-i.valueOf())/1e3;return a.createElement("tr",{key:n},a.createElement("td",null,a.createElement("input",{type:"checkbox",onChange:function(a){return e.onCheckbox(n,t,a)},disabled:i.isBefore(s)})),a.createElement("td",{style:{textAlign:"center"}},r.begin_balance?a.createElement(U.a,{amount:t.balance.amount,asset:t.balance.asset_id,hide_amount:!0}):null),a.createElement("td",{style:{textAlign:"center"}},r.begin_balance?a.createElement("div",null,a.createElement(U.a,{amount:t.balance.amount,asset:t.balance.asset_id,hide_asset:!0})):null),a.createElement("td",{style:{textAlign:"center"}},s.format("YYYY-MM-DD HH:mm:ss zZ")),a.createElement("td",null,r.begin_timestamp&&a.createElement("progress",{value:c,max:r.vesting_cliff_seconds})),a.createElement("td",null,o))}).toArray(),!this.props.total_by_account_asset||0===this.props.total_by_account_asset.size&&a.createElement("tr",null,a.createElement("td",null,"-"),a.createElement("td",null,"-"),a.createElement("td",null,"-"),a.createElement("td",null,"-"),a.createElement("td",null,"-"),a.createElement("td",null,"-")))))}},{key:"onCheckbox",value:function(e,t,n){var a=n.target.checked,r=this.props.checked;r=a?r.set(e,t):r.delete(e),Je.a.setSelectedBalanceClaims(r)}},{key:"onClaimAccount",value:function(e,t){if(!t.size){var n=-1;this.props.total_by_account_asset.forEach(function(a,r){n++,r.get(0)===e&&(a.unclaimed||a.vesting.unclaimed)&&(t=t.set(n,a.balances))}),t.size&&Je.a.setSelectedBalanceClaims(t)}}}]),t}(),et=(Ze=Object(P.connect)(Ze,{listenTo:function(){return[Ke.a]},getProps:function(){var e=Ke.a.getState(),t=e.balances,n=e.address_to_pubkey,a=Ye.a.getState().keys,o=r.Map().asMutable();return t&&(e.total_by_account_asset=t.groupBy(function(e){var t="",s=n.get(e.owner),i=a.get(s);i&&i.import_account_names&&(t=i.import_account_names.join(", "));var c,l,u,p=Math.ceil((c=r.List([t,e.balance.asset_id]),l=e.owner,(u=o.get(c))||(u=r.Set().asMutable(),o.set(c,u)),u.add(l),u.size/60));return r.List([t,e.balance.asset_id,p])}).map(function(e){return e.reduce(function(e,t){return t.public_key_string=n.get(t.owner),e.balances=e.balances.add(t),void 0!=t.vested_balance?(e.vesting.unclaimed+=Number(t.vested_balance.amount),e.vesting.total+=Number(t.balance.amount)):e.unclaimed+=Number(t.balance.amount),e},{unclaimed:0,vesting:{unclaimed:0,total:0},balances:r.Set()})}).sortBy(function(e){return e})),e}}),n(57)),tt=n(1565),nt=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var at,rt=((at=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.refreshBalances=n.refreshBalances.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["PureComponent"]),nt(t,[{key:"componentWillMount",value:function(){var e=Ye.a.getState().keys.keySeq();try{Je.a.setPubkeys(e)}catch(t){setTimeout(function(){return Je.a.setPubkeys(e)},0)}this.existing_keys=e,E.b.subscribe(this.refreshBalances)}},{key:"componentWillUnmount",value:function(){E.b.unsubscribe(this.refreshBalances)}},{key:"componentWillReceiveProps",value:function(e){var t=Ye.a.getState().keys.keySeq();t.equals(this.existing_keys)||(this.existing_keys=t,Je.a.setPubkeys(t))}},{key:"render",value:function(){var e=this.props.selected_balances.size&&this.props.claim_account_name;e&&this.props.claim_account_name;return a.createElement("div",null,a.createElement("div",{className:"grid-block vertical"},a.createElement(Ze,null)),a.createElement("div",{className:"vest-bottom grid-block"},a.createElement(tt.a,{key:this.props.balances,accounts:r.List(this.props.account_refs),onChange:this.onClaimAccountChange.bind(this),className:"small-12 medium-9"}),a.createElement(i.a,{component:"button",className:Ue()("button success small-12 medium-3",{disabled:!e}),content:"wallet.claim_balance",onClick:this.onClaimBalance.bind(this)})))}},{key:"onBack",value:function(e){e.preventDefault(),window.history.back()}},{key:"refreshBalances",value:function(){Je.a.refreshBalances()}},{key:"onClaimAccountChange",value:function(e){Je.a.claimAccountChange(e)}},{key:"onClaimBalance",value:function(){et.a.importBalance(this.props.claim_account_name,this.props.selected_balances,!0).then(function(){Je.a.setSelectedBalanceClaims(r.Map())}).catch(function(e){console.error("claimBalance",e);var t=e;try{t=e.data.message}catch(e){}throw Ge.b.error("Error claiming balance: "+t),e})}}]),t}()).propTypes={isUpdate:u.bool},at),ot=(rt=Object(P.connect)(rt,{listenTo:function(){return[Ke.a,$e.a,Ye.a]},getProps:function(){var e=Ke.a.getState(),t=$e.a.getAccountRefs(),n=pe.a.getCurrentAccountState();return 0===t.size&&n&&(t=new Set([n.get("id")])),e.account_refs=t,e}}),n(1583)),st=n(1613),it=n(231),ct=n(201),lt=n(110),ut=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var pt,dt=Object(ct.a)("FundTableEntry");!function(e){e[e.NORMAL=1]="NORMAL",e[e.CANCEL=2]="CANCEL"}(pt||(pt={}));var mt,ft=((mt=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.toggleExpand=function(){n.setState(function(e){return{expand:!e.expand}})},n.state={expand:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["Component"]),ut(t,[{key:"render",value:function(){var e=this.props,t=e.fund,n=e.partiCrowds,r=e.partiCrowd,o=e.withdrawCrowd,s=e.asset,c=n[t.id]||[],l=this.state.expand,u=t.beginMoment.clone().add(t.u,"s"),p=Qe.utc(),d=p.isBefore(u),m=s.get("symbol"),f=t.beginMoment.clone().add(t.t,"s"),h=p.isBefore(f);return dt(this.props),a.createElement("tbody",{className:Object(lt.a)("",{"table-toggable":c.length,expand:l})},a.createElement("tr",{className:"entry-main"},a.createElement("td",{className:"toggle"},c.length?a.createElement("a",{href:"javascript:;",onClick:this.toggleExpand},m):m),a.createElement("td",null,t.beginMoment.format("YYYY-MM-DD  HH:mm:ss")),a.createElement("td",null,t.beginMoment.clone().add(t.u,"s").format("YYYY-MM-DD  HH:mm:ss")),a.createElement("td",null,f.format("YYYY-MM-DD  HH:mm:ss")),a.createElement("td",null,t.V/1e5),a.createElement("td",null,d?a.createElement(i.a,{component:"button",content:"crowdfund.partCrowd",className:Object(lt.a)("button outline",{}),onClick:function(){return r(t)}}):a.createElement(i.a,{content:"crowdfund.crowdFinish"}))),l&&c.map(function(e){return a.createElement("tr",{key:e.id,className:"entry-sub"},a.createElement("td",null,"-"),a.createElement("td",null,e.whenM.format("YYYY-MM-DD  HH:mm:ss")),a.createElement("td",null,"-"),a.createElement("td",null,"-"),a.createElement("td",null,e.valuation/1e5),a.createElement("td",null,e.state===pt.CANCEL?a.createElement(i.a,{content:"crowdfund.crowdWithdrawed"}):d?h?a.createElement(i.a,{component:"button",content:"crowdfund.crowdWithdraw",className:Object(lt.a)("button outline",{}),onClick:function(){return o(e)}}):a.createElement(i.a,{content:"crowdfund.crowdWorking"}):a.createElement(i.a,{content:"crowdfund.crowdFinish"})))}))}}]),t}()).propTypes={asset:f.a.ChainAsset},mt.defaultProps={asset:Object(r.Map)()},mt),ht=(ft=Object(h.a)(ft),function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}());var bt,gt={margin:2},yt=((bt=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onSubmit=function(e){e.preventDefault();var t=n.state,a=t.valuation,r=t.cap,o=n.props.fund;n.props.onSubmit({valuation:1e5*a,cap:1e5*r,fund:o})},n.onFieldChange=function(e){return function(t){var a,r,o;n.setState((a={},r=e,o=t.target.value,r in a?Object.defineProperty(a,r,{value:o,enumerable:!0,configurable:!0,writable:!0}):a[r]=o,a))}},n.state={valuation:500,cap:5e3},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["Component"]),ht(t,[{key:"render",value:function(){var e=this.props,t=(e.fund,e.asset),n=this.state,r=n.valuation,o=n.cap,s=r>0&&o>0&&parseFloat(o)>parseFloat(r);return a.createElement("form",{className:"grid-block vertical full-width-content"},a.createElement("h4",null,t&&t.get("symbol")),a.createElement("div",{className:"grid-container ",style:{paddingTop:"2rem"}},a.createElement("div",{className:"content-block"},a.createElement("label",{htmlFor:"crowdValuation"},a.createElement(i.a,{component:"span",content:"crowdfund.valuation"})),a.createElement("input",{className:"period-horizontal",defaultValue:r,type:"number",name:"crowdValuation",style:gt,onChange:this.onFieldChange("valuation")})),a.createElement("div",{className:"content-block"},a.createElement("label",{htmlFor:"crowdCap"},a.createElement(i.a,{component:"span",content:"crowdfund.cap"})),a.createElement("input",{className:"period-horizontal",defaultValue:o,type:"number",style:gt,name:"crowdCap",onChange:this.onFieldChange("cap")})),a.createElement("div",{className:"content-block button-group"},a.createElement(i.a,{component:"button",className:Object(lt.a)("button",{disabled:!s}),type:"submit",content:"modal.issue.submit",onClick:this.onSubmit}),a.createElement(i.a,{className:"button",component:"button",onClick:this.props.onClose,content:"cancel"}))))}}]),t}()).propTypes={asset:f.a.ChainAsset.isRequired},bt),vt=(yt=Object(h.a)(yt),function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}());function _t(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Et,wt,kt=Object(ct.a)("AccountCrowdFund");!function(e){e[e.OWNER=0]="OWNER",e[e.OPEN_NOT_IN=1]="OPEN_NOT_IN",e[e.OPEN_CAN_WITHDRAW=2]="OPEN_CAN_WITHDRAW",e[e.OPEN_CANT_WITHDRAW=3]="OPEN_CANT_WITHDRAW",e[e.CLOSED=4]="CLOSED"}(Et||(Et={})),function(e){e[e.ALL=0]="ALL",e[e.ONGOING=1]="ONGOING"}(wt||(wt={}));var Ot,jt=((Ot=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.queryAllFunds=function(){kt("queryAllFunds"),ot.a.queryAllCrowdFunds(0,20,n.getCurrentAccount().get("id"))},n.queryAccountPartiCrowds=function(){kt("queryAllFunds");var e=n.getCurrentAccount();ot.a.queryAccountPartiCrowds(e.get("id"))},n.handlePartiCrowd=function(e){n.setState({fund:e}),d.a.publish("partCrowdModal","open")},n.partiCrowd=function(e){var t=e.valuation,a=e.cap,r=e.fund;kt("partiCrowd");var o=n.getCurrentAccount();ot.a.partiCrowd({valuation:t,cap:a,buyer:o.get("id"),crowdfund:r.id})},n.withdrawCrowd=function(e){kt("withdrawCrowd");var t=n.getCurrentAccount();ot.a.withdrawCrowdFund(t.get("id"),e.id)},kt("constructor"),n.state={fund:null,tab:wt.ALL},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["Component"]),vt(t,[{key:"componentWillReceiveProps",value:function(e){this.props.notification!==e.notification&&(this.queryAllFunds(),this.queryAccountPartiCrowds())}},{key:"componentWillMount",value:function(){this.queryAllFunds(),this.queryAccountPartiCrowds()}},{key:"getCurrentAccount",value:function(){if(!this.props.account)throw new Error("No avaliable account");return this.props.account}},{key:"setTab",value:function(e){this.setState({tab:e})}},{key:"render",value:function(){var e=this;kt("render",this.props);var t=this.props.allFunds.toArray(),n=t.filter(function(e){return e.beginMoment.clone().add(e.u,"s").isAfter(Qe.utc())}),r=this.props.partiCrowds,o=this.state,s=o.fund,c=o.tab;return a.createElement("div",{className:"table-wrapper"},!!n.length&&a.createElement("div",{className:"hide-selector"},[wt.ALL,wt.ONGOING].map(function(t){return a.createElement("div",{className:Object(ct.b)("hide-selector-item",{inactive:t!==c}),onClick:t===c?function(){return 0}:function(){return e.setTab(t)}},a.createElement(i.a,{content:"crowdfund."+wt[t]}))})),a.createElement("table",{className:"table dashboard-table crowd-table table-with-highlight",style:{tableLayout:"fixed"}},a.createElement("thead",null,a.createElement("tr",null,a.createElement(i.a,{component:"th",content:"crowdfund.asset"}),a.createElement(i.a,{component:"th",content:"crowdfund.begin"}),a.createElement(i.a,{component:"th",content:"crowdfund.endTime"}),a.createElement(i.a,{component:"th",content:"crowdfund.lockTime"}),a.createElement(i.a,{component:"th",content:"crowdfund.currentVol"}),a.createElement(i.a,{component:"th",content:"crowdfund.action"}))),c===wt.ALL?t.map(function(t){return a.createElement(ft,{key:t.id,fund:t,asset:t.asset_id,partiCrowds:r,partiCrowd:e.handlePartiCrowd,withdrawCrowd:e.withdrawCrowd})}):n.map(function(t){return a.createElement(ft,{key:t.id,fund:t,asset:t.asset_id,partiCrowds:r,partiCrowd:e.handlePartiCrowd,withdrawCrowd:e.withdrawCrowd})})),a.createElement(m.a,{id:"partCrowdModal",overlay:!0},a.createElement("br",null),a.createElement("div",{className:"grid-block vertical"},s&&a.createElement(yt,{onSubmit:function(t){return e.partiCrowd(t)},onClose:function(){d.a.publish("partCrowdModal","close")},asset:s.asset_id,fund:s}))))}}]),t}()).propTypes={allFunds:u.object,allPartedFunds:u.array,account:f.a.ChainAccount.isRequired},Ot.defaultProps={allFunds:null,allPartedFunds:[],account:null},Ot),Ct=jt=Object(P.connect)(jt,{listenTo:function(){return[st.a]},getProps:function(){return{allFunds:st.a.getState().allFunds,notification:it.a.getState().notification,partiCrowds:st.a.getState().partiCrowds.reduce(function(e,t){return t.crowdfund in e?Object.assign({},e,_t({},t.crowdfund,[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(e[t.crowdfund]),[t]))):Object.assign({},e,_t({},t.crowdfund,[t]))},{})}}}),At=n(1398),Nt=n(1396),St=n(66),xt=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();function Pt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Tt(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function qt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Rt=((It=function(e){function t(e){Pt(this,t);var n=Tt(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));for(var a in n.priceRefs={},n.valueRefs={},n.changeRefs={},n.sortFunctions={alphabetic:function(e,t,n){return e.key>t.key?this.state.sortDirection||n?1:-1:e.key<t.key?this.state.sortDirection||n?-1:1:0},priceValue:function(e,t){var n=this.priceRefs[e.key],a=this.priceRefs[t.key];if(n&&a){var r=n.getFinalPrice(!0),o=a.getFinalPrice(!0);return!r&&o?1:r&&!o?-1:r||o?this.state.sortDirection?r-o:o-r:this.sortFunctions.alphabetic(e,t,!0)}},totalValue:function(e,t){var n=this.valueRefs[e.key],a=this.valueRefs[t.key];if(n&&a){var r=n.getValue(),o=a.getValue();return!r&&o?1:r&&!o?-1:r||o?this.state.sortDirection?o-r:r-o:this.sortFunctions.alphabetic(e,t,!0)}},changeValue:function(e,t){var n=this.changeRefs[e.key],a=this.changeRefs[t.key];if(n&&a){var r=n.getValue(),o=a.getValue(),s=parseFloat(r)||r,i=parseFloat(o)||o;return void 0===this.state.sortDirection||this.state.sortDirection?s<i:s>i}}},n.state={sortKey:e.viewSettings.get("portfolioSort","totalValue"),sortDirection:e.viewSettings.get("portfolioSortDirection",!0),settleAsset:"1.3.0",showHidden:!1,depositAsset:null,withdrawAsset:null,bridgeAsset:null,alwaysShowAssets:["CYB"]},n.sortFunctions)n.sortFunctions[a]=n.sortFunctions[a].bind(n);return n}return qt(t,a["Component"]),xt(t,[{key:"componentWillMount",value:function(){this._checkMarginStatus()}},{key:"_checkMarginStatus",value:function(){var e,t=this,n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props;(e=n.account,new Promise(function(t,n){if(!e||e&&!e.get("call_orders",[]).size)return t(null);Object(E.f)("getObject",e.get("call_orders").toArray()).then(function(e){var n=[];e.forEach(function(e){var t=e.getIn(["call_price","base","asset_id"]),a=e.getIn(["call_price","quote","asset_id"]);-1===n.indexOf(t)&&n.push(t),-1===n.indexOf(a)&&n.push(a)}),Object(E.f)("getAsset",n).then(function(n){var a={};n.forEach(function(e){a[e.get("id")]=e.toJS()});var r={};e.forEach(function(e){var t=a[e.getIn(["call_price","quote","asset_id"])],n=a[e.getIn(["call_price","base","asset_id"])],o=t.bitasset.current_feed.settlement_price;if(o.base.asset_id===o.quote.asset_id)r[t.id]={ratio:null};else{var s=new Ve.a({amount:e.get("collateral"),asset_id:n.id,precision:n.precision}),i=new Ve.a({amount:e.get("debt"),asset_id:t.id,precision:t.precision}),c=t.bitasset.current_feed.maintenance_collateral_ratio/1e3,l=new Ve.c({priceObject:t.bitasset.current_feed.settlement_price,market_base:t.bitasset.current_feed.settlement_price.quote.asset_id,sqr:t.bitasset.current_feed.maximum_short_squeeze_ratio,assets:a}),u={ratio:s.getAmount({real:!0})/(i.getAmount({real:!0})/l.toReal())};if(isNaN(u.ratio))return null;u.ratio<c?u.statusClass="danger":u.ratio<c+.5?u.statusClass="warning":u.statusClass=null,r[t.id]=u}}),t(r)})}).catch(n)})).then(function(e){var n=null;for(var a in e)n=e[a].statusClass||n;t.setState({globalMarginStatus:n})})}},{key:"componentWillReceiveProps",value:function(e){e.account!==this.props.account&&(this._checkMarginStatus(e),this.priceRefs={},this.valueRefs={},this.changeRefs={},setTimeout(this.forceUpdate.bind(this),500))}},{key:"shouldComponentUpdate",value:function(e,t){return!(b.a.are_equal_shallow(e.balanceAssets,this.props.balanceAssets)&&b.a.are_equal_shallow(e.backedCoins,this.props.backedCoins)&&b.a.are_equal_shallow(e.balances,this.props.balances)&&e.account===this.props.account&&e.isMyAccount===this.props.isMyAccount&&e.settings===this.props.settings&&e.hiddenAssets===this.props.hiddenAssets&&b.a.are_equal_shallow(t,this.state))}},{key:"_onSettleAsset",value:function(e,t){t.preventDefault(),this.setState({settleAsset:e}),this.refs.settlement_modal.show()}},{key:"_hideAsset",value:function(e,t){Me.a.hideAsset(e,t)}},{key:"_showDepositWithdraw",value:function(e,t,n,a){var r=this.props.account;At.b.showDepositModal(r.get("name"),t)}},{key:"_showWithdrawModal",value:function(e,t,n,a){this.props.account;At.b.showWithdrawModal(t)}},{key:"_getSeparator",value:function(e){return e?a.createElement("span",null," | "):null}},{key:"_onNavigate",value:function(e,t){t.preventDefault(),this.props.router.push(e)}},{key:"_renderBalances",value:function(e,t,n){var r=this,o=this.props.core_asset,s=this.props,i=s.settings,l=s.hiddenAssets,u=s.orders,p=i.get("unit")||o.get("symbol"),d=i.get("showAssetPercent",!1),m=function(e,t){var n=e&&e.has("bitasset_data_id"),o="cp_modal_"+e.get("id");return{isBitAsset:n,borrowModal:n?a.createElement(G.a,{ref:o,quote_asset:e.get("id"),backing_asset:e.getIn(["bitasset","options","short_backing_asset"]),account:t}):null,borrowLink:n?a.createElement("a",{onClick:function(){R.a.hide(),r.refs[o].show()}},a.createElement(Y.a,{name:"dollar",className:"icon-14px"})):null}},f=[];return e.forEach(function(e){var t=E.b.getObject(e);if(t){var n,s,i,h=t.get("asset_type"),b=E.b.getObject(h),g="";if(!b)return null;var y=b.get("symbol");console.debug("AssetName: ",y);var v="1.3.0"!==b.get("id"),w=p!==o.get("symbol"),k=Le.a.parseDescription(b.getIn(["options","description"])).market;-1===(g=b.get("symbol")).indexOf("OPEN.")||k||(k="USD");var O=k||p;v&&O===g&&(O=o.get("symbol")),n=v?a.createElement($.b,{to:"/market/"+b.get("symbol")+"_"+O},a.createElement(Y.a,{name:"trade",className:"icon-14px"})):w?a.createElement($.b,{to:"/market/"+b.get("symbol")+"_"+p},a.createElement(Y.a,{name:"trade",className:"icon-14px"})):"-",i=a.createElement($.b,{to:"/transfer?asset="+b.get("id")},a.createElement(Y.a,{name:"transfer",className:"icon-14px"}));var j=m(b,r.props.account),C=j.isBitAsset,A=j.borrowModal,N=j.borrowLink;s=a.createElement("a",{href:"javascript:;",onClick:r._onSettleAsset.bind(r,b.get("id"))},a.createElement(Y.a,{name:"settle",className:"icon-14px"}));var x=!l.includes(h),P=!!t.get("balance"),T=!!u[h],q=!!Nt.d.ADDRESS_TYPES[b.get("symbol")],R=q&&P&&0!=t.get("balance"),I=!!r.props.bridgeCoins.get(g);f.push(a.createElement("tr",{key:b.get("symbol"),style:{maxWidth:"100rem"}},a.createElement("td",{style:{textAlign:"left",paddingLeft:10}},a.createElement(He.a,{asset:b.get("id")})),a.createElement("td",{style:{textAlign:"right"}},P||T?a.createElement(c.a,{balance:e,hide_asset:!0}):null),a.createElement("td",{style:{textAlign:"right"},className:"column-hide-small"},a.createElement(F.b,{refCallback:function(e){e&&e.refs.bound_component&&(r.priceRefs[b.get("symbol")]=e.refs.bound_component)},fromAsset:b.get("id"),hide_symbols:!0})),a.createElement("td",{style:{textAlign:"right"},className:"column-hide-small"},a.createElement(W,{refCallback:function(e){e&&e.refs.bound_component&&(r.changeRefs[b.get("symbol")]=e.refs.bound_component)},fromAsset:b.get("id"),toAsset:p,hide_symbols:!0})),a.createElement("td",{style:{textAlign:"right"},className:"column-hide-small"},P||T?a.createElement(S.a,{balance:e,toAsset:p,hide_asset:!0,refCallback:function(e){e&&e.refs.bound_component&&(r.valueRefs[b.get("symbol")]=e.refs.bound_component)}}):null),d?a.createElement("td",{style:{textAlign:"right"}},P?a.createElement(c.a,{balance:e,asPercentage:!0}):null):null,a.createElement("td",null,i),a.createElement("td",null,I&&r.props.isMyAccount?a.createElement("span",null,a.createElement("a",{onClick:r._showDepositWithdraw.bind(r,"bridge_modal",y,!1)},a.createElement(Y.a,{name:"dollar",className:"icon-14px"}))):"-"),a.createElement("td",null,q&&r.props.isMyAccount?a.createElement("span",null,a.createElement("a",{onClick:r._showDepositWithdraw.bind(r,"deposit_modal",y,!1)},a.createElement(Y.a,{name:"deposit",className:"icon-14px"}))):"-"),a.createElement("td",null,R&&r.props.isMyAccount?a.createElement("span",null,a.createElement("a",{className:R?"":"disabled",onClick:R?r._showWithdrawModal.bind(r,"withdraw_modal",y,!1):function(){}},a.createElement(Y.a,{name:"withdraw",className:"icon-14px"}))):"-"),a.createElement("td",null,n),a.createElement("td",null,C?a.createElement("div",{className:"inline-block","data-place":"bottom","data-tip":_.a.translate("tooltip.borrow",{asset:g})},N,A):"-"),a.createElement("td",null,C?a.createElement("div",{className:"inline-block","data-place":"bottom","data-tip":_.a.translate("tooltip.settle",{asset:g})},s):"-"),a.createElement("td",{style:{textAlign:"center"},className:"column-hide-small","data-place":"bottom","data-tip":_.a.translate("tooltip."+(x?"hide_asset":"show_asset"))},a.createElement("a",{style:{marginRight:0},className:x?"order-cancel":"action-plus",onClick:r._hideAsset.bind(r,h,x)},a.createElement(Y.a,{name:x?"cross-circle":"plus-circle",className:"icon-14px"})))))}}),t&&t.filter(function(e){var t=!1;r.props.backedCoins.get("OPEN",[]).forEach(function(n){n&&n.symbol===e&&(t=!0)}),r.props.bridgeCoins.get(e)&&(t=!0);var n=!0;return f.forEach(function(t){t.key===e&&(n=!1)}),n&&t}).forEach(function(e){var t=E.b.getAsset(e);if(t&&r.props.isMyAccount){var s=!l.includes(t.get("id")),i=!!r.props.backedCoins.get("OPEN",[]).find(function(e){return e.symbol===t.get("symbol")}),c=!!r.props.bridgeCoins.get(t.get("symbol")),u="1.3.0"!==t.get("id"),p=Le.a.parseDescription(t.getIn(["options","description"])).market;-1===t.get("symbol").indexOf("OPEN.")||p||(p="USD");var d=p||(o?o.get("symbol"):"CYB"),h=u?a.createElement($.b,{to:"/market/"+t.get("symbol")+"_"+d},a.createElement(Y.a,{name:"trade",className:"icon-14px"})):"-",b=m(t,r.props.account),g=b.isBitAsset,y=b.borrowModal,v=b.borrowLink;(s&&n||!s&&!n)&&f.push(a.createElement("tr",{key:t.get("symbol"),style:{maxWidth:"100rem"}},a.createElement("td",{style:{textAlign:"left",paddingLeft:10}},a.createElement(He.a,{asset:t.get("id")})),a.createElement("td",null),a.createElement("td",null),a.createElement("td",{className:"column-hide-small",colSpan:2}),a.createElement("td",{style:{textAlign:"center"}},c&&r.props.isMyAccount?a.createElement("span",null,a.createElement("a",{onClick:r._showDepositWithdraw.bind(r,"bridge_modal",e,!1)},a.createElement(Y.a,{name:"dollar",className:"icon-14px"}))):"-"),a.createElement("td",null,i&&r.props.isMyAccount?a.createElement("span",null,a.createElement("a",{onClick:r._showDepositWithdraw.bind(r,"deposit_modal",e,!1)},a.createElement(Y.a,{name:"deposit",className:"icon-14px"}))):"-"),a.createElement("td",null,"-"),a.createElement("td",{style:{textAlign:"center"}},h),a.createElement("td",null,g?a.createElement("div",{className:"inline-block","data-place":"bottom","data-tip":_.a.translate("tooltip.borrow",{asset:t.get("symbol")})},v,y):"-"),a.createElement("td",null,"-"),a.createElement("td",{style:{textAlign:"center"},className:"column-hide-small","data-place":"bottom","data-tip":_.a.translate("tooltip."+(s?"hide_asset":"show_asset"))},a.createElement("a",{style:{marginRight:0},className:s?"order-cancel":"action-plus",onClick:r._hideAsset.bind(r,t.get("id"),s)},a.createElement(Y.a,{name:s?"cross-circle":"plus-circle",className:"icon-14px"})))))}}),f.sort(this.sortFunctions[this.state.sortKey]),f}},{key:"_toggleHiddenAssets",value:function(){this.setState({showHidden:!this.state.showHidden})}},{key:"_toggleSortOrder",value:function(e){this.state.sortKey===e?(Me.a.changeViewSetting({portfolioSortDirection:!this.state.sortDirection}),this.setState({sortDirection:!this.state.sortDirection})):(Me.a.changeViewSetting({portfolioSort:e}),this.setState({sortKey:e}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.account,o=t.hiddenAssets,s=t.settings,c=t.orders,u=this.state.showHidden;if(!n)return null;var p=[],d={},m={};n.toJS&&n.has("call_orders")&&(p=n.get("call_orders").toJS());var f=void 0,h=void 0,g=n.get("balances"),y=r.List(),v=r.List();(p.forEach(function(e){var t=E.b.getObject(e);if(t){var n=t.getIn(["call_price","base","asset_id"]);d[n]?d[n]+=parseInt(t.get("collateral"),10):d[n]=parseInt(t.get("collateral"),10);var a=t.getIn(["call_price","quote","asset_id"]);m[a]?m[a]+=parseInt(t.get("debt"),10):m[a]=parseInt(t.get("debt"),10)}}),g)&&((g=g.filter(function(e,t){var n=E.b.getObject(e),a=E.b.getAsset(n.get("asset_type"));return!(!a||Object(St.a)(a.get("symbol")))&&!(n&&!n.get("balance")&&!c[t])})).forEach(function(e,t){o.includes(t)?v=v.push(e):y=y.push(e)}),f=this._renderBalances(y,this.state.alwaysShowAssets,!0),h=this._renderBalances(v,this.state.alwaysShowAssets));var _=y.concat(v),w=(a.createElement(l.a,{noTip:!0,balances:_,openOrders:c,debt:m,collateral:d,hide_asset:!0}),a.createElement(l.a,{noTip:!0,balances:_,hide_asset:!0})),k=a.createElement(l.a,{noTip:!0,balances:r.List(),openOrders:c,hide_asset:!0}),O=(a.createElement(l.a,{noTip:!0,balances:r.List(),debt:m,collateral:d,hide_asset:!0}),a.createElement(l.a,{noTip:!0,balances:r.List(),debt:m,hide_asset:!0}),a.createElement(l.a,{noTip:!0,balances:r.List(),collateral:d,hide_asset:!0}),s.get("unit")||this.props.core_asset.get("symbol")),j=a.createElement(K.a,{noLink:!0,string:"account.total",keys:[{type:"asset",value:O,arg:"asset"}]});f.push(a.createElement("tr",{key:"portfolio",className:"total-value"},a.createElement("td",{style:{textAlign:"left",paddingLeft:10}},j),a.createElement("td",null),a.createElement("td",{className:"column-hide-small"}),a.createElement("td",null),a.createElement("td",{className:"column-hide-small",style:{textAlign:"right"}},w),a.createElement("td",{colSpan:9})));var C=s.get("showAssetPercent",!1),A=(this.props.backedCoins.get("OPEN",[]).find(function(t){return t.symbol===e.state.depositAsset}),this.props.backedCoins.get("OPEN",[]).find(function(t){return t.symbol===e.state.withdrawAsset}),this.props.bridgeCoins.get(this.state.bridgeAsset),E.b.getAsset(O)),S=A?A.get("symbol"):"";if(A){var x=b.a.replaceName(S,!!A.get("bitasset_data_id")),P=x.prefix,T=x.name;S=(P||"")+T}a.createElement("span",{style:{visibility:"hidden"}},"H");return a.createElement("div",{className:"app-tables with-shadow",ref:"appTables"},a.createElement("div",{className:"content-block small-12"},a.createElement("div",{className:"generic-bordered-box"},a.createElement(Be.b,{defaultActiveTab:1,segmented:!1,setting:"overviewTab",className:"overview-tabs",contentClass:"no-padding",tabsClass:"account-overview no-padding bordered-header content-block"},a.createElement(Be.a,{title:"account.portfolio",subText:w},a.createElement("div",{className:"hide-selector"},a.createElement("div",{className:Ue()("hide-selector-item",{inactive:u&&h.length}),onClick:u?this._toggleHiddenAssets.bind(this):function(){}},a.createElement(i.a,{content:"account.hide_hidden"})),h.length?a.createElement("div",{className:Ue()("hide-selector-item",{inactive:!u}),onClick:u?function(){}:this._toggleHiddenAssets.bind(this)},a.createElement(i.a,{content:"account.show_hidden"})):null),a.createElement("table",{className:"table dashboard-table"},a.createElement("thead",null,a.createElement("tr",null,a.createElement("th",{style:{textAlign:"left",paddingLeft:10},className:"clickable",onClick:this._toggleSortOrder.bind(this,"alphabetic")},a.createElement(i.a,{component:"span",content:"account.asset"})),a.createElement("th",{style:{textAlign:"right"}},a.createElement(i.a,{content:"account.qty"})),a.createElement("th",{onClick:this._toggleSortOrder.bind(this,"priceValue"),className:"column-hide-small clickable",style:{textAlign:"right"}},a.createElement(i.a,{content:"exchange.price"})," (",a.createElement(z.a,{name:O}),")"),a.createElement("th",{onClick:this._toggleSortOrder.bind(this,"changeValue"),className:"column-hide-small clickable",style:{textAlign:"right"}},a.createElement(i.a,{content:"account.hour_24_short"})),a.createElement("th",{onClick:this._toggleSortOrder.bind(this,"totalValue"),style:{textAlign:"right"},className:"column-hide-small clickable"},a.createElement(K.a,{noLink:!0,string:"account.eq_value_header",keys:[{type:"asset",value:O,arg:"asset"}]})),C?a.createElement("th",{style:{textAlign:"right"}},a.createElement(i.a,{component:"span",content:"account.percent"})):null,a.createElement("th",null,a.createElement(i.a,{content:"header.payments"})),a.createElement("th",null,a.createElement(i.a,{content:"exchange.buy"})),a.createElement("th",null,a.createElement(i.a,{content:"modal.deposit.submit"})),a.createElement("th",null,a.createElement(i.a,{content:"modal.withdraw.submit"})),a.createElement("th",null,a.createElement(i.a,{content:"account.trade"})),a.createElement("th",null,a.createElement(i.a,{content:"exchange.borrow"})),a.createElement("th",null,a.createElement(i.a,{content:"account.settle"})),a.createElement("th",{className:"column-hide-small"},a.createElement(i.a,{content:u?"account.perm.show":"exchange.hide"})))),a.createElement("tbody",null,u&&h.length?h:f))),a.createElement(Be.a,{title:"account.open_orders",subText:k},a.createElement(We.default,Object.assign({},this.props),a.createElement("tbody",null,a.createElement("tr",{className:"total-value"},a.createElement("td",{style:{textAlign:"center"}},j),a.createElement("td",{colSpan:3}),a.createElement("td",{style:{textAlign:"center"}},k),a.createElement("td",{colSpan:1}),this.props.isMyAccount?a.createElement("td",null):null)))),!1,this.props.isMyAccount&&a.createElement(Be.a,{title:"account.vested"},a.createElement("div",{className:"content-block"},a.createElement("div",{className:"generic-bordered-box"},a.createElement(rt,null)))),this.props.isMyAccount&&a.createElement(Be.a,{title:"account.crowdfund"},a.createElement("div",{className:"content-block"},a.createElement("div",{className:"generic-bordered-box"},a.createElement(Ct,{account:n})))),a.createElement(Be.a,{title:"account.activity"},a.createElement(ce.a,{accountsList:r.fromJS([n.get("id")]),compactView:!1,showMore:!0,fullHeight:!0,limit:15,showFilters:!0,dashboard:!0})),n.get("proposals")&&n.get("proposals").size?a.createElement(Be.a,{title:"explorer.proposals.title",subText:n.get("proposals")?n.get("proposals").size:0},a.createElement(De,{className:"dashboard-table",account:n.get("id")})):null),a.createElement(N,{ref:"settlement_modal",asset:this.state.settleAsset,account:n.get("name")}))))}}]),t}()).propTypes={balanceAssets:f.a.ChainAssetsList,core_asset:f.a.ChainAsset.isRequired},It.defaultProps={core_asset:"1.3.0"},It);Rt=Object(h.a)(Rt);var Ft=function(e){function t(){return Pt(this,t),Tt(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return qt(t,a["Component"]),xt(t,[{key:"componentWillMount",value:function(){}},{key:"render",value:function(){var e=this.props.balances.map(function(e){return e&&e.get("asset_type")}).filter(function(e){return!!e}),t=this.props.orders.reduce(function(e,t){if(!t)return e;var n=t.getIn(["sell_price","base","asset_id"]);return e[n]||(e[n]=0),e[n]+=parseInt(t.get("for_sale"),10),e},{});for(var n in t)-1===e.indexOf(n)&&e.push(n);return a.createElement(Rt,Object.assign({},this.state,this.props,{orders:t,balanceAssets:r.List(e)}))}}]),t}();Ft.propTypes={balances:f.a.ChainObjectsList,orders:f.a.ChainObjectsList},Ft.defaultProps={balances:r.List(),orders:r.List()};var It;t.default=Object(h.a)(Ft)}}]);