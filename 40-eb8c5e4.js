(window.webpackJsonp=window.webpackJsonp||[]).push([[40],{1959:
/*!**********************************************************!*\
  !*** ./components/Account/CreateAccount.tsx + 1 modules ***!
  \**********************************************************/
/*! exports provided: default */
/*! all exports used */
/*! ModuleConcatenation bailout: Cannot concat with ./actions/NotificationActions.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./components/Common/Styles.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./components/Common/index.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./components/Forms/AccountNameInput.tsx */
/*! ModuleConcatenation bailout: Cannot concat with ./components/Forms/PasswordInput.tsx */
/*! ModuleConcatenation bailout: Cannot concat with ./components/Login/CreateSelector.tsx (<- Module is referenced from these modules with unsupported syntax: ./Routes.jsx (referenced with import())) */
/*! ModuleConcatenation bailout: Cannot concat with ./components/Login/LoginSelector.tsx */
/*! ModuleConcatenation bailout: Cannot concat with ./components/Utility/Captcha.tsx */
/*! ModuleConcatenation bailout: Cannot concat with ./lib/common/utils.ts */
/*! ModuleConcatenation bailout: Cannot concat with ./actions/AccountActions.js */
/*! ModuleConcatenation bailout: Cannot concat with ./actions/SettingsActions.js */
/*! ModuleConcatenation bailout: Cannot concat with ./actions/WalletActions.js */
/*! ModuleConcatenation bailout: Cannot concat with ./actions/WalletUnlockActions.js */
/*! ModuleConcatenation bailout: Cannot concat with ./components/Forms/AccountSelect.jsx */
/*! ModuleConcatenation bailout: Cannot concat with ./components/LoadingIndicator.jsx */
/*! ModuleConcatenation bailout: Cannot concat with ./components/Wallet/Backup.jsx (<- Module is referenced from these modules with unsupported syntax: ./Routes.jsx (referenced with import())) */
/*! ModuleConcatenation bailout: Cannot concat with ./cybex/cybexjs/index.js */
/*! ModuleConcatenation bailout: Cannot concat with ./lib/alt-react/lib/index.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ./lib/counterpart/index.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ./stores/AccountStore.js */
/*! ModuleConcatenation bailout: Cannot concat with ./stores/TransactionConfirmStore.js */
/*! ModuleConcatenation bailout: Cannot concat with ./stores/WalletDb.js (<- Module uses injected variables (Buffer)) */
/*! ModuleConcatenation bailout: Cannot concat with ../node_modules/classnames/index.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ../node_modules/radium/es/index.js */
/*! ModuleConcatenation bailout: Cannot concat with ../node_modules/react-router/es/index.js */
/*! ModuleConcatenation bailout: Cannot concat with ../node_modules/react-tooltip/dist/index.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ../node_modules/react-translate-component/index.js (<- Module is not an ECMAScript module) */
/*! ModuleConcatenation bailout: Cannot concat with ../node_modules/react/index.js (<- Module is not an ECMAScript module) */function(e,t,n){"use strict";n.r(t);var a=n(0),l=n(26),r=n(40),c=n.n(r),o=n(55),i=n(28),s=n(1635),u=n(298),m=n(15),d=n(68),f=n(6),p=n(294),h=n(46),g=n(229),w=n(155),b=n(56),E=n(1),v=n.n(E),_=n(2),y=n(232),k=n(59),A=n.n(k),C=n(8),N=n(22),O=n(14),S=n.n(O),j=n(119),T=n(191),W=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();var x=[{content:"wallet.answer_right",isAnswer:!0},{content:"wallet.answer_wrong_1"},{content:"wallet.answer_wrong_2"},{content:"wallet.answer_wrong_3"}],P=function(e){for(var t=e.slice(),n=[],a=0,l=t.length;a<l;a++){var r=Math.floor(Math.random()*t.length);n=n.concat(t.splice(r,1))}return n},F=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.messyOptions=P(x),n.state={answerRight:!1,warning:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["Component"]),W(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.onKnownWallet;return a.createElement("div",{className:t+" wallet-tips",style:{fontSize:"1.2rem",maxWidth:"56em",marginTop:"3em",padding:"1em"}},a.createElement("h2",{style:Object(T.b)("row","flex-start","center")},a.createElement(j.k,{icon:"info",style:{marginRight:"0.8rem"}}),a.createElement(v.a,{content:"login.backup_your_wallet"})),a.createElement("div",{style:{marginTop:"2em"}}),a.createElement(v.a,{component:"p",content:"warningDetail.p1"}),a.createElement(v.a,{component:"p",content:"warningDetail.p2"}),a.createElement(v.a,{component:"p",content:"warningDetail.p3"}),a.createElement("div",{style:{marginTop:"3em",textAlign:"right"}},a.createElement(j.g,{onClick:n,type:"primary"},a.createElement(v.a,{content:"login.create_local"})," > ")))}}]),t}(),D=n(1634),R=n(231),B=n(1563),I=n(41),M=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}();function V(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var G=Object(I.a)(function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.accountNameInput=null,n.passwordInput=null,n.setCaptcha=function(e){n.setState({cap:e})},n._onBackupDownload=function(){n.setState({step:3})},n.state={knownWallet:!1,validAccountName:!1,accountName:"",validPassword:!1,registrar_account:null,loading:!1,hide_refcode:!0,show_identicon:!1,step:1,cap:{id:null,captcha:null}},n.onFinishConfirm=n.onFinishConfirm.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,a["Component"]),M(t,[{key:"componentWillMount",value:function(){N.a.changeSetting({setting:"passwordLogin",value:!1})}},{key:"componentDidMount",value:function(){A.a.rebuild()}},{key:"shouldComponentUpdate",value:function(e,t){return!C.a.are_equal_shallow(t,this.state)}},{key:"isValid",value:function(){var e=0===i.a.getMyAccounts().length,t=this.state.validAccountName;if(m.a.getWallet()||(t=t&&this.state.validPassword),!e)return t=t&&this.state.registrar_account;var n=this.state.cap,a=n.id,l=n.captcha;return t&&!!a&&!!l}},{key:"onAccountNameChange",value:function(e){var t={};void 0!==e.valid&&(t.validAccountName=e.valid),void 0!==e.value&&(t.accountName=e.value),this.state.show_identicon||(t.show_identicon=!0),this.setState(t)}},{key:"onPasswordChange",value:function(e){this.setState({password:e.value,validPassword:e.valid})}},{key:"onFinishConfirm",value:function(e){var t=this;e.included&&e.broadcasted_transaction&&(g.a.unlisten(this.onFinishConfirm),g.a.reset(),Object(_.f)("getAccount",this.state.accountName,void 0,V({},this.state.accountName,!0)).then(function(){console.log("onFinishConfirm"),t.props.router.push("/wallet/backup/create?newAccount=true")}))}},{key:"createAccount",value:function(e){var t=this,n=this.state.cap,a=this.refs.refcode?this.refs.refcode.value():null,l=i.a.getState().referralAccount;h.a.unlock().then(function(){t.setState({loading:!0}),o.a.createAccount(e,t.state.registrar_account,l||t.state.registrar_account,0,a,n).then(function(){t.state.registrar_account?(Object(_.f)("getAccount",e,void 0,V({},e,!0)).then(function(){t.setState({step:2,loading:!1})}),g.a.listen(t.onFinishConfirm)):Object(_.f)("getAccount",e,void 0,V({},e,!0)).then(function(){t.setState({step:2,loading:!1})})}).catch(function(n){console.log("ERROR AccountActions.createAccount",n);var a=n||"unknown error";d.b.addNotification({message:"Failed to create account: "+e+" - "+a,level:"error",autoDismiss:5}),t.cap&&t.cap.updateCaptcha(),t.setState({loading:!1})})})}},{key:"createWallet",value:function(e){return b.a.setWallet("default",e).then(function(){console.log("Congratulations, your wallet was successfully created.")}).catch(function(e){console.log("CreateWallet failed:",e),d.b.addNotification({message:"Failed to create wallet: "+e,level:"error",autoDismiss:10})})}},{key:"onSubmit",value:function(e){var t=this;if(e.preventDefault(),this.isValid()){var n=this.accountNameInput.getValue();if(console.debug("AccoutnName: ",n),m.a.getWallet())this.createAccount(n);else{var a=this.state.password;console.debug("AccoutnName: Passwords",a),this.createWallet(a).then(function(){return t.createAccount(n)})}}}},{key:"onRegistrarAccountChange",value:function(e){this.setState({registrar_account:e})}},{key:"_getAccount",value:function(){var e=i.a.getMyAccounts();return{my_accounts:e,firstAccount:0===e.length}}},{key:"_renderAccountCreateForm",value:function(){var e=this,t=this.state.registrar_account,n=this._getAccount(),l=n.my_accounts,r=n.firstAccount,o=m.a.getWallet(),i=this.isValid(),d=!1,f=t?_.b.getAccount(t):null;f&&f.get("lifetime_referrer")==f.get("id")&&(d=!0),console.debug("Vdlis: ",i,t,d);c()("submit-button button no-margin",{disabled:!i||t&&!d});return a.createElement("div",{style:[Object(j.b)(),j.a]},a.createElement("form",{style:[{width:"60%",padding:"1em"},Object(j.c)(1,1,"60%")],onSubmit:this.onSubmit.bind(this),noValidate:!0},a.createElement(s.a,{ref:function(t){t&&(e.accountNameInput=t.refs.nameInput)},cheapNameOnly:!!r,onChange:this.onAccountNameChange.bind(this),accountShouldNotExist:!0,placeholder:S.a.translate("wallet.account_public"),noLabel:!0}),o?null:a.createElement(u.a,{ref:"password",confirmation:!0,onChange:this.onPasswordChange.bind(this),noLabel:!0,checkStrength:!0}),r?null:a.createElement("div",{className:"full-width-content form-group no-overflow"},a.createElement("label",null,a.createElement(v.a,{content:"account.pay_from"})),a.createElement(p.a,{account_names:l,onChange:this.onRegistrarAccountChange.bind(this)}),t&&!d?a.createElement("div",{style:{textAlign:"left"},className:"facolor-error"},a.createElement(v.a,{content:"wallet.must_be_ltm"})):null),r&&a.createElement("div",{className:"full-width-content form-group"},a.createElement("label",null,a.createElement(v.a,{content:"captcha.label"})),a.createElement(D.a,{onCapthaChange:this.setCaptcha})),a.createElement("div",{style:{marginTop:"1em"}}),this.state.loading?a.createElement(w.a,{type:"three-bounce"}):a.createElement(j.g,{disabled:!i||t&&!d,style:{width:"100%"},type:"primary"},a.createElement(v.a,{content:"account.create_account"})),!o||r?null:a.createElement("div",{style:{paddingTop:20}},a.createElement("label",null,a.createElement("a",{onClick:function(){e.setState({step:3})}},a.createElement(v.a,{content:"wallet.go_get_started"}))))),a.createElement(R.WalletInfo,{mode:1,withSwitcher:!0,style:{width:"40%",justifyContent:"flex-start"}}))}},{key:"_renderWalletTips",value:function(){return a.createElement("div",null,"Tips")}},{key:"_renderBackup",value:function(){return a.createElement("div",{className:"backup-submit"},a.createElement("p",null,a.createElement(v.a,{unsafe:!0,content:"wallet.wallet_crucial"})),a.createElement("div",{className:"divider"}),a.createElement(y.BackupCreate,{noText:!0,downloadCb:this._onBackupDownload}))}},{key:"_renderBackupText",value:function(){return a.createElement("div",null,a.createElement("p",{style:{fontWeight:"bold"}},a.createElement(v.a,{content:"footer.backup"})),a.createElement("p",null,a.createElement(v.a,{content:"wallet.wallet_move",unsafe:!0})),a.createElement("p",{className:"txtlabel warning"},a.createElement(v.a,{unsafe:!0,content:"wallet.wallet_lose_warning"})))}},{key:"_renderGetStarted",value:function(){return a.createElement("div",null,a.createElement("table",{className:"table"},a.createElement("tbody",null,a.createElement("tr",null,a.createElement("td",null,a.createElement(v.a,{content:"wallet.tips_dashboard"}),":"),a.createElement("td",null,a.createElement(f.b,{to:"/dashboard"},a.createElement(v.a,{content:"header.dashboard"})))),a.createElement("tr",null,a.createElement("td",null,a.createElement(v.a,{content:"wallet.tips_account"}),":"),a.createElement("td",null,a.createElement(f.b,{to:"/account/"+this.state.accountName+"/overview"},a.createElement(v.a,{content:"wallet.link_account"})))),a.createElement("tr",null,a.createElement("td",null,a.createElement(v.a,{content:"wallet.tips_transfer"}),":"),a.createElement("td",null,a.createElement(f.b,{to:"/transfer"},a.createElement(v.a,{content:"wallet.link_transfer"})))),a.createElement("tr",null,a.createElement("td",null,a.createElement(v.a,{content:"wallet.tips_settings"}),":"),a.createElement("td",null,a.createElement(f.b,{to:"/settings"},a.createElement(v.a,{content:"header.settings"})))))))}},{key:"_renderGetStartedText",value:function(){return a.createElement("div",null,a.createElement("p",{style:{fontWeight:"bold"}},a.createElement(v.a,{content:"wallet.congrat"})),a.createElement("p",null,a.createElement(v.a,{content:"wallet.tips_explore"})),a.createElement("p",null,a.createElement(v.a,{content:"wallet.tips_header"})),a.createElement("p",{className:"txtlabel warning"},a.createElement(v.a,{content:"wallet.tips_login"})))}},{key:"render",value:function(){var e=this,t=this.state.step,n=this._getAccount().firstAccount;return a.createElement("div",{className:"readable anim-fade",style:[{margin:"1em auto auto auto"}]},!this.state.knownWallet&&n?a.createElement(F,{onKnownWallet:function(){return e.setState({knownWallet:!0})}}):a.createElement("div",null,a.createElement("h2",{className:"text-center"},n?a.createElement(v.a,{content:"wallet.create_w_a"}):a.createElement(v.a,{content:"wallet.create_a"})),1===t?this._renderAccountCreateForm():2===t?this._renderBackup():this._renderGetStarted(),1===t?null:2===t?this._renderBackupText():this._renderGetStartedText()),1===t&&a.createElement(B.a,{style:{marginTop:"2em",marginBottom:"2em"}}))}}]),t}());t.default=Object(l.connect)(G,{listenTo:function(){return[i.a]},getProps:function(){return{}}})}}]);