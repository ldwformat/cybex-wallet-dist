(window.webpackJsonp=window.webpackJsonp||[]).push([[259,244],{2261:function(e,t,n){"use strict";n.r(t);var r=n(0),a=n(67),o=n(27),s=n(10),i=n(74),c=n(2292),l=n(2),u=n(2270),p=n(1109),d=n(69),m=n.n(d),h=n(2309),f=n(1),g=n.n(f),v=n(21),b=n(2279),y=n(8),_=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var E=Object.keys(c.a).slice(0,2),w=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.last_path=null,n._depositClick=function(e){var t=n.props.account;return b.b.showDepositModal(t.get("name"),E[e])},n._withdrawClick=function(e){b.b.showWithdrawModal("JADE.ETH")},n.state={showAdvanced:e.viewSettings.get("showAdvanced",!1),showQR:e.viewSettings.get("showDepositQR",!1)},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["Component"]),_(t,[{key:"shouldComponentUpdate",value:function(e,t){var n=this.last_path!==window.location.hash;return this.last_path=window.location.hash,n||this.props.account!==e.account||this.props.linkedAccounts!==e.linkedAccounts||this.props.isMyAccount!==e.isMyAccount||t.showAdvanced!==this.state.showAdvanced||t.showQR!==this.state.showQR||t.titleClass!==this.state.titleClass}},{key:"componentWillUnmount",value:function(){m.a.hide()}},{key:"onLinkAccount",value:function(e){e.preventDefault(),a.a.linkAccount(this.props.account.get("name"))}},{key:"onUnlinkAccount",value:function(e){e.preventDefault(),a.a.unlinkAccount(this.props.account.get("name"))}},{key:"_toggleAdvanced",value:function(e){e.preventDefault();var t=!this.state.showAdvanced;this.setState({showAdvanced:t}),v.a.changeViewSetting({showAdvanced:t})}},{key:"_toggleQR",value:function(e){this.setState({showQR:e}),v.a.changeViewSetting({showDepositQR:e})}},{key:"render",value:function(){var e,t=this,n=this.props,a=n.account,o=n.linkedAccounts,s=n.isMyAccount,i=n.passwordLogin,c=a.get("name");e=s?null:o.has(c)?r.createElement("span",{className:"button block-button",onClick:this.onUnlinkAccount.bind(this)},r.createElement(g.a,{content:"account.unfollow"})):r.createElement("span",{className:"button block-button",onClick:this.onLinkAccount.bind(this)},r.createElement(g.a,{content:"account.follow"}));var l=this.state.showAdvanced?r.createElement("span",null,"▼"):r.createElement("span",null,"▲"),d={height:150,width:150};return r.createElement("div",{className:"grid-block vertical account-left-panel no-padding no-overflow"},r.createElement("div",{className:"grid-block"},r.createElement("div",{className:"grid-content no-padding",style:{overflowX:"hidden"}},r.createElement("div",{className:"regular-padding vertical-center"},r.createElement(h.a,{account:a.get("id"),image_size:d,my_account:s,showQR:this.state.showQR,toggleQR:this._toggleQR.bind(this),titleClass:this.state.titleClass}),r.createElement("div",{className:"grid-container no-margin full-width-content",style:{paddingTop:20,maxWidth:d.width}},r.createElement("div",{style:{paddingBottom:15}},r.createElement(p.a,{to:"/transfer/?to="+c},r.createElement(g.a,{className:"button block-button no-margin",content:"account.pay"}))),e,s&&r.createElement(g.a,{component:"button",content:"wallet.link_deposit_asset",className:"button",asset:y.a.replaceName(E[1]).name,onClick:function(){return t._depositClick(1)}}),s&&r.createElement(g.a,{component:"button",content:"wallet.link_deposit_asset",className:"margin-top button",asset:y.a.replaceName(E[0]).name,onClick:function(){return t._depositClick(0)}}))),r.createElement("section",{className:"block-list"},r.createElement("ul",{className:"account-left-menu",style:{marginBottom:0}},r.createElement("li",null,r.createElement(u.a,{to:"/account/"+c+"/dashboard/",activeClassName:"active"},r.createElement(g.a,{content:"header.dashboard"}))),r.createElement("li",null,r.createElement(u.a,{to:"/account/"+c+"/member-stats/",activeClassName:"active"},r.createElement(g.a,{content:"account.member.stats"}))),r.createElement("li",null,r.createElement(u.a,{to:"/account/"+c+"/voting/",activeClassName:"active"},r.createElement(g.a,{content:"account.voting"}))))),r.createElement("div",{style:{paddingBottom:10,paddingTop:20}},r.createElement("div",{className:"grid-container no-margin advanced-toggle"},r.createElement("a",{onClick:this._toggleAdvanced.bind(this),className:"button outline small block-button",style:{border:"none",textAlign:"left",paddingLeft:"1.75rem"}},r.createElement(g.a,{content:"account.user_issued_assets.advanced"}),r.createElement("span",null," ",l)))),r.createElement("section",{className:"block-list"},this.state.showAdvanced?r.createElement("ul",{className:"account-left-menu"},r.createElement("li",null,r.createElement(u.a,{to:"/account/"+c+"/assets/",activeClassName:"active"},r.createElement(g.a,{content:"account.user_issued_assets.issued_assets"}))),r.createElement("li",null,r.createElement(u.a,{to:"/account/"+c+"/permissions/",activeClassName:"active"},r.createElement(g.a,{content:"account.permissions"}))),this.props.advancedMode&&r.createElement("li",null,r.createElement(u.a,{to:"/account/"+c+"/whitelist/",activeClassName:"active"},r.createElement(g.a,{content:"account.whitelist.title"}))),s?r.createElement("li",null,r.createElement(u.a,{to:"/account/"+c+"/vesting/",activeClassName:"active"},r.createElement(g.a,{content:"account.vesting.title"}))):null):null),s&&!i&&r.createElement("div",{className:"regular-padding vertical-center"},r.createElement("div",{className:"button block-button create-account-button"},r.createElement(p.a,{to:"/create-account/"+(this.props.passwordLogin?"password":"wallet")},r.createElement(g.a,{content:"account.create_new"})))))))}}]),t}();w.propTypes={account:l.object.isRequired,advancedMode:l.bool.isRequired,linkedAccounts:l.object},w.defaultProps={advancedMode:!1};var k=w,O=n(22),C=n(24),T=n(16),A=n(148),N=n(2353),P=n(2352),S=n(5),x=n.n(S),j=n(2254),I=n(1108),R=n(2250),D=n(2284),M=n(2329),F=n(124),q=n(19),B=n(39),L=n.n(B),Q=n(35),U=n(266),K=n(30),V=n(31),W=n(2420),z=n(335),G=n(9),H=n.n(G),J=n(2277),Y=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var X=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={amount:0},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["Component"]),Y(t,[{key:"onAmountChanged",value:function(e){var t=e.amount,n=e.asset;this.setState({amount:t,asset:n})}},{key:"onSubmit",value:function(){var e=y.a.get_asset_precision(this.state.asset.get("precision")),t=this.state.amount.replace(/,/g,"");t*=e,D.a.reserveAsset(t,this.props.assetId,this.props.account.get("id")),this.props.onClose()}},{key:"render",value:function(){var e=this.props.assetId;return r.createElement("form",{className:"grid-block vertical full-width-content"},r.createElement(g.a,{component:"h3",content:"modal.reserve.title"}),r.createElement("div",{className:"grid-container ",style:{paddingTop:"2rem"}},r.createElement("div",{className:"content-block"},r.createElement(J.a,{label:"modal.reserve.amount",amount:this.state.amount,onChange:this.onAmountChanged.bind(this),asset:e,assets:[e],display_balance:r.createElement(z.a,{balance:this.props.account.getIn(["balances",e])}),tabIndex:1})),r.createElement("div",{className:"content-block button-group"},r.createElement("input",{type:"submit",className:"button success",onClick:this.onSubmit.bind(this),value:H.a.translate("modal.reserve.submit"),tabIndex:2}),r.createElement("div",{className:"button",onClick:this.props.onClose,tabIndex:3},H.a.translate("cancel")))))}}]),t}(),$=n(215),Z=n(13),ee=n(4),te=n(11),ne=n(153),re=n(177),ae=n(7),oe=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var se=function(e,t,n,r){return new(n||(n=Promise))(function(a,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function i(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(s,i)}c((r=r.apply(e,t||[])).next())})},ie=Object(re.a)("CrowdFundActions"),ce=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return oe(e,[{key:"queryAllCrowdFunds",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:20,n=arguments[2];return se(this,void 0,void 0,regeneratorRuntime.mark(function r(){var a,o,s;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return a="1.16."+e.toString(),r.next=3,ee.a.instance().db_api().exec("list_crowdfund_objects",[a,t]);case 3:if(o=(o=r.sent).map(function(e){return Object.assign({},e,{beginMoment:ae.utc(e.begin)})}),!n){r.next=10;break}return r.next=8,Promise.all([this.queryAccountInitCrowds(n),this.queryAccountPartiCrowds(n)]);case 8:s=r.sent,ie("AccountCrowd: ",s);case 10:ie("Query All Funds RES: ",o),this.allFundsFetched({start:e,size:t,res:o});case 12:case"end":return r.stop()}},r,this)}))}},{key:"queryAccountInitCrowds",value:function(e){return se(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ee.a.instance().db_api().exec("get_crowdfund_objects",[e]);case 2:return n=t.sent,ie("Query Init RES: ",n),this.accountInitFundsFetched(n),t.abrupt("return",n);case 6:case"end":return t.stop()}},t,this)}))}},{key:"queryAccountPartiCrowds",value:function(e){return se(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,ee.a.instance().db_api().exec("get_crowdfund_contract_objects",[e]);case 2:return n=(n=t.sent).map(function(e){return Object.assign({},e,{whenM:ae.utc(e.when)})}),ie("Query Fund RES: ",n),this.accountPartiFundsFetched(n),t.abrupt("return",n);case 7:case"end":return t.stop()}},t,this)}))}},{key:"initCrowdFund",value:function(e){return se(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object.assign({fee:{asset_id:0,amount:0}},e),(r=ne.a.new_transaction()).add_type_operation("initiate_crowdfund",n),t.prev=3,t.next=6,te.a.process_transaction(r,null,!0);case 6:return t.abrupt("return",function(e){return e(!0)});case 9:return t.prev=9,t.t0=t.catch(3),t.abrupt("return",function(e){return e(!1)});case 12:case"end":return t.stop()}},t,this,[[3,9]])}))}},{key:"partiCrowd",value:function(e){return se(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=Object.assign({fee:{asset_id:0,amount:0}},e),(r=ne.a.new_transaction()).add_type_operation("participate_crowdfund",n),t.prev=3,t.next=6,te.a.process_transaction(r,null,!0);case 6:return t.abrupt("return",function(e){return e(!0)});case 9:return t.prev=9,t.t0=t.catch(3),t.abrupt("return",function(e){return e(!1)});case 12:case"end":return t.stop()}},t,this,[[3,9]])}))}},{key:"withdrawCrowdFund",value:function(e,t){return se(this,void 0,void 0,regeneratorRuntime.mark(function n(){var r,a;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r={fee:{amount:0,asset_id:"1.3.0"},buyer:e,crowdfund_contract:t},(a=ne.a.new_transaction()).add_type_operation("withdraw_crowdfund",r),n.prev=3,n.next=6,te.a.process_transaction(a,null,!0);case 6:return n.abrupt("return",function(e){return e(!0)});case 9:return n.prev=9,n.t0=n.catch(3),n.abrupt("return",function(e){return e(!1)});case 12:case"end":return n.stop()}},n,this,[[3,9]])}))}},{key:"allFundsFetched",value:function(e){return e}},{key:"accountInitFundsFetched",value:function(e){return e}},{key:"accountPartiFundsFetched",value:function(e){return e}}]),e}(),le=Z.a.createActions(ce),ue=n(41),pe=n(140),de=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var me=Object(pe.a)("CrowdFundStore"),he=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={allFunds:Object(S.List)(),initCrowds:[],partiCrowds:[]},e.bindListeners({onAllFundsFetched:le.allFundsFetched,onAccountPartiFundsFetched:le.accountPartiFundsFetched,onAccountInitFundsFetched:le.accountInitFundsFetched}),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,ue["a"]),de(t,[{key:"onAllFundsFetched",value:function(e){var t=e.res,n=e.start,r=(e.size,this.state.allFunds.take(n));r=r.concat(t),this.setState({allFunds:r}),me("onAllFundsFetched: ",this)}},{key:"onAccountInitFundsFetched",value:function(e){this.setState({initCrowds:e}),me("onAccountInitFundsFetched: ",this)}},{key:"onAccountPartiFundsFetched",value:function(e){this.setState({partiCrowds:e}),me("onAccountPartiFundsFetched: ",this)}}]),t}(),fe=Z.a.createStore(he,"CrowdFundStore"),ge=n(2314),ve=n(129),be=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var ye=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onSubmit=function(e){e.preventDefault();var t=n.state,r=t.u,a=t.t,o=n.props.asset;n.props.onSubmit({t:a,u:r,asset:o})},n.onPeriodChange=function(e){return function(t){n.setState(function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},e,t))}},n.state={u:18e3,t:3600},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["Component"]),be(t,[{key:"render",value:function(){var e=this.props.asset,t=this.state,n=t.u,a=t.t,o=n>0&&a>0;return r.createElement("form",{className:"grid-block vertical full-width-content"},r.createElement("h4",null,e&&e.symbol),r.createElement("div",{className:"grid-container ",style:{paddingTop:"2rem"}},r.createElement("div",{className:"content-block"},r.createElement("label",{htmlFor:"crowdU"},r.createElement(g.a,{component:"span",content:"crowdfund.timeLimit"})),r.createElement(ge.a,{className:"period-horizontal",defaultPeriod:n,name:"crowdU",onPeriodChange:this.onPeriodChange("u")})),r.createElement("div",{className:"content-block"},r.createElement("label",{htmlFor:"crowdT"},r.createElement(g.a,{component:"span",content:"crowdfund.timeToLock"})),r.createElement(ge.a,{className:"period-horizontal",defaultPeriod:a,name:"crowdT",onPeriodChange:this.onPeriodChange("t")})),r.createElement("div",{className:"content-block button-group"},r.createElement(g.a,{component:"button",className:Object(ve.a)("button",{disabled:!o}),type:"submit",content:"modal.issue.submit",onClick:this.onSubmit}),r.createElement(g.a,{className:"button",component:"button",onClick:this.props.onClose,content:"cancel"}))))}}]),t}(),_e=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var Ee=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._initCrow=function(e){var t=e.u,n=e.t,r=e.asset;le.initCrowdFund({u:t,t:n,owner:r.issuer,asset_id:r.id})},n.state={create:{symbol:"",name:"",description:"",max_supply:1e15,precision:4},issue:{amount:0,to:"",to_id:"",asset_id:"",symbol:""},errors:{symbol:null},isValid:!1,searchTerm:""},n._searchAccounts=Object(K.debounce)(n._searchAccounts,150),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["Component"]),_e(t,[{key:"_checkAssets",value:function(e,t){if(!this.props.account.get("assets").size){var n=e.sort(function(e,t){return e.symbol>t.symbol?1:e.symbol<t.symbol?-1:0}).last();0===e.size||t?(D.a.getAssetList.defer("A",100),this.setState({assetsFetched:100})):e.size>=this.state.assetsFetched&&(D.a.getAssetList.defer(n.symbol,100),this.setState({assetsFetched:this.state.assetsFetched+99}))}}},{key:"_checkInitedCrowd",value:function(e){e&&e.get("id")&&le.queryAccountInitCrowds(e.get("id"))}},{key:"componentWillReceiveProps",value:function(e){this._checkAssets(e.assets),this.props.account.get("id")!==e.account.get("id")&&this._checkInitedCrowd(e.account),this.props.notification!==e.notification&&(this._checkAssets(this.props.assets,!0),this._checkInitedCrowd(this.props.account))}},{key:"componentWillMount",value:function(){this._checkAssets(this.props.assets,!0),this._checkInitedCrowd(this.props.account)}},{key:"_onIssueInput",value:function(e,t){var n=t.target.id,r=this.state.issue;if("to"===n){this._searchAccounts(t.target.value),r.to=t.target.value;var a=this.props.searchAccounts.findEntry(function(e){return e===t.target.value});r.to_id=a?a[0]:null}else r[e]=t.target.value;this.setState({issue:r})}},{key:"_searchAccounts",value:function(e){a.a.accountSearch(e)}},{key:"_issueAsset",value:function(e,t){var n=this;t.preventDefault(),L.a.publish("issue_asset","close");var r=this.state.issue,a=this.props.assets.get(r.asset_id);r.amount*=y.a.get_asset_precision(a.precision),D.a.issueAsset(e,r).then(function(e){e?(Q.b.addNotification({message:"Successfully issued "+y.a.format_asset(r.amount,n.props.assets.get(r.asset_id)),level:"success",autoDismiss:10}),ChainStore.getAsset(r.asset_id)):Q.b.addNotification({message:"Failed to issue asset",level:"error",autoDismiss:10})})}},{key:"_reserveButtonClick",value:function(e,t){t.preventDefault(),this.setState({reserve:e}),L.a.publish("reserve_asset","open")}},{key:"_reserveAsset",value:function(e,t){t.preventDefault(),L.a.publish("reserve_asset","close");var n=this.state.issue,r=this.props.assets.get(n.asset_id);n.amount*=y.a.get_asset_precision(r.precision),D.a.issueAsset(e,n).then(function(e){})}},{key:"_issueButtonClick",value:function(e,t,n,r){r.preventDefault();var a=this.state.issue;a.asset_id=e,a.symbol=t,this.setState({issue:a,assetToIssue:n}),L.a.publish("issue_asset","open")}},{key:"_showInitCrowdModal",value:function(e){this.setState({assetToIssue:e}),L.a.publish("initCrowdModal","open")}},{key:"_editButtonClick",value:function(e,t,n){n.preventDefault(),this.props.history.push("/account/"+t+"/update-asset/"+e)}},{key:"_onAccountSelect",value:function(e){var t=this.state.issue;t.to=e,t.to_id=this.props.account_name_to_id[e],this.setState({issue:t})}},{key:"render",value:function(){var e=this,t=this.props,n=t.account,a=t.account_name,o=(t.searchAccounts,t.assets),s=t.assetsList,i=t.crowdsInited,c=this.state,l=(c.issue,c.errors,c.isValid,c.create,c.assetToIssue),u=i.map(function(e){return e.asset_id}),d=!0;if(!n)return r.createElement(V.a,{type:"circle"});if(n.notFound&&(d=!1),!d)return r.createElement("div",{className:"grid-block"},r.createElement("h5",null,r.createElement(g.a,{component:"h5",content:"account.errors.not_found",name:a})));s.length&&(o=o.clear(),s.forEach(function(e){e&&(o=o.set(e.get("id"),e.toJS()))}));var m=o.filter(function(e){return e.issuer===n.get("id")}).sort(function(e,t){return parseInt(e.id.substring(4,e.id.length),10)-parseInt(t.id.substring(4,t.id.length),10)}).map(function(t){var n=$.a.parseDescription(t.options.description),o=n.short_name?n.short_name:n.main,s=-1!==u.indexOf(t.id);return o.length>100&&(o=o.substr(0,100)+"..."),r.createElement("tr",{key:t.symbol},r.createElement("td",null,r.createElement(p.a,{to:"/asset/"+t.symbol},t.symbol)),r.createElement("td",{style:{maxWidth:"250px"}},o),r.createElement("td",null,r.createElement(q.a,{amount:parseInt(t.dynamic.current_supply,10),asset:t.id})),r.createElement("td",null,r.createElement(q.a,{amount:parseInt(t.options.max_supply,10),asset:t.id})),r.createElement("td",null,t.bitasset_data_id?null:r.createElement("button",{onClick:e._issueButtonClick.bind(e,t.id,t.symbol,t),className:"button outline"},r.createElement(g.a,{content:"transaction.trxTypes.asset_issue"}))),r.createElement("td",null,t.bitasset_data_id?null:r.createElement("button",{onClick:e._reserveButtonClick.bind(e,t.id),className:"button outline"},r.createElement(g.a,{content:"transaction.trxTypes.asset_reserve"}))),r.createElement("td",null,r.createElement("button",{onClick:e._editButtonClick.bind(e,t.symbol,a),className:"button outline"},r.createElement(g.a,{content:"transaction.trxTypes.asset_update"}))),r.createElement("td",null,s?r.createElement(g.a,{component:"button",className:"button disabled outline",content:"transaction.trxTypes.crowd_inited"}):r.createElement("button",{onClick:function(){return e._showInitCrowdModal(t)},className:"button outline"},r.createElement(g.a,{content:"transaction.trxTypes.init_crowd"}))))}).toArray();return r.createElement("div",{className:"grid-content"},r.createElement("div",{className:"content-block generic-bordered-box"},r.createElement("div",{className:"block-content-header"},r.createElement(g.a,{content:"account.user_issued_assets.issued_assets"})),r.createElement("div",{className:"box-content"},r.createElement("table",{className:"table dashboard-table"},r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",null,r.createElement(g.a,{content:"account.user_issued_assets.symbol"})),r.createElement("th",{style:{maxWidth:"200px"}},r.createElement(g.a,{content:"account.user_issued_assets.description"})),r.createElement(g.a,{component:"th",content:"markets.supply"}),r.createElement("th",null,r.createElement(g.a,{content:"account.user_issued_assets.max_supply"})),r.createElement("th",{style:{textAlign:"center"},colSpan:"4"},r.createElement(g.a,{content:"account.perm.action"})))),r.createElement("tbody",null,m)))),r.createElement("div",{className:"content-block"},r.createElement(p.a,{to:"/account/"+a+"/create-asset/"},r.createElement("button",{className:"button outline"},r.createElement(g.a,{content:"transaction.trxTypes.asset_create"})))),r.createElement(F.a,{id:"issue_asset",overlay:!0},r.createElement("br",null),r.createElement("div",{className:"grid-block vertical"},r.createElement(W.a,{asset_to_issue:this.state.issue.asset_id,asset:this.state.assetToIssue,onClose:function(){L.a.publish("issue_asset","close")}}))),r.createElement(F.a,{id:"reserve_asset",overlay:!0},r.createElement("br",null),r.createElement("div",{className:"grid-block vertical"},r.createElement(X,{assetId:this.state.reserve,account:n,onClose:function(){L.a.publish("reserve_asset","close")}}))),r.createElement(F.a,{id:"initCrowdModal",overlay:!0},r.createElement("br",null),r.createElement("div",{className:"grid-block vertical"},r.createElement(ye,{onSubmit:function(t){return e._initCrow(t)},onClose:function(){L.a.publish("initCrowdModal","close")},asset:l}))))}}]),t}();Ee.defaultProps={symbol:"",name:"",description:"",max_supply:0,precision:0,crowdsInited:[]},Ee.propTypes={assetsList:O.a.ChainAssetsList,symbol:l.string.isRequired,crowdsInited:l.array.isRequired},Ee=Object(C.a)(Ee);var we=Object(T.connect)(Ee,{listenTo:function(){return[M.a,fe]},getProps:function(e){var t=Object(S.Map)(),n=Object(S.List)();e.account.get("assets",[]).size?e.account.get("assets",[]).forEach(function(e){n=n.push(e)}):t=M.a.getState().assets;var r=fe.getState().initCrowds;return{assets:t,assetsList:n,notification:U.a.getState().notification,crowdsInited:r}}}),ke=n(26),Oe=n.n(ke),Ce=n(336),Te=n(3),Ae=n(2328),Ne=n(271),Pe=n.n(Ne),Se=n(2283),xe=n(123),je=n.n(xe),Ie=n(339),Re=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},De=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function Me(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Fe(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function qe(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Be=new Pe.a(je.a.GRAPHENE_MAX_SHARE_SUPPLY),Le=function(e){function t(e){Me(this,t);var n=Fe(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={backingAsset:e.backingAsset.get("symbol"),error:null},n}return qe(t,r["Component"]),De(t,[{key:"_onInputBackingAsset",value:function(e){this.setState({backingAsset:e.toUpperCase(),error:null})}},{key:"_onFoundBackingAsset",value:function(e){e&&("1.3.0"===e.get("id")||e.get("bitasset_data_id")&&!e.getIn(["bitasset","is_prediction_market"])?e.get("precision")!==parseInt(this.props.assetPrecision,10)?this.setState({error:H.a.translate("account.user_issued_assets.error_precision",{asset:this.props.assetSymbol})}):this.props.onUpdate("short_backing_asset",e.get("id")):this.setState({error:H.a.translate("account.user_issued_assets.error_invalid")}))}},{key:"render",value:function(){var e=this.props.bitasset_opts,t=this.state.error;return r.createElement("div",{className:"small-12 grid-content"},r.createElement("label",null,r.createElement(g.a,{content:"account.user_issued_assets.feed_lifetime_sec"}),r.createElement("input",{type:"number",value:e.feed_lifetime_sec/60,onChange:this.props.onUpdate.bind(this,"feed_lifetime_sec")})),r.createElement("label",null,r.createElement(g.a,{content:"account.user_issued_assets.minimum_feeds"}),r.createElement("input",{type:"number",value:e.minimum_feeds,onChange:this.props.onUpdate.bind(this,"minimum_feeds")})),r.createElement("label",null,r.createElement(g.a,{content:"account.user_issued_assets.force_settlement_delay_sec"}),r.createElement("input",{type:"number",value:e.force_settlement_delay_sec/60,onChange:this.props.onUpdate.bind(this,"force_settlement_delay_sec")})),r.createElement("label",null,r.createElement(g.a,{content:"account.user_issued_assets.force_settlement_offset_percent"}),r.createElement("input",{type:"number",value:e.force_settlement_offset_percent/je.a.GRAPHENE_1_PERCENT,onChange:this.props.onUpdate.bind(this,"force_settlement_offset_percent")})),r.createElement("label",null,r.createElement(g.a,{content:"account.user_issued_assets.maximum_force_settlement_volume"}),r.createElement("input",{type:"number",value:e.maximum_force_settlement_volume/je.a.GRAPHENE_1_PERCENT,onChange:this.props.onUpdate.bind(this,"maximum_force_settlement_volume")})),r.createElement("div",{className:"grid-block no-margin small-12"},r.createElement(Ae.a,{label:"account.user_issued_assets.backing",onChange:this._onInputBackingAsset.bind(this),asset:this.state.backingAsset,assetInput:this.state.backingAsset,tabIndex:1,style:{width:"100%",paddingRight:"10px"},onFound:this._onFoundBackingAsset.bind(this)}),t?r.createElement("div",{className:"content-block has-error"},t):null))}}]),t}();Le.propTypes={backingAsset:O.a.ChainAsset.isRequired,isUpdate:l.bool},Le.defaultProps={isUpdate:!1},Le=Object(C.a)(Le);var Qe=function(e){function t(e){Me(this,t);var n=Fe(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state=n.resetState(e),n}return qe(t,r["Component"]),De(t,[{key:"resetState",value:function(e){y.a.get_asset_precision(4),y.a.get_asset_precision(e.core.get("precision"));var t=this._getPermissions({isBitAsset:!1}),n=t.flagBooleans,r=t.permissionBooleans;Te.b.getAsset("1.3.0").get("symbol");return{update:{symbol:"",precision:4,max_supply:1e5,max_market_fee:0,vesting_period:30,market_fee_percent:0,description:{main:""}},errors:{max_supply:null},isValid:!1,flagBooleans:n,permissionBooleans:r,isBitAsset:!1,isVestingAsset:!1,is_prediction_market:!1,core_exchange_rate:{quote:{asset_id:null,amount:1},base:{asset_id:"1.3.0",amount:1}},bitasset_opts:{feed_lifetime_sec:86400,minimum_feeds:7,force_settlement_delay_sec:86400,force_settlement_offset_percent:1*je.a.GRAPHENE_1_PERCENT,maximum_force_settlement_volume:20*je.a.GRAPHENE_1_PERCENT,short_backing_asset:"1.3.0"},marketInput:""}}},{key:"_getPermissions",value:function(e){return{flagBooleans:$.a.getFlagBooleans(0,e.isBitAsset),permissionBooleans:$.a.getFlagBooleans("all",e.isBitAsset)}}},{key:"_createAsset",value:function(e){e.preventDefault();var t=this.state,n=t.update,r=t.flagBooleans,a=t.permissionBooleans,o=t.core_exchange_rate,s=t.isBitAsset,i=t.is_prediction_market,c=t.bitasset_opts,l=t.isVestingAsset,u=this.props.account,p=$.a.getFlags(r,s),d=$.a.getPermissions(a,s);this.state.marketInput!==n.description.market&&(n.description.market="");var m=JSON.stringify(n.description),h=Re({},n);l||delete h.vesting_period,D.a.createAsset(u.get("id"),h,p,d,o,s,i,c,m).then(function(e){console.log("... AssetActions.createAsset(account_id, update)",u.get("id"),n,p,d)})}},{key:"_hasChanged",value:function(){return!y.a.are_equal_shallow(this.state,this.resetState(this.props))}},{key:"_reset",value:function(e){e.preventDefault(),this.setState(this.resetState(this.props))}},{key:"_forcePositive",value:function(e){return parseFloat(e)<0?"0":e}},{key:"_onUpdateDescription",value:function(e,t){var n=this.state.update,r=!0;switch(e){case"condition":if(t.target.value.length>60)return void(r=!1);n.description[e]=t.target.value;break;case"short_name":if(t.target.value.length>32)return void(r=!1);n.description[e]=t.target.value;break;case"market":n.description[e]=t;break;case"visible":n.description[e]=!n.description[e];break;default:n.description[e]=t.target.value}r&&(this.forceUpdate(),this._validateEditFields(n))}},{key:"onChangeBitAssetOpts",value:function(e,t){var n=this.state.bitasset_opts;switch(e){case"force_settlement_offset_percent":case"maximum_force_settlement_volume":n[e]=parseFloat(t.target.value)*je.a.GRAPHENE_1_PERCENT;break;case"minimum_feeds":n[e]=parseInt(t.target.value,10);break;case"feed_lifetime_sec":case"force_settlement_delay_sec":console.log(t.target.value,parseInt(60*parseFloat(t.target.value),10)),n[e]=parseInt(60*parseFloat(t.target.value),10);break;case"short_backing_asset":n[e]=t;break;default:n[e]=t.target.value}this.forceUpdate()}},{key:"_onPeriodChange",value:function(e,t){var n=this.state,r=n.update;n.errors;r[e]=this._forcePositive(t),this._validateEditFields(r),this.setState({update:r})}},{key:"_onUpdateInput",value:function(e,t){var n=this.state,r=n.update,a=n.errors,o=!1,s=y.a.get_asset_precision(this.state.update.precision),i=t.target,c=i.selectionStart,l=i.value;switch(e){case"market_fee_percent":r[e]=this._forcePositive(i.value);break;case"max_market_fee":if(new Pe.a(l).times(s).gt(Be))return a.max_market_fee="The number you tried to enter is too large",this.setState({errors:a});i.value=y.a.limitByPrecision(i.value,this.state.update.precision),r[e]=i.value;break;case"precision":r[e]=this._forcePositive(i.value);break;case"max_supply":o=!0,new RegExp(/[[:digit:]]/).test(i.value)||(i.value=i.value.replace(/[^0-9.]/g,"")),"."==i.value.charAt(0)&&(i.value="0."),i.value.charAt(i.value.length)!=i.value.search(".")&&i.value.substr(1),i.value=y.a.limitByPrecision(i.value,this.state.update.precision),r[e]=i.value;break;case"symbol":o=!0;var u=i.value.toUpperCase(),p=new RegExp("^[.A-Z]+$");if(""!==u&&!p.test(u))break;Te.b.getAsset(u),r[e]=this._forcePositive(u);break;default:r[e]=i.value}this.setState({update:r},function(){if(o){var t=c-(l.length-r[e].length);i.setSelectionRange(t,t)}}),this._validateEditFields(r)}},{key:"_validateEditFields",value:function(e,t){var n={max_supply:null};n.symbol=Te.d.is_valid_symbol_error(e.symbol),Te.b.getAsset(e.symbol)&&(n.symbol=H.a.translate("account.user_issued_assets.exists"));try{n.max_supply=e.max_supply<=0?H.a.translate("account.user_issued_assets.max_positive"):new Pe.a(e.max_supply).times(Math.pow(10,e.precision)).gt(Be)?H.a.translate("account.user_issued_assets.too_large"):null}catch(e){console.log("err:",e),n.max_supply=H.a.translate("account.user_issued_assets.too_large")}var r=!n.symbol&&!n.max_supply;this.state.isVestingAsset&&(r=r&&e.vesting_period>0),this.setState({isValid:r,errors:n})}},{key:"_onFlagChange",value:function(e){var t=this.state.flagBooleans;t[e]=!t[e],this.setState({flagBooleans:t})}},{key:"_onPermissionChange",value:function(e){var t=this.state.permissionBooleans;t[e]=!t[e],this.setState({permissionBooleans:t})}},{key:"_onInputCoreAsset",value:function(e,t){"quote"===e?this.setState({quoteAssetInput:t}):"base"===e&&this.setState({baseAssetInput:t})}},{key:"_onFoundCoreAsset",value:function(e,t){if(t){var n=this.state.core_exchange_rate;n[e].asset_id=t.get("id"),this.setState({core_exchange_rate:n}),this._validateEditFields({max_supply:this.state.max_supply,core_exchange_rate:n})}}},{key:"_onInputMarket",value:function(e){this.setState({marketInput:e})}},{key:"_onFoundMarketAsset",value:function(e){e&&this._onUpdateDescription("market",e.get("symbol"))}},{key:"_onCoreRateChange",value:function(e,t){var n=void 0,r=void 0;if("quote"===e)n=y.a.limitByPrecision(t.target.value,this.state.update.precision),r=null;else{if(!(t&&"amount"in t))return;n=""==t.amount?"0":y.a.limitByPrecision(t.amount.toString().replace(/,/g,""),this.props.core.get("precision")),r=t.asset.get("id")}this.state.core_exchange_rate[e]={amount:n,asset_id:r},this.forceUpdate()}},{key:"_onToggleBitAsset",value:function(){this.state.update;this.state.isBitAsset=!this.state.isBitAsset,this.state.isBitAsset||(this.state.is_prediction_market=!1);var e=this._getPermissions(this.state),t=e.flagBooleans,n=e.permissionBooleans;this.state.flagBooleans=t,this.state.permissionBooleans=n,this.forceUpdate()}},{key:"_onToggleVestingAsset",value:function(){this.setState(function(e){return{isVestingAsset:!e.isVestingAsset}})}},{key:"_onTogglePM",value:function(){this.state.is_prediction_market=!this.state.is_prediction_market,this.state.update.precision=this.props.core.get("precision"),this.state.core_exchange_rate.base.asset_id=this.props.core.get("id"),this.forceUpdate()}},{key:"render",value:function(){var e=this.props,t=e.globalObject,n=e.core,a=this.state,o=a.errors,s=a.isValid,i=a.update,c=a.flagBooleans,l=a.permissionBooleans,u=a.core_exchange_rate,p=a.is_prediction_market,d=a.isBitAsset,m=a.isVestingAsset,h=a.bitasset_opts,f=i.symbol.length,v="N/A";3===f?v=r.createElement(q.a,{amount:Object(Ie.c)("asset_create",["symbol3"],t),asset:"1.3.0"}):4===f?v=r.createElement(q.a,{amount:Object(Ie.c)("asset_create",["symbol4"],t),asset:"1.3.0"}):f>4&&(v=r.createElement(q.a,{amount:Object(Ie.c)("asset_create",["long_symbol"],t),asset:"1.3.0"}));var b=[],_=function(e,t,n){return r.createElement("table",{key:"table_"+e,className:"table"},r.createElement("tbody",null,r.createElement("tr",null,r.createElement("td",{style:{border:"none",width:"80%"}},r.createElement(g.a,{content:"account.user_issued_assets."+e}),":"),r.createElement("td",{style:{border:"none"}},r.createElement("div",{className:"switch",style:{marginBottom:"10px"},onClick:t},r.createElement("input",{type:"checkbox",checked:n}),r.createElement("label",null))))))};for(var E in l)l[E]&&"charge_market_fee"!==E&&b.push(_(E,this._onFlagChange.bind(this,E),c[E]));b.push(_("visible",this._onUpdateDescription.bind(this,"visible"),!i.description.visible&&!1===i.description.visible));var w=[];for(var k in l)w.push(r.createElement("table",{key:"table_"+k,className:"table"},r.createElement("tbody",null,r.createElement("tr",null,r.createElement("td",{style:{border:"none",width:"80%"}},r.createElement(g.a,{content:"account.user_issued_assets."+k}),":"),r.createElement("td",{style:{border:"none"}},r.createElement("div",{className:"switch",style:{marginBottom:"10px"},onClick:this._onPermissionChange.bind(this,k)},r.createElement("input",{type:"checkbox",checked:l[k],onChange:function(){}}),r.createElement("label",null)))))));return r.createElement("div",{className:"grid-block"},r.createElement("div",{className:"grid-content"},r.createElement(g.a,{component:"h3",content:"header.create_asset"}),r.createElement(Se.b,{setting:"overviewTab",segmented:!1,className:"overview-tabs with-shadow",style:{width:"100%"},contentClass:"grid-block shrink small-vertical medium-horizontal full-container",tabsClass:"account-overview no-padding bordered-header content-block"},r.createElement(Se.a,{title:"account.user_issued_assets.primary"},r.createElement("div",{className:"small-12 grid-content"},r.createElement("h3",null,r.createElement(g.a,{content:"account.user_issued_assets.primary"})),r.createElement("label",null,r.createElement(g.a,{content:"account.user_issued_assets.symbol"}),r.createElement("input",{type:"text",value:i.symbol,onChange:this._onUpdateInput.bind(this,"symbol")})),o.symbol?r.createElement("p",{className:"grid-content has-error"},o.symbol):null,r.createElement("label",null,r.createElement(g.a,{content:"account.user_issued_assets.max_supply"})," ",i.symbol?r.createElement("span",null,"(",i.symbol,")"):null,r.createElement("input",{type:"text",value:i.max_supply,onChange:this._onUpdateInput.bind(this,"max_supply")})),o.max_supply?r.createElement("p",{className:"grid-content has-error"},o.max_supply):null,r.createElement("label",null,r.createElement(g.a,{content:"account.user_issued_assets.decimals"}),r.createElement("input",{min:"0",max:"8",step:"1",type:"range",value:i.precision,onChange:this._onUpdateInput.bind(this,"precision")})),r.createElement("p",null,i.precision),r.createElement("div",{style:{marginBottom:10},className:"txtlabel cancel"},r.createElement(g.a,{content:"account.user_issued_assets.precision_warning"})),m&&r.createElement("div",{className:"form-group grid-block grid-x-padding full-container"},r.createElement(g.a,{component:"span",htmlFor:"vestingPeriod",className:"left-label small-12 medium-12",content:"account.user_issued_assets.vesting_period"}),r.createElement(ge.a,{className:"period-horizontal",defaultPeriod:this.state.update.vesting_period,name:"create",onPeriodChange:this._onPeriodChange.bind(this,"vesting_period")})),r.createElement("div",{className:"grid-block full-container switch-container"},r.createElement(g.a,{component:"div",className:"small-3",content:"account.user_issued_assets.mpa"}),r.createElement("div",{className:"small-9 text-right"},r.createElement("div",{className:"switch"},r.createElement("input",{id:"isBitAsset",type:"checkbox",checked:d,onChange:this._onToggleBitAsset.bind(this)}),r.createElement("label",{htmlFor:"isBitAsset"})))),d&&r.createElement("div",{className:"grid-block full-container switch-container"},r.createElement(g.a,{component:"div",className:"small-3",content:"account.user_issued_assets.pm"}),r.createElement("div",{className:"small-9 text-right"},r.createElement("div",{className:"switch"},r.createElement("input",{id:"predictionMarket",type:"checkbox",checked:p,onChange:this._onTogglePM.bind(this)}),r.createElement("label",{htmlFor:"predictionMarket"})))),r.createElement(g.a,{component:"h3",content:"account.user_issued_assets.core_exchange_rate"}),r.createElement("label",null,r.createElement("div",{className:"grid-block no-margin"},o.quote_asset?r.createElement("p",{className:"grid-content has-error"},o.quote_asset):null,o.base_asset?r.createElement("p",{className:"grid-content has-error"},o.base_asset):null,r.createElement("div",{className:"grid-block no-margin small-12 medium-6"},r.createElement("div",{className:"amount-selector",style:{width:"100%",paddingRight:"10px"}},r.createElement(g.a,{component:"label",className:"left-label",content:"account.user_issued_assets.quote"}),r.createElement("div",{className:"inline-label"},r.createElement("input",{type:"text",placeholder:"0.0",onChange:this._onCoreRateChange.bind(this,"quote"),value:u.quote.amount})))),r.createElement("div",{className:"grid-block no-margin small-12 medium-6"},r.createElement(J.a,{label:"account.user_issued_assets.base",amount:u.base.amount,onChange:this._onCoreRateChange.bind(this,"base"),asset:u.base.asset_id,assets:[u.base.asset_id],placeholder:"0.0",tabIndex:1,style:{width:"100%"}}))),r.createElement("div",null,r.createElement("h5",null,r.createElement(g.a,{content:"exchange.price"}),r.createElement("span",null,":"," ",y.a.format_number(y.a.get_asset_price(u.quote.amount*y.a.get_asset_precision(i.precision),{precision:i.precision},u.base.amount*y.a.get_asset_precision(n),n),2+(parseInt(i.precision,10)||8))),r.createElement("span",null," ",i.symbol,"/",n.get("symbol"))))),r.createElement("div",null,r.createElement(g.a,{content:"account.user_issued_assets.cer_warning_1",component:"label",className:"has-error"}),r.createElement(g.a,{content:"account.user_issued_assets.cer_warning_2",component:"p"})))),r.createElement(Se.a,{title:"account.user_issued_assets.description"},r.createElement("div",{className:"small-12 grid-content"},r.createElement(g.a,{component:"h3",content:"account.user_issued_assets.description"}),r.createElement("label",null,r.createElement("textarea",{style:{height:"7rem"},rows:"1",value:i.description.main,onChange:this._onUpdateDescription.bind(this,"main")})),r.createElement(g.a,{component:"h3",content:"account.user_issued_assets.short"}),r.createElement("label",null,r.createElement("input",{type:"text",rows:"1",value:i.description.short_name,onChange:this._onUpdateDescription.bind(this,"short_name")})),r.createElement(g.a,{component:"h3",content:"account.user_issued_assets.market"}),r.createElement(Ae.a,{label:"account.user_issued_assets.name",onChange:this._onInputMarket.bind(this),asset:this.state.marketInput,assetInput:this.state.marketInput,style:{width:"100%",paddingRight:"10px"},onFound:this._onFoundMarketAsset.bind(this)}),p?r.createElement("div",null,r.createElement(g.a,{component:"h3",content:"account.user_issued_assets.condition"}),r.createElement("label",null,r.createElement("input",{type:"text",rows:"1",value:i.description.condition,onChange:this._onUpdateDescription.bind(this,"condition")})),r.createElement(g.a,{component:"h3",content:"account.user_issued_assets.expiry"}),r.createElement("label",null,r.createElement("input",{type:"date",value:i.description.expiry,onChange:this._onUpdateDescription.bind(this,"expiry")}))):null)),d?r.createElement(Se.a,{title:"account.user_issued_assets.bitasset_opts"},r.createElement(Le,{bitasset_opts:h,onUpdate:this.onChangeBitAssetOpts.bind(this),backingAsset:h.short_backing_asset,assetPrecision:i.precision,assetSymbol:i.symbol})):null,r.createElement(Se.a,{title:"account.permissions"},r.createElement("div",{className:"small-12 grid-content"},r.createElement("div",{style:{maxWidth:800}},r.createElement(Ce.a,{path:"components/AccountAssetCreate",section:"permissions"})),w)),r.createElement(Se.a,{title:"account.user_issued_assets.flags"},r.createElement("div",{className:"small-12 grid-content"},r.createElement("div",{style:{maxWidth:800}},r.createElement(Ce.a,{path:"components/AccountAssetCreate",section:"flags"})),l.charge_market_fee?r.createElement("div",null,r.createElement(g.a,{component:"h3",content:"account.user_issued_assets.market_fee"}),r.createElement("table",{className:"table"},r.createElement("tbody",null,r.createElement("tr",null,r.createElement("td",{style:{border:"none",width:"80%"}},r.createElement(g.a,{content:"account.user_issued_assets.charge_market_fee"}),":"),r.createElement("td",{style:{border:"none"}},r.createElement("div",{className:"switch",style:{marginBottom:"10px"},onClick:this._onFlagChange.bind(this,"charge_market_fee")},r.createElement("input",{type:"checkbox",checked:c.charge_market_fee}),r.createElement("label",null)))))),r.createElement("div",{className:Oe()({disabled:!c.charge_market_fee})},r.createElement("label",null,r.createElement(g.a,{content:"account.user_issued_assets.market_fee"})," ","(%)",r.createElement("input",{type:"number",value:i.market_fee_percent,onChange:this._onUpdateInput.bind(this,"market_fee_percent")})),r.createElement("label",null,r.createElement(g.a,{content:"account.user_issued_assets.max_market_fee"})," ","(",i.symbol,")",r.createElement("input",{type:"number",value:i.max_market_fee,onChange:this._onUpdateInput.bind(this,"max_market_fee")})),o.max_market_fee?r.createElement("p",{className:"grid-content has-error"},o.max_market_fee):null)):null,r.createElement("h3",null,r.createElement(g.a,{content:"account.user_issued_assets.flags"})),b))),r.createElement("hr",null),r.createElement("div",{style:{paddingTop:"0.5rem"}},r.createElement("button",{className:Oe()("button",{disabled:!s}),onClick:this._createAsset.bind(this)},r.createElement(g.a,{content:"header.create_asset"})),r.createElement("button",{className:"button outline",onClick:this._reset.bind(this),value:H.a.translate("account.perm.reset")},r.createElement(g.a,{content:"account.perm.reset"})),r.createElement("br",null),r.createElement("br",null),r.createElement("p",null,r.createElement(g.a,{content:"account.user_issued_assets.approx_fee"}),":"," ",v))))}}]),t}();Qe.propTypes={core:O.a.ChainAsset.isRequired,globalObject:O.a.ChainObject.isRequired},Qe.defaultProps={globalObject:"2.0.0",core:"1.3.0"},Qe=Object(C.a)(Qe);var Ue=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var Ke=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["Component"]),Ue(t,[{key:"getFee",value:function(){return Object(Ie.c)(this.props.opType,this.props.options,this.props.globalObject)}},{key:"render",value:function(){var e=this.props,t=e.opType,n=e.options,a=e.globalObject;if(!t||!n||!a)return null;var o=Object(Ie.c)(t,n,a);return r.createElement(q.a,{amount:o,asset:"1.3.0"})}}]),t}();Ke.propTypes={globalObject:O.a.ChainObject.isRequired,opType:l.string,options:l.array},Ke.defaultProps={globalObject:"2.0.0",options:[]};var Ve=Object(C.a)(Ke,{keep_updating:!0}),We=n(85),ze=n(338),Ge=n(139),He=n(146),Je=n(51),Ye=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var Xe=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.state={listType:e.assetWhiteListType,accountTable:-1===e.assetWhiteListType.indexOf("market"),listTypes:["whitelist_authorities","blacklist_authorities","whitelist_markets","blacklist_markets"],assetInput:null,asset_id:null},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["Component"]),Ye(t,[{key:"renderAccountTables",value:function(){var e=this,t=this.state.listType;return this.props.whiteListEnabled?r.createElement("div",null,r.createElement("table",{className:"table dashboard-table"},r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",null,r.createElement(g.a,{content:"explorer.account.title"})),r.createElement("th",null,r.createElement(g.a,{content:"account.perm.remove_text"})))),r.createElement("tbody",null,this.props[t].map(function(n){return r.createElement("tr",{key:n},r.createElement("td",null,r.createElement(Ge.a,{account:n})),r.createElement("td",{className:"clickable",onClick:e.props.onChangeList.bind(e,t,"remove",n)},r.createElement(Je.a,{name:"cross-circle",className:"icon-14px"})))}))),r.createElement("div",{style:{paddingTop:"2rem"}},r.createElement(ze.a,{label:"account.whitelist."+t,accountName:this.props.authority_name,account:this.props.authority_name,onChange:this.props.onAccountNameChanged.bind(this,"authority_name"),onAccountChanged:this.props.onAccountChanged.bind(this,"new_authority_id"),error:null,tabIndex:1,action_label:"account.perm.confirm_add",onAction:this.props.onChangeList.bind(this,t,"add",this.props.new_authority_id)}))):r.createElement("div",null,r.createElement(g.a,{className:"txtlabel cancel",component:"p",content:"explorer.asset.whitelist.enable_flag"}))}},{key:"_onAssetChange",value:function(e){this.setState({assetInput:e})}},{key:"_onAssetFound",value:function(e){this.setState({asset_id:e?e.get("id"):null})}},{key:"renderMarketTable",value:function(){var e=this,t=this.state.listType;return r.createElement("div",null,r.createElement("table",{className:"table dashboard-table"},r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",null,r.createElement(g.a,{content:"explorer.asset.title"})),r.createElement("th",null,r.createElement(g.a,{content:"account.perm.remove_text"})))),r.createElement("tbody",null,this.props[t].map(function(n){return r.createElement("tr",{key:n},r.createElement("td",null,r.createElement(He.a,{asset:n})),r.createElement("td",{className:"clickable",onClick:e.props.onChangeList.bind(e,t,"remove",n)},r.createElement(Je.a,{name:"cross-circle",className:"icon-14px"})))}))),r.createElement("div",{style:{paddingTop:"2rem"}},r.createElement(Ae.a,{label:"explorer.asset.whitelist."+t,onChange:this._onAssetChange.bind(this),asset:this.state.assetInput,assetInput:this.state.assetInput,tabIndex:1,style:{width:"100%"},onFound:this._onAssetFound.bind(this),action_label:"account.perm.confirm_add",onAction:this.props.onChangeList.bind(this,t,"add",this.state.asset_id)})))}},{key:"_onSwitchType",value:function(e){this.setState({listType:e,accountTable:-1===e.indexOf("market")}),v.a.changeViewSetting({assetWhiteListType:e})}},{key:"render",value:function(){var e=this,t=this.state.accountTable,n=this.state.listTypes.indexOf(this.state.listType);return r.createElement("div",{className:"small-12 large-8 grid-content"},r.createElement("div",null,r.createElement("div",{className:"hide-selector",style:{paddingBottom:"2rem"}},this.state.listTypes.map(function(t,a){return r.createElement("div",{key:t,className:Oe()("inline-block",{inactive:n!==a}),onClick:e._onSwitchType.bind(e,t)},r.createElement(g.a,{content:"explorer.asset.whitelist."+t}))})),t?this.renderAccountTables():this.renderMarketTable(),this.props.children))}}]),t}(),$e=Object(T.connect)(Xe,{listenTo:function(){return[s.b]},getProps:function(){return{assetWhiteListType:s.b.getState().viewSettings.get("assetWhiteListType","whitelist_authorities")}}}),Ze=n(2251),et=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},tt=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function nt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function at(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function ot(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var st=new Pe.a(je.a.GRAPHENE_MAX_SHARE_SUPPLY),it=function(e){function t(e){rt(this,t);var n=at(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state=n.resetState(e),n}return ot(t,r["Component"]),tt(t,[{key:"resetState",value:function(e){var t=e.asset.toJS(),n=void 0!==t.bitasset_data_id,r=y.a.get_asset_precision(t.precision),a=y.a.get_asset_precision(e.core.get("precision")),o=new Pe.a(t.options.max_market_fee).div(r).toString(),s=new Pe.a(t.options.max_supply).div(r).toString(),i=t.options.core_exchange_rate;i.quote.amount=i.quote.asset_id===t.id?new Pe.a(i.quote.amount).div(r).toString():new Pe.a(i.quote.amount).div(a).toString(),i.base.amount=i.base.asset_id===t.id?new Pe.a(i.base.amount).div(r).toString():new Pe.a(i.base.amount).div(a).toString();var c=$.a.getFlagBooleans(t.options.flags,n),l=$.a.getFlagBooleans(t.options.issuer_permissions,n);t.options.market_fee_percent/=100;var u=Te.b.getAsset(i.quote.asset_id).get("symbol"),p=Te.b.getAsset(i.base.asset_id).get("symbol");return{update:{max_supply:s,max_market_fee:o,market_fee_percent:t.options.market_fee_percent,description:$.a.parseDescription(t.options.description)},core_exchange_rate:i,issuer:t.issuer,new_issuer_account_id:null,issuer_account_name:null,new_funder_account:e.account.get("id"),funder_account_name:e.account.get("name"),asset_to_update:t.id,errors:{max_supply:null},new_authority_id:null,authority_name:null,isValid:!0,flagBooleans:c,permissionBooleans:l,isBitAsset:n,coreRateQuoteAssetName:u,quoteAssetInput:u,coreRateBaseAssetName:p,baseAssetInput:p,fundPoolAmount:0,claimFeesAmount:0,bitasset_opts:n?t.bitasset.options:null,original_bitasset_opts:n?e.asset.getIn(["bitasset","options"]).toJS():null,marketInput:"",whitelist_authorities:e.asset.getIn(["options","whitelist_authorities"]),blacklist_authorities:e.asset.getIn(["options","blacklist_authorities"]),whitelist_markets:e.asset.getIn(["options","whitelist_markets"]),blacklist_markets:e.asset.getIn(["options","blacklist_markets"])}}},{key:"_updateAsset",value:function(e){var t=this;e.preventDefault();var n=this.state,r=n.update,a=n.issuer,o=n.new_issuer_account_id,s=n.core_exchange_rate,i=n.flagBooleans,c=n.permissionBooleans,l=n.isBitAsset,u=n.bitasset_opts,p=n.original_bitasset_opts,d=$.a.getFlags(i);128&this.props.asset.getIn(["options","flags"])&&!(128&this.props.asset.getIn(["options","issuer_permissions"]))&&(d+=128);var m=$.a.getPermissions(c,l);this.state.marketInput!==r.description.market&&(r.description.market="");var h=JSON.stringify(r.description),f={whitelist_authorities:this.state.whitelist_authorities,blacklist_authorities:this.state.blacklist_authorities,whitelist_markets:this.state.whitelist_markets,blacklist_markets:this.state.blacklist_markets};D.a.updateAsset(a,o,r,s,this.props.asset,d,m,l,u,p,h,f).then(function(){console.log("... AssetActions.updateAsset(account_id, update)",a,o,t.props.asset.get("id"),r),setTimeout(function(){Te.b.getAsset(t.props.asset.get("id"))},3e3)})}},{key:"_hasChanged",value:function(){return!y.a.are_equal_shallow(this.state,this.resetState(this.props))}},{key:"_reset",value:function(e){e.preventDefault(),this.setState(this.resetState(this.props))}},{key:"_forcePositive",value:function(e){return parseFloat(e)<0?"0":e}},{key:"_onUpdateDescription",value:function(e,t){var n=this.state.update,r=!0;switch(e){case"condition":if(t.target.value.length>60)return void(r=!1);n.description[e]=t.target.value;break;case"short_name":if(t.target.value.length>32)return void(r=!1);n.description[e]=t.target.value;break;case"market":n.description[e]=t;break;case"visible":n.description[e]=!n.description[e];break;default:n.description[e]=t.target.value}r&&(this.forceUpdate(),this._validateEditFields(n))}},{key:"onChangeBitAssetOpts",value:function(e,t){var n=this.state.bitasset_opts;switch(e){case"force_settlement_offset_percent":case"maximum_force_settlement_volume":n[e]=parseFloat(t.target.value)*je.a.GRAPHENE_1_PERCENT;break;case"feed_lifetime_sec":case"force_settlement_delay_sec":console.log(t.target.value,parseInt(60*parseFloat(t.target.value),10)),n[e]=parseInt(60*parseFloat(t.target.value),10);break;case"short_backing_asset":n[e]=t;break;default:n[e]=parseInt(t.target.value,10)}this.forceUpdate()}},{key:"_onUpdateInput",value:function(e,t){var n=this.state.update,r=!0,a=y.a.get_asset_precision(this.props.asset.get("precision"));switch(e){case"market_fee_percent":n[e]=this._forcePositive(t.target.value);break;case"max_market_fee":var o=t.amount.replace(/,/g,"");if(new Pe.a(o).times(a).gt(st))return r=!1,this.setState({errors:{max_market_fee:"The number you tried to enter is too large"}});n[e]=y.a.limitByPrecision(o,this.props.asset.get("precision"));break;case"max_supply":var s=t.amount.replace(/,/g,"");n[e]=y.a.limitByPrecision(s,this.props.asset.get("precision"));break;default:n[e]=t.target.value}r&&(this.setState({update:n}),this._validateEditFields(n))}},{key:"_validateEditFields",value:function(e){var t=e.core_exchange_rate,n=this.props,r=n.asset,a=n.core,o={max_supply:null,quote_asset:null,base_asset:null},s=this.props.asset.get("precision");try{o.max_supply=e.max_supply<=0?H.a.translate("account.user_issued_assets.max_positive"):new Pe.a(parseInt(e.max_supply,10)).times(Math.pow(10,s)).gt(st)?H.a.translate("account.user_issued_assets.too_large"):null}catch(e){console.log("err:",e),o.max_supply=H.a.translate("account.user_issued_assets.too_large")}t&&(t.quote.asset_id!==r.get("id")&&t.base.asset_id!==r.get("id")&&(o.quote_asset=H.a.translate("account.user_issued_assets.need_asset",{name:r.get("symbol")})),t.quote.asset_id!==a.get("id")&&t.base.asset_id!==a.get("id")&&(o.base_asset=H.a.translate("account.user_issued_assets.need_asset",{name:a.get("symbol")})));var i=!o.max_supply&&!o.base_asset&&!o.quote_asset;this.setState({isValid:i,errors:o})}},{key:"_onCoreRateChange",value:function(e,t){t.amount=""==t.amount?"0":t.amount.replace(/,/g,""),t.amount=y.a.limitByPrecision(t.amount,"quote"===e?this.props.asset.get("precision"):this.props.core.get("precision")),this.state.core_exchange_rate[e]={amount:t.amount,asset_id:t.asset.get("id")},this.forceUpdate()}},{key:"onAccountChanged",value:function(e,t){this.setState(nt({},e,t?t.get("id"):null))}},{key:"onAccountNameChanged",value:function(e,t){this.setState(nt({},e,t))}},{key:"_onInputCoreAsset",value:function(e,t){"quote"===e?this.setState({quoteAssetInput:t}):"base"===e&&this.setState({baseAssetInput:t})}},{key:"_onFoundCoreAsset",value:function(e,t){if(t){var n=this.state.core_exchange_rate;n[e].asset_id=t.get("id"),this.setState({core_exchange_rate:n}),this._validateEditFields({max_supply:this.state.max_supply,core_exchange_rate:n})}}},{key:"_onInputMarket",value:function(e){this.setState({marketInput:e})}},{key:"_onFoundMarketAsset",value:function(e){e&&this._onUpdateDescription("market",e.get("symbol"))}},{key:"_onFlagChange",value:function(e){var t=this.state.flagBooleans;t[e]=!t[e],this.setState({flagBooleans:t})}},{key:"_onPermissionChange",value:function(e){var t=this.state.permissionBooleans;t[e]=!t[e],this.setState({permissionBooleans:t})}},{key:"_onPoolInput",value:function(e){this.setState({fundPoolAmount:e.amount})}},{key:"_onFundPool",value:function(){D.a.fundPool(this.state.new_funder_account,this.props.core,this.props.asset,this.state.fundPoolAmount.replace(/,/g,""))}},{key:"_onClaimInput",value:function(e){this.setState({claimFeesAmount:e.amount})}},{key:"_onClaimFees",value:function(){D.a.claimPoolFees(this.props.account.get("id"),this.props.asset,this.state.claimFeesAmount.replace(/,/g,""))}},{key:"onChangeList",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"add",n=arguments[2],r=this.state[e];"add"!==t||r.includes(n)?"remove"===t&&r.includes(n)&&(r=r.remove(r.indexOf(n))):r=r.push(n),this.setState(nt({},e,r))}},{key:"render",value:function(){var e,t=this.props,n=t.account,a=t.asset,o=t.core,s=this.state,i=s.errors,c=s.isValid,l=s.update,u=s.core_exchange_rate,p=s.flagBooleans,d=s.permissionBooleans,m=s.fundPoolAmount,h=s.claimFeesAmount,f=s.isBitAsset,v=s.bitasset_opts,b=a.get("symbol");e=r.createElement(Ve,{opType:"asset_update"});var _=Te.b.getAsset(u.quote.asset_id),E=y.a.get_asset_precision(_.get("precision")),w=Te.b.getAsset(u.base.asset_id),k=y.a.get_asset_precision(w.get("precision")),O=parseFloat(u.quote.amount)*E,C=parseFloat(u.base.amount)*k,T=$.a.getFlagBooleans(a.getIn(["options","issuer_permissions"]),void 0!==a.get("bitasset")),A=[],N=function(e,t,n){return r.createElement("table",{key:"table_"+e,className:"table"},r.createElement("tbody",null,r.createElement("tr",null,r.createElement("td",{style:{border:"none",width:"80%"}},r.createElement(g.a,{content:"account.user_issued_assets."+e}),":"),r.createElement("td",{style:{border:"none"}},r.createElement("div",{className:"switch",style:{marginBottom:"10px"},onClick:t},r.createElement("input",{type:"checkbox",checked:n}),r.createElement("label",null))))))};for(var P in T)T[P]&&"charge_market_fee"!==P&&A.push(N(P,this._onFlagChange.bind(this,P),p[P]));A.push(N("visible",this._onUpdateDescription.bind(this,"visible"),!l.description.visible&&!1===l.description.visible));var S=[];for(var x in T)S.push(r.createElement("table",{key:"table_"+x,className:"table"},r.createElement("tbody",null,r.createElement("tr",null,r.createElement("td",{style:{border:"none",width:"80%"}},r.createElement(g.a,{content:"account.user_issued_assets."+x}),":"),r.createElement("td",{style:{border:"none"}},r.createElement("div",{className:"switch",style:{marginBottom:"10px"},onClick:this._onPermissionChange.bind(this,x)},r.createElement("input",{type:"checkbox",checked:d[x],onChange:function(){}}),r.createElement("label",null)))))));var j=r.createElement("div",{style:{paddingTop:"0.5rem"}},r.createElement("hr",null),r.createElement("button",{className:Oe()("button",{disabled:!c}),onClick:this._updateAsset.bind(this)},r.createElement(g.a,{content:"header.update_asset"})),r.createElement("button",{className:"button outline",onClick:this._reset.bind(this)},r.createElement(g.a,{content:"account.perm.reset"})),r.createElement("br",null),r.createElement("br",null),r.createElement("p",null,r.createElement(g.a,{content:"account.user_issued_assets.approx_fee"}),":"," ",e)),I=0;if(n){var R=n.getIn(["balances","1.3.0"]);if(R){var D=Te.b.getObject(R);D&&(I=D.get("balance"))}}var M=r.createElement("span",null,r.createElement(g.a,{component:"span",content:"transfer.available"}),": ",r.createElement(q.a,{amount:I,asset:"1.3.0"})),F=a.getIn(["dynamic","accumulated_fees"]),B=h>0&&y.a.get_asset_precision(a.get("precision"))*h<=F,L=r.createElement("span",null,r.createElement(g.a,{component:"span",content:"transfer.available"}),": ",r.createElement(q.a,{amount:F,asset:a.get("id")})),Q=!1;"1.3.0"!==_.get("id")&&"1.3.0"!==w.get("id")||_.get("id")!==a.get("id")&&w.get("id")!==a.get("id")||(Q=!0);var U=a.getIn(["bitasset","is_prediction_market"]);return r.createElement("div",{className:"grid-block"},r.createElement("div",{className:"grid-content"},r.createElement("h3",null,r.createElement(g.a,{content:"header.update_asset"}),": ",b),r.createElement(Se.b,{setting:"updateAssetTab",contentClass:"grid-block shrink small-vertical medium-horizontal"},r.createElement(Se.a,{title:"account.user_issued_assets.primary"},r.createElement("div",{className:"small-12 large-8 grid-content"},r.createElement("h3",null,r.createElement(g.a,{content:"account.user_issued_assets.primary"})),r.createElement("label",null,r.createElement(g.a,{content:"account.user_issued_assets.precision"}),r.createElement("span",null,": ",a.get("precision"))),r.createElement("br",null),r.createElement("label",null,r.createElement(J.a,{label:"account.user_issued_assets.max_supply",amount:l.max_supply,onChange:this._onUpdateInput.bind(this,"max_supply"),asset:a.get("id"),assets:[a.get("id")],placeholder:"0.0",tabIndex:1})),i.max_supply?r.createElement("p",{className:"grid-content has-error"},i.max_supply):null,r.createElement(g.a,{component:"h3",content:"account.user_issued_assets.core_exchange_rate"}),r.createElement("label",null,r.createElement("div",{className:"grid-block no-margin"},Q?null:r.createElement("div",{className:"grid-block no-margin small-12 medium-6"},r.createElement(Ae.a,{label:"account.user_issued_assets.quote_name",onChange:this._onInputCoreAsset.bind(this,"quote"),asset:this.state.quoteAssetInput,assetInput:this.state.quoteAssetInput,tabIndex:1,style:{width:"100%",paddingRight:"10px"},onFound:this._onFoundCoreAsset.bind(this,"quote")})),Q?null:r.createElement("div",{className:"grid-block no-margin small-12 medium-6"},r.createElement(Ae.a,{label:"account.user_issued_assets.base_name",onChange:this._onInputCoreAsset.bind(this,"base"),asset:this.state.baseAssetInput,assetInput:this.state.baseAssetInput,tabIndex:1,style:{width:"100%",paddingLeft:"10px"},onFound:this._onFoundCoreAsset.bind(this,"base")})),i.quote_asset?r.createElement("p",{className:"grid-content has-error"},i.quote_asset):null,i.base_asset?r.createElement("p",{className:"grid-content has-error"},i.base_asset):null,r.createElement("div",{className:"grid-block no-margin small-12 medium-6"},r.createElement(J.a,{label:"account.user_issued_assets.quote",amount:u.quote.amount,onChange:this._onCoreRateChange.bind(this,"quote"),asset:u.quote.asset_id,assets:[u.quote.asset_id],placeholder:"0.0",tabIndex:1,style:{width:"100%",paddingRight:"10px"}})),r.createElement("div",{className:"grid-block no-margin small-12 medium-6"},r.createElement(J.a,{label:"account.user_issued_assets.base",amount:u.base.amount,onChange:this._onCoreRateChange.bind(this,"base"),asset:u.base.asset_id,assets:[u.base.asset_id],placeholder:"0.0",tabIndex:1,style:{width:"100%",paddingLeft:"10px"}}))),r.createElement("div",null,r.createElement("h5",null,r.createElement(g.a,{content:"exchange.price"}),":"," ",r.createElement(We.a,{style:{fontWeight:"bold"},quote_amount:O,quote_asset:u.quote.asset_id,base_asset:u.base.asset_id,base_amount:C})))),r.createElement("div",null,r.createElement(g.a,{content:"account.user_issued_assets.cer_warning_1",component:"label",className:"has-error"}),r.createElement(g.a,{content:"account.user_issued_assets.cer_warning_2",component:"p"})),j)),r.createElement(Se.a,{title:"account.whitelist.title"},r.createElement($e,{whiteListEnabled:p.white_list,whitelist_authorities:this.state.whitelist_authorities,blacklist_authorities:this.state.blacklist_authorities,whitelist_markets:this.state.whitelist_markets,blacklist_markets:this.state.blacklist_markets,new_authority_id:this.state.new_authority_id,authority_name:this.state.authority_name,onAccountNameChanged:this.onAccountNameChanged.bind(this),onAccountChanged:this.onAccountChanged.bind(this),onChangeList:this.onChangeList.bind(this)},j)),r.createElement(Se.a,{title:"account.user_issued_assets.description"},r.createElement("div",{className:"small-12 large-8 grid-content"},r.createElement(g.a,{component:"h3",content:"account.user_issued_assets.description"}),r.createElement("label",null,r.createElement("textarea",{style:{height:"7rem"},rows:"1",value:l.description.main||"",onChange:this._onUpdateDescription.bind(this,"main")})),r.createElement(g.a,{component:"h3",content:"account.user_issued_assets.short"}),r.createElement("label",null,r.createElement("input",{type:"text",rows:"1",value:l.description.short_name||"",onChange:this._onUpdateDescription.bind(this,"short_name")})),r.createElement(g.a,{component:"h3",content:"account.user_issued_assets.market"}),r.createElement(Ae.a,{label:"account.user_issued_assets.name",onChange:this._onInputMarket.bind(this),asset:this.state.marketInput,assetInput:this.state.marketInput,style:{width:"100%",paddingRight:"10px"},onFound:this._onFoundMarketAsset.bind(this)}),U?r.createElement("div",null,r.createElement(g.a,{component:"h3",content:"account.user_issued_assets.condition"}),r.createElement("label",null,r.createElement("input",{type:"text",rows:"1",value:l.description.condition,onChange:this._onUpdateDescription.bind(this,"condition")})),r.createElement(g.a,{component:"h3",content:"account.user_issued_assets.expiry"}),r.createElement("label",null,r.createElement("input",{type:"date",value:l.description.expiry,onChange:this._onUpdateDescription.bind(this,"expiry")}))):null,j)),f?r.createElement(Se.a,{title:"account.user_issued_assets.bitasset_opts"},r.createElement("div",{className:"small-12 large-8 grid-content"},r.createElement(Le,{bitasset_opts:v,onUpdate:this.onChangeBitAssetOpts.bind(this),backingAsset:v.short_backing_asset,assetPrecision:a.get("precision"),assetSymbol:a.get("symbol")}),j)):null,r.createElement(Se.a,{title:"account.user_issued_assets.update_owner"},r.createElement("div",{className:"small-12 large-8 grid-content"},r.createElement(g.a,{component:"h3",content:"account.user_issued_assets.update_owner"}),r.createElement("div",{style:{paddingBottom:"1rem"}},r.createElement(ze.a,{label:"account.user_issued_assets.current_issuer",accountName:n.get("name"),account:n.get("name"),error:null,tabIndex:1})),r.createElement(ze.a,{label:"account.user_issued_assets.new_issuer",accountName:this.state.issuer_account_name,onChange:this.onAccountNameChanged.bind(this,"issuer_account_name"),onAccountChanged:this.onAccountChanged.bind(this,"new_issuer_account_id"),account:this.state.issuer_account_name,error:null,tabIndex:1}),j)),r.createElement(Se.a,{title:"account.permissions"},r.createElement("div",{className:"small-12 large-8 grid-content"},r.createElement(Ce.a,{path:"components/AccountAssetCreate",section:"permissions"}),r.createElement("p",{className:"grid-content has-error"},r.createElement(g.a,{content:"account.user_issued_assets.perm_warning"})),S,j)),r.createElement(Se.a,{title:"account.user_issued_assets.flags"},r.createElement("div",{className:"small-12 large-8 grid-content"},r.createElement(Ce.a,{path:"components/AccountAssetCreate",section:"flags"}),T.charge_market_fee?r.createElement("div",null,r.createElement(g.a,{component:"h3",content:"account.user_issued_assets.market_fee"}),r.createElement("table",{className:"table"},r.createElement("tbody",null,r.createElement("tr",null,r.createElement("td",{style:{border:"none",width:"80%"}},r.createElement(g.a,{content:"account.user_issued_assets.charge_market_fee"}),":"),r.createElement("td",{style:{border:"none"}},r.createElement("div",{className:"switch",style:{marginBottom:"10px"},onClick:this._onFlagChange.bind(this,"charge_market_fee")},r.createElement("input",{type:"checkbox",onChange:function(){},checked:p.charge_market_fee}),r.createElement("label",null)))))),r.createElement("div",{className:Oe()({disabled:!p.charge_market_fee})},r.createElement("label",null,r.createElement(g.a,{content:"account.user_issued_assets.market_fee"})," ","(%)",r.createElement("input",{type:"number",value:l.market_fee_percent,onChange:this._onUpdateInput.bind(this,"market_fee_percent")})),r.createElement("label",null,r.createElement(J.a,{label:"account.user_issued_assets.max_market_fee",amount:l.max_market_fee,onChange:this._onUpdateInput.bind(this,"max_market_fee"),asset:a.get("id"),assets:[a.get("id")],placeholder:"0.0",tabIndex:1})),i.max_market_fee?r.createElement("p",{className:"grid-content has-error"},i.max_market_fee):null)):null,r.createElement("h3",null,r.createElement(g.a,{content:"account.user_issued_assets.flags"})),A,j)),r.createElement(Se.a,{title:"explorer.asset.fee_pool.title"},r.createElement("div",{className:"small-12 large-8 grid-content"},r.createElement(g.a,{component:"h3",content:"transaction.trxTypes.asset_fund_fee_pool"}),r.createElement(g.a,{component:"p",content:"explorer.asset.fee_pool.fund_text",asset:a.get("symbol"),core:o.get("symbol")}),r.createElement("div",{style:{paddingBottom:"1rem"}},r.createElement(g.a,{content:"explorer.asset.fee_pool.pool_balance"}),r.createElement("span",null,": "),r.createElement(q.a,{amount:a.getIn(["dynamic","fee_pool"]),asset:"1.3.0"})),r.createElement(ze.a,{label:"transaction.funding_account",accountName:this.state.funder_account_name,onChange:this.onAccountNameChanged.bind(this,"funder_account_name"),onAccountChanged:this.onAccountChanged.bind(this,"new_funder_account"),account:this.state.funder_account_name,error:null,tabIndex:1}),r.createElement(J.a,{label:"transfer.amount",display_balance:M,amount:m,onChange:this._onPoolInput.bind(this),asset:"1.3.0",assets:["1.3.0"],placeholder:"0.0",tabIndex:2,style:{width:"100%",paddingLeft:"10px"}}),r.createElement("div",{style:{paddingTop:"0.5rem"}},r.createElement("hr",null),r.createElement("button",{className:Oe()("button",{disabled:m<=0}),onClick:this._onFundPool.bind(this)},r.createElement(g.a,{content:"transaction.trxTypes.asset_fund_fee_pool"})),r.createElement("button",{className:"button outline",onClick:this._reset.bind(this)},r.createElement(g.a,{content:"account.perm.reset"})),r.createElement("br",null),r.createElement("br",null),r.createElement("p",null,r.createElement(g.a,{content:"account.user_issued_assets.approx_fee"}),":"," ",r.createElement(Ve,{opType:"asset_fund_fee_pool"}))),r.createElement(g.a,{component:"h3",content:"transaction.trxTypes.asset_claim_fees"}),r.createElement(g.a,{component:"p",content:"explorer.asset.fee_pool.claim_text",asset:a.get("symbol")}),r.createElement("div",{style:{paddingBottom:"1rem"}},r.createElement(g.a,{content:"explorer.asset.fee_pool.unclaimed_issuer_income"}),": ",r.createElement(q.a,{amount:a.getIn(["dynamic","accumulated_fees"]),asset:a.get("id")})),r.createElement(J.a,{label:"transfer.amount",display_balance:L,amount:h,onChange:this._onClaimInput.bind(this),asset:a.get("id"),assets:[a.get("id")],placeholder:"0.0",tabIndex:1,style:{width:"100%",paddingLeft:"10px"}}),r.createElement("div",{style:{paddingTop:"0.5rem"}},r.createElement("hr",null),r.createElement("button",{className:Oe()("button",{disabled:!B}),onClick:this._onClaimFees.bind(this)},r.createElement(g.a,{content:"explorer.asset.fee_pool.claim_fees"})),r.createElement("button",{className:"button outline",onClick:this._reset.bind(this)},r.createElement(g.a,{content:"account.perm.reset"})),r.createElement("br",null),r.createElement("br",null)))))))}}]),t}();it.propTypes={asset:O.a.ChainAsset.isRequired,core:O.a.ChainAsset.isRequired},it.defaultProps={core:"1.3.0"},it=Object(C.a)(it);var ct=function(e){function t(){return rt(this,t),at(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return ot(t,r["Component"]),tt(t,[{key:"render",value:function(){var e=this.props.match.params.asset;return r.createElement(it,et({asset:e},this.props))}}]),t}(),lt=Object(Ze.a)(ct),ut=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var pt=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["Component"]),ut(t,[{key:"render",value:function(){var e=this.props.stat_object.toJS();return r.createElement("tbody",null,r.createElement("tr",null,r.createElement("td",null,r.createElement(g.a,{content:"account.member.fees_paid"})," "),r.createElement("td",null,r.createElement(q.a,{amount:parseFloat(e.lifetime_fees_paid),asset:"1.3.0"}))))}}]),t}();pt.propTypes={stat_object:O.a.ChainObject.isRequired};var dt=Object(C.a)(pt,{keep_updating:!0}),mt=n(342),ht=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ft=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function gt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function vt(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function bt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var yt=function(e){function t(){return gt(this,t),vt(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return bt(t,r["Component"]),ft(t,[{key:"render",value:function(){var e=this.props.dprops;return r.createElement(Ce.a,ht({},this.props,{path:"components/AccountMembership",section:"fee-division",nextMaintenanceTime:{time:e.get("next_maintenance_time")}}))}}]),t}();yt.propTypes={dprops:O.a.ChainObject.isRequired},yt.defaultProps={dprops:"2.1.0"},yt=Object(C.a)(yt);var _t=function(e){function t(){return gt(this,t),vt(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return bt(t,r["Component"]),ft(t,[{key:"upgradeAccount",value:function(e,t,n){n.preventDefault(),a.a.upgradeAccount(e,t)}},{key:"componentWillMount",value:function(){A.a.getFinalFeeAsset(this.props.account,"account_upgrade")}},{key:"render",value:function(){var e=this.props,t=e.gprops,n=e.core_asset,a=this.props.account.toJS(),o=Te.b.getAccount(a.lifetime_referrer,!1);o&&(a.lifetime_referrer_name=o.get("name"));var s=Te.b.getAccount(a.referrer,!1);s&&(a.referrer_name=s.get("name"));var i=Te.b.getAccount(a.registrar,!1);i&&(a.registrar_name=i.get("name"));var c=a.name,l=a.network_fee_percentage/100,u=a.lifetime_referrer_fee_percentage/100,d=100-l-u,m=d*a.referrer_rewards_percentage/1e4,h=100-m-u-l,f=t.getIn(["parameters","current_fees","parameters",8,1,"membership_lifetime_fee"])*t.getIn(["parameters","current_fees","scale"])/1e4,v=(t.getIn(["parameters","current_fees","parameters",8,1,"membership_annual_fee"]),t.getIn(["parameters","current_fees","scale"]),Te.b.getAccountMemberStatus(this.props.account)),b="account.member."+v,y=null;"annual"===v&&(y=r.createElement("span",null,"(",r.createElement(g.a,{content:"account.member.expires"})," ",r.createElement(mt.a,{time:a.membership_expiration_date}),")"));var _=a.membership_expiration_date;return"1969-12-31T23:59:59"===_?_="Never":"1970-01-01T00:00:00"===_&&(_="N/A"),r.createElement("div",{className:"grid-content",style:{overflowX:"hidden"}},r.createElement("div",{className:"content-block no-margin"},r.createElement("h3",null,r.createElement(g.a,{content:b})," ",y),"lifetime"===v?null:r.createElement("div",null,r.createElement("div",{className:"large-6 medium-8"},r.createElement(Ce.a,{path:"components/AccountMembership",section:"lifetime",feesCashback:100-l,price:{amount:f,asset:n}}),r.createElement("div",{className:"button no-margin",onClick:this.upgradeAccount.bind(this,a.id,!0)},r.createElement(g.a,{content:"account.member.upgrade_lifetime"}))," ","   ",null),r.createElement("br",null),r.createElement("hr",null))),r.createElement("div",{className:"content-block no-margin"},r.createElement("div",{className:"no-margin grid-block vertical large-horizontal"},r.createElement("div",{className:"no-margin grid-block large-5"},r.createElement("div",{className:"grid-content"},r.createElement("h4",null,r.createElement(g.a,{content:"account.member.fee_allocation"})),r.createElement("table",{className:"table key-value-table"},r.createElement("tbody",null,r.createElement("tr",null,r.createElement("td",null,r.createElement(g.a,{content:"account.member.network_percentage"})),r.createElement("td",null,l,"%")),r.createElement("tr",null,r.createElement("td",null,r.createElement(g.a,{content:"account.member.lifetime_referrer"})," ","  (",r.createElement(p.a,{to:"account/"+a.lifetime_referrer_name+"/overview"},a.lifetime_referrer_name),")"),r.createElement("td",null,u,"%")),r.createElement("tr",null,r.createElement("td",null,r.createElement(g.a,{content:"account.member.registrar"}),"   (",r.createElement(p.a,{to:"account/"+a.registrar_name+"/overview"},a.registrar_name),")"),r.createElement("td",null,h,"%")),r.createElement("tr",null,r.createElement("td",null,r.createElement(g.a,{content:"account.member.referrer"}),"   (",r.createElement(p.a,{to:"account/"+a.referrer_name+"/overview"},a.referrer_name),")"),r.createElement("td",null,m,"%")),r.createElement("tr",null,r.createElement("td",null,r.createElement(g.a,{content:"account.member.membership_expiration"})," "),r.createElement("td",null,_)))),r.createElement("h4",{style:{paddingTop:"1rem"}},r.createElement(g.a,{content:"account.member.fees_cashback"})),r.createElement("table",{className:"table key-value-table"},r.createElement(dt,{stat_object:a.statistics})))),r.createElement("div",{className:"grid-block large-7"},r.createElement("div",{className:"grid-content"},r.createElement(yt,{account:c,networkFee:l,referrerFee:m,registrarFee:h,lifetimeFee:u,referrerTotalFee:d,maintenanceInterval:t.getIn(["parameters","maintenance_interval"]),vestingThreshold:{amount:t.getIn(["parameters","cashback_vesting_threshold"]),asset:n},vestingPeriod:t.getIn(["parameters","cashback_vesting_period_seconds"])/60/60/24}))))))}}]),t}();_t.propTypes={account:O.a.ChainAccount.isRequired,gprops:O.a.ChainObject.isRequired,core_asset:O.a.ChainAsset.isRequired},_t.defaultProps={gprops:"2.0.0",core_asset:"1.3.0"};var Et=_t=Object(C.a)(_t),wt=n(45),kt=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function Ot(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ct(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Tt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var At=function(e){function t(){return Ot(this,t),Ct(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Tt(t,r["Component"]),kt(t,[{key:"_onClaim",value:function(e,t){var n=this;t.preventDefault(),wt.a.claimVestingBalance(this.props.account.id,this.props.vb,e).then(function(){"function"==typeof n.props.handleChanged&&n.props.handleChanged()})}},{key:"render",value:function(){var e=this.props.vb;if(!this.props.vb)return null;var t=void 0,n=void 0,a=void 0,o=void 0,s=void 0;return e&&(s=e.balance.amount,t=Te.b.getAsset(e.balance.asset_id),a=e.policy[1].coin_seconds_earned,o=0===(n=e.policy[1].vesting_seconds)?1:a/(n*s)),t&&s?r.createElement("div",{className:"",style:{paddingBottom:"1rem"}},r.createElement(g.a,{component:"h5",content:"account.vesting.balance_number",id:e.id}),r.createElement("table",{className:"table key-value-table"},r.createElement("tbody",null,r.createElement("tr",null,r.createElement("td",null,r.createElement(g.a,{content:"account.member.cashback"})),r.createElement("td",null,r.createElement(q.a,{amount:e.balance.amount,asset:e.balance.asset_id}))),r.createElement("tr",null,r.createElement("td",null,r.createElement(g.a,{content:"account.member.earned"})),r.createElement("td",null,y.a.format_number(y.a.get_asset_amount(a/86400,t),0)," ",r.createElement(g.a,{content:"account.member.coindays"}))),r.createElement("tr",null,r.createElement("td",null,r.createElement(g.a,{content:"account.member.required"})),r.createElement("td",null,y.a.format_number(y.a.get_asset_amount(e.balance.amount*n/86400,t),0)," ",r.createElement(g.a,{content:"account.member.coindays"}))),r.createElement("tr",null,r.createElement("td",null,r.createElement(g.a,{content:"account.member.remaining"})),r.createElement("td",null,y.a.format_number(n*(1-o)/86400||0,2)," days")),r.createElement("tr",null,r.createElement("td",null,r.createElement(g.a,{content:"account.member.available"})),r.createElement("td",null,y.a.format_number(100*o,2),"% /"," ",r.createElement(q.a,{amount:o*e.balance.amount,asset:t.get("id")}))),r.createElement("tr",null,r.createElement("td",{colSpan:"2",style:{textAlign:"right"}},r.createElement("button",{onClick:this._onClaim.bind(this,!1),className:"button outline"},r.createElement(g.a,{content:"account.member.claim"}))))))):null}}]),t}(),Nt=function(e){function t(){Ot(this,t);var e=Ct(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={vbs:null},e}return Tt(t,r["Component"]),kt(t,[{key:"componentWillMount",value:function(){this.retrieveVestingBalances.call(this,this.props.account.get("id"))}},{key:"componentWillUpdate",value:function(e){var t=e.account.get("id");t!==this.props.account.get("id")&&this.retrieveVestingBalances.call(this,t)}},{key:"retrieveVestingBalances",value:function(e){var t=this;e=e||this.props.account.get("id"),ee.a.instance().db_api().exec("get_vesting_balances",[e]).then(function(e){t.setState({vbs:e})}).catch(function(e){console.log("error:",e)})}},{key:"render",value:function(){var e=this,t=this.state.vbs;if(!t||!this.props.account||!this.props.account.get("vesting_balances"))return null;var n=this.props.account.toJS(),a=t.map(function(t){if(t.balance.amount)return r.createElement(At,{key:t.id,vb:t,account:n,handleChanged:e.retrieveVestingBalances.bind(e)})}).filter(function(e){return!!e});return r.createElement("div",{className:"grid-content",style:{overflowX:"hidden"}},r.createElement(g.a,{content:"account.vesting.explain",component:"p"}),a.length?a:r.createElement("h4",{style:{paddingTop:"1rem"}},r.createElement(g.a,{content:"account.vesting.no_balances"})))}}]),t}();Nt.VestingBalance=At;var Pt=Nt,St=n(154),xt=n(141),jt=n(36),It=n(44),Rt=n(2306),Dt=n.n(Rt),Mt=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var Ft=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state=n._getInitialState(),n.onPasswordEnter=n.onPasswordEnter.bind(n),n.onKeyDown=n.onKeyDown.bind(n),n.onCancel=n.onCancel.bind(n),n.onClose=n.onClose.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["Component"]),Mt(t,[{key:"_getInitialState",value:function(){return{isShowQrcode:!1,keyString:null}}},{key:"show",value:function(){L.a.publish(this.props.modalId,"open")}},{key:"onCancel",value:function(){L.a.publish(this.props.modalId,"close"),this.onClose()}},{key:"onClose",value:function(){this.refs.password_input&&(this.refs.password_input.value=""),this.setState(this._getInitialState())}},{key:"onPasswordEnter",value:function(e){e.preventDefault();var t=this.refs.password_input.value,n=this.props.keyValue;if(null!=t&&""!=t){if(void 0!==n&&null!=n&&""!=n){var r=Te.a.fromSeed(t).encryptToHex(n);this.setState({isShowQrcode:!0,keyString:r})}}else this.setState({isShowQrcode:!0,keyString:n})}},{key:"onKeyDown",value:function(e){13===e.keyCode&&this.onPasswordEnter(e)}},{key:"render",value:function(){var e=this,t=null;return this.state.isShowQrcode&&(t={textAlign:"center"}),r.createElement(F.a,{onClose:this.onClose,id:this.props.modalId,ref:"modal",overlay:!0,overlayClose:!1},r.createElement("div",{className:"text-center"},r.createElement("div",{style:{margin:"1.5rem 0"}},r.createElement(g.a,{component:"h4",content:"modal.qrcode.title"})),r.createElement("form",{className:"full-width",style:{margin:"0 3.5rem"},onSubmit:this.onPasswordEnter,noValidate:!0},r.createElement("div",{className:"form-group"},this.state.isShowQrcode?r.createElement("section",{style:t},r.createElement(Dt.a,{size:256,value:this.state.keyString})):r.createElement("section",null,r.createElement("label",{className:"left-label"},r.createElement(g.a,{unsafe:!0,content:"modal.qrcode.input_message"})),r.createElement("input",{name:"password",type:"text",onFocus:function(){e.refs.password_input.setAttribute("type","password")},ref:"password_input",autoComplete:"off",onKeyDown:this.onKeyDown}))),r.createElement("div",{style:t},r.createElement("div",{className:"button-group"},0==this.state.isShowQrcode?r.createElement("button",{className:"button","data-place":"bottom","data-html":!0,onClick:this.onPasswordEnter},r.createElement(g.a,{content:"modal.ok"})):null,r.createElement("button",{className:"button","data-place":"bottom","data-html":!0,onClick:this.onCancel},r.createElement(g.a,{content:"cancel"})))))))}}]),t}();Ft.propTypes={modalId:l.string.isRequired,keyValue:l.string},Ft.defaultProps={modalId:"qr_code_password_modal"};var qt=Ft,Bt=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var Lt=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state=e._getInitialState(),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["Component"]),Bt(t,[{key:"_getInitialState",value:function(){return{wif:null}}},{key:"reset",value:function(){this.setState(this._getInitialState())}},{key:"componentDidMount",value:function(){var e=this,t="key_view_modal"+this.props.pubkey;L.a.subscribe(t,function(n,r){n===t&&"close"===r&&e.reset()})}},{key:"render",value:function(){var e="key_view_modal"+this.props.pubkey,t=It.a.getState().keys;if(!t.has(this.props.pubkey))return r.createElement("span",null,this.props.children);var a=t.get(this.props.pubkey);return r.createElement("span",null,r.createElement("a",{onClick:this.onOpen.bind(this)},this.props.children),r.createElement(F.a,{ref:e,id:e,overlay:!0,overlayClose:!1},r.createElement("h3",null,r.createElement(g.a,{content:"account.perm.key_viewer"})),r.createElement("div",{className:"grid-block vertical"},r.createElement("div",{className:"content-block"},r.createElement("div",{className:"grid-content"},r.createElement("label",null,r.createElement(g.a,{content:"account.perm.public"})),this.props.pubkey),r.createElement("br",null),r.createElement("div",{className:"grid-block grid-content"},r.createElement("label",null,r.createElement(g.a,{content:"account.perm.private"})),r.createElement("div",null,this.state.wif?r.createElement("span",null,r.createElement("p",{style:{fontWeight:600}},this.state.wif),r.createElement("div",{className:"button-group"},r.createElement("div",{className:"button",onClick:this.onHide.bind(this)},"hide"),r.createElement("div",{className:"clickable",onClick:this.showQrCode.bind(this)},r.createElement("img",{style:{height:50},src:n(2242)})))):r.createElement("span",null,r.createElement("div",{className:"button",onClick:this.onShow.bind(this)},r.createElement(g.a,{content:"account.perm.show"}))))),r.createElement("br",null),r.createElement("div",{className:"grid-block grid-content"},r.createElement("label",null,r.createElement(g.a,{content:"account.perm.brain"})),null==a.brainkey_sequence?"Non-deterministic":a.brainkey_sequence),r.createElement("br",null),a.import_account_names&&a.import_account_names.length?r.createElement("div",{className:"grid-block grid-content"},r.createElement("label",null,r.createElement(g.a,{content:"account.perm.from"})),a.import_account_names.join(", "),r.createElement("br",null)):null)),r.createElement("div",{className:"button-group"},r.createElement("div",{onClick:this.onClose.bind(this),className:" button"},r.createElement(g.a,{content:"transfer.close"})))),r.createElement(qt,{ref:"qrmodal",keyValue:this.state.wif}))}},{key:"onOpen",value:function(){var e="key_view_modal"+this.props.pubkey;L.a.publish(e,"open")}},{key:"onClose",value:function(){this.reset();var e="key_view_modal"+this.props.pubkey;L.a.publish(e,"close")}},{key:"onShow",value:function(){var e=this;jt.a.unlock().then(function(){var t=te.a.getPrivateKey(e.props.pubkey);e.setState({wif:t.toWif()})})}},{key:"onHide",value:function(){this.setState({wif:null})}},{key:"showQrCode",value:function(){this.refs.qrmodal.show()}}]),t}();Lt.propTypes={pubkey:l.string.isRequired};var Qt=Lt,Ut=n(151),Kt=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function Vt(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Wt(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function zt(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Gt=function(e){function t(){return Vt(this,t),Wt(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return zt(t,r["Component"]),Kt(t,[{key:"shouldComponentUpdate",value:function(e){return!y.a.are_equal_shallow(e,this.props)}},{key:"_lookUpPubKeyForAddress",value:function(e){return Ut.a.getState().addresses.get(e)}},{key:"render",value:function(){var e=void 0,t=void 0,n=void 0,a="_accounts",o=this.props.pubkey,s=It.a.getState().keys,i=!1;return this.props.account?(e=this.props.account.get("name"),t=this.props.account.get("id"),n=r.createElement(p.a,{to:"/account/"+e+"/permissions"},e)):o?(e=t=o,n=r.createElement(Qt,{pubkey:o},o),a="_keys",i=s.has(o)):this.props.address&&(o=this._lookUpPubKeyForAddress(this.props.address),t=this.props.address,n=o?r.createElement(Qt,{pubkey:o},o):this.props.address,a="_addresses",i=s.has(o)),r.createElement("tr",{key:e},r.createElement("td",null,this.props.account?r.createElement(xt.a,{size:{height:30,width:30},account:e}):o?r.createElement("div",{className:"account-image"},r.createElement(Qt,{pubkey:o},r.createElement(Je.a,{name:"key",size:"4x"}))):null),r.createElement("td",{className:i?"my-key":""},n),r.createElement("td",null,this.props.weights[t]),r.createElement("td",null,r.createElement("button",{className:"button outline",onClick:this.props.onRemoveItem.bind(this,t,a)},r.createElement(g.a,{content:"account.votes.remove_witness"}))))}}]),t}();Gt.propTypes={account:l.object,pubkey:l.string,address:l.string,onRemoveItem:l.func.isRequired,weights:l.object};var Ht=function(e){function t(e){Vt(this,t);var n=Wt(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={selected_item:null,item_name_input:"",weight_input:"",error:null},n.onItemChange=n.onItemChange.bind(n),n.onItemAccountChange=n.onItemAccountChange.bind(n),n.onAddItem=n.onAddItem.bind(n),n}return zt(t,r["Component"]),Kt(t,[{key:"onItemChange",value:function(e){this.setState({item_name_input:e})}},{key:"onItemAccountChange",value:function(e){var t=this;if(this.setState({selected_item:e,error:null}),e&&this.props.validateAccount){var n=this.props.validateAccount(e);if(null===n)return;"string"==typeof n?this.setState({error:n}):n.then(function(e){return t.setState({error:e})})}}},{key:"onWeightChanged",value:function(e){var t=e.target.value.trim();this.setState({weight_input:parseInt(t)})}},{key:"onAddItem",value:function(e){if(e){this.setState({selected_item:null,item_name_input:"",weight_input:"",error:null});var t="string"==typeof e?e:e.get("id");this.props.onAddItem(t,this.state.weight_input)}}},{key:"onWeightKeyDown",value:function(e){13===e.keyCode&&this.state.weight_input&&this.state.selected_item&&this.onAddItem(this.state.selected_item)}},{key:"render",value:function(){var e=this,t=0,n=this.props.accounts.filter(function(e){return!!e}).sort(function(e,t){return e.get("name")>t.get("name")?1:e.get("name")<t.get("name")?-1:0}).map(function(n){return r.createElement(Gt,{key:t++,account:n,weights:e.props.weights,onRemoveItem:e.props.onRemoveItem})}),a=this.props.keys.map(function(n){return r.createElement(Gt,{key:t++,pubkey:n,weights:e.props.weights,onRemoveItem:e.props.onRemoveItem})}),o=this.props.addresses.map(function(n){return r.createElement(Gt,{key:t++,address:n,weights:e.props.weights,onRemoveItem:e.props.onRemoveItem})}),s=this.state.error;!s&&this.state.selected_item&&-1!==this.props.accounts.indexOf(this.state.selected_item)&&(s=H.a.translate("account.perm.warning3")),!s&&this.state.item_name_input&&-1!==this.props.keys.indexOf(this.state.item_name_input)&&(s=H.a.translate("account.perm.warning4"));var i=["10%","70%","30%","10%"];return r.createElement("div",null,r.createElement(ze.a,{label:this.props.label,error:s,placeholder:this.props.placeholder,account:this.state.item_name_input,accountName:this.state.item_name_input,onChange:this.onItemChange,onAccountChanged:this.onItemAccountChange,onAction:this.onAddItem,action_label:"account.votes.add_witness",tabIndex:this.props.tabIndex,allowPubKey:!0,disableActionButton:!this.state.weight_input,allowUppercase:!0},r.createElement("input",{value:this.state.weight_input,onChange:this.onWeightChanged.bind(this),className:"weight-input",type:"number",autoComplete:"off",placeholder:H.a.translate("account.perm.weight"),onKeyDown:this.onWeightKeyDown.bind(this),tabIndex:this.props.tabIndex+1})),r.createElement("div",{style:{paddingTop:"2rem"}},r.createElement("table",{className:"table"},r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",{style:{width:i[0]}}),r.createElement("th",{style:{width:i[1]}},r.createElement(g.a,{content:"account.perm.acct_or_key"})),r.createElement("th",{style:{width:i[2]}},r.createElement(g.a,{content:"account.perm.weight"})),r.createElement("th",{style:{width:i[3]}},r.createElement(g.a,{content:"account.perm.action"})))),r.createElement("tbody",null,n,a,o))))}}]),t}();Ht.propTypes={accounts:O.a.ChainObjectsList,onAddItem:l.func.isRequired,onRemoveItem:l.func.isRequired,validateAccount:l.func,label:l.string.isRequired,placeholder:l.string,tabIndex:l.number,weights:l.object};var Jt=Object(C.a)(Ht,{keep_updating:!0}),Yt=n(273),Xt=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var $t=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={validPassword:!1,pass:null,generatedPassword:"P"+Te.o.get_random_key().toWif().toString()},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["Component"]),Xt(t,[{key:"onSubmit",value:function(){}},{key:"onPasswordChange",value:function(e){var t=e.valid,n=this.props.account.get("name"),r=t?te.a.generateKeyFromPassword(n,"active",e.value).pubKey:null,a=t?te.a.generateKeyFromPassword(n,"owner",e.value).pubKey:null,o=t?te.a.generateKeyFromPassword(n,"active",e.value).pubKey:null;this.setState({validPassword:e.valid,pass:e.value}),this.props.onSetPasswordKeys({active:r,owner:a,memo:o})}},{key:"checkKeyUse",value:function(e,t){return!!e&&("memo"===t?e===this.props.memoKey:this.props[t+"Keys"].reduce(function(t,n){return n===e||t},!1))}},{key:"_onUseKey",value:function(e){if(arguments.length>1&&void 0!==arguments[1]&&arguments[1])this.props["active"===e?"onRemoveActive":"onRemoveOwner"](this.props[e],"_keys");else if(this.props[e]){var t={active:this.props.account.getIn(["active","weight_threshold"]),owner:this.props.account.getIn(["owner","weight_threshold"])};console.log("key",this.props[e],"weights",t,"weight of role:",t[e]),this.props["active"===e?"onAddActive":"owner"===e?"onAddOwner":"onSetMemo"](this.props[e],t[e])}}},{key:"render",value:function(){var e=this.checkKeyUse(this.props.active&&this.props.active,"active"),t=this.checkKeyUse(this.props.owner&&this.props.owner,"owner"),n=this.checkKeyUse(this.props.memo&&this.props.memo,"memo"),a=H.a.translate("account.perm.use_text"),o=H.a.translate("account.perm.remove_text");return r.createElement("div",null,r.createElement("p",{style:{maxWidth:"800px"}},r.createElement(g.a,{content:"account.perm.password_model_1"})),r.createElement("p",{style:{maxWidth:"800px"}},r.createElement(g.a,{content:"wallet.password_model_1"})),r.createElement("p",{style:{maxWidth:"800px"}},r.createElement(g.a,{unsafe:!0,content:"wallet.password_model_2"})),r.createElement("div",{className:"divider"}),r.createElement("form",{style:{maxWidth:"40rem"},onSubmit:this.onSubmit.bind(this),noValidate:!0},r.createElement("label",{className:"left-label"},r.createElement(g.a,{content:"wallet.generated"})),r.createElement("p",null,this.state.generatedPassword),r.createElement("p",{style:{fontWeight:"bold"}},r.createElement(g.a,{content:"account.perm.password_model_2"})),r.createElement(Yt.a,{ref:"password",confirmation:!0,onChange:this.onPasswordChange.bind(this),noLabel:!0,passwordLength:12})),r.createElement("table",{className:"table"},r.createElement("tbody",null,r.createElement("tr",{className:e?"in-use":""},r.createElement("td",null,r.createElement(g.a,{content:"account.perm.new_active"}),":"),r.createElement("td",null,this.props.active),r.createElement("td",{className:"text-right"},r.createElement("div",{className:"button",onClick:this._onUseKey.bind(this,"active",e)},e?o:a))),r.createElement("tr",{className:t?"in-use":""},r.createElement("td",null,r.createElement(g.a,{content:"account.perm.new_owner"}),":"),r.createElement("td",null,this.props.owner),r.createElement("td",{className:"text-right"},r.createElement("div",{className:"button",onClick:this._onUseKey.bind(this,"owner",t)},t?o:a))),r.createElement("tr",{className:n?"in-use":""},r.createElement("td",null,r.createElement(g.a,{content:"account.perm.new_memo"}),":"),r.createElement("td",null,this.props.memo),r.createElement("td",{className:"text-right"},r.createElement("div",{className:"button",style:{visibility:n?"hidden":""},onClick:this._onUseKey.bind(this,"memo",n)},a))))),n?r.createElement("p",{style:{maxWidth:"800px",paddingTop:10},className:"has-error"},r.createElement(g.a,{content:"account.perm.memo_warning"})):null)}}]),t}(),Zt=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var en=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["Component"]),Zt(t,[{key:"isValidPubKey",value:function(e){return!!Te.i.fromPublicKeyString(e)}},{key:"onInputChanged",value:function(e){var t=e.target.value.trim();this.props.onChange(t)}},{key:"onKeyDown",value:function(e){13===e.keyCode&&this.onAction(e)}},{key:"onAction",value:function(e){e.preventDefault(),this.props.onAction&&this.state.valid&&!this.props.disableActionButton&&this.props.onAction(e)}},{key:"render",value:function(){var e=this.props.error;e||!this.props.value||this.isValidPubKey(this.props.value)||(e="Not a valid public key");var t=Oe()("button",{disabled:e||this.props.disableActionButton}),n=It.a.getState().keys,a=this.isValidPubKey(this.props.value)&&n.has(this.props.value);return r.createElement("div",{className:"pubkey-input no-overflow"},r.createElement("div",{className:"content-area"},r.createElement("div",{className:"header-area"},!e&&this.props.value&&this.isValidPubKey(this.props.value)?r.createElement("label",{className:"right-label"},r.createElement(g.a,{content:"account.perm.valid_pub"})):null,r.createElement(g.a,{className:"left-label",component:"label",content:this.props.label})),r.createElement("div",{className:"input-area"},r.createElement("span",{className:"inline-label"},r.createElement("div",{className:"account-image"},r.createElement(Qt,{pubkey:this.props.value},r.createElement(Je.a,{name:"key",size:"4x"}))),r.createElement("input",{type:"text",className:a?"my-key":"",value:this.props.value,placeholder:this.props.placeholder||counterpart.translate("account.public_key"),ref:"user_input",onChange:this.onInputChanged.bind(this),onKeyDown:this.onKeyDown.bind(this),tabIndex:this.props.tabIndex}),this.props.onAction?r.createElement("button",{className:t,onClick:this.onAction.bind(this)},r.createElement(g.a,{content:this.props.action_label})):null)),r.createElement("div",{className:"error-area has-error"},r.createElement("span",null,e))))}}]),t}();en.propTypes={label:l.string.isRequired,value:l.string,error:l.string,placeholder:l.string,onChange:l.func,onAction:l.func,tabIndex:l.number,disableActionButton:l.bool};var tn=en,nn=n(2310),rn=n(117),an=n(43),on=n(73),sn=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var cn=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={known:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["Component"]),sn(t,[{key:"componentDidMount",value:function(){an.a.showModal(this.props.id)}},{key:"render",value:function(){var e=this.props,t=e.title,n=e.contents;return e.open?r.createElement(rn.a,{modalId:this.props.id},r.createElement("h4",{className:"modal-header"},t),n.map(function(e){return r.createElement("p",{key:e},e)})):null}}]),t}(),ln=Object(T.connect)(cn,{listenTo:function(){return[on.a]},getProps:function(e){var t=e.id;return{open:on.a.getState().showingModals.has(t)}}}),un=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var pn=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={isOwner:!1},n.onPublish=n.onPublish.bind(n),n.onReset=n.onReset.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["Component"]),un(t,[{key:"componentWillMount",value:function(){this.updateAccountData(this.props.account),A.a.getFinalFeeAsset(this.props.account,"account_update")}},{key:"componentWillReceiveProps",value:function(e){e.account!==this.props.account&&this.updateAccountData(e.account)}},{key:"permissionsFromImmutableObj",value:function(e){var t=e.get("weight_threshold"),n=e.get("account_auths"),r=e.get("key_auths"),a=e.get("address_auths"),o=n.map(function(e){return e.get(0)}),s=r.map(function(e){return e.get(0)}),i=a.map(function(e){return e.get(0)}),c=n.reduce(function(e,t){return e[t.get(0)]=t.get(1),e},{});return c=r.reduce(function(e,t){return e[t.get(0)]=t.get(1),e},c),{threshold:t,accounts:o,keys:s,addresses:i,weights:c=a.reduce(function(e,t){return e[t.get(0)]=t.get(1),e},c)}}},{key:"permissionsToJson",value:function(e,t,n,r,a){var o={weight_threshold:e};return o.account_auths=t.sort(y.a.sortID).map(function(e){return[e,a[e]]}).toJS(),o.key_auths=n.sort(y.a.sortID).map(function(e){return[e,a[e]]}).toJS(),o.address_auths=r.sort(y.a.sortID).map(function(e){return[e,a[e]]}).toJS(),o}},{key:"updateAccountData",value:function(e){var t=this.permissionsFromImmutableObj(e.get("active")),n=this.permissionsFromImmutableObj(e.get("owner")),r=e.get("options").get("memo_key"),a={active_accounts:t.accounts,active_keys:t.keys,active_addresses:t.addresses,owner_accounts:n.accounts,owner_keys:n.keys,owner_addresses:n.addresses,active_weights:t.weights,owner_weights:n.weights,active_threshold:t.threshold,owner_threshold:n.threshold,memo_key:r,prev_active_accounts:t.accounts,prev_active_keys:t.keys,prev_active_addresses:t.addresses,prev_owner_accounts:n.accounts,prev_owner_keys:n.keys,prev_owner_addresses:n.addresses,prev_active_weights:t.weights,prev_owner_weights:n.weights,prev_active_threshold:t.threshold,prev_owner_threshold:n.threshold,prev_memo_key:r};this.setState(a)}},{key:"isChanged",value:function(){var e=this.state;return e.active_accounts!==e.prev_active_accounts||e.active_keys!==e.prev_active_keys||e.active_addresses!==e.prev_active_addresses||e.owner_accounts!==e.prev_owner_accounts||e.owner_keys!==e.prev_owner_keys||e.owner_addresses!==e.prev_owner_addresses||e.active_threshold!==e.prev_active_threshold||e.owner_threshold!==e.prev_owner_threshold||e.memo_key!==e.prev_memo_key}},{key:"didChange",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state;if("memo"===e)return t.memo_key!==t.prev_memo_key;var n=!1;return["_keys","_active_addresses","_accounts","_threshold"].forEach(function(r){var a=e+r;t[a]!==t["prev_"+a]&&(n=!0)}),n}},{key:"onPublish",value:function(){var e=this.state,t=this.props.account.toJS();t.fee={amount:0,asset_id:A.a.getFinalFeeAsset(t.id,"account_update")};var n={account:t.id};this.didChange("active")&&(n.active=this.permissionsToJson(e.active_threshold,e.active_accounts,e.active_keys,e.active_addresses,e.active_weights)),(this.didChange("owner")||this.state.isOwner)&&(n.owner=this.permissionsToJson(e.owner_threshold,e.owner_accounts,e.owner_keys,e.owner_addresses,e.owner_weights)),e.memo_key&&this.didChange("memo")&&this.isValidPubKey(e.memo_key)&&(n.new_options=this.props.account.get("options").toJS(),n.new_options.memo_key=e.memo_key),St.a.updateAccount(n)}},{key:"isValidPubKey",value:function(e){return!!Te.i.fromPublicKeyString(e)}},{key:"onReset",value:function(){var e=this.state;this.setState({active_accounts:e.prev_active_accounts,active_keys:e.prev_active_keys,active_addresses:e.prev_active_addresses,owner_accounts:e.prev_owner_accounts,owner_keys:e.prev_owner_keys,owner_addresses:e.prev_owner_addresses,active_weights:e.prev_active_weights,owner_weights:e.prev_owner_weights,active_threshold:e.prev_active_threshold,owner_threshold:e.prev_owner_threshold,memo_key:e.prev_memo_key})}},{key:"onAddItem",value:function(e,t,n){var r={},a=e+(y.a.is_object_id(t)?"_accounts":"_keys");r[a]=this.state[a].push(t),this.state[e+"_weights"][t]=n,this.setState(r)}},{key:"onRemoveItem",value:function(e,t,n){console.log("onRemoveItem",e,t,n);var r={},a=e+n;r[a]=this.state[a].filter(function(e){return e!==t}),this.setState(r)}},{key:"onThresholdChanged",value:function(e,t){var n=parseInt(t.target.value.trim()),r={};r[e]=n,this.setState(r)}},{key:"validateAccount",value:function(e,t){return null}},{key:"sumUpWeights",value:function(e,t,n,r){var a=e.reduce(function(e,t){return e+r[t]},0);return a=t.reduce(function(e,t){return e+r[t]},a),n.reduce(function(e,t){return e+r[t]},a)}},{key:"onMemoKeyChanged",value:function(e){this.setState({memo_key:e})}},{key:"onSetPasswordKeys",value:function(e){var t={};(arguments.length>1&&void 0!==arguments[1]?arguments[1]:["active","owner","memo"]).forEach(function(n){t["password_"+n]=e[n]}),this.setState(t)}},{key:"render",value:function(){var e=this,t=void 0,n=void 0,a=H.a.translate("account.perm.warning_title"),o=H.a.translate("account.perm.warning_content"),s=this.state,i=s.active_accounts,c=s.active_keys,l=s.active_addresses,u=s.active_weights,p=this.state,d=p.owner_accounts,m=p.owner_keys,h=p.owner_addresses,f=p.owner_weights,v=this.state.active_threshold>0?this.state.active_threshold:0,b=this.sumUpWeights(i,c,l,u);this.didChange("active")&&b<v&&(t=H.a.translate("account.perm.warning1",{weights_total:b,threshold:v})),v=this.state.owner_threshold>0?this.state.owner_threshold:0,b=this.sumUpWeights(d,m,h,f),this.didChange("owner")&&b<v&&(n=H.a.translate("account.perm.warning2",{weights_total:b,threshold:v}));var y="button"+(!t&&!n&&this.isChanged()&&this.isValidPubKey(this.state.memo_key)?"":" disabled"),_="button outline"+(this.isChanged()?"":" disabled"),E=x.a.Set();return E=E.add(this.props.account.get("id")),r.createElement("div",{className:"grid-content"},r.createElement("div",{className:"generic-bordered-box"},r.createElement(ln,{id:"permissionWarning",title:a,contents:[o]}),r.createElement(Se.b,{setting:"permissionsTabs",segmented:!1,className:"overview-tabs with-shadow",style:{width:"100%"},contentClass:"grid-content no-overflow",tabsClass:"account-overview no-padding bordered-header content-block"},r.createElement(Se.a,{title:"account.perm.active"},r.createElement(Ce.a,{style:{maxWidth:"800px"},path:"components/AccountPermActive"}),r.createElement("form",{className:"threshold"},r.createElement("label",{className:"horizontal"},r.createElement(g.a,{content:"account.perm.threshold"}),"    ",r.createElement("input",{type:"number",placeholder:"0",size:"5",value:this.state.active_threshold,onChange:this.onThresholdChanged.bind(this,"active_threshold"),autoComplete:"off",tabIndex:1}))),r.createElement(Jt,{label:"account.perm.add_permission_label",accounts:i,keys:c,weights:u,addresses:l,validateAccount:this.validateAccount.bind(this,"active"),onAddItem:this.onAddItem.bind(this,"active"),onRemoveItem:this.onRemoveItem.bind(this,"active"),placeholder:H.a.translate("account.perm.account_name_or_key"),tabIndex:2}),r.createElement("br",null),t?r.createElement("div",{className:"content-block has-error"},t):null,r.createElement("div",null,r.createElement("label",{className:"inline-block",style:{position:"relative",top:-10,margin:0},"data-place":"bottom","data-tip":H.a.translate("tooltip.sign_owner")},r.createElement("span",null,r.createElement(g.a,{content:"account.perm.sign_owner"}),":  ")),r.createElement("div",{className:"switch",onClick:function(){e.setState({isOwner:!e.state.isOwner})}},r.createElement("input",{type:"checkbox",checked:this.state.isOwner}),r.createElement("label",null)))),r.createElement(Se.a,{title:"account.perm.owner"},r.createElement(Ce.a,{style:{maxWidth:"800px"},path:"components/AccountPermOwner"}),r.createElement("form",{className:"threshold"},r.createElement("label",{className:"horizontal"},r.createElement(g.a,{content:"account.perm.threshold"}),"    ",r.createElement("input",{type:"number",placeholder:"0",size:"5",value:this.state.owner_threshold,onChange:this.onThresholdChanged.bind(this,"owner_threshold"),autoComplete:"off",tabIndex:4}))),r.createElement(Jt,{label:"account.perm.add_permission_label",accounts:d,keys:m,weights:f,addresses:h,validateAccount:this.validateAccount.bind(this,"owner"),onAddItem:this.onAddItem.bind(this,"owner"),onRemoveItem:this.onRemoveItem.bind(this,"owner"),placeholder:H.a.translate("account.perm.account_name_or_key"),tabIndex:5}),r.createElement("br",null),n?r.createElement("div",{className:"content-block has-error"},n):null),r.createElement(Se.a,{title:"account.perm.memo_key"},r.createElement(Ce.a,{style:{maxWidth:"800px"},path:"components/AccountPermMemo"}),r.createElement(tn,{ref:"memo_key",value:this.state.memo_key,label:"account.perm.memo_public_key",placeholder:"Public Key",onChange:this.onMemoKeyChanged.bind(this),tabIndex:7})),r.createElement(Se.a,{title:"account.perm.password_model"},r.createElement($t,{active:this.state.password_active,owner:this.state.password_owner,memo:this.state.password_memo,onSetPasswordKeys:this.onSetPasswordKeys.bind(this),account:this.props.account,activeKeys:this.state.active_keys,ownerKeys:this.state.owner_keys,memoKey:this.state.memo_key,onAddActive:this.onAddItem.bind(this,"active"),onRemoveActive:this.onRemoveItem.bind(this,"active"),onAddOwner:this.onAddItem.bind(this,"owner"),onRemoveOwner:this.onRemoveItem.bind(this,"owner"),onSetMemo:this.onMemoKeyChanged.bind(this)}))),r.createElement("div",{className:"divider"}),r.createElement("div",{style:{paddingTop:20}},r.createElement("button",{style:{fontSize:"1.2rem"},className:y,onClick:this.onPublish,tabIndex:8},r.createElement(g.a,{content:"account.perm.publish"})),r.createElement("button",{className:_,onClick:this.onReset,tabIndex:9},r.createElement(g.a,{content:"account.perm.reset"})))),r.createElement(nn.a,{accountsList:E,limit:25,compactView:!1,filter:"account_update",style:{paddingTop:"2rem",paddingBottom:"2rem"}}))}}]),t}(),dn=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var mn="-----BEGIN Cybex SIGNED MESSAGE-----",hn="-----END Cybex SIGNED MESSAGE-----",fn=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={tabsm_memo_key:n.props.account.get("options").get("memo_key"),tabsm_memo:"",tabsm_memo_signed:"",tabvm_memo:"",tabvm_verified:null,tabvm_memo_verified:null,tabvm_flag_verifyonchange:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["Component"]),dn(t,[{key:"parseMemo",value:function(e){var t=void 0,n=void 0,r=void 0,a=void 0;try{t=(n=(t=e.split(mn)[1]).split("-----BEGIN META-----"))[0].trim(),n=(r=n[1].split("-----BEGIN SIGNATURE-----"))[0].trim(),r=r[1].split(hn)[0].trim(),a=t+"\n"+n}catch(e){throw new Error(H.a.translate("account.signedmessages.invalidformat"))}var o=void 0,s=void 0,i=void 0,c=void 0;if(n)try{o=(o=n.split("account="))[1].split("\n")[0].trim(),s=(s=n.split("memokey="))[1].split("\n")[0].trim(),i=(i=n.split("block="))[1].split("\n")[0].trim(),c=(c=n.split("timestamp="))[1].split("\n")[0].trim()}catch(e){throw new Error(H.a.translate("account.signedmessages.invalidformat"))}var l=Te.b.getAccount(o);if(null==l)throw new Error(H.a.translate("account.signedmessages.invaliduser"));var u=l.get("options").get("memo_key");if(s!==u)throw new Error(H.a.translate("account.signedmessages.keymismatch"));return{content:t,meta:{account:o,key:u,block:i,timestamp:c},signed:a,signature:r}}},{key:"_tabSMSignAction",value:function(e){var t=this;e.preventDefault(),Promise.resolve(jt.a.unlock()).then(function(){if(t.state.tabsm_memo)try{var e=t.state.tabsm_memo,n=t.state.tabsm_memo_key;/111111111111111111111/.test(n)&&(n=null);var r=void 0;if(e&&n&&!(r=te.a.getPrivateKey(n)))throw new Error(H.a.translate("account.signedmessages.invalidkey"));var a=Te.b.getObject("2.1.0").get("last_irreversible_block_num"),o=new Date,s="account="+t.props.account.get("name")+"\nmemokey="+t.state.tabsm_memo_key+"\nblock="+a+"\ntimestamp="+o.toUTCString(),i=e+"\n"+s;t._tabSMPopMessage(H.a.translate("account.signedmessages.signing"),0),setTimeout(function(){try{var a=Te.k.signBuffer(i,r,n),o=mn+"\n"+e+"\n-----BEGIN META-----\n"+s+"\n-----BEGIN SIGNATURE-----\n"+a.toHex()+"\n"+hn;t.setState({tabsm_memo_signed:o,tabsm_message:""})}catch(e){t._tabSMPopMessage(e.message),t.setState({tabsm_memo_signed:null})}},0)}catch(e){t._tabSMPopMessage(e.message)}})}},{key:"_tabSMHandleChange",value:function(e){this.setState({tabsm_memo:e.target.value})}},{key:"_tabSMHandleChangeKey",value:function(e){this.setState({tabsm_memo_key:e})}},{key:"_tabSMCopyToClipBoard",value:function(e){if(""!==e.target.value){e.target.focus(),e.target.select();try{var t=document.execCommand("copy");this._tabSMPopMessage(t?H.a.translate("account.signedmessages.copysuccessful"):H.a.translate("account.signedmessages.copyunsuccessful"))}catch(e){this._tabSMPopMessage(H.a.translate("account.signedmessages.copyunsuccessful"))}}}},{key:"_tabSMPopMessage",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e3;this.setState({tabsm_message:e}),""!==e&&n>0&&setTimeout(function(){t.setState({tabsm_message:""})},n)}},{key:"_tabVMAction",value:function(e){var t=this;e.preventDefault(),this.setState({tabvm_memo_verified:null,tabvm_verified:!1}),this.state.tabvm_memo&&(this._tabVMPopMessage(H.a.translate("account.signedmessages.verifying"),0),setTimeout(function(){try{var e=t.parseMemo(t.state.tabvm_memo),n=!1;try{n=Te.k.fromHex(e.signature).verifyBuffer(e.signed,Te.i.fromPublicKeyString(e.meta.key))}catch(e){throw new Error(H.a.translate("account.signedmessages.errorverifying"))}if(!n)throw new Error(H.a.translate("account.signedmessages.invalidsignature"));t.setState({tabvm_memo_verified:e,tabvm_verified:n,tabvm_message:""})}catch(e){t._tabVMPopMessage(e.message),t.setState({tabvm_memo_verified:null,tabvm_verified:!1})}},0))}},{key:"_tabVMHandleChange",value:function(e){this.setState({tabvm_memo:e.target.value,tabvm_verified:!1,tabvm_memo_verified:null}),this.state.tabvm_flag_verifyonchange&&this._tabVMAction(e)}},{key:"_tabVMPopMessage",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:3e3;this.setState({tabvm_message:e}),""!==e&&n>0&&setTimeout(function(){t.setState({tabvm_message:""})},n)}},{key:"_tabVMToggleVerifyOnChange",value:function(){this.setState({tabvm_flag_verifyonchange:!this.state.tabvm_flag_verifyonchange})}},{key:"render",value:function(){return r.createElement("div",{className:"grid-content"},r.createElement("div",{className:"generic-bordered-box"},r.createElement(Se.b,{tabsClass:"bordered-header no-padding",setting:"accountSignedMessagesTab",contentClass:"grid-content shrink small-vertical medium-horizontal no-padding"},r.createElement(Se.a,{title:"account.signedmessages.signmessage"},r.createElement("div",{className:"grid-content",style:{overflowX:"hidden"}},r.createElement("div",{className:"content-block no-margin"},r.createElement("h3",null,r.createElement(g.a,{content:"account.signedmessages.signmessage"}))),r.createElement(tn,{ref:"memo_key",value:this.state.tabsm_memo_key,label:"account.perm.memo_public_key",placeholder:"Public Key",tabIndex:7,onChange:this._tabSMHandleChangeKey.bind(this),disableActionButton:!0}),r.createElement("br",null),r.createElement("textarea",{rows:"10",value:this.state.tabsm_memo,onChange:this._tabSMHandleChange.bind(this),placeholder:H.a.translate("account.signedmessages.entermessage")}),r.createElement("span",null,r.createElement("button",{className:"button",onClick:this._tabSMSignAction.bind(this)},r.createElement(g.a,{content:"account.signedmessages.sign"})),r.createElement("text",{style:{color:"gray"}},this.state.tabsm_message)),r.createElement("br",null),r.createElement("br",null),r.createElement("textarea",{rows:"14",value:this.state.tabsm_memo_signed,style:{editable:!1},placeholder:H.a.translate("account.signedmessages.automaticcreation"),onClick:this._tabSMCopyToClipBoard.bind(this)}))),r.createElement(Se.a,{title:"account.signedmessages.verifymessage"},r.createElement("div",{className:"grid-content",style:{overflowX:"hidden"}},r.createElement("div",{className:"content-block no-margin"},r.createElement("h3",null,r.createElement(g.a,{content:"account.signedmessages.verifymessage"})),r.createElement("div",{style:{float:"right",marginTop:"0.1em",marginBottom:"0.5em"}},r.createElement("table",null,r.createElement("tr",null,r.createElement("td",null,r.createElement("label",null,r.createElement(g.a,{content:"account.signedmessages.verifyonchange"}))),r.createElement("td",null,r.createElement("div",{className:"switch",onClick:this._tabVMToggleVerifyOnChange.bind(this)},r.createElement("input",{type:"checkbox",checked:this.state.tabvm_flag_verifyonchange,value:H.a.translate("account.signedmessages.verifyonchange")}),r.createElement("label",null))))))),r.createElement("textarea",{rows:"10",value:this.state.tabvm_memo,onChange:this._tabVMHandleChange.bind(this),placeholder:H.a.translate("account.signedmessages.entermessage")}),r.createElement("span",null,r.createElement("button",{className:"button",onClick:this._tabVMAction.bind(this)},r.createElement(g.a,{content:"account.signedmessages.verify"})),r.createElement("text",{style:{color:"gray"}},this.state.tabvm_message),null!==this.state.tabvm_verified&&r.createElement("div",{style:{float:"right"}},"Message is:",r.createElement("div",{style:{backgroundColor:this.state.tabvm_verified?"green":"red"}},r.createElement("label",null,this.state.tabvm_verified?"verified":"not verified"))),this.state.tabvm_verified&&null!==this.state.tabvm_memo_verified&&r.createElement("div",null,r.createElement("br",null),r.createElement("div",{style:{color:"gray"}},"Verified message from"," ",this.state.tabvm_memo_verified.meta.account,", signed on ",this.state.tabvm_memo_verified.meta.timestamp,":",r.createElement("br",null),r.createElement("pre",null,this.state.tabvm_memo_verified.content)))))))))}}]),t}();fn.propTypes={account:O.a.ChainAccount.isRequired};var gn=fn=Object(C.a)(fn),vn=n(169),bn=n.n(vn),yn=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function _n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function En(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function wn(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var kn=function(e){function t(){return _n(this,t),En(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return wn(t,r["Component"]),yn(t,[{key:"render",value:function(){var e=this.props,t=e.account,n=e.onRemove;return r.createElement("tr",null,r.createElement("td",null,this.props.index),r.createElement("td",null,t.get("id")),r.createElement("td",null,r.createElement(Ge.a,{account:t.get("id")})),n?r.createElement("td",null,r.createElement("button",{onClick:n.bind(this,t.get("id")),className:"button outline"},"Remove")):null)}}]),t}();kn.propTypes={account:O.a.ChainAccount.isRequired},kn.defaultProps={tempComponent:"tr"},kn=Object(C.a)(kn);var On=function(e){function t(){return _n(this,t),En(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return wn(t,r["Component"]),yn(t,[{key:"_onRemove",value:function(e,t,n){if(t){var r=this.props.getCurrentState(t),a=ne.a.new_transaction();a.add_type_operation("account_whitelist",{fee:{amount:0,asset_id:"1.3.0"},authorizing_account:this.props.account.get("id"),account_to_list:t,new_listing:r-bn.a.account_listing[e]}),te.a.process_transaction(a,null,!0)}}},{key:"render",value:function(){var e=this,t=this.props,n=t.removeButton,a=t.white,o=t.list.map(function(t,o){return r.createElement(kn,{key:t,onRemove:n?e._onRemove.bind(e,a?"white_listed":"black_listed"):null,account:t,index:o+1})}).toArray(),s=!0;return o.length||(s=!1,o.push(r.createElement("tr",{key:"empty"},r.createElement("td",{style:{padding:"1rem 0"},colSpan:n?4:3},r.createElement(g.a,{content:this.props.emptyText,account:this.props.account.get("name")}))))),r.createElement("table",{className:"table compact dashboard-table"},s?r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",null,"#"),r.createElement("th",null,r.createElement(g.a,{content:"account.id"})),r.createElement("th",null,r.createElement(g.a,{content:"account.name"})),n?r.createElement("th",null):null)):null,r.createElement("tbody",null,o))}}]),t}(),Cn=function(e){function t(){_n(this,t);var e=En(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={accountName:"",accountToList:null},e}return wn(t,r["Component"]),yn(t,[{key:"_getCurrentState",value:function(e){var t=this.props.account,n=t.get("whitelisted_accounts")||x.a.List(),r=t.get("blacklisted_accounts")||x.a.List(),a=bn.a.account_listing.no_listing;return n.includes(e)&&(a+=bn.a.account_listing.white_listed),r.includes(e)&&(a+=bn.a.account_listing.black_listed),a}},{key:"_onAdd",value:function(e,t){var n=this.state.accountToList,r=this.props.account,a=this._getCurrentState(n);if(n){var o=ne.a.new_transaction();o.add_type_operation("account_whitelist",{fee:{amount:0,asset_id:"1.3.0"},authorizing_account:r.get("id"),account_to_list:n,new_listing:a+bn.a.account_listing[e]}),te.a.process_transaction(o,null,!0)}}},{key:"_onAccountFound",value:function(e){console.log("accountFound:",e),this.setState({accountName:e?e.get("name"):null,accountToList:e?e.get("id"):null})}},{key:"_onAccountChanged",value:function(e){console.log("account changed:",e),this.setState({accountName:e,accountToList:null})}},{key:"render",value:function(){var e=this.props.account,t=this.state.accountName;return r.createElement("div",{className:"grid-content"},r.createElement("div",{className:"generic-bordered-box"},r.createElement(Se.b,{setting:"whitelistTab",contentClass:"grid-content shrink small-vertical medium-horizontal no-padding",segmented:!1,className:"overview-tabs with-shadow",style:{width:"100%"},tabsClass:"account-overview no-padding bordered-header content-block"},r.createElement(Se.a,{title:"account.whitelist.title"},r.createElement("div",{style:{paddingBottom:"1rem"},className:"small-12"},r.createElement("div",null,r.createElement(On,{emptyText:"account.whitelist.empty",account:e,getCurrentState:this._getCurrentState.bind(this),list:e.get("whitelisted_accounts")||x.a.List(),removeButton:!0,white:!0})),e.get("whitelisted_accounts")?null:r.createElement("p",{className:"has-error"},"Please note, whitelisting is not working yet due to unresolved backend issue."),r.createElement("div",{style:{padding:"2rem 0"}},r.createElement(ze.a,{label:"account.whitelist.add",accountName:t,onAccountChanged:this._onAccountFound.bind(this),onChange:this._onAccountChanged.bind(this),account:t,tabIndex:2,onAction:this._onAdd.bind(this,"white_listed"),action_label:"account.perm.confirm_add",white:!1})))),r.createElement(Se.a,{title:"account.whitelist.black"},r.createElement("div",{style:{paddingBottom:"1rem"},className:"small-12"},r.createElement("div",null,r.createElement(On,{emptyText:"account.whitelist.empty_black",account:e,getCurrentState:this._getCurrentState.bind(this),list:e.get("blacklisted_accounts"),removeButton:!0})),r.createElement("div",{style:{padding:"2rem 0"}},r.createElement(ze.a,{label:"account.whitelist.add_black",accountName:t,onAccountChanged:this._onAccountFound.bind(this),onChange:this._onAccountChanged.bind(this),account:t,tabIndex:2,onAction:this._onAdd.bind(this,"black_listed"),action_label:"account.perm.confirm_add"})))),r.createElement(Se.a,{title:"account.whitelist.white_by"},r.createElement("div",{style:{paddingBottom:"1rem"},className:"small-12"},r.createElement("div",null,r.createElement(On,{emptyText:"account.whitelist.empty_white_by",account:e,list:e.get("whitelisting_accounts")})))),r.createElement(Se.a,{title:"account.whitelist.black_by"},r.createElement("div",{style:{paddingBottom:"1rem"},className:"small-12"},r.createElement("div",null,r.createElement(On,{emptyText:"account.whitelist.empty_black_by",account:e,list:e.get("blacklisting_accounts")})))))))}}]),t}(),Tn=n(2301),An=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var Nn=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["Component"]),An(t,[{key:"onApprove",value:function(){var e=[],t=[];this.props.vote_ids.has(this.props.worker.get("vote_against"))&&t.push(this.props.worker.get("vote_against")),this.props.vote_ids.has(this.props.worker.get("vote_for"))||e.push(this.props.worker.get("vote_for")),this.props.onChangeVotes(e,t)}},{key:"onReject",value:function(){var e=[];this.props.vote_ids.has(this.props.worker.get("vote_against"))&&e.push(this.props.worker.get("vote_against")),this.props.vote_ids.has(this.props.worker.get("vote_for"))&&e.push(this.props.worker.get("vote_for")),this.props.onChangeVotes([],e)}},{key:"render",value:function(){var e=this.props.rank,t=this.props.worker.toJS(),n=t.total_votes_for-t.total_votes_against,a=!!this.props.vote_ids.has(t.vote_for)||!this.props.vote_ids.has(t.vote_against)&&null,o=0;t.daily_pay<this.props.rest?o=100:this.props.rest>0&&(o=this.props.rest/t.daily_pay*100),console.debug("Worker: ",t);var s=H.a.localize(new Date(t.work_begin_date+"Z"),{type:"date",format:"short_custom"}),i=H.a.localize(new Date(t.work_end_date+"Z"),{type:"date",format:"short_custom"}),c=new Date,l=new Date(t.work_end_date+"Z")<=c,u=new Date(t.work_begin_date+"Z")<=c,p=!l&&n<this.props.voteThreshold||!u;return r.createElement("tr",{className:a?"":"unsupported"},l?null:r.createElement("td",{style:{textAlign:"right",paddingRight:10,paddingLeft:0}},e),r.createElement("td",{className:"worker-name",style:{textAlign:"left"}},r.createElement("div",{className:"inline-block",style:{paddingRight:5,position:"relative",top:-1}},r.createElement("a",{style:{visibility:t.url&&-1!==t.url.indexOf(".")?"visible":"hidden"},href:t.url,target:"_blank",rel:"noopener noreferrer"},r.createElement(Je.a,{name:"share"}))),r.createElement("div",{"data-tip":t.name,className:"inline-block tooltip"},t.name,r.createElement("br",null),r.createElement(Ge.a,{account:t.worker_account}))),r.createElement("td",{style:{textAlign:"right"},className:"hide-column-small"},r.createElement(q.a,{amount:n,asset:"1.3.0",decimalOffset:5,hide_asset:!0})),p?r.createElement("td",{style:{textAlign:"right"}},r.createElement(q.a,{amount:Math.max(0,this.props.voteThreshold-n),asset:"1.3.0",hide_asset:!0,decimalOffset:5})):null,r.createElement("td",null,s," - ",i),l||p?null:r.createElement("td",{style:{textAlign:"right"},className:"hide-column-small"},y.a.format_number(o,2),"%"),r.createElement("td",{style:{textAlign:"right"},className:"hide-column-small"},r.createElement(Tn.b,{hide_asset:!0,fromAsset:"1.3.0",toAsset:this.props.preferredUnit,amount:t.daily_pay})),l||p?null:r.createElement("td",{style:{textAlign:"right"}},this.props.rest<=0?"0.00":r.createElement(Tn.b,{hide_asset:!0,fromAsset:"1.3.0",toAsset:this.props.preferredUnit,amount:this.props.rest})),r.createElement("td",{className:"clickable",onClick:this.props.proxy?function(){}:this[a?"onReject":"onApprove"].bind(this)},this.props.proxy?r.createElement(Je.a,{name:"locked"}):r.createElement(Je.a,{name:a?"checkmark-circle":"minus-circle"})))}}]),t}();Nn.propTypes={worker:O.a.ChainObject.isRequired,onAddVote:l.func,onRemoveVote:l.func,vote_ids:l.object},Nn.defaultProps={tempComponent:"tr"};var Pn=Object(C.a)(Nn),Sn=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function xn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function jn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function In(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function Rn(e,t){var n="",r=0,a=void 0;return"witness"===e?a=Te.b.getWitnessById(t.get("id")):"committee"===e&&(a=Te.b.getCommitteeMemberById(t.get("id"))),{url:n=a?a.get("url"):n,votes:r=a?a.get("total_votes"):r,id:a.get("id")}}var Dn=function(e){function t(){return xn(this,t),jn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return In(t,r["Component"]),Sn(t,[{key:"shouldComponentUpdate",value:function(e){return e.account!==this.props.account||e.action!==this.props.action||e.isActive!==this.props.isActive||e.idx!==this.props.idx||e.proxy!==this.props.proxy}},{key:"onAction",value:function(e){this.props.onAction(e)}},{key:"render",value:function(){var e=this.props,t=e.account,n=e.type,a=e.action,o=e.isActive,s=t.get("id"),i=Rn(n,t),c=i.url,l=i.votes,u=c&&c.length>0&&-1===c.indexOf("http")?"http://"+c:c,p="remove"===a;return r.createElement("tr",{className:p?"":"unsupported"},r.createElement("td",{style:{textAlign:"right"}},this.props.idx+1),r.createElement("td",{style:{textAlign:"left"}},r.createElement(Ge.a,{account:t.get("id")})),r.createElement("td",null,u&&-1!==u.indexOf(".")?r.createElement("a",{href:u,target:"_blank",rel:"noopener noreferrer"},r.createElement(Je.a,{name:"share"})):null),r.createElement("td",null,r.createElement(q.a,{amount:l,asset:"1.3.0",decimalOffset:5,hide_asset:!0})),r.createElement("td",null,r.createElement(g.a,{content:"account.votes."+(o?"active_short":"inactive")})),r.createElement("td",{style:{textAlign:"center"}},r.createElement(g.a,{content:"settings."+(p?"yes":"no")})),r.createElement("td",{className:this.props.proxy?"":"clickable",onClick:this.props.proxy?function(){}:this.onAction.bind(this,s)},this.props.proxy?r.createElement(Je.a,{name:"locked"}):r.createElement(Je.a,{name:p?"checkmark-circle":"minus-circle"})))}}]),t}();Dn.propTypes={account:l.object.isRequired,onAction:l.func.isRequired};var Mn=function(e){function t(e){xn(this,t);var n=jn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={selected_item:null,item_name_input:"",error:null},n.onItemChange=n.onItemChange.bind(n),n.onItemAccountChange=n.onItemAccountChange.bind(n),n.onAddItem=n.onAddItem.bind(n),n}return In(t,r["Component"]),Sn(t,[{key:"onItemChange",value:function(e){this.setState({item_name_input:e})}},{key:"onItemAccountChange",value:function(e){var t=this;if(this.setState({selected_item:e,error:null}),e&&this.props.validateAccount){var n=this.props.validateAccount(e);if(null===n)return;"string"==typeof n?this.setState({error:n}):n.then(function(e){return t.setState({error:e})})}}},{key:"onAddItem",value:function(e){if(e){this.setState({selected_item:null,item_name_input:"",error:null}),this.props.onAddItem(e.get("id"))}}},{key:"render",value:function(){var e=this;if(!this.props.items)return null;var t=this.props.items.filter(function(e){return!!e}).sort(function(t,n){var r=Rn(e.props.type,t).votes,a=Rn(e.props.type,n).votes;return r!==a?a-r:t.get("name")>n.get("name")?1:t.get("name")<n.get("name")?-1:0}).map(function(t,n){var a=e.props.supported&&e.props.supported.includes(t.get("id"))?"remove":"add",o=e.props.active.includes(Rn(e.props.type,t).id);return r.createElement(Dn,{idx:n,key:t.get("name"),account:t,type:e.props.type,onAction:"add"===a?e.props.onAddItem:e.props.onRemoveItem,isSelected:-1!==e.props.items.indexOf(t),action:a,isActive:o,proxy:e.props.proxy})}),n=this.state.error;!n&&this.state.selected_item&&-1!==this.props.items.indexOf(this.state.selected_item)&&(n=H.a.translate("account.votes.already"));var a=["10%","20%","40%","20%","10%"];return r.createElement("div",null,this.props.withSelector?r.createElement(ze.a,{style:{maxWidth:"600px"},label:this.props.label,error:n,placeholder:this.props.placeholder,account:this.state.item_name_input,accountName:this.state.item_name_input,onChange:this.onItemChange,onAccountChanged:this.onItemAccountChange,onAction:this.onAddItem,action_label:"account.votes.add_witness",tabIndex:this.props.tabIndex}):null,this.props.title&&t.length?r.createElement("h4",null,this.props.title):null,t.length?r.createElement("table",{className:"table dashboard-table"},r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",{style:{textAlign:"right"}},"#"),r.createElement("th",{style:{textAlign:"left",maxWidth:a[1]}},r.createElement(g.a,{content:"account.votes.name"})),r.createElement("th",{style:{maxWidth:a[2]}},r.createElement(g.a,{content:"account.votes.about"})),r.createElement("th",{style:{maxWidth:a[3]}},r.createElement(g.a,{content:"account.votes.votes"})),r.createElement("th",{style:{maxWidth:a[4]}},r.createElement(g.a,{content:"account.votes.status.title"})),r.createElement("th",{style:{maxWidth:a[0]}},r.createElement(g.a,{content:"account.votes.supported"})),r.createElement("th",{style:{maxWidth:a[5]}},r.createElement(g.a,{content:"account.votes.toggle"})))),r.createElement("tbody",null,t)):null)}}]),t}();Mn.propTypes={items:O.a.ChainObjectsList,onAddItem:l.func.isRequired,onRemoveItem:l.func.isRequired,validateAccount:l.func,label:l.string.isRequired,placeholder:l.string,tabIndex:l.number,action:l.string,withSelector:l.bool},Mn.defaultProps={action:"remove",withSelector:!0,autosubscribe:!1};var Fn=Object(C.a)(Mn,{keep_updating:!0}),qn=n(80),Bn=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ln=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var s,i=e[Symbol.iterator]();!(r=(s=i.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{!r&&i.return&&i.return()}finally{if(a)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),Qn=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var Un=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e)),r=e.proxy.get("id"),a=e.proxy.get("name");return n.state={proxy_account_id:"1.2.5"===r?"":r,prev_proxy_account_id:"1.2.5"===r?"":r,current_proxy_input:"1.2.5"===r?"":a,witnesses:null,committee:null,vote_ids:x.a.Set(),proxy_vote_ids:x.a.Set(),lastBudgetObject:e.initialBudget.get("id"),workerTableIndex:e.viewSettings.get("workerTableIndex",1),all_witnesses:x.a.List(),all_committee:x.a.List()},n.onProxyAccountFound=n.onProxyAccountFound.bind(n),n.onPublish=n.onPublish.bind(n),n.onReset=n.onReset.bind(n),n._getVoteObjects=n._getVoteObjects.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["Component"]),Qn(t,[{key:"componentWillMount",value:function(){A.a.getFinalFeeAsset(this.props.account,"account_update"),this.getBudgetObject()}},{key:"componentDidMount",value:function(){this.updateAccountData(this.props),this._getVoteObjects(),this._getVoteObjects("committee")}},{key:"componentWillReceiveProps",value:function(e){}},{key:"updateAccountData",value:function(e){var t=this,n=e.account,r=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.state).proxy_account_id,a=Te.b.getAccount(r),o=n.get("options"),s=a?a.get("options"):null,i=a?a.get("name"):"";"1.2.5"===r&&(r="",i="");var c=o.get("votes").toArray(),l=x.a.Set(c),u=null,p=x.a.Set([]);if("1.2.5"!==r&&s){var d=s.get("votes").toArray();p=x.a.Set(d),u=Object(Te.g)(Te.b.getObjectByVoteID,d,5e3)}Promise.all([Object(Te.g)(Te.b.getObjectByVoteID,c,5e3),u]).then(function(e){var n=Ln(e,2),a=n[0],o=n[1];function s(e){var t=new x.a.List,n=new x.a.List,r=new x.a.Set;return e.forEach(function(e){var r=e.get("committee_member_account");r?n=n.push(r):(r=e.get("worker_account"))||(r=e.get("witness_account"))&&(t=t.push(r))}),{witnesses:t,committee:n,workers:r}}var c=s(a),u=c.witnesses,d=c.committee,m=c.workers,h=s(o||[]),f=h.witnesses,g=h.committee,v=h.workers,b={proxy_account_id:r,current_proxy_input:i,witnesses:u,committee:d,workers:m,proxy_witnesses:f,proxy_committee:g,proxy_workers:v,vote_ids:l,proxy_vote_ids:p,prev_witnesses:u,prev_committee:d,prev_workers:m,prev_vote_ids:l};t.setState(b)})}},{key:"isChanged",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state;return e.proxy_account_id!==e.prev_proxy_account_id||e.witnesses!==e.prev_witnesses||e.committee!==e.prev_committee||!x.a.is(e.vote_ids,e.prev_vote_ids)}},{key:"_getVoteObjects",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"witnesses",n=arguments[1],r=this.state["all_"+t],a="witnesses"===t,o=void 0;if(n)o=parseInt(n[n.length-1].split(".")[2],10);else{n=[];var s=this.props.globalObject.get(a?"active_witnesses":"active_committee_members").last()||"1."+(a?"6":"5")+".1";o=parseInt(s.split(".")[2],10);for(var i=1;i<=o+10;i++)n.push("1."+(a?"6":"5")+"."+i)}Object(Te.g)(Te.b.getObject,n,5e3,{}).then(function(s){if(e.state["all_"+t]=r.concat(x.a.List(s.filter(function(e){return!!e}).map(function(e){return e.get(a?"witness_account":"committee_member_account")}))),s[s.length-1]){n=[];for(var i=o+11;i<=o+20;i++)n.push("1."+(a?"6":"5")+"."+i);return e._getVoteObjects(t,n)}e.forceUpdate()})}},{key:"onPublish",value:function(){var e=this,t=this.props.account.toJS(),n={account:t.id},r={memo_key:t.options.memo_key},a=this.state.proxy_account_id;r.voting_account=a||"1.2.5",r.num_witness=this.state.witnesses.size,r.num_committee=this.state.committee.size,n.new_options=r,n.fee={amount:0,asset_id:A.a.getFinalFeeAsset(t.id,"account_update")};var o=this.state.vote_ids,s=this._getWorkerArray(),i=new Date;function c(e,t){return e.includes(t)&&(e=e.delete(t)),e}s.forEach(function(e){e&&(new Date(e.get("work_end_date"))<=i&&(o=c(o,e.get("vote_for"))),o=c(o,e.get("vote_against")))}),Object(Te.g)(Te.b.getWitnessById,this.state.witnesses.toArray(),4e3).then(function(t){var n=t.map(function(e){return e.get("vote_id")});return Promise.all([Promise.resolve(n),Object(Te.g)(Te.b.getCommitteeMemberById,e.state.committee.toArray(),4e3)])}).then(function(e){n.new_options.votes=e[0].concat(e[1].map(function(e){return e.get("vote_id")})).concat(o.filter(function(e){return"2"===e.split(":")[0]}).toArray()).sort(function(e,t){var n=e.split(":"),r=t.split(":");return parseInt(n[1],10)-parseInt(r[1],10)}),St.a.updateAccount(n)})}},{key:"onReset",value:function(){var e=this,t=this.state;this.refs.voting_proxy&&this.refs.voting_proxy.refs.bound_component&&this.refs.voting_proxy.refs.bound_component.onResetProxy(),this.setState({proxy_account_id:t.prev_proxy_account_id,current_proxy_input:t.prev_proxy_input,witnesses:t.prev_witnesses,committee:t.prev_committee,workers:t.prev_workers,vote_ids:t.prev_vote_ids},function(){e.updateAccountData(e.props)})}},{key:"onAddItem",value:function(e,t){var n={};n[e]=this.state[e].push(t),this.setState(n)}},{key:"onRemoveItem",value:function(e,t){var n={};n[e]=this.state[e].filter(function(e){return e!==t}),this.setState(n)}},{key:"onChangeVotes",value:function(e,t){var n={};n.vote_ids=this.state.vote_ids,e.length&&e.forEach(function(e){n.vote_ids=n.vote_ids.add(e)}),t&&t.forEach(function(e){n.vote_ids=n.vote_ids.delete(e)}),this.setState(n)}},{key:"validateAccount",value:function(e,t){return t?"witnesses"===e?Object(Te.g)(Te.b.getWitnessById,[t.get("id")],3e3).then(function(e){return e[0]?null:"Not a witness"}):"committee"===e?Object(Te.g)(Te.b.getCommitteeMemberById,[t.get("id")],3e3).then(function(e){return e[0]?null:"Not a committee member"}):null:null}},{key:"onProxyChange",value:function(e){var t=Te.b.getAccount(e);(!t||t&&t.get("id")!==this.state.proxy_account_id)&&this.setState({proxy_account_id:"",proxy_witnesses:x.a.Set(),proxy_committee:x.a.Set(),proxy_workers:x.a.Set()}),this.setState({current_proxy_input:e})}},{key:"onProxyAccountFound",value:function(e){var t=this;this.setState({proxy_account_id:e?e.get("id"):""},function(){t.updateAccountData(t.props)})}},{key:"onClearProxy",value:function(){this.setState({proxy_account_id:""})}},{key:"_getTotalVotes",value:function(e){return parseInt(e.get("total_votes_for"),10)-parseInt(e.get("total_votes_against"),10)}},{key:"getBudgetObject",value:function(){var e=this,t=this.state.lastBudgetObject,n=void 0;n=Te.b.getObject(t);var r=parseInt(t.split(".")[2],10);if(n){var a=n.get("time");/Z$/.test(a)||(a+="Z");var o=new Date,i=r+Math.floor((o-new Date(a).getTime())/1e3/60/60)-1;if(r>=i)return;var c="2.13."+Math.max(r,i),l=parseInt(c.split(".")[2],10);Object(Te.g)(Te.b.getObject,[c],void 0,{}).then(function(t){null===Ln(t,1)[0]?e.setState({lastBudgetObject:"2.13."+(l-1)},e.getBudgetObject):(s.b.setLastBudgetObject(c),e.setState({lastBudgetObject:c}))})}else{var u="2.13."+(r-1);Object(Te.g)(Te.b.getObject,[u],void 0,{}).then(function(t){null===Ln(t,1)[0]?e.setState({lastBudgetObject:"2.13."+(r-2)},e.getBudgetObject):(s.b.setLastBudgetObject(u),e.setState({lastBudgetObject:u}))})}}},{key:"_getWorkerArray",value:function(){for(var e=[],t=0;t<100;t++){var n="1.14."+t,r=Te.b.getObject(n,!1,!1);if(null===r)break;e.push(r)}return e}},{key:"_setWorkerTableIndex",value:function(e){this.setState({workerTableIndex:e})}},{key:"render",value:function(){var e=this,t=this.state.workerTableIndex,n=this.props.settings.get("unit")||"1.3.0",a=!!this.state.proxy_account_id,o=Oe()("button",{disabled:!this.isChanged()}),s=this.props.globalObject,i=void 0;this.state.lastBudgetObject&&(i=Te.b.getObject(this.state.lastBudgetObject));var c=0,l=s?parseInt(s.getIn(["parameters","worker_budget_per_day"]),10):0;i&&(l=Math.min(24*i.getIn(["record","worker_budget"]),l),c=Math.min(24*i.getIn(["record","worker_budget"]),l));var u=new Date,d=this._getWorkerArray(),m=0,h=d.filter(function(e){return!!e&&(new Date(e.get("work_end_date")+"Z")>u&&new Date(e.get("work_begin_date")+"Z")<=u)}).sort(function(t,n){return e._getTotalVotes(n)-e._getTotalVotes(t)}).map(function(t,o){var s=parseInt(t.get("daily_pay"),10);l-=s;var i=t.get("total_votes_for")-t.get("total_votes_against");return l<=0&&!m&&(m=i),m&&i<m?null:r.createElement(Pn,{preferredUnit:n,rest:l+s,rank:o+1,key:t.get("id"),worker:t.get("id"),vote_ids:e.state[a?"proxy_vote_ids":"vote_ids"],onChangeVotes:e.onChangeVotes.bind(e),proxy:a,voteThreshold:m})}).filter(function(e){return!!e}),f=d.filter(function(e){if(!e)return!1;var t=e.get("total_votes_for")-e.get("total_votes_against");return new Date(e.get("work_end_date")+"Z")>u&&t<m||new Date(e.get("work_begin_date")+"Z")>u}).sort(function(t,n){return e._getTotalVotes(n)-e._getTotalVotes(t)}).map(function(t,o){return r.createElement(Pn,{preferredUnit:n,rest:0,rank:o+1,key:t.get("id"),worker:t.get("id"),vote_ids:e.state[a?"proxy_vote_ids":"vote_ids"],onChangeVotes:e.onChangeVotes.bind(e),proxy:a,voteThreshold:m})}),v=d.filter(function(e){return!!e&&new Date(e.get("work_end_date"))<=u}).sort(function(t,n){return e._getTotalVotes(n)-e._getTotalVotes(t)}).map(function(t,o){return r.createElement(Pn,{preferredUnit:n,rest:0,rank:o+1,key:t.get("id"),worker:t.get("id"),vote_ids:e.state[a?"proxy_vote_ids":"vote_ids"],onChangeVotes:e.onChangeVotes.bind(e),proxy:a,voteThreshold:m})}),b=r.createElement("div",null,r.createElement("button",{className:Oe()(o,{success:this.isChanged()}),onClick:this.onPublish,tabIndex:4},r.createElement(g.a,{content:"account.votes.publish"})),r.createElement("button",{className:"button "+o,onClick:this.onReset,tabIndex:8},r.createElement(g.a,{content:"account.perm.reset"}))),y=r.createElement(ze.a,{hideImage:!0,account:this.state.current_proxy_input,accountName:this.state.current_proxy_input,onChange:this.onProxyChange.bind(this),onAccountChanged:this.onProxyAccountFound,tabIndex:1,placeholder:"Proxy not set"},r.createElement("span",{style:{paddingLeft:5,position:"relative",top:-1,display:a?"":"none"}},r.createElement(Je.a,{name:"locked",size:"1x"})),r.createElement("span",{style:{paddingLeft:5,position:"relative",top:9,display:a?"none":""}},r.createElement(p.a,{to:"/help/voting"},r.createElement(Je.a,{name:"question-circle",size:"1x"})))),_=2===t,E=r.createElement("div",{className:"inline-block",style:{display:this.isChanged()?"block":"none",color:"red",padding:"0.85rem",fontSize:"0.9rem"}},r.createElement(g.a,{content:"account.votes.save_finish"}));return r.createElement("div",{className:"grid-content app-tables",ref:"appTables"},r.createElement("div",{className:"content-block small-12"},r.createElement("div",{className:"generic-bordered-box"},r.createElement(Se.b,{setting:"votingTab",className:"overview-tabs",defaultActiveTab:0,segmented:!1,tabsClass:"account-overview no-padding bordered-header content-block",contentClass:"no-padding",actionButtons:b},r.createElement(Se.a,{disabled:!0,title:y,className:"total-value"}),r.createElement(Se.a,{title:"explorer.witnesses.title"},r.createElement("div",{className:Oe()("content-block")},r.createElement("div",{className:"hide-selector"},r.createElement("div",{className:"new-worker-button"},E)),r.createElement(Fn,{type:"witness",label:"account.votes.add_witness_label",items:this.state.all_witnesses,validateAccount:this.validateAccount.bind(this,"witnesses"),onAddItem:this.onAddItem.bind(this,"witnesses"),onRemoveItem:this.onRemoveItem.bind(this,"witnesses"),tabIndex:a?-1:2,supported:this.state[a?"proxy_witnesses":"witnesses"],withSelector:!1,active:s.get("active_witnesses"),proxy:this.state.proxy_account_id}))),r.createElement(Se.a,{title:"explorer.committee_members.title"},r.createElement("div",{className:Oe()("content-block")},r.createElement("div",{className:"hide-selector"},r.createElement("div",{className:"new-worker-button"},E)),r.createElement(Fn,{type:"committee",label:"account.votes.add_committee_label",items:this.state.all_committee,validateAccount:this.validateAccount.bind(this,"committee"),onAddItem:this.onAddItem.bind(this,"committee"),onRemoveItem:this.onRemoveItem.bind(this,"committee"),tabIndex:a?-1:3,supported:this.state[a?"proxy_committee":"committee"],withSelector:!1,active:s.get("active_committee_members"),proxy:this.state.proxy_account_id}))),r.createElement(Se.a,{title:"account.votes.workers_short"},r.createElement("div",{className:"hide-selector"},r.createElement("div",{style:{paddingLeft:10},className:Oe()("hide-selector-item",{inactive:0!==t}),onClick:this._setWorkerTableIndex.bind(this,0)},H.a.translate("account.votes.new",{count:f.length})),r.createElement("div",{className:Oe()("hide-selector-item",{inactive:1!==t}),onClick:this._setWorkerTableIndex.bind(this,1)},H.a.translate("account.votes.active",{count:h.length})),v.length?r.createElement("div",{className:Oe()("hide-selector-item",{inactive:!_}),onClick:_?function(){}:this._setWorkerTableIndex.bind(this,2)},r.createElement(g.a,{content:"account.votes.expired"})):null,r.createElement("div",{className:"new-worker-button flex-flow-end"},E,r.createElement(p.a,{to:"/create-worker"},r.createElement("div",{className:"button no-margin"},r.createElement(g.a,{content:"account.votes.create_worker"}))))),r.createElement("table",{className:"table dashboard-table"},2===t?null:0===t?r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",null),r.createElement("th",{colSpan:"3",style:{textAlign:"left"}},r.createElement(g.a,{content:"account.votes.threshold"})),r.createElement("th",{style:{textAlign:"right"}},r.createElement(q.a,{decimalOffset:5,hide_asset:!0,amount:m,asset:"1.3.0"})),r.createElement("th",{colSpan:"3"}))):r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",null),r.createElement("th",{style:{textAlign:"left"}},r.createElement(g.a,{content:"account.votes.total_budget"})," (",r.createElement(qn.a,{name:n}),")"),r.createElement("th",{colSpan:"4",className:"hide-column-small"}),r.createElement("th",{style:{textAlign:"right"}},s?r.createElement(Tn.b,{hide_asset:!0,fromAsset:"1.3.0",toAsset:n,amount:c}):null),r.createElement("th",{className:"hide-column-small"}))),r.createElement("thead",null,r.createElement("tr",null,2===t?null:r.createElement("th",{style:{textAlign:"right"}},r.createElement(g.a,{content:"account.votes.line"})),r.createElement("th",{style:{textAlign:"left"}},r.createElement(g.a,{content:"account.user_issued_assets.description"})),r.createElement("th",{style:{textAlign:"right"},className:"hide-column-small"},r.createElement(g.a,{content:"account.votes.total_votes"})),0===t?r.createElement("th",{style:{textAlign:"right"}},r.createElement(g.a,{content:"account.votes.missing"})):null,r.createElement("th",null,r.createElement(g.a,{content:"explorer.workers.period"})),2===t||0===t?null:r.createElement("th",{style:{textAlign:"right"},className:"hide-column-small"},r.createElement(g.a,{content:"account.votes.funding"})),r.createElement("th",{style:{textAlign:"right"},className:"hide-column-small"},r.createElement(g.a,{content:"account.votes.daily_pay"}),r.createElement("div",{style:{paddingTop:5,fontSize:"0.8rem"}},"(",r.createElement(qn.a,{name:n}),")")),2===t||0===t?null:r.createElement("th",{style:{textAlign:"right"}},r.createElement(g.a,{content:"explorer.witnesses.budget"}),r.createElement("div",{style:{paddingTop:5,fontSize:"0.8rem"}},"(",r.createElement(qn.a,{name:n}),")")),r.createElement("th",null,r.createElement(g.a,{content:"account.votes.toggle"})))),r.createElement("tbody",null,0===t?f:1===t?h:v)))))))}}]),t}();Un.propTypes={initialBudget:O.a.ChainObject.isRequired,globalObject:O.a.ChainObject.isRequired,proxy:O.a.ChainAccount.isRequired},Un.defaultProps={globalObject:"2.0.0"},Un=Object(C.a)(Un);var Kn=function(e){return r.createElement(Un,Bn({},e,{initialBudget:s.b.getLastBudgetObject()}))},Vn=n(348),Wn=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function zn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Gn(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Hn(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Jn=function(e){function t(){zn(this,t);var e=Gn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={amount:0},e}return Hn(t,r["Component"]),Wn(t,[{key:"onAmountChanged",value:function(e){var t=e.amount;e.asset;this.setState({amount:t})}},{key:"onSubmit",value:function(e){e.preventDefault(),L.a.publish("settlement_modal","close");var t=y.a.get_asset_precision(this.props.asset.get("precision")),n=this.state.amount.replace(/,/g,"");n*=t;var r=ne.a.new_transaction();return r.add_type_operation("asset_settle",{fee:{amount:0,asset_id:0},account:this.props.account.get("id"),amount:{amount:n,asset_id:this.props.asset.get("id")}}),te.a.process_transaction(r,null,!0).then(function(e){return!0}).catch(function(e){return console.error("asset settle error: ",e),!1})}},{key:"render",value:function(){var e=this.props,t=e.asset,n=e.account,a=this.state.amount;if(!t)return null;var o=t.get("id"),s=n.get("balances"),i=null,c=0;s&&s.forEach(function(e){var t=Te.b.getObject(e);if(!t.get("balance"))return null;t.get("asset_type")===o&&(i=e,c=t.get("balance"))});var l=y.a.get_asset_precision(t.get("precision")),u=a?a.replace(/,/g,""):0,p=parseFloat(u)>0&&parseFloat(u)*l<=parseFloat(c)?"button success":"button disabled",d=i?r.createElement("span",null,r.createElement(g.a,{content:"exchange.balance"}),": ",r.createElement(z.a,{balance:i})):null;return r.createElement("form",{className:"grid-block vertical full-width-content"},r.createElement(g.a,{component:"h3",content:"modal.settle.title",asset:t.get("symbol")}),r.createElement("div",{className:"grid-container ",style:{paddingTop:"2rem"}},r.createElement("div",{className:"content-block",style:{maxWidth:"25rem"}},r.createElement(J.a,{label:"modal.settle.amount",amount:a,onChange:this.onAmountChanged.bind(this),display_balance:d,asset:o,assets:[o],tabIndex:1})),r.createElement("div",{className:"content-block"},r.createElement("input",{type:"submit",className:p,onClick:this.onSubmit.bind(this),value:H.a.translate("modal.settle.submit")}))))}}]),t}();Jn.propTypes={asset:O.a.ChainAsset.isRequired,account:O.a.ChainAccount.isRequired},Jn=Object(C.a)(Jn,{keep_updating:!0});var Yn=function(e){function t(){return zn(this,t),Gn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Hn(t,r["Component"]),Wn(t,[{key:"show",value:function(){L.a.publish("settlement_modal","open")}},{key:"render",value:function(){return r.createElement(F.a,{id:"settlement_modal",overlay:!0,ref:"settlement_modal"},r.createElement("div",{className:"grid-block vertical"},r.createElement(Jn,this.props)))}}]),t}(),Xn=n(64),$n=n(99),Zn=n(340),er=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},tr=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function nr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function rr(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function ar(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var or=function(e){function t(e){return nr(this,t),rr(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return ar(t,Zn["a"]),tr(t,[{key:"componentDidMount",value:function(){m.a.rebuild()}},{key:"shouldComponentUpdate",value:function(e){return function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var s=a.get;return void 0!==s?s.call(r):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"shouldComponentUpdate",this).call(this,e)||e.fromAsset!==this.props.fromAsset}},{key:"getValue",value:function(){var e=this.props,t=e.fromAsset,n=e.marketStats,r=e.toAsset,a=void 0,o=t.get("symbol");if(r&&n){var s=r.get("symbol");a=n.get(o+"_"+s)}return a&&a.change?a.change:0}},{key:"render",value:function(){var e=this.getValue(),t=0===parseFloat(e)?"":parseFloat(e)<0?"change-down":"change-up",n=r.createElement(Xn.b,{style:"decimal",value:e,minimumFractionDigits:2,maximumFractionDigits:2});return r.createElement("span",{className:"value "+t},n,"%")}}]),t}();or.propTypes={toAsset:O.a.ChainAsset.isRequired,fromAsset:O.a.ChainAsset.isRequired,coreAsset:O.a.ChainAsset.isRequired},or.defaultProps={toAsset:"1.3.0",fullPrecision:!1,noDecimals:!1,hide_asset:!1,coreAsset:"1.3.0"},or=Object(C.a)(or,{keep_updating:!0});var sr=function(e){function t(){return nr(this,t),rr(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return ar(t,r["Component"]),tr(t,[{key:"render",value:function(){var e=this.props,t=e.refCallback,n=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["refCallback"]);return r.createElement(or,er({},n,{ref:t}))}}]),t}();sr=Object(T.connect)(sr,{listenTo:function(){return[$n.a]},getProps:function(){return{marketStats:$n.a.getState().allMarketStats}}});var ir=n(2349),cr=n(23),lr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ur=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function pr(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function dr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function mr(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function hr(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var fr={textAlign:"right"},gr={textAlign:"left"},vr=function(e){function t(){return dr(this,t),mr(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return hr(t,r["Component"]),ur(t,[{key:"_onUpdatePosition",value:function(e){e.preventDefault();var t="cp_modal_"+this.props.object.getIn(["call_price","quote","asset_id"]);this.refs[t].show()}},{key:"_onClosePosition",value:function(e){e.preventDefault();var t=ne.a.new_transaction();t.add_type_operation("call_order_update",{fee:{amount:0,asset_id:0},funding_account:this.props.object.get("borrower"),delta_collateral:{amount:-this.props.object.get("collateral"),asset_id:this.props.object.getIn(["call_price","base","asset_id"])},delta_debt:{amount:-this.props.object.get("debt"),asset_id:this.props.object.getIn(["call_price","quote","asset_id"])}}),te.a.process_transaction(t,null,!0)}},{key:"_getFeedPrice",value:function(){return this.props?1/y.a.get_asset_price(this.props.debtAsset.getIn(["bitasset","current_feed","settlement_price","quote","amount"]),this.props.collateralAsset,this.props.debtAsset.getIn(["bitasset","current_feed","settlement_price","base","amount"]),this.props.debtAsset):1}},{key:"_getCollateralRatio",value:function(){var e=this.props.object.toJS();return y.a.get_asset_amount(e.collateral,this.props.collateralAsset)/(y.a.get_asset_amount(e.debt,this.props.debtAsset)/this._getFeedPrice())}},{key:"_getMR",value:function(){return this.props.debtAsset.getIn(["bitasset","current_feed","maintenance_collateral_ratio"])/1e3}},{key:"_getStatusClass",value:function(){var e=this._getCollateralRatio(),t=this._getMR();return isNaN(e)?null:e<t?"danger":e<t+.5?"warning":""}},{key:"_getCRTip",value:function(){var e=this._getStatusClass(),t=this._getMR();return e&&""!==e?"danger"===e?H.a.translate("tooltip.cr_danger",{mr:t}):"warning"===e?H.a.translate("tooltip.cr_warning",{mr:t}):null:null}},{key:"_onNavigate",value:function(e,t){t.preventDefault(),this.context.router.history.push(e)}},{key:"render",value:function(){var e=this.props,t=e.debtAsset,n=e.collateralAsset,a=e.object.toJS(),o=this._getCollateralRatio(),s=y.a.get_asset_amount(a.debt,this.props.debtAsset),i=this._getStatusClass(),c="/asset/"+t.get("symbol"),l="/market/"+t.get("symbol")+"_"+n.get("symbol"),u=r.createElement("ul",null,r.createElement("li",null,r.createElement("a",{href:c,onClick:this._onNavigate.bind(this,c)},r.createElement(g.a,{content:"account.asset_details"}))),r.createElement("li",null,r.createElement("a",{href:l,onClick:this._onNavigate.bind(this,l)},r.createElement(qn.a,{name:t.get("symbol")})," :"," ",r.createElement(qn.a,{name:n.get("symbol")}))));return r.createElement("tr",{className:"margin-row"},r.createElement("td",{style:gr},r.createElement(p.a,{to:"/asset/"+t.get("symbol")},r.createElement(qn.a,{noTip:!0,name:t.get("symbol")}))),r.createElement("td",{style:fr},r.createElement(q.a,{amount:a.debt,asset:a.call_price.quote.asset_id,assetInfo:u,hide_asset:!0})),r.createElement("td",{style:fr,className:"column-hide-medium"},r.createElement(q.a,{decimalOffset:5,amount:a.collateral,asset:a.call_price.base.asset_id})),r.createElement("td",{"data-place":"bottom","data-tip":this._getCRTip(),className:"center-content "+i},y.a.format_number(o,2)),r.createElement("td",{style:fr},r.createElement(Vn.a,{noTip:!0,balances:Object(S.List)(),debt:pr({},t.get("id"),a.debt),collateral:pr({},n.get("id"),parseInt(a.collateral,10)),hide_asset:!0})),r.createElement("td",{style:fr,className:"column-hide-small"},r.createElement(We.a,{base_amount:a.call_price.base.amount,base_asset:a.call_price.base.asset_id,quote_amount:a.call_price.quote.amount,quote_asset:a.call_price.quote.asset_id,hide_symbols:!0})),r.createElement("td",{style:fr,className:"column-hide-small"},r.createElement(Zn.b,{forceDirection:!1,fromAsset:a.call_price.base.asset_id,toAsset:a.call_price.quote.asset_id,hide_symbols:!0})),r.createElement("td",{className:"center-content column-hide-small",style:gr},r.createElement(We.a,{base_amount:a.call_price.base.amount,base_asset:a.call_price.base.asset_id,quote_amount:a.call_price.quote.amount,quote_asset:a.call_price.quote.asset_id,hide_value:!0})),r.createElement("td",null,r.createElement("div",{"data-place":"left","data-tip":H.a.translate("tooltip.update_position"),style:{paddingBottom:5}},r.createElement("a",{onClick:this._onUpdatePosition.bind(this)},r.createElement(Je.a,{name:"adjust",className:"icon-14px rotate90"})))),r.createElement("td",null,r.createElement("div",{"data-place":"left","data-tip":H.a.translate("tooltip.close_position",{amount:s,asset:t.get("symbol")}),style:{paddingBottom:5}},r.createElement("a",{onClick:this._onClosePosition.bind(this)},r.createElement(Je.a,{name:"cross-circle",className:"icon-14px"}))),t?r.createElement(ir.a,{ref:"cp_modal_"+a.call_price.quote.asset_id,quote_asset:a.call_price.quote.asset_id,backing_asset:t.getIn(["bitasset","options","short_backing_asset"]),account:this.props.account}):null))}}]),t}();vr.propTypes={debtAsset:O.a.ChainAsset.isRequired,collateralAsset:O.a.ChainAsset.isRequired},vr.defaultProps={tempComponent:"tr"},vr.contextTypes={router:l.object},vr=Object(C.a)(vr,{keep_updating:!0});var br=function(e){function t(){return dr(this,t),mr(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return hr(t,r["Component"]),ur(t,[{key:"render",value:function(){var e=this.props.object,t=e.getIn(["call_price","quote","asset_id"]),n=e.getIn(["call_price","base","asset_id"]);return r.createElement(vr,lr({debtAsset:t,collateralAsset:n},this.props))}}]),t}();br.propTypes={object:O.a.ChainObject.isRequired},br=Object(C.a)(br,{keep_updating:!0});var yr=function(e){function t(){return dr(this,t),mr(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return hr(t,r["Component"]),ur(t,[{key:"_onUpdatePosition",value:function(e){e.preventDefault();var t="cp_modal_"+this.props.debtAsset.get("id");this.refs[t].show()}},{key:"_getFeedPrice",value:function(){return this.props?1/y.a.get_asset_price(this.props.debtAsset.getIn(["bitasset","current_feed","settlement_price","quote","amount"]),this.props.collateralAsset,this.props.debtAsset.getIn(["bitasset","current_feed","settlement_price","base","amount"]),this.props.debtAsset):1}},{key:"_onNavigate",value:function(e,t){t.preventDefault(),this.context.router.history.push(e)}},{key:"render",value:function(){var e=this.props,t=e.debtAsset,n=e.collateralAsset,a="/asset/"+t.get("symbol"),o="/market/"+t.get("symbol")+"_"+n.get("symbol"),s=r.createElement("ul",null,r.createElement("li",null,r.createElement("a",{href:a,onClick:this._onNavigate.bind(this,a)},r.createElement(g.a,{content:"account.asset_details"}))),r.createElement("li",null,r.createElement("a",{href:o,onClick:this._onNavigate.bind(this,o)},r.createElement(qn.a,{name:t.get("symbol")})," :"," ",r.createElement(qn.a,{name:n.get("symbol")}))));return r.createElement("tr",{className:"margin-row"},r.createElement("td",{style:gr},r.createElement(p.a,{to:"/asset/"+t.get("symbol")},r.createElement(qn.a,{noTip:!0,name:t.get("symbol")}))),r.createElement("td",{style:fr},r.createElement(q.a,{amount:0,asset:t.get("id"),assetInfo:s,hide_asset:!0})),r.createElement("td",{style:fr,className:"column-hide-medium"},r.createElement(q.a,{decimalOffset:5,amount:0,asset:n.get("id")})),r.createElement("td",null),r.createElement("td",{style:fr}),r.createElement("td",{style:fr,className:"column-hide-small"}),r.createElement("td",{style:fr,className:"column-hide-small"}),r.createElement("td",{className:"center-content column-hide-small",style:gr}),r.createElement("td",null,r.createElement("div",{"data-place":"left","data-tip":H.a.translate("tooltip.update_position"),style:{paddingBottom:5}},r.createElement("a",{onClick:this._onUpdatePosition.bind(this)},r.createElement(Je.a,{name:"adjust",className:"icon-14px rotate90"})))),r.createElement("td",null,t?r.createElement(ir.a,{ref:"cp_modal_"+t.get("id"),quote_asset:t.get("id"),backing_asset:t.getIn(["bitasset","options","short_backing_asset"]),account:this.props.account}):null))}}]),t}();yr.propTypes={debtAsset:O.a.ChainAsset.isRequired,collateralAsset:O.a.ChainAsset.isRequired},yr.defaultProps={tempComponent:"tr"},yr.contextTypes={router:l.object},yr=Object(C.a)(yr);var _r=function(e){function t(){return dr(this,t),mr(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return hr(t,r["Component"]),ur(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.objects,a=t.optionals;if(n=n.filter(function(e){return!!e}),!(a=a.filter(function(e){return!!e})).length)return null;if(n.forEach(function(e){if(e){var t=a.findIndex(function(t){return t&&t.get("id")===e.getIn(["call_price","quote","asset_id"])});-1!==t&&a.splice(t,1)}}),!a.length)return null;var o=a.map(function(t){return r.createElement(yr,lr({key:t.get("id"),debtAsset:t.get("id"),collateralAsset:t.getIn(["bitasset","options","short_backing_asset"])},e.props))});return r.createElement("tbody",null,o)}}]),t}();_r.propTypes={objects:O.a.ChainObjectsList,optionals:O.a.ChainAssetsList},_r.defaultProps={optionals:x.a.List(["1.3.103","1.3.113","1.3.120","1.3.121","1.3.958","1.3.1325","1.3.1362"])},_r=Object(C.a)(_r,{keep_updating:!0});var Er=n(249),wr=n(217),kr={AccountPermission:function(e,t,n){var r=this;this.id=e.get("id"),this.weight=t,this.threshold=e.getIn([n,"weight_threshold"]),this.accounts=[],this.keys=e.getIn([n,"key_auths"]).map(function(e){return new function(e){var t=this;this.id=e.toJS?e.get(0):e[0],this.weight=e.toJS?e.get(1):e[1],this.isAvailable=function(e){return e.includes?e.includes(t.id):-1!==e.indexOf(t)}}(e)}).toArray(),this.isAvailable=function(e){return e.includes?e.includes(r.id):-1!==e.indexOf(r)},this._sumWeights=function(e){if(r.isNested()||r.isMultiSig()){var t=r.accounts.reduce(function(t,n){return t+(n._sumWeights(e)?n.weight:0)},0);return Math.floor(t/r.threshold)}return r.isAvailable(e)?r.weight:0},this.getStatus=function(e,t){if(r.isNested()){var n=r.accounts.reduce(function(t,n){return t+n._sumWeights(e)},0);return r.keys.length&&(n+=r.sumKeys(t)),n}var a=r._sumWeights(e);return r.isMultiSig()&&(a+=r.sumKeys(t)),a},this.sumKeys=function(e){return r.keys.reduce(function(t,n){return t+(n.isAvailable(e)?n.weight:0)},0)},this.isNested=function(){return r.accounts.length>0},this.isMultiSig=function(){return r.keys.reduce(function(e,t){return e||t.weight<r.threshold},!1)},this.getMissingSigs=function(e){var t=[],n=[];return r.isNested()?n=r.accounts.reduce(function(t,n){return t.concat(n.getMissingSigs(e))},[]):r.isAvailable(e)||t.push(r.id),t.concat(n)},this.getMissingKeys=function(e){var t=[],n=[];return r.keys.length&&(r.isNested()||r.isMultiSig())&&r.keys.forEach(function(n){n.isAvailable(e)||t.push(n.id)}),r.isNested()&&(n=r.accounts.reduce(function(t,n){return t.concat(n.getMissingKeys(e))},[])),t.concat(n)}},listToIDs:function(e){var t=[];return e.forEach(function(e){e&&t.push(e.get?e.get("id"):e)}),t},unravel:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(r<3){var a=Te.b.getAccount(e.id);a&&a.getIn([t,"account_auths"]).size&&a.getIn([t,"account_auths"]).forEach(function(a){var o=Te.b.getAccount(a.get(0));o&&e.accounts.push(n.unravel(new n.AccountPermission(o,a.get(1),t),t,r+1))})}return e},unnest:function(e,t){var n=this,r=[];return e.forEach(function(e){var a=Te.b.getAccount(e),o=n.unravel(new n.AccountPermission(a,null,t),t);r.push(o)}),r},flatten_auths:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:x.a.List();return e.size?(e.forEach(function(e){t.includes(e.get(0))||(t=t.push(e.get(0)))}),t):t}},Or=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Cr=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function Tr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ar(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Nr(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Pr=function(e){function t(){return Tr(this,t),Ar(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Nr(t,r["Component"]),Cr(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.account,a=t.available,o=t.availableKeys,s=t.permission,i=t.threshold,c=s.isAvailable(a),l=s.isNested(),u=s.isMultiSig(),p=[],d=i&&i>10?y.a.get_percentage(s.weight,this.props.threshold):s.weight,m=s&&s.threshold>10?y.a.get_percentage(s.getStatus(a,o),s.threshold)+" / 100%":s.getStatus(a,o)+" / "+s.threshold;return p.push(r.createElement("div",{key:n.get("id"),style:{textAlign:"left",width:"100%",clear:"both",paddingBottom:5}},r.createElement("div",{className:"inline-block",style:{paddingLeft:5*this.props.indent+"%"}},r.createElement(Ge.a,{subpage:"permissions",account:n.get("id")}),!l&&d?(d&&2===d.length?"  ":"")+"("+d+") ":null),r.createElement("div",{className:"float-right",style:{paddingLeft:20,marginRight:10}},l||u?r.createElement("span",{className:c?"success-text":""},m):r.createElement("span",null,c?r.createElement(Je.a,{name:"checkmark-circle",size:"1x",className:"success"}):r.createElement(Je.a,{name:"cross-circle",size:"1x",className:"error"}))))),(l||u)&&(s.accounts.forEach(function(t){p.push(r.createElement(Sr,{key:t.id,indent:e.props.indent+1,account:t.id,accounts:t.accounts,permission:t,available:a,availableKeys:o,threshold:s.threshold}))}),s.keys.length&&s.keys.forEach(function(t){p.push(r.createElement(xr,{key:t.id,permission:t,available:o,indent:e.props.indent+1}))})),r.createElement("div",null,p)}}]),t}();Pr.propTypes={account:O.a.ChainAccount.isRequired,accounts:O.a.ChainAccountsList,indent:l.number.isRequired},Pr.defaultProps={indent:0};var Sr=Object(C.a)(Pr),xr=function(e){function t(){return Tr(this,t),Ar(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Nr(t,r["Component"]),Cr(t,[{key:"render",value:function(){var e=this.props,t=e.available,n=e.permission,a=n.isAvailable(t),o=[];return o.push(r.createElement("div",{key:n.id,style:{textAlign:"left",width:"100%",paddingBottom:5}},r.createElement("div",{className:"inline-block",style:{paddingLeft:5*this.props.indent+"%"}},r.createElement("span",null,n.id.substr(0,20-4*this.props.indent),"... (",n.weight,")")),r.createElement("div",{className:"float-right",style:{paddingLeft:20,marginRight:10}},r.createElement("span",null,a?r.createElement(Je.a,{name:"checkmark-circle",size:"1x",className:"success"}):r.createElement(Je.a,{name:"cross-circle",size:"1x",className:"error"}))))),r.createElement("div",null,o)}}]),t}();xr.propTypes={indent:l.number.isRequired},xr.defaultProps={indent:0};var jr=function(e){function t(){return Tr(this,t),Ar(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Nr(t,r["Component"]),Cr(t,[{key:"render",value:function(){var e=this.props,t=e.requiredPermissions,n=e.available,a=e.availableKeys,o=(e.type,[]);return t.forEach(function(e){o.push(r.createElement(Sr,{key:e.id,account:e.id,accounts:e.accounts,permission:e,available:n,availableKeys:a}))}),r.createElement("div",null,o)}}]),t}(),Ir=function(e){function t(){Tr(this,t);var e=Ar(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={requiredPermissions:[]},e._updateState=e._updateState.bind(e),e}return Nr(t,r["Component"]),Cr(t,[{key:"componentWillMount",value:function(){this._updateState(),Te.b.subscribe(this._updateState)}},{key:"componentWillUnmount",value:function(){Te.b.unsubscribe(this._updateState)}},{key:"_updateState",value:function(){var e=kr.listToIDs(this.props.required),t=kr.listToIDs(this.props.available);this.setState({requiredPermissions:kr.unnest(e,this.props.type),required:e,available:t})}},{key:"render",value:function(){var e=this.props,t=e.type,n=(e.proposal,e.added),a=e.removed,o=e.availableKeys,s=this.state,i=s.requiredPermissions,c=s.required,l=s.available;return l=Object(K.cloneDeep)(l),o=o.toJS(),n&&(l.push(n),o.push(n)),a&&(-1!==l.indexOf(a)&&l.splice(l.indexOf(a),1),-1!==o.indexOf(a)&&o.splice(o.indexOf(a),1)),r.createElement(jr,{type:t,added:n,removed:a,required:c,available:l,availableKeys:o,requiredPermissions:i})}}]),t}();Ir.propTypes={required:O.a.ChainAccountsList,available:O.a.ChainAccountsList},Ir.defaultProps={type:"active",added:null,removed:null},Ir=Object(C.a)(Ir,{keep_updating:!0});var Rr=function(e){function t(){return Tr(this,t),Ar(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Nr(t,r["Component"]),Cr(t,[{key:"render",value:function(){var e=this.props,t=e.proposal,n=e.type,a=t.get("available_"+n+"_approvals"),o=t.get("available_key_approvals"),s=t.get("required_"+n+"_approvals");return r.createElement(Ir,Or({},this.props,{required:s,available:a,availableKeys:o}))}}]),t}();Rr.propTypes={proposal:O.a.ChainObject.isRequired,type:l.string.isRequired},Rr.defaultProps={type:"active",added:null};var Dr=Object(C.a)(Rr,{keep_updating:!0}),Mr=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Fr=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function qr(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Br(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Lr(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Qr=function(e){function t(e){qr(this,t);var n=Br(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.state={active:null,key:null,owner:null,payee:null},n}return Lr(t,r["Component"]),Fr(t,[{key:"onActiveAccount",value:function(e,t,n,r){var a={};t[r]?(a.key=r,a[n]=null):r?(a[n]=e[r],a.key=null):(a[n]=null,a.key=null),this.setState(a)}},{key:"_onProposalAction",value:function(e){var t=this,n=e.toJS(),r=this.state,a=r.active,o=(r.key,r.owner,{fee_paying_account:r.payee||a,proposal:n.id,active_approvals_to_add:[],active_approvals_to_remove:[],owner_approvals_to_add:[],owner_approvals_to_remove:[],key_approvals_to_add:[],key_approvals_to_remove:[]}),s="approve"===this.props.action,i=[];["active","owner","key"].forEach(function(e){var r=t.state[e];if(r){var a=-1!==n["available_"+e+"_approvals"].indexOf(r);(s&&!a||!s&&a)&&("approve"===t.props.action?(o[e+"_approvals_to_add"]=[r],"key"===e&&i.push(r)):"reject"===t.props.action&&(o[e+"_approvals_to_remove"]=[r],"key"===e&&i.push(r)))}});var c=ne.a.new_transaction();c.add_type_operation("proposal_update",o),te.a.process_transaction(c,null,!0,i),L.a.publish(this.props.modalId,"close")}},{key:"onChangePayee",value:function(e){var t=Te.b.getAccount(e);t&&this.setState({payee:t.get("id")})}},{key:"onCancel",value:function(){L.a.publish(this.props.modalId,"close")}},{key:"render",value:function(){var e=this.props,t=e.proposal,n=e.type,a=[],s={},i="approve"===this.props.action;this.props.accounts.length&&this.props.accounts.forEach(function(e){(i?e&&!t.get("available_"+n+"_approvals").includes(e.get("id")):e&&t.get("available_"+n+"_approvals").includes(e.get("id")))&&(s[e.get("name")]=e.get("id"),a.push(e.get("name")))});var c=[],l={};this.props.keys.length&&this.props.keys.forEach(function(e){o.a.isMyKey(e)&&!t.get("available_key_approvals").includes(e)&&(l[e]=!0,c.push(e))});var u=o.a.getMyAccounts();return r.createElement("form",{className:"grid-block vertical full-width-content"},r.createElement("div",{className:"grid-container"},r.createElement("div",{className:"content-block"},r.createElement("h4",null,i?"Add approval":"Remove approval")),r.createElement("div",{className:"content-block",style:{paddingRight:"20%"}},r.createElement(Dr,{proposal:t.get("id"),type:n,added:i?this.state.key?this.state.key:this.state[n]||null:null,removed:i?null:this.state.key?this.state.key:this.state[n]||null})),r.createElement("div",{className:"content-block full-width-content"},r.createElement("div",{className:"full-width-content form-group"},r.createElement(g.a,{content:"modal.proposals.pay_with",component:"label"}),r.createElement(wr.a,{account_names:u,onChange:this.onChangePayee.bind(this)})),a.length||c.length?r.createElement("div",{className:"full-width-content form-group"},r.createElement(g.a,{content:"modal.proposals.approval_"+(i?"add":"remove"),component:"label"}),r.createElement(wr.a,{account_names:a.concat(c),onChange:this.onActiveAccount.bind(this,s,l,n)})):null,null),r.createElement("div",{className:"content-block"},r.createElement("button",{type:"submit",className:"button",onClick:this._onProposalAction.bind(this,t)},r.createElement(g.a,{content:i?"account.perm.approve":"account.perm.remove"})),r.createElement("div",{onClick:this.onCancel.bind(this),className:" button"},r.createElement(g.a,{content:"account.perm.cancel"})))))}}]),t}();Qr.propTypes={accounts:O.a.ChainAccountsList},Qr=Object(C.a)(Qr);var Ur=function(e){function t(){qr(this,t);var e=Br(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e._updateState=e._updateState.bind(e),e}return Lr(t,r["Component"]),Fr(t,[{key:"componentWillMount",value:function(){this._updateState(),Te.b.subscribe(this._updateState)}},{key:"componentWillUnmount",value:function(){Te.b.unsubscribe(this._updateState)}},{key:"_updateState",value:function(){var e=this.props,t=e.proposal,n=(e.account,t.get("required_active_approvals").size?"active":"owner"),r=kr.listToIDs(t.get("required_"+n+"_approvals")),a=kr.listToIDs(t.get("available_"+n+"_approvals")),o=kr.listToIDs(t.get("available_key_approvals"));this.setState({requiredPermissions:kr.unnest(r,n),available:a,availableKeys:o,type:n})}},{key:"render",value:function(){var e=this.props.action,t=this.state,n=t.requiredPermissions,a=t.available,o=t.availableKeys,s=t.type,i=[];n.forEach(function(e){i=i.concat(e.getMissingSigs(a))});var c=[];return n.forEach(function(e){c=c.concat(e.getMissingKeys(o))}),r.createElement(Qr,Mr({},this.props,{type:s,accounts:"approve"===e?i:a,keys:"approve"===e?c:o}))}}]),t}();Ur.propTypes={account:O.a.ChainAccount.isRequired,proposal:O.a.ChainObject.isRequired},Ur=Object(C.a)(Ur);var Kr=function(e){function t(){qr(this,t);var e=Br(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={open:!1},e}return Lr(t,r["Component"]),Fr(t,[{key:"componentDidMount",value:function(){var e=this;L.a.subscribe(this.props.modalId,function(t,n){e.setState({open:"open"===n})})}},{key:"show",value:function(){L.a.publish(this.props.modalId,"open")}},{key:"render",value:function(){var e=this.props,t=e.modalId;e.proposal;return r.createElement(F.a,{id:t,overlay:!0,ref:t},this.state.open?r.createElement("div",{className:"grid-block vertical"},r.createElement(Ur,this.props)):null)}}]),t}(),Vr=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var Wr=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["Component"]),Vr(t,[{key:"_onApproveModal",value:function(e,t){this.refs[e+"_"+t]&&this.refs[e+"_"+t].show()}},{key:"_canApprove",value:function(e,t){return-1!==e.required_active_approvals.indexOf(t)&&-1===e.available_active_approvals.indexOf(t)||-1!==e.required_owner_approvals.indexOf(t)&&-1===e.available_owner_approvals.indexOf(t)}},{key:"_canReject",value:function(e){return e.available_active_approvals.length||e.available_owner_approvals.length}},{key:"render",value:function(){var e=this,t=this.props.account;if(!t)return null;var n=[];t.get("proposals").size&&t.get("proposals").forEach(function(e){var r=Te.b.getObject(e);if(r){var a=r.get("proposed_transaction").get("operations");n.push({operations:a,account:t,proposal:r})}});var a=n.sort(function(e,t){return y.a.sortID(e.proposal.get("id"),t.proposal.get("id"),!0)}).map(function(t){var n=!1,a=t.operations.map(function(e,a){return"1.2.153124"===e.getIn([1,"to"])&&(n=!0),r.createElement(Er.a,{key:t.proposal.get("id")+"_"+a,expiration:t.proposal.get("expiration_time"),index:a,op:e.toJS(),inverted:!1,hideFee:!1,hideOpLabel:!0,hideDate:!0,proposal:!0,id:t.proposal.get("id")})}).toArray(),o=e._canReject(t.proposal.toJS()),s=t.proposal.get("id"),i=t.proposal.get("required_active_approvals").size?"active":"owner";return r.createElement("tr",{key:s},r.createElement("td",null,a),r.createElement("td",null,r.createElement(Dr,{proposal:t.proposal.get("id"),type:i})),r.createElement("td",null,o?r.createElement("button",{onClick:e._onApproveModal.bind(e,s,"reject"),className:"button outline"},r.createElement(g.a,{content:"proposal.reject"})):null,r.createElement(Kr,{ref:s+"_reject",modalId:s+"_reject",account:t.account.get("id"),proposal:s,action:"reject"}),n?r.createElement("div",{"data-tip":H.a.translate("tooltip.propose_scam"),className:" tooltip has-error"},"SCAM"):r.createElement("button",{onClick:e._onApproveModal.bind(e,s,"approve"),className:"button outline"},r.createElement("span",null,r.createElement(g.a,{content:"proposal.approve"}))),r.createElement(Kr,{ref:s+"_approve",modalId:s+"_approve",account:t.account.get("id"),proposal:s,action:"approve"})))});return r.createElement("table",{className:"table compact "+this.props.className},r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",null,r.createElement(g.a,{content:"account.votes.info"})),r.createElement("th",null,r.createElement(g.a,{content:"proposal.status"})),r.createElement("th",null,r.createElement(g.a,{content:"proposal.action"})))),r.createElement("tbody",null,a))}}]),t}();Wr.propTypes={account:O.a.ChainAccount.isRequired};var zr=Object(C.a)(Wr,{keep_updating:!0}),Gr=n(2372),Hr=n(56),Jr=n(37),Yr=n(72),Xr=n(187),$r=n(75),Zr=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function ea(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var ta=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["Component"]),Zr(t,[{key:"_cancelLimitOrder",value:function(e,t){t.preventDefault(),Hr.a.cancelLimitOrder(this.props.account.get("id"),e).catch(function(e){console.log("cancel order error:",e)})}},{key:"onFlip",value:function(e){var t={};t[e]=!this.props.marketDirections.get(e),v.a.changeMarketDirection(t)}},{key:"render",value:function(){var e=this,t=this.props,n=t.account,a=(t.marketDirections,H.a.translate("account.perm.cancel")),o={},s={};if(!n.get("orders"))return null;n.get("orders").forEach(function(t){var n=Te.b.getObject(t).toJS(),i=Te.b.getAsset(n.sell_price.base.asset_id),c=Te.b.getAsset(n.sell_price.quote.asset_id);if(!i||!c)return null;if(Object($r.a)(i.get("symbol"))||Object($r.a)(c.get("symbol")))return null;var l=Object(Xr.b)(i,c),u=l.base,p=l.quote;if(u&&p){var d,m=(ea(d={},u.get("id"),{precision:u.get("precision")}),ea(d,p.get("id"),{precision:p.get("precision")}),d),h=Yr.a.getMarketID(u,p).marketID;o[h]||(o[h]={base:{id:u.get("id"),symbol:u.get("symbol"),precision:u.get("precision")},quote:{id:p.get("id"),symbol:p.get("symbol"),precision:p.get("precision")}});var f=new Jr.d(n,m,o[h].quote.id),g=Te.b.getAsset(o[h].base.id),v=Te.b.getAsset(o[h].quote.id);s[h]||(s[h]=[]),s[h].push(r.createElement(Gr.b,{ref:o[h].base.symbol,key:n.id,order:f,base:g,quote:v,cancel_text:a,showSymbols:!1,invert:!0,onCancel:e._cancelLimitOrder.bind(e,n.id),price:f.getPrice(),dashboard:!0,isMyAccount:e.props.isMyAccount,settings:e.props.settings,onFlip:e.onFlip.bind(e,h)}))}});var i=[];for(var c in s)s[c].length&&(i.push(r.createElement("tbody",{key:c},s[c].sort(function(e,t){return e.props.price-t.props.price}))),0);return r.createElement("div",{className:"grid-content no-overflow no-padding",style:{paddingBottom:15}},r.createElement("table",{className:"table table-striped dashboard-table"},r.createElement(Gr.c,{settings:this.props.settings,dashboard:!0,isMyAccount:this.props.isMyAccount}),i,this.props.children))}}]),t}(),na=ta=Object(T.connect)(ta,{listenTo:function(){return[s.b]},getProps:function(){return{marketDirections:s.b.getState().marketDirections}}});var ra=n(120),aa=n(105),oa=n(79),sa=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function ia(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var ca=function(e){function t(e){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["PureComponent"]),sa(t,[{key:"componentWillReceiveProps",value:function(e){e.claim_account_name!==this.props.claim_account_name&&this.onClaimAccount(e.claim_account_name,e.checked)}},{key:"render",value:function(){var e=this,t=function(e,t){return e.id<t.id?-1:1},n=this.props.total_by_account_asset&&this.props.total_by_account_asset.toArray();console.debug("Unclamed: ");var a=n&&n.length&&n.map(function(e){return e.balances.sort(t)}).reduce(function(e,t){return[].concat(ia(e),ia(t))});return r.createElement("div",null,r.createElement("table",{className:"table dashboard-table vest-table"},r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",null),r.createElement("th",{style:{textAlign:"center"}},r.createElement(g.a,{content:"account.asset"})),r.createElement("th",{style:{textAlign:"center"}},r.createElement(g.a,{content:"exchange.amount"})),r.createElement("th",{style:{textAlign:"center"}},r.createElement(g.a,{content:"vesting.end_time"})),r.createElement("th",{style:{textAlign:"center"}},r.createElement(g.a,{content:"vesting.progress"})),r.createElement("th",{style:{textAlign:"center"},title:H.a.translate("vesting.pubkey_tip"),className:"tooltip with-tooltip","data-place":"bottom","data-tip":H.a.translate("vesting.pubkey_tip")},r.createElement(g.a,{content:"vesting.pubkey"})))),r.createElement("tbody",null,a&&a.filter(function(e){return!!e.vesting_policy}).map(function(t){var n=t.id,a=t.vesting_policy,o=t.public_key_string,s=ae.utc(a.begin_timestamp).add(a.vesting_cliff_seconds,"s"),i=ae.utc(),c=a.vesting_cliff_seconds-(s.valueOf()-i.valueOf())/1e3;return r.createElement("tr",{key:n},r.createElement("td",null,r.createElement("input",{type:"checkbox",onChange:function(r){return e.onCheckbox(n,t,r)},disabled:i.isBefore(s)})),r.createElement("td",{style:{textAlign:"center"}},a.begin_balance?r.createElement(q.a,{amount:t.balance.amount,asset:t.balance.asset_id,hide_amount:!0}):null),r.createElement("td",{style:{textAlign:"center"}},a.begin_balance?r.createElement("div",null,r.createElement(q.a,{amount:t.balance.amount,asset:t.balance.asset_id,hide_asset:!0})):null),r.createElement("td",{style:{textAlign:"center"}},s.format("YYYY-MM-DD HH:mm:ss zZ")),r.createElement("td",null,a.begin_timestamp&&r.createElement("progress",{value:c,max:a.vesting_cliff_seconds})),r.createElement("td",null,o))})||null,!this.props.total_by_account_asset||0===this.props.total_by_account_asset.size&&r.createElement("tr",null,r.createElement("td",null,"-"),r.createElement("td",null,"-"),r.createElement("td",null,"-"),r.createElement("td",null,"-"),r.createElement("td",null,"-"),r.createElement("td",null,"-")))))}},{key:"onCheckbox",value:function(e,t,n){var r=n.target.checked,a=this.props.checked;a=r?a.set(e,t):a.delete(e),oa.a.setSelectedBalanceClaims(a)}},{key:"onClaimAccount",value:function(e,t){if(!t.size){var n=-1;this.props.total_by_account_asset.forEach(function(r,a){n++,a.get(0)===e&&(r.unclaimed||r.vesting.unclaimed)&&(t=t.set(n,r.balances))}),t.size&&oa.a.setSelectedBalanceClaims(t)}}}]),t}(),la=(ca=Object(T.connect)(ca,{listenTo:function(){return[aa.a]},getProps:function(){var e=aa.a.getState(),t=e.balances,n=e.address_to_pubkey,r=It.a.getState().keys,a=S.Map().asMutable();return t&&(e.total_by_account_asset=t.groupBy(function(e){var t="",o=n.get(e.owner),s=r.get(o);s&&s.import_account_names&&(t=s.import_account_names.join(", "));var i=Math.ceil(function(e,t){var n=a.get(e);return n||(n=S.Set().asMutable(),a.set(e,n)),n.add(t),n.size}(S.List([t,e.balance.asset_id]),e.owner)/60);return S.List([t,e.balance.asset_id,i])}).map(function(e){return e.reduce(function(e,t){return t.public_key_string=n.get(t.owner),e.balances=e.balances.add(t),void 0!=t.vested_balance?(e.vesting.unclaimed+=Number(t.vested_balance.amount),e.vesting.total+=Number(t.balance.amount)):e.unclaimed+=Number(t.balance.amount),e},{unclaimed:0,vesting:{unclaimed:0,total:0},balances:S.Set()})}).sortBy(function(e){return e})),e}}),n(480)),ua=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var pa,da=((pa=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.refreshBalances=n.refreshBalances.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["PureComponent"]),ua(t,[{key:"componentWillMount",value:function(){var e=It.a.getState().keys.keySeq();try{oa.a.setPubkeys(e)}catch(t){setTimeout(function(){return oa.a.setPubkeys(e)},0)}this.existing_keys=e,Te.b.subscribe(this.refreshBalances)}},{key:"componentWillUnmount",value:function(){Te.b.unsubscribe(this.refreshBalances)}},{key:"componentWillReceiveProps",value:function(e){var t=It.a.getState().keys.keySeq();t.equals(this.existing_keys)||(this.existing_keys=t,oa.a.setPubkeys(t))}},{key:"render",value:function(){var e=this.props.selected_balances.size&&this.props.claim_account_name;e&&this.props.claim_account_name;return r.createElement("div",null,r.createElement("div",{className:"grid-block vertical"},r.createElement(ca,null)),r.createElement("div",{className:"vest-bottom grid-block"},r.createElement(la.a,{key:this.props.balances,accounts:S.List(this.props.account_refs),onChange:this.onClaimAccountChange.bind(this),className:"small-12 medium-9"}),r.createElement(g.a,{component:"button",className:Oe()("button success small-12 medium-3",{disabled:!e}),content:"wallet.claim_balance",onClick:this.onClaimBalance.bind(this)})))}},{key:"onBack",value:function(e){e.preventDefault(),window.history.back()}},{key:"refreshBalances",value:function(){oa.a.refreshBalances()}},{key:"onClaimAccountChange",value:function(e){oa.a.claimAccountChange(e)}},{key:"onClaimBalance",value:function(){wt.a.importBalance(this.props.claim_account_name,this.props.selected_balances,!0).then(function(){oa.a.setSelectedBalanceClaims(S.Map())}).catch(function(e){console.error("claimBalance",e);var t=e;try{t=e.data.message}catch(e){}throw Q.b.error("Error claiming balance: "+t),e})}}]),t}()).propTypes={isUpdate:l.bool},pa),ma=(da=Object(T.connect)(da,{listenTo:function(){return[aa.a,ra.a,It.a]},getProps:function(){var e=aa.a.getState(),t=ra.a.getAccountRefs(),n=o.a.getCurrentAccountState();return 0===t.size&&n&&(t=new Set([n.get("id")])),e.account_refs=t,e}}),n(2278)),ha=n(2419),fa=n.n(ha),ga=n(87),va=n(104),ba=(va.a,n(2358)),ya=n(2359),_a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var Ea={1:"invalid_sub",2:"invalid_sub",3:"invalid_sub",4:"invalid_sub",5:"invalid_sub",6:"invalid_sub",7:"invalid_sub",8:"invalid_sub",9:"invalid_sub",10:"invalid_sub",11:"invalid_sub",12:"invalid_partly_sub",13:"invalid_partly_sub",14:"invalid_partly_sub",15:"invalid_sub",16:"refund"},wa=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["Component"]),_a(t,[{key:"componentDidUpdate",value:function(){m.a.rebuild()}},{key:"_renderTable",value:function(e,t){return r.createElement(ba.a,{data:e,loading:t,noDataText:G.translate("eto.records.no_data"),columns:[{Header:G.translate("eto.records.project_id"),accessor:function(e){return e.project_name},id:"project_id"},{Header:G.translate("eto.records.ieo_type"),accessor:function(e){return G.translate("eto.records.fund_type."+e.ieo_type)},id:"ieo_type"},{Header:G.translate("eto.records.token"),accessor:function(e){return y.a.replaceName(e.token).name},id:"token"},{Header:G.translate("eto.records.token_count"),accessor:function(e){return e.token_count},id:"token_count"},{Header:G.translate("eto.records.ieo_status"),accessor:function(e){return G.translate("eto.records.status_"+Ea[e.reason])},id:"ieo_status"},{Header:G.translate("eto.records.update_at"),accessor:function(e){return e.update_at},id:"update_at",Cell:function(e){return r.createElement(ya.a,{id:e.original.id,dateTime:e.original.update_at})}},{Header:G.translate("eto.records.block_num"),accessor:function(e){return e.block_num},id:"block_num",Cell:function(e){return r.createElement(p.a,{to:"/block/"+e.original.block_num},e.original.block_num)}}]})}},{key:"render",value:function(){var e=this,t=this.props.account;return r.createElement(r.Fragment,null,r.createElement(fa.a,{url:function(e){return va.a+"/cybex/trade/list?cybex_name="+e+"&page=1&limit=1000"}(t.get("name"))},function(t){var n=t.loading,a=t.error,o=t.data;return r.createElement("div",{className:"cybex-records"},o&&e._renderTable(o.result.data,n),a&&e._renderTable([],n),n&&r.createElement("div",{className:"text-center"},r.createElement("span",null,r.createElement(V.a,{type:"circle",style:{display:"inline-block"}}))))}))}}]),t}();wa=Object(T.connect)(wa,{listenTo:function(){return[ga.a]}});var ka=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function Oa(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ca(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Ta(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Aa=((Pa=function(e){function t(e){Oa(this,t);var n=Ca(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));for(var r in n.priceRefs={},n.valueRefs={},n.changeRefs={},n.sortFunctions={alphabetic:function(e,t,n){return e.key>t.key?this.state.sortDirection||n?1:-1:e.key<t.key?this.state.sortDirection||n?-1:1:0},priceValue:function(e,t){var n=this.priceRefs[e.key],r=this.priceRefs[t.key];if(n&&r){var a=n.getFinalPrice(!0),o=r.getFinalPrice(!0);return!a&&o?1:a&&!o?-1:a||o?this.state.sortDirection?a-o:o-a:this.sortFunctions.alphabetic(e,t,!0)}},totalValue:function(e,t){var n=this.valueRefs[e.key],r=this.valueRefs[t.key];if(n&&r){var a=n.getValue(),o=r.getValue();return!a&&o?1:a&&!o?-1:a||o?this.state.sortDirection?o-a:a-o:this.sortFunctions.alphabetic(e,t,!0)}},changeValue:function(e,t){var n=this.changeRefs[e.key],r=this.changeRefs[t.key];if(n&&r){var a=n.getValue(),o=r.getValue(),s=parseFloat(a)||a,i=parseFloat(o)||o;return void 0===this.state.sortDirection||this.state.sortDirection?s<i:s>i}}},n.state={sortKey:e.viewSettings.get("portfolioSort","totalValue"),sortDirection:e.viewSettings.get("portfolioSortDirection",!0),settleAsset:"1.3.0",showHidden:!1,depositAsset:null,withdrawAsset:null,bridgeAsset:null,alwaysShowAssets:["CYB"]},n.sortFunctions)n.sortFunctions[r]=n.sortFunctions[r].bind(n);return n}return Ta(t,r["Component"]),ka(t,[{key:"componentWillMount",value:function(){this._checkMarginStatus()}},{key:"_checkMarginStatus",value:function(){var e=this;(function(e){return new Promise(function(t,n){if(!e||e&&!e.get("call_orders",[]).size)return t(null);Object(Te.f)("getObject",e.get("call_orders").toArray()).then(function(e){var n=[];e.forEach(function(e){var t=e.getIn(["call_price","base","asset_id"]),r=e.getIn(["call_price","quote","asset_id"]);-1===n.indexOf(t)&&n.push(t),-1===n.indexOf(r)&&n.push(r)}),Object(Te.f)("getAsset",n).then(function(n){var r={};n.forEach(function(e){r[e.get("id")]=e.toJS()});var a={};e.forEach(function(e){var t=r[e.getIn(["call_price","quote","asset_id"])],n=r[e.getIn(["call_price","base","asset_id"])],o=t.bitasset.current_feed.settlement_price;if(o.base.asset_id===o.quote.asset_id)a[t.id]={ratio:null};else{var s=new Jr.a({amount:e.get("collateral"),asset_id:n.id,precision:n.precision}),i=new Jr.a({amount:e.get("debt"),asset_id:t.id,precision:t.precision}),c=t.bitasset.current_feed.maintenance_collateral_ratio/1e3,l=new Jr.c({priceObject:t.bitasset.current_feed.settlement_price,market_base:t.bitasset.current_feed.settlement_price.quote.asset_id,sqr:t.bitasset.current_feed.maximum_short_squeeze_ratio,assets:r}),u={ratio:s.getAmount({real:!0})/(i.getAmount({real:!0})/l.toReal())};if(isNaN(u.ratio))return null;u.ratio<c?u.statusClass="danger":u.ratio<c+.5?u.statusClass="warning":u.statusClass=null,a[t.id]=u}}),t(a)})}).catch(n)})})((arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props).account).then(function(t){var n=null;for(var r in t)n=t[r].statusClass||n;e.setState({globalMarginStatus:n})})}},{key:"componentWillReceiveProps",value:function(e){e.account!==this.props.account&&(this._checkMarginStatus(e),this.priceRefs={},this.valueRefs={},this.changeRefs={},setTimeout(this.forceUpdate.bind(this),500))}},{key:"shouldComponentUpdate",value:function(e,t){return!(y.a.are_equal_shallow(e.balanceAssets,this.props.balanceAssets)&&y.a.are_equal_shallow(e.backedCoins,this.props.backedCoins)&&y.a.are_equal_shallow(e.balances,this.props.balances)&&e.account===this.props.account&&e.isMyAccount===this.props.isMyAccount&&e.settings===this.props.settings&&e.hiddenAssets===this.props.hiddenAssets&&y.a.are_equal_shallow(t,this.state))}},{key:"_onSettleAsset",value:function(e,t){t.preventDefault(),this.setState({settleAsset:e}),this.refs.settlement_modal.show()}},{key:"_hideAsset",value:function(e,t){v.a.hideAsset(e,t)}},{key:"_showDepositWithdraw",value:function(e,t,n,r){var a=this.props.account;b.b.showDepositModal(a.get("name"),t)}},{key:"_showWithdrawModal",value:function(e,t,n,r){this.props.account;b.b.showWithdrawModal(t)}},{key:"_getSeparator",value:function(e){return e?r.createElement("span",null," | "):null}},{key:"_onNavigate",value:function(e,t){t.preventDefault(),this.props.history.push(e)}},{key:"_renderBalances",value:function(e,t,n){var a=this,o=this.props.core_asset,s=this.props,i=s.settings,c=s.hiddenAssets,l=s.orders,u=i.get("unit")||o.get("symbol"),d=i.get("showAssetPercent",!1),h=function(e,t){var n=e&&e.has("bitasset_data_id"),o="cp_modal_"+e.get("id");return{isBitAsset:n,borrowModal:n?r.createElement(ir.a,{ref:o,quote_asset:e.get("id"),backing_asset:e.getIn(["bitasset","options","short_backing_asset"]),account:t}):null,borrowLink:n?r.createElement("a",{onClick:function(){m.a.hide(),a.refs[o].show()}},r.createElement(Je.a,{name:"dollar",className:"icon-14px"})):null}},f=[];return e.forEach(function(e){var t=Te.b.getObject(e);if(t){var n,s,i,m=t.get("asset_type"),g=Te.b.getObject(m),v="";if(!g)return null;var b=g.get("symbol");console.debug("AssetName: ",b);var y="1.3.0"!==g.get("id"),_=u!==o.get("symbol"),E=$.a.parseDescription(g.getIn(["options","description"])).market;-1===(v=g.get("symbol")).indexOf("OPEN.")||E||(E="USD");var w=E||u;y&&w===v&&(w=o.get("symbol")),n=y?r.createElement(p.a,{to:"/market/"+g.get("symbol")+"_"+w},r.createElement(Je.a,{name:"trade",className:"icon-14px"})):_?r.createElement(p.a,{to:"/market/"+g.get("symbol")+"_"+u},r.createElement(Je.a,{name:"trade",className:"icon-14px"})):"-",i=r.createElement(p.a,{to:"/transfer?asset="+g.get("id")},r.createElement(Je.a,{name:"transfer",className:"icon-14px"}));var k=h(g,a.props.account),O=k.isBitAsset,C=k.borrowModal,T=k.borrowLink;s=r.createElement("a",{href:"javascript:;",onClick:a._onSettleAsset.bind(a,g.get("id"))},r.createElement(Je.a,{name:"settle",className:"icon-14px"}));var A=!c.includes(m),N=!!t.get("balance"),P=!!l[m],S=!!ma.d.ADDRESS_TYPES[g.get("symbol")],x=S&&N&&0!=t.get("balance");f.push(r.createElement("tr",{key:g.get("symbol"),style:{maxWidth:"100rem"}},r.createElement("td",{style:{textAlign:"left",paddingLeft:10}},r.createElement(He.a,{asset:g.get("id")})),r.createElement("td",{style:{textAlign:"right"}},N||P?r.createElement(z.a,{balance:e,hide_asset:!0}):null),r.createElement("td",{style:{textAlign:"right"},className:"column-hide-small"},r.createElement(Zn.b,{refCallback:function(e){e&&e.refs.bound_component&&(a.priceRefs[g.get("symbol")]=e.refs.bound_component)},fromAsset:g.get("id"),hide_symbols:!0})),r.createElement("td",{style:{textAlign:"right"},className:"column-hide-small"},r.createElement(sr,{refCallback:function(e){e&&e.refs.bound_component&&(a.changeRefs[g.get("symbol")]=e.refs.bound_component)},fromAsset:g.get("id"),toAsset:u,hide_symbols:!0})),r.createElement("td",{style:{textAlign:"right"},className:"column-hide-small"},N||P?r.createElement(Tn.a,{balance:e,toAsset:u,hide_asset:!0,refCallback:function(e){e&&e.refs.bound_component&&(a.valueRefs[g.get("symbol")]=e.refs.bound_component)}}):null),d?r.createElement("td",{style:{textAlign:"right"}},N?r.createElement(z.a,{balance:e,asPercentage:!0}):null):null,r.createElement("td",null,i),r.createElement("td",null,S&&a.props.isMyAccount?r.createElement("span",null,r.createElement("a",{onClick:a._showDepositWithdraw.bind(a,"deposit_modal",b,!1)},r.createElement(Je.a,{name:"deposit",className:"icon-14px"}))):"-"),r.createElement("td",null,x&&a.props.isMyAccount?r.createElement("span",null,r.createElement("a",{className:x?"":"disabled",onClick:x?a._showWithdrawModal.bind(a,"withdraw_modal",b,!1):function(){}},r.createElement(Je.a,{name:"withdraw",className:"icon-14px"}))):"-"),r.createElement("td",null,n),r.createElement("td",null,O?r.createElement("div",{className:"inline-block","data-place":"bottom","data-tip":H.a.translate("tooltip.borrow",{asset:v})},T,C):"-"),r.createElement("td",null,O?r.createElement("div",{className:"inline-block","data-place":"bottom","data-tip":H.a.translate("tooltip.settle",{asset:v})},s):"-"),r.createElement("td",{style:{textAlign:"center"},className:"column-hide-small","data-place":"bottom","data-tip":H.a.translate("tooltip."+(A?"hide_asset":"show_asset"))},r.createElement("a",{style:{marginRight:0},className:A?"order-cancel":"action-plus",onClick:a._hideAsset.bind(a,m,A)},r.createElement(Je.a,{name:A?"cross-circle":"plus-circle",className:"icon-14px"})))))}}),t&&t.filter(function(e){var t=!1;a.props.backedCoins.get("OPEN",[]).forEach(function(n){n&&n.symbol===e&&(t=!0)}),a.props.bridgeCoins.get(e)&&(t=!0);var n=!0;return f.forEach(function(t){t.key===e&&(n=!1)}),n&&t}).forEach(function(e){var t=Te.b.getAsset(e);if(t&&a.props.isMyAccount){var s=!c.includes(t.get("id")),i=!!a.props.backedCoins.get("OPEN",[]).find(function(e){return e.symbol===t.get("symbol")}),l="1.3.0"!==t.get("id"),u=$.a.parseDescription(t.getIn(["options","description"])).market;-1===t.get("symbol").indexOf("OPEN.")||u||(u="USD");var d=u||(o?o.get("symbol"):"CYB"),m=l?r.createElement(p.a,{to:"/market/"+t.get("symbol")+"_"+d},r.createElement(Je.a,{name:"trade",className:"icon-14px"})):"-",g=h(t,a.props.account),v=g.isBitAsset,b=g.borrowModal,y=g.borrowLink;(s&&n||!s&&!n)&&f.push(r.createElement("tr",{key:t.get("symbol"),style:{maxWidth:"100rem"}},r.createElement("td",{style:{textAlign:"left",paddingLeft:10}},r.createElement(He.a,{asset:t.get("id")})),r.createElement("td",null),r.createElement("td",null),r.createElement("td",{className:"column-hide-small",colSpan:2}),r.createElement("td",null,i&&a.props.isMyAccount?r.createElement("span",null,r.createElement("a",{onClick:a._showDepositWithdraw.bind(a,"deposit_modal",e,!1)},r.createElement(Je.a,{name:"deposit",className:"icon-14px"}))):"-"),r.createElement("td",null,"-"),r.createElement("td",{style:{textAlign:"center"}},m),r.createElement("td",null,v?r.createElement("div",{className:"inline-block","data-place":"bottom","data-tip":H.a.translate("tooltip.borrow",{asset:t.get("symbol")})},y,b):"-"),r.createElement("td",null,"-"),r.createElement("td",{style:{textAlign:"center"},className:"column-hide-small","data-place":"bottom","data-tip":H.a.translate("tooltip."+(s?"hide_asset":"show_asset"))},r.createElement("a",{style:{marginRight:0},className:s?"order-cancel":"action-plus",onClick:a._hideAsset.bind(a,t.get("id"),s)},r.createElement(Je.a,{name:s?"cross-circle":"plus-circle",className:"icon-14px"})))))}}),f.sort(this.sortFunctions[this.state.sortKey]),f}},{key:"_toggleHiddenAssets",value:function(){this.setState({showHidden:!this.state.showHidden})}},{key:"_toggleSortOrder",value:function(e){this.state.sortKey===e?(v.a.changeViewSetting({portfolioSortDirection:!this.state.sortDirection}),this.setState({sortDirection:!this.state.sortDirection})):(v.a.changeViewSetting({portfolioSort:e}),this.setState({sortKey:e}))}},{key:"render",value:function(){var e=this,t=this.props,n=t.account,a=t.hiddenAssets,o=t.settings,s=t.orders,i=this.state.showHidden;if(!n)return null;var c=[],l={},u={};n.toJS&&n.has("call_orders")&&(c=n.get("call_orders").toJS());var p=void 0,d=void 0,m=n.get("balances"),h=S.List(),f=S.List();(c.forEach(function(e){var t=Te.b.getObject(e);if(t){var n=t.getIn(["call_price","base","asset_id"]);l[n]?l[n]+=parseInt(t.get("collateral"),10):l[n]=parseInt(t.get("collateral"),10);var r=t.getIn(["call_price","quote","asset_id"]);u[r]?u[r]+=parseInt(t.get("debt"),10):u[r]=parseInt(t.get("debt"),10)}}),m)&&((m=m.filter(function(e,t){var n=Te.b.getObject(e),r=Te.b.getAsset(n.get("asset_type"));return!(!r||Object($r.a)(r.get("symbol")))&&!(n&&!n.get("balance")&&!s[t])})).forEach(function(e,t){a.includes(t)?f=f.push(e):h=h.push(e)}),p=this._renderBalances(h,this.state.alwaysShowAssets,!0),d=this._renderBalances(f,this.state.alwaysShowAssets));if(!d||!p)return null;var v=h.concat(f),b=(r.createElement(Vn.a,{noTip:!0,balances:v,openOrders:s,debt:u,collateral:l,hide_asset:!0}),r.createElement(Vn.a,{noTip:!0,balances:v,hide_asset:!0})),_=r.createElement(Vn.a,{noTip:!0,balances:S.List(),openOrders:s,hide_asset:!0}),E=(r.createElement(Vn.a,{noTip:!0,balances:S.List(),debt:u,collateral:l,hide_asset:!0}),r.createElement(Vn.a,{noTip:!0,balances:S.List(),debt:u,hide_asset:!0}),r.createElement(Vn.a,{noTip:!0,balances:S.List(),collateral:l,hide_asset:!0}),o.get("unit")||this.props.core_asset.get("symbol")),w=r.createElement(cr.a,{noLink:!0,string:"account.total",keys:[{type:"asset",value:E,arg:"asset"}]});p&&p.push(r.createElement("tr",{key:"portfolio",className:"total-value"},r.createElement("td",{style:{textAlign:"left",paddingLeft:10}},w),r.createElement("td",null),r.createElement("td",{className:"column-hide-small"}),r.createElement("td",null),r.createElement("td",{className:"column-hide-small",style:{textAlign:"right"}},b),r.createElement("td",{colSpan:9})));var k=o.get("showAssetPercent",!1),O=(this.props.backedCoins.get("OPEN",[]).find(function(t){return t.symbol===e.state.depositAsset}),this.props.backedCoins.get("OPEN",[]).find(function(t){return t.symbol===e.state.withdrawAsset}),this.props.bridgeCoins.get(this.state.bridgeAsset),Te.b.getAsset(E)),C=O?O.get("symbol"):"";if(O){var T=y.a.replaceName(C,!!O.get("bitasset_data_id")),A=T.prefix,N=T.name;C=(A||"")+N}r.createElement("span",{style:{visibility:"hidden"}},"H");return r.createElement("div",{className:"app-tables with-shadow",ref:"appTables"},r.createElement("div",{className:"content-block small-12"},r.createElement("div",{className:"generic-bordered-box"},r.createElement(Se.b,{defaultActiveTab:1,segmented:!1,setting:"overviewTab",className:"overview-tabs",contentClass:"no-padding",tabsClass:"account-overview no-padding bordered-header content-block"},r.createElement(Se.a,{title:"account.portfolio",subText:b},r.createElement("div",{className:"hide-selector"},r.createElement("div",{className:Oe()("hide-selector-item",{inactive:i&&d.length}),onClick:i?this._toggleHiddenAssets.bind(this):function(){}},r.createElement(g.a,{content:"account.hide_hidden"})),d.length?r.createElement("div",{className:Oe()("hide-selector-item",{inactive:!i}),onClick:i?function(){}:this._toggleHiddenAssets.bind(this)},r.createElement(g.a,{content:"account.show_hidden"})):null),r.createElement("table",{className:"table dashboard-table"},r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",{style:{textAlign:"left",paddingLeft:10},className:"clickable",onClick:this._toggleSortOrder.bind(this,"alphabetic")},r.createElement(g.a,{component:"span",content:"account.asset"})),r.createElement("th",{style:{textAlign:"right"}},r.createElement(g.a,{content:"account.qty"})),r.createElement("th",{onClick:this._toggleSortOrder.bind(this,"priceValue"),className:"column-hide-small clickable",style:{textAlign:"right"}},r.createElement(g.a,{content:"exchange.price"})," (",r.createElement(qn.a,{name:E}),")"),r.createElement("th",{onClick:this._toggleSortOrder.bind(this,"changeValue"),className:"column-hide-small clickable",style:{textAlign:"right"}},r.createElement(g.a,{content:"account.hour_24_short"})),r.createElement("th",{onClick:this._toggleSortOrder.bind(this,"totalValue"),style:{textAlign:"right"},className:"column-hide-small clickable"},r.createElement(cr.a,{noLink:!0,string:"account.eq_value_header",keys:[{type:"asset",value:E,arg:"asset"}]})),k?r.createElement("th",{style:{textAlign:"right"}},r.createElement(g.a,{component:"span",content:"account.percent"})):null,r.createElement("th",null,r.createElement(g.a,{content:"header.payments"})),r.createElement("th",null,r.createElement(g.a,{content:"modal.deposit.submit"})),r.createElement("th",null,r.createElement(g.a,{content:"modal.withdraw.submit"})),r.createElement("th",null,r.createElement(g.a,{content:"account.trade"})),r.createElement("th",null,r.createElement(g.a,{content:"exchange.borrow"})),r.createElement("th",null,r.createElement(g.a,{content:"account.settle"})),r.createElement("th",{className:"column-hide-small"},r.createElement(g.a,{content:i?"account.perm.show":"exchange.hide"})))),r.createElement("tbody",null,i&&d.length?d:p))),r.createElement(Se.a,{title:"account.open_orders",subText:_},r.createElement(na,Object.assign({},this.props),r.createElement("tbody",null,r.createElement("tr",{className:"total-value"},r.createElement("td",{style:{textAlign:"center"}},w),r.createElement("td",{colSpan:3}),r.createElement("td",{style:{textAlign:"center"}},_),r.createElement("td",{colSpan:1}),this.props.isMyAccount?r.createElement("td",null):null)))),!1,this.props.isMyAccount&&r.createElement(Se.a,{title:"account.vested"},r.createElement("div",{className:"content-block"},r.createElement("div",{className:"generic-bordered-box"},r.createElement(da,null)))),r.createElement(Se.a,{title:"account.crowdfund"},r.createElement("div",{className:"content-block"},r.createElement("div",{className:"generic-bordered-box"},r.createElement(wa,{account:n})))),r.createElement(Se.a,{title:"account.activity"},r.createElement(nn.a,{accountsList:S.fromJS([n.get("id")]),compactView:!1,showMore:!0,fullHeight:!0,limit:15,showFilters:!0,dashboard:!0})),n.get("proposals")&&n.get("proposals").size?r.createElement(Se.a,{title:"explorer.proposals.title",subText:n.get("proposals")?n.get("proposals").size:0},r.createElement(zr,{className:"dashboard-table",account:n.get("id")})):null),r.createElement(Yn,{ref:"settlement_modal",asset:this.state.settleAsset,account:n.get("name")}))))}}]),t}()).propTypes={balanceAssets:O.a.ChainAssetsList,core_asset:O.a.ChainAsset.isRequired},Pa.defaultProps={core_asset:"1.3.0"},Pa);Aa=Object(C.a)(Aa);var Na=function(e){function t(){return Oa(this,t),Ca(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Ta(t,r["Component"]),ka(t,[{key:"componentWillMount",value:function(){}},{key:"render",value:function(){var e=this.props.balances.map(function(e){return e&&e.get("asset_type")}).filter(function(e){return!!e}),t=this.props.orders.reduce(function(e,t){if(!t)return e;var n=t.getIn(["sell_price","base","asset_id"]);return e[n]||(e[n]=0),e[n]+=parseInt(t.get("for_sale"),10),e},{});for(var n in t)-1===e.indexOf(n)&&e.push(n);return r.createElement(Aa,Object.assign({},this.state,this.props,{orders:t,balanceAssets:S.List(e)}))}}]),t}();Na.propTypes={balances:O.a.ChainObjectsList,orders:O.a.ChainObjectsList},Na.defaultProps={balances:S.List(),orders:S.List()};var Pa,Sa=Object(C.a)(Na),xa=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function ja(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ia(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function Ra(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var Da=((Ma=function(e){function t(){return ja(this,t),Ia(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Ra(t,r["Component"]),xa(t,[{key:"componentDidMount",value:function(){this.props.account&&o.a.isMyAccount(this.props.account)&&a.a.setCurrentAccount.defer(this.props.account.get("name")),A.a.getPossibleFees(this.props.account,"transfer")}},{key:"render",value:function(){var e=this;console.debug("AccountPage");var t=this.props,n=t.myAccounts,a=t.linkedAccounts,s=t.account_name,i=t.searchAccounts,c=t.settings,l=t.wallet_locked,u=t.account,p=t.myActiveAccounts,d=t.hiddenAssets,m=(t.history,t.match,t.bridgeCoins),h=t.backedCoins,f=this.props,g=f.depositModal,v=f.withdrawModal,y=o.a.isMyAccount(u),_={account_name:s,myActiveAccounts:p,searchAccounts:i,settings:c,wallet_locked:l,account:u,isMyAccount:y,hiddenAssets:d,backedCoins:h,bridgeCoins:m,contained:!0,balances:u.get("balances",Object(S.List)()).toList(),orders:u.get("orders",Object(S.List)()).toList(),viewSettings:this.props.viewSettings,proxy:u.getIn(["options","voting_account"]),history:this.props.history};return r.createElement("div",{className:"grid-block page-layout"},r.createElement("div",{className:"show-for-medium grid-block shrink left-column no-padding",style:{minWidth:200}},r.createElement(k,{account:u,isMyAccount:y,linkedAccounts:a,myAccounts:n,viewSettings:this.props.viewSettings,advancedMode:c.get("advancedMode"),passwordLogin:c.get("passwordLogin")})),r.createElement("div",{className:"grid-block main-content"},r.createElement("div",{className:"grid-container"},r.createElement(R.a,null,r.createElement(I.a,{path:"/account/"+s,exact:!0,render:function(){return r.createElement(Sa,Object.assign({},_))}}),r.createElement(j.a,{from:"/account/"+s+"/overview",to:"/account/"+s}),r.createElement(j.a,{from:"/account/"+s+"/dashboard",to:"/account/"+s}),r.createElement(I.a,{path:"/account/"+s+"/assets",exact:!0,render:function(){return r.createElement(we,Object.assign({},_))}}),r.createElement(I.a,{path:"/account/"+s+"/create-asset",exact:!0,render:function(){return r.createElement(Qe,Object.assign({},_))}}),r.createElement(I.a,{path:"/account/"+s+"/update-asset/:asset",exact:!0,render:function(){return r.createElement(lt,Object.assign({},_))}}),r.createElement(I.a,{path:"/account/"+s+"/member-stats",exact:!0,render:function(){return r.createElement(Et,Object.assign({},_))}}),r.createElement(I.a,{path:"/account/"+s+"/vesting",exact:!0,render:function(){return r.createElement(Pt,Object.assign({},_))}}),r.createElement(I.a,{path:"/account/"+s+"/permissions",exact:!0,render:function(){return r.createElement(pn,Object.assign({},_))}}),r.createElement(I.a,{path:"/account/"+s+"/voting",exact:!0,render:function(){return r.createElement(Kn,Object.assign({},e.props,_))}}),r.createElement(I.a,{path:"/account/"+s+"/whitelist",exact:!0,render:function(){return r.createElement(Cn,Object.assign({},_))}}),r.createElement(I.a,{path:"/account/"+s+"/signedmessages",exact:!0,render:function(){return r.createElement(gn,Object.assign({},_))}})),g&&r.createElement(N.a,{balances:u.get("balances",null),modalId:b.a,fade:!0}),v&&r.createElement(P.a,{balances:u.get("balances",null),account:u,issuer:u.get("id"),modalId:b.c}))))}}]),t}()).propTypes={account:O.a.ChainAccount.isRequired},Ma.defaultProps={account:"props.params.account_name"},Ma);Da=Object(C.a)(Da,{keep_updating:!0,show_loader:!0});var Ma,Fa=function(e){function t(){return ja(this,t),Ia(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return Ra(t,r["Component"]),xa(t,[{key:"render",value:function(){var e=this.props.match.params.account_name;return r.createElement(Da,Object.assign({},this.props,{account:e,account_name:e}))}}]),t}();t.default=Object(T.connect)(Fa,{listenTo:function(){return[o.a,s.b,i.a,c.b]},getProps:function(e){return{linkedAccounts:o.a.getState().linkedAccounts,searchAccounts:o.a.getState().searchAccounts,settings:s.b.getState().settings,hiddenAssets:s.b.getState().hiddenAssets,wallet_locked:i.a.getState().locked,myAccounts:o.a.getState().myAccounts,myActiveAccounts:o.a.getState().myActiveAccounts,viewSettings:s.b.getState().viewSettings,backedCoins:c.b.getState().backedCoins,bridgeCoins:c.b.getState().bridgeCoins,gatewayDown:c.b.getState().down,depositModal:c.b.getState().modals.get(b.a),withdrawModal:c.b.getState().modals.get(b.c)}}})},2272:function(e,t,n){"use strict";function r(e){return["StringValue","BooleanValue","EnumValue"].indexOf(e.kind)>-1}function a(e){return["IntValue","FloatValue"].indexOf(e.kind)>-1}function o(e,t,n,r){if(function(e){return"IntValue"===e.kind}(n)||function(e){return"FloatValue"===e.kind}(n))e[t.value]=Number(n.value);else if(function(e){return"BooleanValue"===e.kind}(n)||function(e){return"StringValue"===e.kind}(n))e[t.value]=n.value;else if(function(e){return"ObjectValue"===e.kind}(n)){var a={};n.fields.map(function(e){return o(a,e.name,e.value,r)}),e[t.value]=a}else if(function(e){return"Variable"===e.kind}(n)){var s=(r||{})[n.name.value];e[t.value]=s}else if(function(e){return"ListValue"===e.kind}(n))e[t.value]=n.values.map(function(e){var n={};return o(n,t,e,r),n[t.value]});else{if(!function(e){return"EnumValue"===e.kind}(n))throw new Error('The inline argument "'+t.value+'" of kind "'+n.kind+'" is not supported.\n                    Use variables instead of inline arguments to overcome this limitation.');e[t.value]=n.value}}function s(e,t){var n=null;e.directives&&(n={},e.directives.forEach(function(e){n[e.name.value]={},e.arguments&&e.arguments.forEach(function(r){var a=r.name,s=r.value;return o(n[e.name.value],a,s,t)})}));var r=null;return e.arguments&&e.arguments.length&&(r={},e.arguments.forEach(function(e){var n=e.name,a=e.value;return o(r,n,a,t)})),i(e.name.value,r,n)}function i(e,t,n){if(n&&n.connection&&n.connection.key){if(n.connection.filter&&n.connection.filter.length>0){var r=n.connection.filter?n.connection.filter:[];r.sort();var a=t,o={};return r.forEach(function(e){o[e]=a[e]}),n.connection.key+"("+JSON.stringify(o)+")"}return n.connection.key}return t?e+"("+JSON.stringify(t)+")":e}function c(e,t){if(e.arguments&&e.arguments.length){var n={};return e.arguments.forEach(function(e){var r=e.name,a=e.value;return o(n,r,a,t)}),n}return null}function l(e){return e.alias?e.alias.value:e.name.value}function u(e){return"Field"===e.kind}function p(e){return"InlineFragment"===e.kind}function d(e){return e&&"id"===e.type}function m(e,t){return void 0===t&&(t=!1),{type:"id",id:e,generated:t}}function h(e){return null!=e&&"object"==typeof e&&"json"===e.type}function f(e){throw new Error("Variable nodes are not supported by valueFromNode")}function g(e,t){switch(void 0===t&&(t=f),e.kind){case"Variable":return t(e);case"NullValue":return null;case"IntValue":return parseInt(e.value);case"FloatValue":return parseFloat(e.value);case"ListValue":return e.values.map(function(e){return g(e,t)});case"ObjectValue":for(var n={},r=0,a=e.fields;r<a.length;r++){var o=a[r];n[o.name.value]=g(o.value,t)}return n;default:return e.value}}function v(e,t){if(e.directives&&e.directives.length){var n={};return e.directives.forEach(function(e){n[e.name.value]=c(e,t)}),n}return null}function b(e,t){if(void 0===t&&(t={}),!e.directives)return!0;var n=!0;return e.directives.forEach(function(e){if("skip"===e.name.value||"include"===e.name.value){var r=e.arguments||[],a=e.name.value;if(1!==r.length)throw new Error("Incorrect number of arguments for the @"+a+" directive.");var o=r[0];if(!o.name||"if"!==o.name.value)throw new Error("Invalid argument for the @"+a+" directive.");var s=r[0].value,i=!1;if(s&&"BooleanValue"===s.kind)i=s.value;else{if("Variable"!==s.kind)throw new Error("Argument for the @"+a+" directive must be a variable or a bool ean value.");if(void 0===(i=t[s.name.value]))throw new Error("Invalid variable referenced in @"+a+" directive.")}"skip"===a&&(i=!i),i||(n=!1)}}),n}function y(e){return e.selectionSet&&e.selectionSet.selections.length>0?[e].concat(e.selectionSet.selections.map(function(e){return[e].concat(y(e))}).reduce(function(e,t){return e.concat(t)},[])):[e]}var _=new Map;function E(e){var t=_.get(e);if(t)return t;var n=e.definitions.filter(function(e){return e.selectionSet&&e.selectionSet.selections}).map(function(e){return y(e)}).reduce(function(e,t){return e.concat(t)},[]).filter(function(e){return e.directives&&e.directives.length>0}).map(function(e){return e.directives}).reduce(function(e,t){return e.concat(t)},[]).map(function(e){return e.name.value});return _.set(e,n),n}function w(e,t){return E(t).some(function(t){return e.indexOf(t)>-1})}var k=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e};function O(e,t){var n=t,r=[];if(e.definitions.forEach(function(e){if("OperationDefinition"===e.kind)throw new Error("Found a "+e.operation+" operation"+(e.name?" named '"+e.name.value+"'":"")+". No operations are allowed when using a fragment as a query. Only fragments are allowed.");"FragmentDefinition"===e.kind&&r.push(e)}),void 0===n){if(1!==r.length)throw new Error("Found "+r.length+" fragments. `fragmentName` must be provided when there is not exactly 1 fragment.");n=r[0].name.value}return k({},e,{definitions:[{kind:"OperationDefinition",operation:"query",selectionSet:{kind:"SelectionSet",selections:[{kind:"FragmentSpread",name:{kind:"Name",value:n}}]}}].concat(e.definitions)})}function C(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];return t.forEach(function(t){void 0!==t&&null!==t&&Object.keys(t).forEach(function(n){e[n]=t[n]})}),e}function T(e){A(e);var t=e.definitions.filter(function(e){return"OperationDefinition"===e.kind&&"mutation"===e.operation})[0];if(!t)throw new Error("Must contain a mutation definition.");return t}function A(e){if("Document"!==e.kind)throw new Error('Expecting a parsed GraphQL document. Perhaps you need to wrap the query string in a "gql" tag? http://docs.apollostack.com/apollo-client/core.html#gql');var t=e.definitions.filter(function(e){return"FragmentDefinition"!==e.kind}).map(function(e){if("OperationDefinition"!==e.kind)throw new Error('Schema type definitions not allowed in queries. Found: "'+e.kind+'"');return e});if(t.length>1)throw new Error("Ambiguous GraphQL document: contains "+t.length+" operations")}function N(e){return A(e),e.definitions.filter(function(e){return"OperationDefinition"===e.kind})[0]}function P(e){var t=N(e);if(!t)throw new Error("GraphQL document is missing an operation");return t}function S(e){return e.definitions.filter(function(e){return"OperationDefinition"===e.kind&&e.name}).map(function(e){return e.name.value})[0]||null}function x(e){return e.definitions.filter(function(e){return"FragmentDefinition"===e.kind})}function j(e){var t=N(e);if(!t||"query"!==t.operation)throw new Error("Must contain a query definition.");return t}function I(e){if("Document"!==e.kind)throw new Error('Expecting a parsed GraphQL document. Perhaps you need to wrap the query string in a "gql" tag? http://docs.apollostack.com/apollo-client/core.html#gql');if(e.definitions.length>1)throw new Error("Fragment must have exactly one definition.");var t=e.definitions[0];if("FragmentDefinition"!==t.kind)throw new Error("Must be a fragment definition.");return t}function R(e){var t;A(e);for(var n=0,r=e.definitions;n<r.length;n++){var a=r[n];if("OperationDefinition"===a.kind){var o=a.operation;if("query"===o||"mutation"===o||"subscription"===o)return a}"FragmentDefinition"!==a.kind||t||(t=a)}if(t)return t;throw new Error("Expected a parsed GraphQL query with a query, mutation, subscription, or a fragment.")}function D(e){void 0===e&&(e=[]);var t={};return e.forEach(function(e){t[e.name.value]=e}),t}function M(e){if(e&&e.variableDefinitions&&e.variableDefinitions.length){var t=e.variableDefinitions.filter(function(e){return e.defaultValue}).map(function(e){var t=e.variable,n=e.defaultValue,r={};return o(r,t.name,n),r});return C.apply(void 0,[{}].concat(t))}return{}}function F(e){var t=new Set;if(e.variableDefinitions)for(var n=0,r=e.variableDefinitions;n<r.length;n++){var a=r[n];t.add(a.variable.name.value)}return t}function q(e){if(Array.isArray(e))return e.map(function(e){return q(e)});if(null!==e&&"object"==typeof e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=q(e[n]));return t}return e}var B={kind:"Field",name:{kind:"Name",value:"__typename"}};function L(e,t){var n=q(t);n.definitions.forEach(function(t){!function e(t,n){if(!n.selections)return n;var r=t.some(function(e){return e.remove});return n.selections=n.selections.map(function(e){return"Field"===e.kind&&e&&e.directives?(e.directives=e.directives.filter(function(e){var a=!t.some(function(t){return!(!t.name||t.name!==e.name.value)||!(!t.test||!t.test(e))});return n||a||!r||(n=!0),a}),n?null:e):e;var n}).filter(function(e){return!!e}),n.selections.forEach(function(n){"Field"!==n.kind&&"InlineFragment"!==n.kind||!n.selectionSet||e(t,n.selectionSet)}),n}(e,t.selectionSet)});var r=P(n),a=D(x(n)),o=function(e){return e.selectionSet.selections.filter(function(e){return!(e&&"FragmentSpread"===e.kind&&!o(a[e.name.value]))}).length>0};return o(r)?n:null}var Q=new Map;function U(e){A(e);var t=Q.get(e);if(t)return t;var n=q(e);return n.definitions.forEach(function(e){var t="OperationDefinition"===e.kind;!function e(t,n){void 0===n&&(n=!1),t.selections&&(n||t.selections.some(function(e){return"Field"===e.kind&&"__typename"===e.name.value})||t.selections.push(B),t.selections.forEach(function(t){"Field"===t.kind?0!==t.name.value.lastIndexOf("__",0)&&t.selectionSet&&e(t.selectionSet):"InlineFragment"===t.kind&&t.selectionSet&&e(t.selectionSet)}))}(e.selectionSet,t)}),Q.set(e,n),n}var K={test:function(e){var t="connection"===e.name.value;return t&&(e.arguments&&e.arguments.some(function(e){return"key"===e.name.value})||console.warn("Removing an @connection directive even though it does not have a key. You may want to use the key parameter to specify a store key.")),t}},V=new Map;function W(e){A(e);var t=V.get(e);if(t)return t;var n=L([K],e);return V.set(e,n),n}var z=n(2282);function G(e){try{return e()}catch(e){console.error&&console.error(e)}}function H(e){return e.errors&&e.errors.length}function J(e,t){if(e===t)return!0;if(e instanceof Date&&t instanceof Date)return e.getTime()===t.getTime();if(null!=e&&"object"==typeof e&&null!=t&&"object"==typeof t){for(var n in e)if(Object.prototype.hasOwnProperty.call(e,n)){if(!Object.prototype.hasOwnProperty.call(t,n))return!1;if(!J(e[n],t[n]))return!1}for(var n in t)if(!Object.prototype.hasOwnProperty.call(e,n))return!1;return!0}return!1}function Y(e){return Object(z.a)()||Object(z.c)()?function e(t){return Object.freeze(t),Object.getOwnPropertyNames(t).forEach(function(n){!t.hasOwnProperty(n)||null===t[n]||"object"!=typeof t[n]&&"function"!=typeof t[n]||Object.isFrozen(t[n])||e(t[n])}),t}(e):e}var X=Object.create({});function $(e,t){if(void 0===t&&(t="warn"),!Object(z.b)()&&!X[e])switch(Object(z.c)()||(X[e]=!0),t){case"error":console.error(e);break;default:console.warn(e)}}n.d(t,"f",function(){return v}),n.d(t,"A",function(){return b}),n.d(t,!1,function(){return y}),n.d(t,!1,function(){return E}),n.d(t,"p",function(){return w}),n.d(t,"h",function(){return O}),n.d(t,"j",function(){return T}),n.d(t,!1,function(){return A}),n.d(t,"k",function(){return N}),n.d(t,!1,function(){return P}),n.d(t,"l",function(){return S}),n.d(t,"g",function(){return x}),n.d(t,"m",function(){return j}),n.d(t,!1,function(){return I}),n.d(t,"i",function(){return R}),n.d(t,"d",function(){return D}),n.d(t,"e",function(){return M}),n.d(t,!1,function(){return F}),n.d(t,!1,function(){return L}),n.d(t,"a",function(){return U}),n.d(t,"y",function(){return W}),n.d(t,!1,function(){return r}),n.d(t,!1,function(){return a}),n.d(t,!1,function(){return o}),n.d(t,"B",function(){return s}),n.d(t,"n",function(){return i}),n.d(t,"b",function(){return c}),n.d(t,"z",function(){return l}),n.d(t,"r",function(){return u}),n.d(t,"t",function(){return p}),n.d(t,"s",function(){return d}),n.d(t,!1,function(){return m}),n.d(t,"u",function(){return h}),n.d(t,!1,function(){return g}),n.d(t,"c",function(){return C}),n.d(t,!1,function(){return q}),n.d(t,!1,function(){}),n.d(t,!1,function(){}),n.d(t,"v",function(){return z.b}),n.d(t,!1,function(){return z.a}),n.d(t,"w",function(){return z.c}),n.d(t,"C",function(){return G}),n.d(t,"o",function(){return H}),n.d(t,"q",function(){return J}),n.d(t,"x",function(){return Y}),n.d(t,"D",function(){return $})},2275:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.print=function(e){return(0,r.visit)(e,{leave:a})};var r=n(2337);var a={Name:function(e){return e.value},Variable:function(e){return"$"+e.name},Document:function(e){return o(e.definitions,"\n\n")+"\n"},OperationDefinition:function(e){var t=e.operation,n=e.name,r=i("(",o(e.variableDefinitions,", "),")"),a=o(e.directives," "),s=e.selectionSet;return n||a||r||"query"!==t?o([t,o([n,r]),a,s]," "):s},VariableDefinition:function(e){return e.variable+": "+e.type+i(" = ",e.defaultValue)},SelectionSet:function(e){return s(e.selections)},Field:function(e){var t=e.alias,n=e.name,r=e.arguments,a=e.directives,s=e.selectionSet;return o([i("",t,": ")+n+i("(",o(r,", "),")"),o(a," "),s]," ")},Argument:function(e){return e.name+": "+e.value},FragmentSpread:function(e){return"..."+e.name+i(" ",o(e.directives," "))},InlineFragment:function(e){var t=e.typeCondition,n=e.directives,r=e.selectionSet;return o(["...",i("on ",t),o(n," "),r]," ")},FragmentDefinition:function(e){var t=e.name,n=e.typeCondition,r=e.variableDefinitions,a=e.directives,s=e.selectionSet;return"fragment "+t+i("(",o(r,", "),")")+" on "+n+" "+i("",o(a," ")," ")+s},IntValue:function(e){return e.value},FloatValue:function(e){return e.value},StringValue:function(e,t){var n=e.value;return e.block?function(e,t){return" "!==e[0]&&"\t"!==e[0]||-1!==e.indexOf("\n")?t?'"""\n'+e.replace(/"""/g,'\\"""')+'\n"""':c('"""\n'+e.replace(/"""/g,'\\"""'))+'\n"""':'"""'+e.replace(/"""/g,'\\"""')+'"""'}(n,"description"===t):JSON.stringify(n)},BooleanValue:function(e){var t=e.value;return JSON.stringify(t)},NullValue:function(){return"null"},EnumValue:function(e){return e.value},ListValue:function(e){return"["+o(e.values,", ")+"]"},ObjectValue:function(e){return"{"+o(e.fields,", ")+"}"},ObjectField:function(e){return e.name+": "+e.value},Directive:function(e){return"@"+e.name+i("(",o(e.arguments,", "),")")},NamedType:function(e){return e.name},ListType:function(e){return"["+e.type+"]"},NonNullType:function(e){return e.type+"!"},SchemaDefinition:function(e){var t=e.directives,n=e.operationTypes;return o(["schema",o(t," "),s(n)]," ")},OperationTypeDefinition:function(e){return e.operation+": "+e.type},ScalarTypeDefinition:function(e){return o([e.description,o(["scalar",e.name,o(e.directives," ")]," ")],"\n")},ObjectTypeDefinition:function(e){var t=e.description,n=e.name,r=e.interfaces,a=e.directives,c=e.fields;return o([t,o(["type",n,i("implements ",o(r,", ")),o(a," "),s(c)]," ")],"\n")},FieldDefinition:function(e){var t=e.description,n=e.name,r=e.arguments,a=e.type,s=e.directives;return o([t,n+i("(",o(r,", "),")")+": "+a+i(" ",o(s," "))],"\n")},InputValueDefinition:function(e){var t=e.description,n=e.name,r=e.type,a=e.defaultValue,s=e.directives;return o([t,o([n+": "+r,i("= ",a),o(s," ")]," ")],"\n")},InterfaceTypeDefinition:function(e){var t=e.description,n=e.name,r=e.directives,a=e.fields;return o([t,o(["interface",n,o(r," "),s(a)]," ")],"\n")},UnionTypeDefinition:function(e){var t=e.description,n=e.name,r=e.directives,a=e.types;return o([t,o(["union",n,o(r," "),a&&0!==a.length?"= "+o(a," | "):""]," ")],"\n")},EnumTypeDefinition:function(e){var t=e.description,n=e.name,r=e.directives,a=e.values;return o([t,o(["enum",n,o(r," "),s(a)]," ")],"\n")},EnumValueDefinition:function(e){return o([e.description,o([e.name,o(e.directives," ")]," ")],"\n")},InputObjectTypeDefinition:function(e){var t=e.description,n=e.name,r=e.directives,a=e.fields;return o([t,o(["input",n,o(r," "),s(a)]," ")],"\n")},ScalarTypeExtension:function(e){return o(["extend scalar",e.name,o(e.directives," ")]," ")},ObjectTypeExtension:function(e){var t=e.name,n=e.interfaces,r=e.directives,a=e.fields;return o(["extend type",t,i("implements ",o(n,", ")),o(r," "),s(a)]," ")},InterfaceTypeExtension:function(e){var t=e.name,n=e.directives,r=e.fields;return o(["extend interface",t,o(n," "),s(r)]," ")},UnionTypeExtension:function(e){var t=e.name,n=e.directives,r=e.types;return o(["extend union",t,o(n," "),r&&0!==r.length?"= "+o(r," | "):""]," ")},EnumTypeExtension:function(e){var t=e.name,n=e.directives,r=e.values;return o(["extend enum",t,o(n," "),s(r)]," ")},InputObjectTypeExtension:function(e){var t=e.name,n=e.directives,r=e.fields;return o(["extend input",t,o(n," "),s(r)]," ")},DirectiveDefinition:function(e){var t=e.description,n=e.name,r=e.arguments,a=e.locations;return o([t,"directive @"+n+i("(",o(r,", "),")")+" on "+o(a," | ")],"\n")}};function o(e,t){return e?e.filter(function(e){return e}).join(t||""):""}function s(e){return e&&0!==e.length?c("{\n"+o(e,"\n"))+"\n}":""}function i(e,t,n){return t?e+t+(n||""):""}function c(e){return e&&e.replace(/\n/g,"\n  ")}},2276:function(e,t,n){"use strict";var r=n(2281),a=n(2272),o=n(2275),s=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),i=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e};var c=function(e){function t(t,n){var r=e.call(this,t)||this;return r.link=n,r}return s(t,e),t}(Error);function l(e){return e.request.length<=1}function u(e){var t=!1;return new Promise(function(n,r){e.subscribe({next:function(e){t?console.warn("Promise Wrapper does not support multiple results from Observable"):(t=!0,n(e))},error:r})})}var p=u;function d(e){return new r(function(t){e.then(function(e){t.next(e),t.complete()}).catch(t.error.bind(t))})}function m(e,t){var n=i({},e);return Object.defineProperty(t,"setContext",{enumerable:!1,value:function(e){n=i({},n,"function"==typeof e?e(n):e)}}),Object.defineProperty(t,"getContext",{enumerable:!1,value:function(){return i({},n)}}),Object.defineProperty(t,"toKey",{enumerable:!1,value:function(){return function(e){return Object(o.print)(e.query)+"|"+JSON.stringify(e.variables)+"|"+e.operationName}(t)}}),t}var h=function(e,t){return t?t(e):r.of()},f=function(e){return"function"==typeof e?new _(e):e},g=function(){return new _(function(e,t){return r.of()})},v=function(e){return 0===e.length?g():e.map(f).reduce(function(e,t){return e.concat(t)})},b=function(e,t,n){void 0===n&&(n=new _(h));var a=f(t),o=f(n);return l(a)&&l(o)?new _(function(t){return e(t)?a.request(t)||r.of():o.request(t)||r.of()}):new _(function(t,n){return e(t)?a.request(t,n)||r.of():o.request(t,n)||r.of()})},y=function(e,t){var n=f(e);if(l(n))return console.warn(new c("You are calling concat on a terminating link, which will have no effect",n)),n;var a=f(t);return l(a)?new _(function(e){return n.request(e,function(e){return a.request(e)||r.of()})||r.of()}):new _(function(e,t){return n.request(e,function(e){return a.request(e,t)||r.of()})||r.of()})},_=function(){function e(e){e&&(this.request=e)}return e.prototype.split=function(t,n,r){return void 0===r&&(r=new e(h)),this.concat(b(t,n,r))},e.prototype.concat=function(e){return y(this,e)},e.prototype.request=function(e,t){throw new Error("request is not implemented")},e.empty=g,e.from=v,e.split=b,e}();function E(e,t){return e.request(m(t.context,function(e){var t={variables:e.variables||{},extensions:e.extensions||{},operationName:e.operationName,query:e.query};return t.operationName||(t.operationName="string"!=typeof t.query?Object(a.l)(t.query):""),t}(function(e){for(var t=["query","operationName","variables","extensions","context"],n=0,r=Object.keys(e);n<r.length;n++){var a=r[n];if(t.indexOf(a)<0)throw new Error("illegal argument: "+a)}return e}(t))))||r.of()}n.d(t,!1,function(){return g}),n.d(t,!1,function(){return v}),n.d(t,!1,function(){return b}),n.d(t,!1,function(){return y}),n.d(t,"a",function(){return _}),n.d(t,"c",function(){return E}),n.d(t,!1,function(){return m}),n.d(t,!1,function(){return p}),n.d(t,!1,function(){return u}),n.d(t,!1,function(){return d}),n.d(t,"b",function(){return r})},2277:function(e,t,n){"use strict";var r=n(0),a=n(2),o=n(1),s=n.n(o),i=n(22),c=n(24),l=n(19),u=n(337),p=n(5),d=n.n(p),m=n(9),h=n.n(m),f=n(58),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function v(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function y(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var _=function(e){function t(){return v(this,t),b(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return y(t,r["Component"]),g(t,[{key:"render",value:function(){return 0===this.props.assets.length?null:r.createElement(u.a,{entries:this.props.assets.map(function(e){return e&&e.get("symbol")}).filter(function(e){return!!e}),values:this.props.assets.reduce(function(e,t){return t&&t.get("symbol")&&(e[t.get("symbol")]=t),e},{}),singleEntry:this.props.assets[0]?r.createElement(l.a,{asset:this.props.assets[0].get("id"),amount:0,hide_amount:!0}):null,value:this.props.value,onChange:this.props.onChange})}}]),t}();_.propTypes={assets:i.a.ChainAssetsList,value:a.string,onChange:a.func},_=Object(c.a)(_);var E=function(e){function t(){return v(this,t),b(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return y(t,r["Component"]),g(t,[{key:"componentDidMount",value:function(){this.onAssetChange(this.props.asset)}},{key:"formatAmount",value:function(e){return e||(e=""),"number"==typeof e&&(e=e.toString()),e.trim().replace(/,/g,"")}},{key:"_onChange",value:function(e){var t=e.target.value;this.props.onChange({amount:t,asset:this.props.asset})}},{key:"onAssetChange",value:function(e){this.props.onChange({amount:this.props.amount,asset:e})}},{key:"render",value:function(){var e=this.props.error?h.a.translate(this.props.error):this.formatAmount(this.props.amount),t=this.props.isNumber;return r.createElement("div",{className:"amount-selector",style:this.props.style},r.createElement("label",{className:"right-label"},this.props.display_balance),r.createElement(s.a,{className:"left-label",component:"label",content:this.props.label}),r.createElement("div",{className:"inline-label input-wrapper"},t?r.createElement(f.l,{disabled:this.props.disabled,type:"number",valueFromOuter:!0,value:e||0,size:"small",placeholder:this.props.placeholder,onChange:this._onChange.bind(this),tabIndex:this.props.tabIndex,style:{width:"100%",marginBottom:0}}):r.createElement(f.l,{disabled:this.props.disabled,type:"text",valueFromOuter:!0,size:"small",value:e||"",placeholder:this.props.placeholder,onChange:this._onChange.bind(this),tabIndex:this.props.tabIndex,style:{width:"100%",marginBottom:0}}),r.createElement("div",{className:"form-label select floating-dropdown"},r.createElement(_,{ref:this.props.refCallback,value:this.props.asset.get("symbol"),assets:d.a.List(this.props.assets),onChange:this.onAssetChange.bind(this)}))))}}]),t}();E.propTypes={label:a.string,asset:i.a.ChainAsset.isRequired,assets:a.array,amount:a.any,placeholder:a.string,onChange:a.func.isRequired,tabIndex:a.number,error:a.string},E.defaultProps={disabled:!1},E=Object(c.a)(E),t.a=E},2278:function(e,t,n){"use strict";var r;n.d(t,"c",function(){return u}),n.d(t,"b",function(){return p}),n.d(t,"a",function(){return d}),n.d(t,"d",function(){return h});var a=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function s(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var i,c={BTC:"https://live.blockcypher.com/btc/tx/#{txid}",USDT:"www.omniexplorer.info/tx/#{txid}",ETH:"https://etherscan.io/tx/#{txid}",GAS:"https://neoscan.io/transaction/#{txid}",EOS:"https://eosflare.io/tx/#{txid}",LTC:"https://chain.so/tx/LTC/#{txid}",QTUM:"https://explorer.qtum.org/tx/#{txid}"},l={ERC20:"https://etherscan.io/token/#{contract}"},u="https://gateway.cybex.io/gateway",p="https://gateway-query.cybex.io/",d="CybexGateway";!function(e){e[e.ERC20=0]="ERC20",e[e.ETH=1]="ETH",e[e.BTC=2]="BTC",e[e.USDT=3]="USDT",e[e.EOS=4]="EOS",e[e.LTC=5]="LTC",e[e.QTUM=6]="QTUM",e[e.NEO=7]="NEO"}(i||(i={}));var m=function(){function e(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};s(this,e),this.asset=t,this.type=n,this.protocol=r,this.options=a,this.contractExplorer=a.contractAddress?this.getExplorerUrlByContract(a.contractAddress):null}return a(e,[{key:"getExplorerUrlByTx",value:function(t){if(!e.ExplorerAddress[this.protocol])return null;try{return(this.options.specificExplorer||e.ExplorerAddress[this.protocol]).replace("#{txid}",t)}catch(e){return null}}},{key:"getExplorerUrlByContract",value:function(t){if(console.debug("Contract: ",t),console.debug("Contract: ",e.ContractAddress[this.protocol]),!e.ContractAddress[this.protocol])return null;try{return(this.options.specificContractExplorer||e.ContractAddress[this.protocol]).replace("#{contract}",t)}catch(e){return null}}}]),e}();m.ExplorerAddress=(o(r={},i.BTC,c.BTC),o(r,i.USDT,c.USDT),o(r,i.ERC20,c.ETH),o(r,i.ETH,c.ETH),o(r,i.EOS,c.EOS),o(r,i.LTC,c.LTC),o(r,i.QTUM,c.QTUM),o(r,i.NEO,c.GAS),r),m.ContractAddress=o({},i.ERC20,l.ERC20);var h={GATEWAY_ACCOUNT:"cybex-jadegateway",ADDRESS_TYPES:{"JADE.ETH":new m("JADE.ETH","ETH",i.ETH,{name:"Ethereum"}),"JADE.BTC":new m("JADE.BTC","BTC",i.BTC,{name:"Bitcoin"}),"JADE.LTC":new m("JADE.LTC","LTC",i.LTC,{name:"Litecoin"}),"JADE.EOS":new m("JADE.EOS","EOS",i.EOS,{name:"EOS"}),"JADE.USDT":new m("JADE.USDT","USDT",i.USDT,{name:"Tether"}),"JADE.LHT":new m("JADE.LHT","LHT",i.ERC20,{name:"LongHash"}),"JADE.INK":new m("JADE.INK","INK",i.ERC20,{name:"Ink [QTUM]",contractAddress:"0xf4c90e18727c5c76499ea6369c856a6d61d3e92e"}),"JADE.BAT":new m("JADE.BAT","BAT",i.ERC20,{name:"Basic Attention Token",contractAddress:"0x0d8775f648430679a709e98d2b0cb6250d2887ef"}),"JADE.OMG":new m("JADE.OMG","OMG",i.ERC20,{name:"OmiseGO",contractAddress:"0xd26114cd6ee289accf82350c8d8487fedb8a0c07"}),"JADE.SNT":new m("JADE.SNT","SNT",i.ERC20,{name:"Status",contractAddress:"0x744d70fdbe2ba4cf95131626614a1763df805b9e"}),"JADE.NAS":new m("JADE.NAS","NAS",i.ERC20,{name:"Nebulas",contractAddress:"0x5d65d971895edc438f465c17db6992698a52318d"}),"JADE.KNC":new m("JADE.KNC","KNC",i.ERC20,{name:"Kyber Network",contractAddress:"0xdd974d5c2e2928dea5f71b9825b8b646686bd200"}),"JADE.PAY":new m("JADE.PAY","PAY",i.ERC20,{name:"TenX",contractAddress:"0xb97048628db6b661d4c2aa833e95dbe1a905b280"}),"JADE.GET":new m("JADE.GET","GET",i.ERC20,{name:"Global Escrow Token, Themis",contractAddress:"0x60c68a87be1e8a84144b543aacfa77199cd3d024"}),"JADE.MAD":new m("JADE.MAD","MAD",i.ERC20,{name:"MAD Network",contractAddress:"0x5b09a0371c1da44a8e24d36bf5deb1141a84d875"}),"JADE.TCT":new m("JADE.TCT","TCT",i.ERC20,{name:"TokenClub",contractAddress:"0x4824a7b64e3966b0133f4f4ffb1b9d6beb75fff7"}),"JADE.MCO":new m("JADE.MCO","MCO",i.ERC20,{name:"Monaco",contractAddress:"0xb63b606ac810a52cca15e44bb630fd42d8d1d83d"}),"JADE.JCT":new m("JADE.JCT","JCT",i.ERC20,{name:"JCT",contractAddress:"0x9288d6b823927f528aea244c5fa71a356b807112"}),"JADE.HER":new m("JADE.HER","HER",i.ERC20,{name:"Hero Node",contractAddress:"0x9ae559ac062de221eb5198d90c27e45e85fcaab2"}),"JADE.CTXC":new m("JADE.CTXC","CTXC",i.ERC20,{name:"Cortex",contractAddress:"0xea11755ae41d889ceec39a63e6ff75a02bc1c00d"}),"JADE.NES":new m("JADE.NES","NES",i.ERC20,{name:"Genesis Space",contractAddress:"0xa74ae2d3a4c3f6d9454634fee91dc7aab6724cf9"}),"JADE.PPT":new m("JADE.PPT","PPT",i.ERC20,{name:"Populous",contractAddress:"0xd4fa1460f537bb9085d22c7bccb5dd450ef28e3a"}),"JADE.RHOC":new m("JADE.RHOC","RHOC",i.ERC20,{name:"RChain",contractAddress:"0x168296bb09e24a88805cb9c33356536b980d3fc5"}),"JADE.MKR":new m("JADE.MKR","MKR",i.ERC20,{name:"Maker",contractAddress:"0x9f8f72aa9304c8b593d555f12ef6589cc3a579a2"}),"JADE.FUN":new m("JADE.FUN","FUN",i.ERC20,{name:"FunFair",contractAddress:"0x419d0d8bdd9af5e606ae2232ed285aff190e711b"}),"JADE.MVP":new m("JADE.MVP","MVP",i.ERC20,{name:"Merculet",contractAddress:"0x8a77e40936bbc27e80e9a3f526368c967869c86d"}),"JADE.GNT":new m("JADE.GNT","GNT",i.ERC20,{name:"Golem",contractAddress:"0xa74476443119a942de498590fe1f2454d7d4ac0d"}),"JADE.DPY":new m("JADE.DPY","DPY",i.ERC20,{name:"Delphy",contractAddress:"0x6c2adc2073994fb2ccc5032cc2906fa221e9b391"}),"JADE.GNX":new m("JADE.GNX","GNX",i.ERC20,{name:"Genaro Network",contractAddress:"0x6ec8a24cabdc339a06a172f8223ea557055adaa5"}),"JADE.KEY":new m("JADE.KEY","KEY",i.ERC20,{name:"Bihu KEY",contractAddress:"0x4cd988afbad37289baaf53c13e98e2bd46aaea8c"}),"JADE.MT":new m("JADE.MT","MT",i.ERC20,{name:"MyToken",contractAddress:"0x9b4e2b4b13d125238aa0480dd42b4f6fc71b37cc"}),"JADE.ENG":new m("JADE.ENG","ENG",i.ERC20,{name:"Enigma",contractAddress:"0xf0ee6b27b759c9893ce4f094b49ad28fd15a23e4"})}}},2279:function(e,t,n){"use strict";var r=n(13),a=n(11),o=n(10),s=n(177),i=n(2308),c=n(35),l=n(2278),u=n(3),p=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var d=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.op=t,this.signer=""}return p(e,[{key:"addSigner",value:function(e){this.signer=e}}]),e}();n.d(t,"a",function(){return g}),n.d(t,"c",function(){return v}),n.d(t,"b",function(){return _});var m=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var h=function(e,t,n,r){return new(n||(n=Promise))(function(a,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function i(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(s,i)}c((r=r.apply(e,t||[])).next())})},f=Object(s.a)("GatewayActions"),g="DEPOSIT_MODAL_ID",v="WITHDRAW_MODAL_ID",b=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=[],r=!0,o=!1,s=void 0;try{for(var i,c=e[Symbol.iterator]();!(r=(i=c.next()).done);r=!0){var l=i.value,u=a.a.getPrivateKey(l);if(u&&(n.push(u),n.length>=t))break}}catch(e){o=!0,s=e}finally{try{!r&&c.return&&c.return()}finally{if(o)throw s}}return n},y=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return m(e,[{key:"showDepositModal",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:g;return h(this,void 0,void 0,regeneratorRuntime.mark(function r(){var a;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(a=l.d.ADDRESS_TYPES[t]&&l.d.ADDRESS_TYPES[t].type){r.next=3;break}return r.abrupt("return",c.a.error("No suitable asset for "+t+" to be deposited"));case 3:return r.next=5,this.updateDepositAddress(e,a);case 5:if(r.sent){r.next=8;break}return r.abrupt("return");case 8:this.openModal(n);case 9:case"end":return r.stop()}},r,this)}))}},{key:"showWithdrawModal",value:function(e){return h(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(f("Withdraw: ",e),n=l.d.ADDRESS_TYPES[e]&&l.d.ADDRESS_TYPES[e].type){t.next=4;break}return t.abrupt("return",c.a.error("No suitable asset for "+e+" to be withdrawn"));case 4:return t.next=6,this.updateWithdrawInfo(e,n);case 6:if(t.sent){t.next=9;break}return t.abrupt("return");case 9:this.openModal(v);case 10:case"end":return t.stop()}},t,this)}))}},{key:"updateDepositAddress",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return h(this,void 0,void 0,regeneratorRuntime.mark(function r(){var a,o,s;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return a=void 0,f("Update Deposit Address: ",e,t,n),r.prev=2,r.next=5,Object(i.a)(e,t,n);case 5:o=a=r.sent,s=o.address,f("Address: ",s),r.next=15;break;case 10:return r.prev=10,r.t0=r.catch(2),f(r.t0),c.a.error(r.t0.message),r.abrupt("return",!1);case 15:return this.afterUpdateDepositInfo(a),r.abrupt("return",a);case 17:case"end":return r.stop()}},r,this,[[2,10]])}))}},{key:"updateWithdrawInfo",value:function(e,t){return h(this,void 0,void 0,regeneratorRuntime.mark(function n(){var r;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return r=void 0,n.prev=1,n.next=4,Object(i.b)(t);case 4:r=n.sent,f("WithdrawLimit: ",r),n.next=13;break;case 8:return n.prev=8,n.t0=n.catch(1),f(n.t0),c.a.error(n.t0.message),n.abrupt("return",!1);case 13:return this.afterUpdateWithdrawInfo(Object.assign({asset:e},r)),n.abrupt("return",!0);case 15:case"end":return n.stop()}},n,this,[[1,8]])}))}},{key:"queryFundRecords",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:200;return h(this,void 0,void 0,regeneratorRuntime.mark(function a(){var o,s,c,l;return regeneratorRuntime.wrap(function(a){for(;;)switch(a.prev=a.next){case 0:return f("[QueryFundRecord]",e),o=new d({accountName:e.get("name"),offset:n,size:r}),t.accountName===e.get("name")&&t.signer&&o.addSigner(t.signer),a.next=5,Object(i.d)(o);case 5:if(s=a.sent){a.next=15;break}return a.next=9,this.loginGatewayQuery(e);case 9:return c=a.sent,l=c.signer,o.addSigner(l),a.next=14,Object(i.d)(o);case 14:s=a.sent;case 15:s&&this.updateFundRecords(s);case 16:case"end":return a.stop()}},a,this)}))}},{key:"updateFundRecords",value:function(e){return e}},{key:"loginGatewayQuery",value:function(e){return h(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n,r,a,s,c,l,p;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:if(f("[LoginGatewayQuery]",e),f("[LoginGatewayQuery]",o.b.getSetting("walletLockTimeout")),n=new d({accountName:e.get("name"),expiration:Date.now()+1e3*o.b.getSetting("walletLockTimeout")}),r=u.p.fund_query.fromObject(n.op),e.getIn(["active","weight_threshold"]),a=e.getIn(["active","key_auths"]).filter(function(e){return e.get(1)>=1}).map(function(e){return e.get(0)}).toJS(),s=b(a)[0]){t.next=9;break}throw Error("Privkey Not Found");case 9:return f("[LoginGatewayQuery privKey]",e.getIn(["options","memo_key"]),s),c=u.p.fund_query.toBuffer(r),l=u.k.signBuffer(c,s).toHex(),f("[LoginGatewayQuery Signed]",l),n.addSigner(l),t.next=16,Object(i.c)(n);case 16:return p=t.sent,f("[LoginGatewayQuery LoginRes]",p),p&&this.updateLogin(p),t.abrupt("return",p);case 20:case"end":return t.stop()}},t,this)}))}},{key:"updateLogin",value:function(e){return e}},{key:"afterUpdateWithdrawInfo",value:function(e){return e}},{key:"afterUpdateDepositInfo",value:function(e){return e}},{key:"closeModal",value:function(e){return e}},{key:"openModal",value:function(e){return e}}]),e}(),_=r.a.createActions(y);t.d=_},2281:function(e,t,n){e.exports=n(2336).Observable},2282:function(e,t,n){"use strict";(function(e){function r(t){return(void 0!==e?"production":"development")===t}function a(){return!0===r("production")}function o(){return!0===r("development")}function s(){return!0===r("test")}n.d(t,"b",function(){return a}),n.d(t,"a",function(){return o}),n.d(t,"c",function(){return s})}).call(this,n(62))},2283:function(e,t,n){"use strict";n.d(t,"b",function(){return v}),n.d(t,"a",function(){return g});var r=n(0),a=n(2),o=n(1),s=n.n(o),i=n(26),c=n.n(i),l=n(16),u=n(21),p=n(10),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function m(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function f(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var g=function(e){function t(){return m(this,t),h(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return f(t,r["Component"]),d(t,[{key:"render",value:function(){var e=this.props,t=e.isActive,n=e.index,a=e.changeTab,o=e.title,i=e.className,l=e.disabled,u=c()({"is-active":t},i);return this.props.collapsed?r.createElement("option",{value:n},"string"==typeof o&&o.indexOf(".")>0?r.createElement(s.a,{className:"tab-title",content:o}):r.createElement("span",{className:"tab-title"},o)):r.createElement("li",{className:u,onClick:l?null:a.bind(this,n)},r.createElement("a",null,"string"==typeof o&&o.indexOf(".")>0?r.createElement(s.a,{className:"tab-title",content:o}):r.createElement("span",{className:"tab-title"},o),this.props.subText?r.createElement("div",{className:"tab-subtext"},this.props.subText):null))}}]),t}();g.propTypes={changeTab:a.func,isActive:a.bool.isRequired,index:a.number.isRequired,className:a.string},g.defaultProps={isActive:!1,index:0,className:""};var v=function(e){function t(e){m(this,t);var n=h(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.state={activeTab:e.setting?e.viewSettings.get(e.setting,e.defaultActiveTab):e.defaultActiveTab,width:window.innerWidth},n._setDimensions=n._setDimensions.bind(n),n}return f(t,r["Component"]),d(t,[{key:"componentDidMount",value:function(){this._setDimensions(),window.addEventListener("resize",this._setDimensions,{capture:!1,passive:!0})}},{key:"componentWillReceiveProps",value:function(e){var t=e.viewSettings.get(e.setting);t!==this.props.viewSettings.get(this.props.setting)&&this.setState({activeTab:t})}},{key:"componentWillUnmount",value:function(){window.removeEventListener("resize",this._setDimensions)}},{key:"_setDimensions",value:function(){var e=window.innerWidth;e!==this.state.width&&this.setState({width:e})}},{key:"_changeTab",value:function(e){e!==this.state.activeTab&&(this.props.setting&&u.a.changeViewSetting(function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}({},this.props.setting,e)),this.setState({activeTab:e}),this.props.onChangeTab&&this.props.onChangeTab(e))}},{key:"render",value:function(){var e=this,t=this.props,n=t.children,a=t.contentClass,o=t.tabsClass,s=t.style,i=t.segmented,l=this.state.width<900,u=null,p=[],d=r.Children.map(n,function(t,n){if(!t)return null;if(l&&t.props.disabled)return null;var a=n===e.state.activeTab;return a&&(u=t.props.children),r.cloneElement(t,{collapsed:l,isActive:a,changeTab:e._changeTab.bind(e),index:n})}).filter(function(e){return e&&p.push(e.props.index),null!==e});return u||(u=d[0].props.children),r.createElement("div",{className:c()(this.props.actionButtons?"with-buttons":"",this.props.className)},r.createElement("div",{className:"service-selector"},r.createElement("ul",{style:s,className:c()("button-group no-margin",o,{segmented:i})},l?r.createElement("li",{style:{paddingLeft:10,paddingRight:10,minWidth:"15rem"}},r.createElement("select",{value:this.state.activeTab,style:{marginTop:10,marginBottom:10},className:"cyb-select",onChange:function(t){e._changeTab(parseInt(t.target.value,10))}},d)):d,this.props.actionButtons?r.createElement("li",{className:"tabs-action-buttons"},this.props.actionButtons):null)),r.createElement("div",{className:a+" tab-content"},u))}}]),t}();v.propTypes={setting:a.string,defaultActiveTab:a.number,segmented:a.bool},v.defaultProps={active:0,defaultActiveTab:0,segmented:!0,contentClass:"",style:{}},v=Object(l.connect)(v,{listenTo:function(){return[p.b]},getProps:function(){return{viewSettings:p.b.getState().viewSettings}}})},2284:function(e,t,n){"use strict";var r=n(13),a=n(4),o=n(8),s=n(153),i=n(154),c=n(11),l=n(3),u=n(271),p=n.n(u),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var m={},h=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return d(e,[{key:"fundPool",value:function(e,t,n,r){var a=s.a.new_transaction(),i=o.a.get_asset_precision(t.get("precision"));return a.add_type_operation("asset_fund_fee_pool",{fee:{amount:0,asset_id:"1.3.0"},from_account:e,asset_id:n.get("id"),amount:r*i}),function(e){return c.a.process_transaction(a,null,!0).then(function(t){e(!0)}).catch(function(t){console.log("[AssetActions.js:150] ----- fundPool error -----\x3e",t),e(!1)})}}},{key:"claimPoolFees",value:function(e,t,n){var r=s.a.new_transaction(),a=o.a.get_asset_precision(t.get("precision"));return r.add_type_operation("asset_claim_fees",{fee:{amount:0,asset_id:0},issuer:e,amount_to_claim:{asset_id:t.get("id"),amount:n*a}}),function(e){return c.a.process_transaction(r,null,!0).then(function(t){e(!0)}).catch(function(t){console.log("[AssetActions.js:150] ----- claimFees error -----\x3e",t),e(!1)})}}},{key:"createAsset",value:function(e,t,n,r,a,i,u,d,m){console.log("create asset:",t,"flags:",n,"isBitAsset:",i,"bitasset_opts:",d);var h=s.a.new_transaction(),f=o.a.get_asset_precision(t.precision);p.a.config({DECIMAL_PLACES:t.precision});var g=new p.a(t.max_supply).times(f).toString(),v=new p.a(t.max_market_fee||0).times(f).toString(),b=(Date.now(),null);t.vesting_period&&(b=[[1,{vesting_period:1*t.vesting_period}]]);var y=o.a.get_asset_precision(l.b.getAsset(a.base.asset_id).get("precision")),_={fee:{amount:0,asset_id:0},issuer:e,symbol:t.symbol,precision:parseInt(t.precision,10),common_options:{max_supply:g,market_fee_percent:100*t.market_fee_percent||0,max_market_fee:v,issuer_permissions:r,flags:n,core_exchange_rate:{base:{amount:a.base.amount*y,asset_id:a.base.asset_id},quote:{amount:a.quote.amount*f,asset_id:"1.3.1"}},whitelist_authorities:[],blacklist_authorities:[],whitelist_markets:[],blacklist_markets:[],description:m,extensions:b},is_prediction_market:u,extensions:null};return i&&(_.bitasset_opts=d),console.debug("BitAsset: ",d),h.add_type_operation("asset_create",_),function(e){return c.a.process_transaction(h,null,!0).then(function(t){e(!0)}).catch(function(t){console.log("[AssetActions.js:150] ----- createAsset error -----\x3e",t),e(!1)})}}},{key:"updateAsset",value:function(e,t,n,r,a,i,u,d,m,h,f,g){var v=s.a.new_transaction(),b=o.a.get_asset_precision(a.get("precision"));p.a.config({DECIMAL_PLACES:a.get("precision")});var y=new p.a(n.max_supply).times(b).toString(),_=new p.a(n.max_market_fee||0).times(b).toString(),E=l.b.getAsset(r.quote.asset_id),w=o.a.get_asset_precision(E.get("precision")),k=l.b.getAsset(r.base.asset_id),O=o.a.get_asset_precision(k.get("precision")),C=new p.a(r.quote.amount).times(w).toString(),T=new p.a(r.base.amount).times(O).toString();console.log("auths:",g);var A={fee:{amount:0,asset_id:0},asset_to_update:a.get("id"),extensions:a.get("extensions"),issuer:e,new_issuer:t,new_options:{max_supply:y,max_market_fee:_,market_fee_percent:100*n.market_fee_percent,description:f,issuer_permissions:u,flags:i,whitelist_authorities:g.whitelist_authorities.toJS(),blacklist_authorities:g.blacklist_authorities.toJS(),whitelist_markets:g.whitelist_markets.toJS(),blacklist_markets:g.blacklist_markets.toJS(),extensions:a.getIn(["options","extensions"]),core_exchange_rate:{quote:{amount:C,asset_id:r.quote.asset_id},base:{amount:T,asset_id:r.base.asset_id}}}};if(e!==t&&t||delete A.new_issuer,v.add_type_operation("asset_update",A),console.log("bitasset_opts:",m,"original_bitasset_opts:",h),d&&(m.feed_lifetime_sec!==h.feed_lifetime_sec||m.minimum_feeds!==h.minimum_feeds||m.force_settlement_delay_sec!==h.force_settlement_delay_sec||m.force_settlement_offset_percent!==h.force_settlement_offset_percent||m.maximum_force_settlement_volume!==h.maximum_force_settlement_volume||m.short_backing_asset!==h.short_backing_asset)){var N={fee:{amount:0,asset_id:0},asset_to_update:a.get("id"),issuer:e,new_options:m};console.debug("Update: ",N),v.add_type_operation("asset_update_bitasset",N)}return c.a.process_transaction(v,null,!0).then(function(e){return!0}).catch(function(e){return console.log("[AssetActions.js:150] ----- createAsset error -----\x3e",e),!1})}},{key:"issueAsset",value:function(e,t,n,r,a,o){i.a.issue_asset(e,t,n,r,a,o)}},{key:"getAssetList",value:function(e,t){var n=e+"_"+t;return function(r){if(!m[n])return m[n]=!0,r({loading:!0}),a.a.instance().db_api().exec("list_assets",[e,t]).then(function(e){var t=[],o=[];e.forEach(function(e){l.b._updateObject(e,!1),o.push(e.dynamic_asset_data_id),e.bitasset_data_id&&t.push(e.bitasset_data_id)});var s=a.a.instance().db_api().exec("get_objects",[o]),i=t.length>0?a.a.instance().db_api().exec("get_objects",[t]):null;Promise.all([s,i]).then(function(t){delete m[n],r({assets:e,dynamic:t[0],bitasset_data:t[1],loading:!1})}),r({loading:!1}),delete m[n]})}}},{key:"lookupAsset",value:function(e,t){var n=l.b.getAsset(e);return n?{assets:[n],searchID:t,symbol:e}:function(n){setTimeout(function(){var r=l.b.getAsset(e);r&&n({assets:[r],searchID:t,symbol:e})},200)}}},{key:"reserveAsset",value:function(e,t,n){var r=s.a.new_transaction();return r.add_type_operation("asset_reserve",{fee:{amount:0,asset_id:0},amount_to_reserve:{amount:e,asset_id:t},payer:n,extensions:[]}),c.a.process_transaction(r,null,!0).then(function(e){return!0}).catch(function(e){return console.log("[AssetActions.js:150] ----- reserveAsset error -----\x3e",e),!1})}}]),e}();t.a=r.a.createActions(h)},2288:function(e,t,n){"use strict";var r=n(0),a=(n(2),n(2331)),o=n.n(a),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={animateEnter:!1},e.timer=null,e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["Component"]),s(t,[{key:"componentDidMount",value:function(){this.enableAnimation()}},{key:"resetAnimation",value:function(){this.setState({animateEnter:!1}),this.enableAnimation()}},{key:"enableAnimation",value:function(){var e=this;this.timer=setTimeout(function(){e.timer&&e.setState({animateEnter:!0})},2e3)}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timer),this.timer=null}},{key:"render",value:function(){return this.props.children?r.createElement(o.a,{className:this.props.className,component:this.props.component,transitionName:this.props.transitionName,transitionEnterTimeout:this.props.enterTimeout,transitionEnter:this.state.animateEnter,transitionLeave:!1},this.props.children):r.createElement(this.props.component)}}]),t}();i.defaultProps={component:"span",enterTimeout:2e3},t.a=i},2289:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.GraphQLError=o;var r=n(2303),a=n(2302);function o(e,t,n,r,s,i,c){var l=Array.isArray(t)?0!==t.length?t:void 0:t?[t]:void 0,u=n;if(!u&&l){var p=l[0];u=p&&p.loc&&p.loc.source}var d=r;!d&&l&&(d=l.reduce(function(e,t){return t.loc&&e.push(t.loc.start),e},[])),d&&0===d.length&&(d=void 0);var m=void 0;if(r&&n){var h=n;m=r.map(function(e){return(0,a.getLocation)(h,e)})}else l&&(m=l.reduce(function(e,t){return t.loc&&e.push((0,a.getLocation)(t.loc.source,t.loc.start)),e},[]));Object.defineProperties(this,{message:{value:e,enumerable:!0,writable:!0},locations:{value:m||void 0,enumerable:!0},path:{value:s||void 0,enumerable:!0},nodes:{value:l||void 0},source:{value:u||void 0},positions:{value:d||void 0},originalError:{value:i},extensions:{value:c||i&&i.extensions}}),i&&i.stack?Object.defineProperty(this,"stack",{value:i.stack,writable:!0,configurable:!0}):Error.captureStackTrace?Error.captureStackTrace(this,o):Object.defineProperty(this,"stack",{value:Error().stack,writable:!0,configurable:!0})}o.prototype=Object.create(Error.prototype,{constructor:{value:o},name:{value:"GraphQLError"},toString:{value:function(){return(0,r.printError)(this)}}})},2292:function(e,t,n){"use strict";n.d(t,"a",function(){return m});var r=n(41),a=n(5),o=n(13),s=n(2279),i=n(2278),c=n(140),l=n(68),u=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var p=new l.a("__graphene__"),d=Object(c.a)("GatewayStore"),m=i.d.ADDRESS_TYPES,h=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={backedCoins:Object(a.Map)({JADE:m}),bridgeCoins:Object(a.Map)(Object(a.fromJS)(p.get("bridgeCoins",{}))),bridgeInputs:["btc","dash","eth","steem"],login:{accountName:"",signer:""},records:{total:0,records:[],offset:0,size:20},down:Object(a.Map)({}),modals:Object(a.Map)(),depositInfo:{},withdrawInfo:{}},e.bindListeners({handleDepositUpdate:s.b.afterUpdateDepositInfo,handleWithdrawUpdate:s.b.afterUpdateWithdrawInfo,handleLogin:s.b.updateLogin,handleRecordsUpdate:s.b.updateFundRecords,openModal:s.b.openModal,closeModal:s.b.closeModal}),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["a"]),u(t,[{key:"handleDepositUpdate",value:function(e){var t=m[e.asset]||{},n=Object.assign({},e,{meta:t});d("Open: ",m,n),this.setState({depositInfo:n})}},{key:"handleWithdrawUpdate",value:function(e){this.setState({withdrawInfo:e})}},{key:"handleLogin",value:function(e){this.setState({login:e})}},{key:"handleRecordsUpdate",value:function(e){e.records.forEach(function(e){e.hash||(e.hash=t.findHash(e))}),this.setState({records:e})}},{key:"openModal",value:function(e){this.setState({modals:this.state.modals.set(e,!0)})}},{key:"closeModal",value:function(e){this.setState({modals:this.state.modals.set(e,!1)})}}]),t}();h.findHash=function(e){return e.details&&e.details.length?e.details[e.details.length-1].hash:null};var f=o.a.createStore(h,"GatewayStore");t.b=f},2301:function(e,t,n){"use strict";n.d(t,"b",function(){return k}),n.d(t,"a",function(){return O});var r=n(0),a=(n(2),n(19)),o=n(22),s=n(24),i=n(8),c=n(16),l=n(99),u=n(1),p=n.n(u),d=n(9),m=n.n(d),h=n(69),f=n.n(h),g=n(340),v=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},b=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function E(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var w=function(e){function t(e){return y(this,t),_(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return E(t,g["a"]),b(t,[{key:"componentDidMount",value:function(){f.a.rebuild()}},{key:"shouldComponentUpdate",value:function(e){return function e(t,n,r){null===t&&(t=Function.prototype);var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);return null===o?void 0:e(o,n,r)}if("value"in a)return a.value;var s=a.get;return void 0!==s?s.call(r):void 0}(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"shouldComponentUpdate",this).call(this,e)||e.toAsset!==this.props.toAsset||e.fromAsset!==this.props.fromAsset||e.amount!==this.props.amount}},{key:"getValue",value:function(){var e=this.props,t=e.amount,n=e.toAsset,r=e.fromAsset,a=e.fullPrecision,o=e.marketStats,s=e.coreAsset,c=void 0,l=void 0,u=n.get("id"),p=n.get("symbol"),d=r.get("id"),m=r.get("symbol");if(a||(t=i.a.get_asset_amount(t,r)),s&&o){var h=s.get("symbol");c=o.get(p+"_"+h),l=o.get(m+"_"+h)}var f=i.a.convertPrice(l&&l.close?l.close:"1.3.0"===d||r.has("bitasset")?r:null,c&&c.close?c.close:"1.3.0"===u||n.has("bitasset")?n:null,d,u);return f?i.a.convertValue(f,t,r,n):null}},{key:"render",value:function(){var e=this.props,t=e.amount,n=e.toAsset,o=e.fromAsset,s=e.fullPrecision,c=n.get("id");n.get("symbol");s||(t=i.a.get_asset_amount(t,o));var l=this.getValue();return l||0===l?r.createElement(a.a,{hide_asset:this.props.hide_asset,noPrefix:!0,amount:l,asset:c,decimalOffset:0}):r.createElement("div",{className:"tooltip inline-block","data-place":"bottom","data-tip":m.a.translate("tooltip.no_price"),style:{fontSize:"0.9rem"}},r.createElement(p.a,{content:"account.no_price"}))}}]),t}();w.propTypes={toAsset:o.a.ChainAsset.isRequired,fromAsset:o.a.ChainAsset.isRequired,coreAsset:o.a.ChainAsset.isRequired},w.defaultProps={toAsset:"1.3.0",fullPrecision:!0,noDecimals:!1,hide_asset:!1,coreAsset:"1.3.0"},w=Object(s.a)(w,{keep_updating:!0});var k=function(e){function t(){return y(this,t),_(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return E(t,r["Component"]),b(t,[{key:"render",value:function(){var e=this.props,t=e.refCallback,n=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["refCallback"]);return r.createElement(w,v({},n,{ref:t}))}}]),t}();k=Object(c.connect)(k,{listenTo:function(){return[l.a]},getProps:function(){return{marketStats:l.a.getState().allMarketStats}}});var O=function(e){function t(){return y(this,t),_(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return E(t,r["Component"]),b(t,[{key:"render",value:function(){var e=this.props.balance,t=!!e.getIn(["balance","amount"]),n=Number(t?e.getIn(["balance","amount"]):e.get("balance")),a=t?e.getIn(["balance","asset_id"]):e.get("asset_type");return isNaN(n)?r.createElement("span",null,"--"):r.createElement(k,{refCallback:this.props.refCallback,hide_asset:this.props.hide_asset,amount:n,fromAsset:a,noDecimals:!0,toAsset:this.props.toAsset})}}]),t}();O.propTypes={balance:o.a.ChainObject.isRequired},O=Object(s.a)(O,{keep_updating:!0})},2302:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.getLocation=function(e,t){var n=/\r\n|[\n\r]/g,r=1,a=t+1,o=void 0;for(;(o=n.exec(e.body))&&o.index<t;)r+=1,a=t+1-(o.index+o[0].length);return{line:r,column:a}}},2303:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.printError=function(e){var t=[];if(e.nodes)e.nodes.forEach(function(e){e.loc&&t.push(a(e.loc.source,(0,r.getLocation)(e.loc.source,e.loc.start)))});else if(e.source&&e.locations){var n=e.source;e.locations.forEach(function(e){t.push(a(n,e))})}return 0===t.length?e.message:[e.message].concat(t).join("\n\n")+"\n"};var r=n(2302);function a(e,t){var n=t.line,r=e.locationOffset.line-1,a=function(e,t){return 1===t.line?e.locationOffset.column-1:0}(e,t),i=n+r,c=t.column+a,l=(i-1).toString(),u=i.toString(),p=(i+1).toString(),d=p.length,m=e.body.split(/\r\n|[\n\r]/g);return m[0]=o(e.locationOffset.column-1)+m[0],[e.name+" ("+i+":"+c+")",n>=2&&s(d,l)+": "+m[n-2],s(d,u)+": "+m[n-1],o(2+d+c-1)+"^",n<m.length&&s(d,p)+": "+m[n]].filter(Boolean).join("\n")}function o(e){return Array(e+1).join(" ")}function s(e,t){return o(e-t.length)+t}},2304:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2289);Object.defineProperty(t,"GraphQLError",{enumerable:!0,get:function(){return r.GraphQLError}});var a=n(2344);Object.defineProperty(t,"syntaxError",{enumerable:!0,get:function(){return a.syntaxError}});var o=n(2343);Object.defineProperty(t,"locatedError",{enumerable:!0,get:function(){return o.locatedError}});var s=n(2303);Object.defineProperty(t,"printError",{enumerable:!0,get:function(){return s.printError}});var i=n(2342);Object.defineProperty(t,"formatError",{enumerable:!0,get:function(){return i.formatError}})},2305:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){if(!e)throw new Error(t)}},2308:function(e,t,n){"use strict";n.d(t,"a",function(){return _}),n.d(t,"b",function(){return E}),n.d(t,"e",function(){return w}),n.d(t,"d",function(){return k}),n.d(t,"c",function(){return O});var r=n(2278),a=n(177),o=n(2347),s=n.n(o),i=n(2316),c=n(2313),l=n(2315),u=h(["\n    mutation GenNewAddress($accountName: String!, $asset: String!) {\n      newDepositAddress(accountName: $accountName, asset: $asset) {\n        address\n        accountName\n        asset\n        type\n        createAt\n      }\n    }\n  "],["\n    mutation GenNewAddress($accountName: String!, $asset: String!) {\n      newDepositAddress(accountName: $accountName, asset: $asset) {\n        address\n        accountName\n        asset\n        type\n        createAt\n      }\n    }\n  "]),p=h(["\n    query GetAddress($accountName: String!, $asset: String!) {\n      getDepositAddress(accountName: $accountName, asset: $asset) {\n        address\n        accountName\n        asset\n        type\n        createAt\n      }\n    }\n  "],["\n    query GetAddress($accountName: String!, $asset: String!) {\n      getDepositAddress(accountName: $accountName, asset: $asset) {\n        address\n        accountName\n        asset\n        type\n        createAt\n      }\n    }\n  "]),d=h(["\n    query WithdrawInfo($type: String!) {\n      withdrawInfo(type: $type) {\n        fee\n        minValue\n        precision\n        asset\n        type\n        gatewayAccount\n      }\n    }\n  "],["\n    query WithdrawInfo($type: String!) {\n      withdrawInfo(type: $type) {\n        fee\n        minValue\n        precision\n        asset\n        type\n        gatewayAccount\n      }\n    }\n  "]),m=h(["\n    query VerifyAddress(\n      $asset: String!\n      $accountName: String!\n      $address: String!\n    ) {\n      verifyAddress(\n        asset: $asset\n        accountName: $accountName\n        address: $address\n      ) {\n        valid\n        asset\n      }\n    }\n  "],["\n    query VerifyAddress(\n      $asset: String!\n      $accountName: String!\n      $address: String!\n    ) {\n      verifyAddress(\n        asset: $asset\n        accountName: $accountName\n        address: $address\n      ) {\n        valid\n        asset\n      }\n    }\n  "]);function h(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}var f=function(e,t,n,r){return new(n||(n=Promise))(function(a,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function i(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(s,i)}c((r=r.apply(e,t||[])).next())})},g=Object(a.a)("GatewayService"),v=new Headers;v.append("Content-Type","application/x-www-form-urlencoded");var b=new c.a({uri:r.c}),y=new i.a({link:b,cache:new l.a});function _(e,t,n){return f(this,void 0,void 0,regeneratorRuntime.mark(function r(){var a,o;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if(g("Get Deposit: ",e,t,n),a=s()(u),o=s()(p),!n){r.next=9;break}return r.next=6,T("mutate",{mutation:a,variables:{accountName:e,asset:t}},"newDepositAddress");case 6:r.t0=r.sent,r.next=12;break;case 9:return r.next=11,T("query",{query:o,variables:{accountName:e,asset:t}},"getDepositAddress");case 11:r.t0=r.sent;case 12:return r.abrupt("return",r.t0);case 13:case"end":return r.stop()}},r,this)}))}function E(e){return f(this,void 0,void 0,regeneratorRuntime.mark(function t(){var n;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=s()(d),t.next=3,T("query",{query:n,variables:{type:e}},"withdrawInfo");case 3:return t.abrupt("return",t.sent);case 4:case"end":return t.stop()}},t,this)}))}function w(e,t,n){return f(this,void 0,void 0,regeneratorRuntime.mark(function r(){var a;return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:return a=s()(m),r.next=3,T("query",{query:a,variables:{asset:n,accountName:t,address:e}},"verifyAddress");case 3:return r.abrupt("return",r.sent);case 4:case"end":return r.stop()}},r,this)}))}function k(e){return f(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C("records",e).then(function(e){return e.data});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)}))}function O(e){return f(this,void 0,void 0,regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,C("login",e).then(function(e){return e.data});case 2:return t.abrupt("return",t.sent);case 3:case"end":return t.stop()}},t,this)}))}function C(e,t){return f(this,void 0,void 0,regeneratorRuntime.mark(function n(){var a,o;return regeneratorRuntime.wrap(function(n){for(;;)switch(n.prev=n.next){case 0:return(a=new Headers).append("Content-Type","application/json"),o={headers:a,method:"POST",body:JSON.stringify(t)},n.next=5,fetch(""+r.b+e,o).then(function(e){return e.json()}).catch(function(e){return{code:400,error:e.message}});case 5:return n.abrupt("return",n.sent);case 6:case"end":return n.stop()}},n,this)}))}function T(e,t,n){return f(this,void 0,void 0,regeneratorRuntime.mark(function r(){return regeneratorRuntime.wrap(function(r){for(;;)switch(r.prev=r.next){case 0:if("newDepositAddress"!==n){r.next=3;break}return r.next=3,y.resetStore();case 3:return r.prev=3,r.next=6,y[e](t);case 6:return r.t0=n,r.abrupt("return",r.sent.data[r.t0]);case 10:throw r.prev=10,r.t1=r.catch(3),console.error("GatewayError: ",r.t1),r.t1;case 14:case"end":return r.stop()}},r,this,[[3,10]])}))}},2309:function(e,t,n){"use strict";var r=n(0),a=n(2),o=n(141),s=n(22),i=n(24),c=n(2306),l=n.n(c),u=n(177),p=n(9),d=n.n(p),m=n(16),h=n(73),f=n(43),g=n(1),v=n.n(g),b=n(117),y=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var _=n(1575),E=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.handleNeverShow=function(e){var t=e.target.checked;return n.setState({neverShow:t}),f.a.neverShow(n.props.modalId,t),e.target.value},n.state={neverShow:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["Component"]),y(t,[{key:"render",value:function(){var e=this.props,t=(e.modalId,e.open),n=(e.locale,e.accountName);return t&&r.createElement(b.a,{modalId:this.props.modalId},r.createElement(v.a,{className:"text-center",component:"h3",content:"cybex.game.title"}),r.createElement("div",{className:"modal-content game-modal"},r.createElement("section",null,r.createElement("img",{src:_,alt:"The badge of Rainbow Cybex"}))),r.createElement("div",{className:"modal-footer"},r.createElement("p",{className:"text-center"},r.createElement("strong",null,n),r.createElement(v.a,{content:"cybex.game.content"}))))}}]),t}(),w=Object(m.connect)(E,{listenTo:function(){return[h.a]},getProps:function(e){var t=e.modalId;return{open:h.a.getState().showingModals.has(t)}}}),k=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var O=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={hover:!1},e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["Component"]),k(t,[{key:"render",value:function(){var e=this.props,t=e.account,n=e.image_size,a=t.get("lifetime_referrer_name")===t.get("name");r.createElement("div",{className:"account-image"},r.createElement(l.a,{size:n.width,value:t.get("name")})),this.state.hover,this.props.showQR;return r.createElement("div",{style:{maxWidth:n.width},className:"account-info"+(this.props.my_account?" my-account":"")},this.props.title?r.createElement("h4",null,this.props.title):null,r.createElement(o.a,{size:n,account:t.get("name"),custom_image:null}),r.createElement("p",{className:this.props.titleClass},r.createElement("span",{title:d.a.translate("account.member.lifetime"),className:Object(u.b)("",{lifetime:a})},t.get("name"))),r.createElement(w,{modalId:"thanks_"+t.get("name"),accountName:t.get("name")}))}}]),t}();O.propTypes={account:s.a.ChainAccount.isRequired,title:a.string,image_size:a.object.isRequired,my_account:a.bool},O.defaultProps={title:null,image_size:{height:120,width:120},showQR:!1,titleClass:"account-title"};t.a=Object(i.a)(O)},2310:function(e,t,n){"use strict";n.d(t,"a",function(){return S});var r=n(0),a=n(2),o=n(1),s=n.n(o),i=n(344),c=n(341),l=n(22),u=n(24),p=n(8),d=n(3),m=n(2288),h=n(2330),f=n(9),g=n.n(f),v=n(51),b=n(30),y=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function _(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function E(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function w(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var k=function(e,t,n,r){return new(n||(n=Promise))(function(a,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function i(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(s,i)}c((r=r.apply(e,t||[])).next())})},O=d.c.operations,C={textAlign:"left"},T={textAlign:"right"},A={};function N(e,t){return t.block_num===e.block_num?t.virtual_op-e.virtual_op:t.block_num-e.block_num}function P(e){return e?'"'+e.textContent.replace(/[\s\t\r\n]/gi," ")+'"':""}var S=((x=function(e){function t(e){_(this,t);var n=E(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._onIncreaseUnlimit=function(){n.setState({limit:n.state.limit+1e5})},n.handleTryMore=function(e){return k(n,void 0,void 0,regeneratorRuntime.mark(function e(){var t,n,r;return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(t=this.props.accountsList,!(n=1===t.length&&t[0]?t[0].get("id"):null)){e.next=10;break}if(r=void 0,A[n]){e.next=10;break}return e.next=7,p.a.getAccountFullHistory(n);case 7:r=e.sent,A[n]=r,this.forceUpdate();case 10:case"end":return e.stop()}},e,this)}))},n.state={limit:e.limit||20,csvExport:!1,headerHeight:85,filter:"all"},n}return w(t,r["Component"]),y(t,[{key:"componentDidMount",value:function(){if(!this.props.fullHeight){var e=this.refs.transactions;h.initialize(e),this._setHeaderHeight()}}},{key:"_setHeaderHeight",value:function(){var e=this.refs.header.offsetHeight;e!==this.state.headerHeight&&this.setState({headerHeight:e})}},{key:"shouldComponentUpdate",value:function(e,t){if(!p.a.are_equal_shallow(this.props.accountsList,e.accountsList))return!0;if(this.props.maxHeight!==e.maxHeight)return!0;if(this.state.headerHeight!==t.headerHeight)return!0;if(this.state.filter!==t.filter)return!0;if(this.props.customFilter&&(!p.a.are_equal_shallow(this.props.customFilter.fields,e.customFilter.fields)||!p.a.are_equal_shallow(this.props.customFilter.values,e.customFilter.values)))return!0;if(this.props.maxHeight!==e.maxHeight)return!0;if(t.limit!==this.state.limit||t.csvExport!==this.state.csvExport)return!0;for(var n=0;n<e.accountsList.length;++n){var r=e.accountsList[n],a=this.props.accountsList[n];if(r&&a&&r.get("history")!==a.get("history"))return!0}return!1}},{key:"componentDidUpdate",value:function(){if(this.state.csvExport){this.state.csvExport=!1;var e=document.getElementById("csv_export_container").childNodes,t="",n=!0,r=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var c=o.value.childNodes;""!==t&&(t+="\n"),t+=[P(c[0]),P(c[1]),P(c[2]),P(c[3])].join(",")}}catch(e){r=!0,a=e}finally{try{!n&&s.return&&s.return()}finally{if(r)throw a}}var l=new Blob([t],{type:"text/csv;charset=utf-8"}),u=new Date;Object(i.saveAs)(l,"cybhist-"+u.getFullYear()+"-"+("0"+(u.getMonth()+1)).slice(-2)+"-"+("0"+u.getDate()).slice(-2)+"-"+("0"+u.getHours()).slice(-2)+("0"+u.getMinutes()).slice(-2)+".csv")}if(!this.props.fullHeight){var p=this.refs.transactions;h.update(p),this._setHeaderHeight()}}},{key:"_onIncreaseLimit",value:function(){this.setState({limit:this.state.limit+30})}},{key:"_getHistory",value:function(e,t,n){var r=[],a=new Set,o=!0,s=!1,i=void 0;try{for(var c,l=e[Symbol.iterator]();!(o=(c=l.next()).done);o=!0){var u=c.value;if(u&&u.get&&u.get("history")){var p=A[u.get("id")]||[],d=u.get("history").toJS(),m=Object(b.uniq)(d.concat(p),function(e){return e.id});m&&(r=r.concat(m.filter(function(e){return!a.has(e.id)&&a.add(e.id)})))}}}catch(e){s=!0,i=e}finally{try{!o&&l.return&&l.return()}finally{if(s)throw i}}return t&&(r=r.filter(function(e){return e.op[0]===O[t]})),n&&(r=r.filter(function(e){return n.fields.reduce(function(t,r){switch(r){case"asset_id":return t&&e.op[1].amount[r]===n.values[r];default:return t&&e.op[1][r]===n.values[r]}},!0)})),r}},{key:"_downloadCSV",value:function(){return k(this,void 0,void 0,regeneratorRuntime.mark(function e(){return regeneratorRuntime.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.setState({csvExport:!0});case 1:case"end":return e.stop()}},e,this)}))}},{key:"_onChangeFilter",value:function(e){this.setState({filter:e.target.value})}},{key:"render",value:function(){var e=this.props,t=e.accountsList,n=e.compactView,a=e.filter,o=e.customFilter,i=e.style,l=e.maxHeight,u=this.state,p=u.limit,d=u.headerHeight,h=1===t.length&&t[0]?t[0].get("id"):null,f=this._getHistory(t,this.props.showFilters&&"all"!==this.state.filter?this.state.filter:a,o).sort(N),b=f.length;i=i||{};var y=null;y=["all","transfer","limit_order_create","limit_order_cancel","fill_order","account_create","account_update","asset_create","witness_withdraw_pay","balance_claim"].map(function(e){return r.createElement("option",{value:e,key:e},g.a.translate("transaction.trxTypes."+e))});var _=f.length?f.slice(0,p).map(function(e){return r.createElement(c.a,{style:C,key:e.id,op:e.op,result:e.result,block:e.block_num,current:h,hideFee:!0,inverted:!1,hideOpLabel:n})}):[r.createElement("tr",{key:"no_recent"},r.createElement("td",{colSpan:n?2:3},r.createElement(s.a,{content:"operation.no_recent"})))];return _.push(r.createElement("tr",{className:"total-value",key:"total_value"},r.createElement("td",{className:"column-hide-tiny text-center"},A[h]?p<b&&r.createElement("a",{href:"javascript:;",onClick:this._onIncreaseUnlimit},r.createElement(s.a,{content:"account.show_more"})):r.createElement("a",{href:"javascript:;",onClick:this.handleTryMore},r.createElement(s.a,{content:"account.try_more"}))),r.createElement("td",{style:T},b>0?r.createElement("span",null,r.createElement("a",{className:"inline-block",onClick:this._downloadCSV.bind(this),"data-tip":g.a.translate("transaction.csv_tip"),"data-place":"bottom"},r.createElement(v.a,{name:"excel",className:"icon-14px"}))):null),r.createElement("td",{style:{textAlign:"center"}}," ",this.props.showMore&&b>this.props.limit||p<b?r.createElement("a",{onClick:this._onIncreaseLimit.bind(this)},r.createElement(v.a,{name:"chevron-down",className:"icon-14px"})):null))),r.createElement("div",{className:"recent-transactions no-overflow",style:i},r.createElement("div",{className:"generic-bordered-box"},this.props.dashboard||this.props.noHeader?null:r.createElement("div",{ref:"header"},r.createElement("div",{className:"block-content-header"},r.createElement("span",null,this.props.title?this.props.title:r.createElement(s.a,{content:"account.recent"})))),r.createElement("div",{className:"box-content grid-block no-margin",style:this.props.fullHeight?null:{maxHeight:l-d},ref:"transactions"},r.createElement("table",{className:"table"+(n?" compact":"")+(this.props.dashboard?" dashboard-table":"")},r.createElement("thead",null,r.createElement("tr",null,n?null:r.createElement("th",{style:C,className:"column-hide-tiny"},this.props.showFilters?r.createElement("select",{"data-place":"left","data-tip":g.a.translate("tooltip.filter_ops"),style:{paddingTop:5,width:"auto"},className:"cyb-select no-margin",value:this.state.filter,onChange:this._onChangeFilter.bind(this)},y):null),r.createElement("th",{style:C},r.createElement(s.a,{content:"account.votes.info"})),r.createElement("th",null))),r.createElement(m.a,{component:"tbody",transitionName:"newrow"},_))),b>0&&this.state.csvExport&&r.createElement("div",{id:"csv_export_container",style:{display:"none"}},r.createElement("div",null,r.createElement("div",null,"DATE"),r.createElement("div",null,"OPERATION"),r.createElement("div",null,"MEMO"),r.createElement("div",null,"AMOUNT")),f.map(function(e){return r.createElement(c.a,{key:e.id,op:e.op,result:e.result,block:e.block_num,inverted:!1,csvExportMode:!0})}))))}}]),t}()).propTypes={accountsList:l.a.ChainAccountsList.isRequired,compactView:a.bool,limit:a.number,maxHeight:a.number,fullHeight:a.bool,showFilters:a.bool},x.defaultProps={limit:25,maxHeight:500,fullHeight:!1,showFilters:!1},x);S=Object(u.a)(S,{keep_updating:!0});var x,j,I=((j=function(e){function t(){return _(this,t),E(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return w(t,r["Component"]),y(t,[{key:"render",value:function(){return r.createElement("span",{className:"wrapper"},this.props.children(this.props))}}]),t}()).propTypes={asset:l.a.ChainAsset.isRequired,to:l.a.ChainAccount.isRequired,fromAccount:l.a.ChainAccount.isRequired},j.defaultProps={asset:"1.3.0"},j);I=Object(u.a)(I)},2312:function(e,t,n){"use strict";var r=n(0),a=n(8),o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var s=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["Component"]),o(t,[{key:"render",value:function(){var e=this.props,t=e.price,n=e.preFormattedPrice,o=e.quote,s=e.base,i=(e.component,e.precision),c=n||a.a.price_to_text(t,o,s,i);return c.full>=1?r.createElement("span",null,r.createElement("span",{className:"price-integer"},c.int,"."),c.dec?r.createElement("span",{className:"price-integer"},c.dec):null,c.trailing?r.createElement("span",{className:"price-decimal"},c.trailing):null):c.full>=.1?r.createElement("span",null,r.createElement("span",{className:"price-decimal"},c.int,"."),c.dec?r.createElement("span",{className:"price-integer"},c.dec):null,c.trailing?r.createElement("span",{className:"price-decimal"},c.trailing):null):r.createElement("span",null,r.createElement("span",{className:"price-decimal"},c.int,"."),c.dec?r.createElement("span",{className:"price-decimal"},c.dec):null,c.trailing?r.createElement("span",{className:"price-integer"},c.trailing):null)}}]),t}();t.a=s},2313:function(e,t,n){"use strict";var r=n(2276),a=n(2275),o=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),s=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},i=function(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols){var a=0;for(r=Object.getOwnPropertySymbols(e);a<r.length;a++)t.indexOf(r[a])<0&&(n[r[a]]=e[r[a]])}return n},c=function(e,t,n){var r=new Error(n);throw r.response=e,r.statusCode=e.status,r.result=t,r},l={includeQuery:!0,includeExtensions:!1},u=function(e){void 0===e&&(e={});var t=e.uri,n=e.fetch,o=e.includeExtensions,u=i(e,["uri","fetch","includeExtensions"]);return function(e){if(!e&&"undefined"==typeof fetch){var t="unfetch";throw"undefined"==typeof window&&(t="node-fetch"),new Error("fetch is not found globally and no fetcher passed, to fix pass a fetch for\n      your environment like https://www.npmjs.com/package/"+t+".\n\n      For example:\n        import fetch from '"+t+"';\n        import { createHttpLink } from 'apollo-link-http';\n\n        const link = createHttpLink({ uri: '/graphql', fetch: fetch });\n      ")}}(n),n&&function(e){if(e.use)throw new Error("\n      It looks like you're using apollo-fetch! Apollo Link now uses native fetch\n      implementation, so apollo-fetch is not needed. If you want to use your existing\n      apollo-fetch middleware, please check this guide to upgrade:\n        https://github.com/apollographql/apollo-link/blob/master/docs/implementation.md\n    ")}(n),n||(n=fetch),t||(t="/graphql"),new r.a(function(e){return new r.b(function(r){var i,p=e.getContext(),d=p.headers,m=p.credentials,h=p.fetchOptions,f=void 0===h?{}:h,g=p.uri,v=p.http,b=void 0===v?{}:v,y=e.operationName,_=e.extensions,E=e.variables,w=e.query,k=s({},l,b),O={operationName:y,variables:E};(o||k.includeExtensions)&&(O.extensions=_),k.includeQuery&&(O.query=Object(a.print)(w));try{i=JSON.stringify(O)}catch(e){var C=new Error("Network request failed. Payload is not serializable: "+e.message);throw C.parseError=e,C}var T=f;u.fetchOptions&&(T=s({},u.fetchOptions,T));var A=s({method:"POST"},T,{headers:{accept:"*/*","content-type":"application/json"},body:i});u.credentials&&(A.credentials=u.credentials),m&&(A.credentials=m),u.headers&&(A.headers=s({},A.headers,u.headers)),d&&(A.headers=s({},A.headers,d));var N=function(){if("undefined"==typeof AbortController)return{controller:!1,signal:!1};var e=new AbortController;return{controller:e,signal:e.signal}}(),P=N.controller,S=N.signal;return P&&(A.signal=S),n(g||t,A).then(function(t){return e.setContext({response:t}),t}).then(function(e){return function(t){return t.text().then(function(e){try{return JSON.parse(e)}catch(r){var n=r;return n.response=t,n.statusCode=t.status,n.bodyText=e,Promise.reject(n)}}).then(function(n){return t.status>=300&&c(t,n,"Response not successful: Received status code "+t.status),n.hasOwnProperty("data")||n.hasOwnProperty("errors")||c(t,n,"Server response was missing for query '"+e.operationName+"'."),n})}}(e)).then(function(e){return r.next(e),r.complete(),e}).catch(function(e){"AbortError"!==e.name&&r.error(e)}),function(){P&&P.abort()}})})},p=function(e){function t(t){return e.call(this,u(t).request)||this}return o(t,e),t}(r.a);n.d(t,!1,function(){return u}),n.d(t,"a",function(){return p})},2314:function(e,t,n){"use strict";var r=n(0),a=n(1),o=n.n(a),s=[{label:"Seconds",translate:"period.seconds",value:1},{label:"Minutes",translate:"period.minutes",value:60},{label:"Hours",translate:"period.hours",value:3600},{label:"Days",translate:"period.days",value:86400}],i=function(e){var t=e.disabled,n=e.tabIndex,a=e.className,s=e.value,i=e.name,c=e.id,l=e.items,u=e.onChange;return r.createElement("select",{disabled:t,tabIndex:n,className:a,value:s,name:i,id:c,onChange:u},l.map(function(e){return e.translate?r.createElement(o.a,{component:"option",key:e.label,value:e.value,content:e.translate}):r.createElement("option",{key:e.label,value:e.value},e.label)}))};n.d(t,"a",function(){return l});var c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var l=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.state={vestingPeriod:n.props.defaultPeriod,vestingAmount:n.props.defaultPeriod,vestingUnit:1},n.getIds=n.getIds.bind(n),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["Component"]),c(t,[{key:"getIds",value:function(){return{amount:"vestingAmount-"+this.props.name,unit:"vestingUnit-"+this.props.name}}},{key:"onVestingChanged",value:function(e){var t=this.getIds(),n=t.amount,r=t.unit,a=this.props.onPeriodChange,o=document.getElementById(n).value,s=document.getElementById(r).value,i=parseInt(o*s,10);a(i),this.setState({vestingUnit:s,vestingAmount:o,vestingPeriod:i})}},{key:"onVestingUnitChanged",value:function(e){var t=this.getIds(),n=(t.amount,t.unit),r=this.state.vestingPeriod,a=document.getElementById(n).value;this.setState({vestingAmount:parseFloat((r/a).toFixed(2)),vestingUnit:a})}},{key:"render",value:function(){var e=this.props,t=e.tabIndex,n=e.className,a=e.disabled;return r.createElement("div",{className:n},r.createElement("input",{tabIndex:t?t-1:-1,id:this.getIds().amount,name:this.getIds().amount,type:"number",min:"0",value:this.state.vestingAmount,onChange:this.onVestingChanged.bind(this),disabled:a}),r.createElement(i,{tabIndex:t?t-1:-1,id:this.getIds().unit,disabled:a,name:this.getIds().unit,value:this.state.vestingUnit,onChange:this.onVestingUnitChanged.bind(this),items:s}))}}]),t}()},2315:function(e,t,n){"use strict";var r,a=n(2272),o=function(){function e(){}return e.prototype.transformDocument=function(e){return e},e.prototype.transformForLink=function(e){return e},e.prototype.readQuery=function(e,t){return void 0===t&&(t=!1),this.read({query:e.query,variables:e.variables,optimistic:t})},e.prototype.readFragment=function(e,t){return void 0===t&&(t=!1),this.read({query:Object(a.h)(e.fragment,e.fragmentName),variables:e.variables,rootId:e.id,optimistic:t})},e.prototype.writeQuery=function(e){this.write({dataId:"ROOT_QUERY",result:e.data,query:e.query,variables:e.variables})},e.prototype.writeFragment=function(e){this.write({dataId:e.id,result:e.data,variables:e.variables,query:Object(a.h)(e.fragment,e.fragmentName)})},e}();r||(r={});var s=!1,i=function(){function e(){}return e.prototype.ensureReady=function(){return Promise.resolve()},e.prototype.canBypassInit=function(){return!0},e.prototype.match=function(e,t,n){var r=n.store.get(e.id);return!!r&&(r.__typename?r.__typename===t||(Object(a.D)("You are using the simple (heuristic) fragment matcher, but your queries contain union or interface types.\n     Apollo Client will not be able to able to accurately map fragments.To make this error go away, use the IntrospectionFragmentMatcher as described in the docs: http://dev.apollodata.com/react/initialization.html#fragment-matcher","error"),n.returnPartialData=!0,!0):(s||(console.warn("You're using fragments in your queries, but either don't have the addTypename:\n  true option set in Apollo Client, or you are trying to write a fragment to the store without the __typename.\n   Please turn on the addTypename option and include __typename when writing fragments so that Apollo Client\n   can accurately match fragments."),console.warn("Could not find __typename on Fragment ",t,r),console.warn("DEPRECATION WARNING: using fragments without __typename is unsupported behavior and will be removed in future versions of Apollo client. You should fix this and set addTypename to true now."),Object(a.w)()||(s=!0)),n.returnPartialData=!0,!0))},e}(),c=function(){function e(e){e&&e.introspectionQueryResultData?(this.possibleTypesMap=this.parseIntrospectionResult(e.introspectionQueryResultData),this.isReady=!0):this.isReady=!1,this.match=this.match.bind(this)}return e.prototype.match=function(e,t,n){if(!this.isReady)throw new Error("FragmentMatcher.match() was called before FragmentMatcher.init()");var r=n.store.get(e.id);if(!r)return!1;if(!r.__typename)throw new Error("Cannot match fragment because __typename property is missing: "+JSON.stringify(r));if(r.__typename===t)return!0;var a=this.possibleTypesMap[t];return!!(a&&a.indexOf(r.__typename)>-1)},e.prototype.parseIntrospectionResult=function(e){var t={};return e.__schema.types.forEach(function(e){"UNION"!==e.kind&&"INTERFACE"!==e.kind||(t[e.name]=e.possibleTypes.map(function(e){return e.name}))}),t},e}(),l=n(2275),u=function(){function e(e){void 0===e&&(e={}),this.data=e}return e.prototype.toObject=function(){return this.data},e.prototype.get=function(e){return this.data[e]},e.prototype.set=function(e,t){this.data[e]=t},e.prototype.delete=function(e){this.data[e]=void 0},e.prototype.clear=function(){this.data={}},e.prototype.replace=function(e){this.data=e||{}},e}();function p(e){return new u(e)}var d=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),m=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},h=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.type="WriteError",t}return d(t,e),t}(Error);function f(e,t){var n=new h("Error writing result to store for query:\n "+Object(l.print)(t));return n.message+="\n"+e.message,n.stack=e.stack,n}function g(e){var t=e.result,n=e.query,r=e.storeFactory,o=void 0===r?p:r,s=e.store,i=void 0===s?o():s,c=e.variables,l=e.dataIdFromObject,u=e.fragmentMap,d=void 0===u?{}:u,m=e.fragmentMatcherFunction,h=Object(a.m)(n);c=Object(a.c)({},Object(a.e)(h),c);try{return b({dataId:"ROOT_QUERY",result:t,selectionSet:h.selectionSet,context:{store:i,storeFactory:o,processedData:{},variables:c,dataIdFromObject:l,fragmentMap:d,fragmentMatcherFunction:m}})}catch(e){throw f(e,n)}}function v(e){var t=e.dataId,n=e.result,r=e.document,o=e.storeFactory,s=void 0===o?p:o,i=e.store,c=void 0===i?s():i,l=e.variables,u=e.dataIdFromObject,d=e.fragmentMatcherFunction,m=Object(a.k)(r),h=m.selectionSet,g=Object(a.d)(Object(a.g)(r));l=Object(a.c)({},Object(a.e)(m),l);try{return b({result:n,dataId:t,selectionSet:h,context:{store:c,storeFactory:s,processedData:{},variables:l,dataIdFromObject:u,fragmentMap:g,fragmentMatcherFunction:d}})}catch(e){throw f(e,r)}}function b(e){var t=e.result,n=e.dataId,r=e.selectionSet,o=e.context,s=o.variables,i=o.store,c=o.fragmentMap;return r.selections.forEach(function(e){var r=Object(a.A)(e,s);if(Object(a.r)(e)){var i=Object(a.z)(e),p=t[i];if(r)if(void 0!==p)!function(e){var t,n,r=e.field,o=e.value,s=e.dataId,i=e.context,c=i.variables,u=i.dataIdFromObject,p=i.store,d=Object(a.B)(r,c),h=!1,f="";if(r.selectionSet&&null!==o)if(Array.isArray(o)){var g=s+"."+d;t=function e(t,n,r,a){return t.map(function(t,o){if(null===t)return null;var s=n+"."+o;if(Array.isArray(t))return e(t,s,r,a);var i=!0;if(a.dataIdFromObject){var c=a.dataIdFromObject(t);c&&(s=c,i=!1)}_(s,r,a.processedData)||b({dataId:s,result:t,selectionSet:r,context:a});var l={type:"id",id:s,generated:i};return l})}(o,g,r.selectionSet,i)}else{var v=s+"."+d,E=!0;if(y(v)||(v="$"+v),u){var w=u(o);if(w&&y(w))throw new Error('IDs returned by dataIdFromObject cannot begin with the "$" character.');w&&(v=w,E=!1)}if(_(v,r,i.processedData)||b({dataId:v,result:o,selectionSet:r.selectionSet,context:i}),t={type:"id",id:v,generated:E},(n=p.get(s))&&n[d]!==t){var k=n[d];if(Object(a.s)(t)&&t.generated&&Object(a.s)(k)&&!k.generated)throw new Error("Store error: the application attempted to write an object with no provided id but the store already contains an id of "+k.id+" for this object. The selectionSet that was trying to be written is:\n"+Object(l.print)(r));Object(a.s)(k)&&k.generated&&(f=k.id,h=!0)}}else t=null!=o&&"object"==typeof o?{type:"json",json:o}:o;var O,C=m({},p.get(s),((O={})[d]=t,O));h&&function e(t,n,r){var o=r.get(t);var s=r.get(n);Object.keys(o).forEach(function(i){var c=o[i],l=s[i];Object(a.s)(c)&&y(c.id)&&Object(a.s)(l)&&e(c.id,l.id,r),r.delete(t),r.set(n,m({},o,s))})}(f,t.id,p);(n=p.get(s))&&t===n[d]||p.set(s,C)}({dataId:n,value:p,field:e,context:o});else!(e.directives&&e.directives.length&&e.directives.some(function(e){return e.name&&"defer"===e.name.value}))&&o.fragmentMatcherFunction&&(Object(a.v)()||console.warn("Missing field "+i+" in "+JSON.stringify(t,null,2).substring(0,100)))}else{var d=void 0;if(Object(a.t)(e))d=e;else if(!(d=(c||{})[e.name.value]))throw new Error("No fragment named "+e.name.value+".");var h=!0;if(o.fragmentMatcherFunction&&d.typeCondition){var f={store:new u({self:t}),returnPartialData:!1,hasMissingField:!1,cacheResolvers:{}};h=o.fragmentMatcherFunction({type:"id",id:"self",generated:!1},d.typeCondition.name.value,f),!Object(a.v)()&&f.returnPartialData&&console.error("WARNING: heuristic fragment matching going on!")}r&&h&&b({result:t,selectionSet:d.selectionSet,dataId:n,context:o})}}),i}function y(e){return"$"===e[0]}function _(e,t,n){if(!n)return!1;if(n[e]){if(n[e].indexOf(t)>=0)return!0;n[e].push(t)}else n[e]=[t];return!1}function E(e,t,n,r,o,s){void 0===s&&(s={});var i=Object(a.i)(t),c=Object(a.g)(t),l={fragmentMap:Object(a.d)(c),contextValue:r,variableValues:o,resultMapper:s.resultMapper,resolver:e,fragmentMatcher:s.fragmentMatcher||function(){return!0}};return w(i.selectionSet,n,l)}function w(e,t,n){var r=n.fragmentMap,o=n.contextValue,s=n.variableValues,i={};return e.selections.forEach(function(e){if(Object(a.A)(e,s))if(Object(a.r)(e)){var c=function(e,t,n){var r=n.variableValues,o=n.contextValue,s=n.resolver,i=e.name.value,c=Object(a.b)(e,r),l={isLeaf:!e.selectionSet,resultKey:Object(a.z)(e),directives:Object(a.f)(e,r)},u=s(i,t,c,o,l);if(!e.selectionSet)return u;if(null==u)return u;if(Array.isArray(u))return function e(t,n,r){return n.map(function(n){return null===n?null:Array.isArray(n)?e(t,n,r):w(t.selectionSet,n,r)})}(e,u,n);return w(e.selectionSet,u,n)}(e,t,n),l=Object(a.z)(e);void 0!==c&&(void 0===i[l]?i[l]=c:k(i[l],c))}else{var u=void 0;if(Object(a.t)(e))u=e;else if(!(u=r[e.name.value]))throw new Error("No fragment named "+e.name.value);var p=u.typeCondition.name.value;if(n.fragmentMatcher(t,p,o)){var d=w(u.selectionSet,t,n);k(i,d)}}}),n.resultMapper?n.resultMapper(i,t):i}function k(e,t){if(null===t||"object"!=typeof t)return t;Object.keys(e).forEach(function(n){t.hasOwnProperty(n)&&k(e[n],t[n])}),Object.keys(t).forEach(function(n){e.hasOwnProperty(n)||(e[n]=t[n])})}function O(e){this.message=e,this.stack=""}O.prototype=Error.prototype;var C=E,T=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},A="undefined"!=typeof Symbol?Symbol("id"):"@@id";function N(e){return S(T({},e,{returnPartialData:!1})).result}var P=function(e,t,n,r,o){var s=o.resultKey,i=o.directives;x(t);var c=t.id,l=r.store.get(c),u=Object(a.n)(e,n,i),p=(l||{})[u];if(void 0===p&&r.cacheResolvers&&l&&(l.__typename||"ROOT_QUERY"===c)){var d=l.__typename||"Query",m=r.cacheResolvers[d];if(m){var h=m[e];h&&(p=h(l,n))}}if(void 0===p){if(!r.returnPartialData)throw new Error("Can't find field "+u+" on object ("+c+") "+JSON.stringify(l,null,2)+".");return r.hasMissingField=!0,p}return Object(a.u)(p)?t.previousResult&&Object(a.q)(t.previousResult[s],p.json)?t.previousResult[s]:p.json:(t.previousResult&&(p=function e(t,n){if(Object(a.s)(t))return T({},t,{previousResult:n});if(Array.isArray(t)){var r=new Map;return Array.isArray(n)&&n.forEach(function(e){e&&e[A]&&r.set(e[A],e)}),t.map(function(t,o){var s=n&&n[o];return Object(a.s)(t)&&(s=r.get(t.id)||s),e(t,s)})}return t}(p,t.previousResult[s])),p)};function S(e){var t=e.store,n=e.query,r=e.variables,o=e.previousResult,s=e.returnPartialData,i=void 0===s||s,c=e.rootId,l=void 0===c?"ROOT_QUERY":c,u=e.fragmentMatcherFunction,p=e.config,d=Object(a.m)(n);r=Object(a.c)({},Object(a.e)(d),r);var m={store:t,returnPartialData:i,cacheResolvers:p&&p.cacheResolvers||{},hasMissingField:!1};return{result:C(P,n,{type:"id",id:l,previousResult:o},m,r,{fragmentMatcher:u,resultMapper:j}),complete:!m.hasMissingField}}function x(e){if(!Object(a.s)(e))throw new Error("Encountered a sub-selection on the query, but the store doesn't have an object reference. This should never happen during normal use unless you have custom code that is directly manipulating the store; please file an issue.")}function j(e,t){if(t.previousResult){var n=Object.keys(e);if(Object.keys(t.previousResult).reduce(function(e,t){return e&&n.indexOf(t)>-1},!0)&&n.every(function(n){return function e(t,n){if(t===n)return!0;if(!Array.isArray(t)||!Array.isArray(n)||t.length!==n.length)return!1;return t.every(function(t,r){return e(t,n[r])})}(e[n],t.previousResult[n])}))return t.previousResult}return Object.defineProperty(e,A,{enumerable:!1,configurable:!1,writable:!1,value:t.id}),e}var I=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},R=function(){function e(e){void 0===e&&(e={}),this.data=e,this.recordedData={}}return e.prototype.record=function(e){e(this);var t=this.recordedData;return this.recordedData={},t},e.prototype.toObject=function(){return I({},this.data,this.recordedData)},e.prototype.get=function(e){return this.recordedData.hasOwnProperty(e)?this.recordedData[e]:this.data[e]},e.prototype.set=function(e,t){this.get(e)!==t&&(this.recordedData[e]=t)},e.prototype.delete=function(e){this.recordedData[e]=void 0},e.prototype.clear=function(){var e=this;Object.keys(this.data).forEach(function(t){return e.delete(t)}),this.recordedData={}},e.prototype.replace=function(e){this.clear(),this.recordedData=I({},e)},e}();function D(e,t){return new R(e).record(t)}var M=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),F=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},q={fragmentMatcher:new i,dataIdFromObject:B,addTypename:!0,storeFactory:p};function B(e){if(e.__typename){if(void 0!==e.id)return e.__typename+":"+e.id;if(void 0!==e._id)return e.__typename+":"+e._id}return null}var L=function(e){function t(t){void 0===t&&(t={});var n=e.call(this)||this;return n.optimistic=[],n.watches=[],n.silenceBroadcast=!1,n.config=F({},q,t),n.config.customResolvers&&(n.config.cacheResolvers=n.config.customResolvers),n.addTypename=!!n.config.addTypename,n.data=n.config.storeFactory(),n}return M(t,e),t.prototype.restore=function(e){return e&&this.data.replace(e),this},t.prototype.extract=function(e){if(void 0===e&&(e=!1),e&&this.optimistic.length>0){var t=this.optimistic.map(function(e){return e.data});return Object.assign.apply(Object,[{},this.data.toObject()].concat(t))}return this.data.toObject()},t.prototype.read=function(e){return e.rootId&&void 0===this.data.get(e.rootId)?null:N({store:this.config.storeFactory(this.extract(e.optimistic)),query:this.transformDocument(e.query),variables:e.variables,rootId:e.rootId,fragmentMatcherFunction:this.config.fragmentMatcher.match,previousResult:e.previousResult,config:this.config})},t.prototype.write=function(e){v({dataId:e.dataId,result:e.result,variables:e.variables,document:this.transformDocument(e.query),store:this.data,dataIdFromObject:this.config.dataIdFromObject,fragmentMatcherFunction:this.config.fragmentMatcher.match}),this.broadcastWatches()},t.prototype.diff=function(e){return S({store:this.config.storeFactory(this.extract(e.optimistic)),query:this.transformDocument(e.query),variables:e.variables,returnPartialData:e.returnPartialData,previousResult:e.previousResult,fragmentMatcherFunction:this.config.fragmentMatcher.match,config:this.config})},t.prototype.watch=function(e){var t=this;return this.watches.push(e),function(){t.watches=t.watches.filter(function(t){return t!==e})}},t.prototype.evict=function(e){throw new Error("eviction is not implemented on InMemory Cache")},t.prototype.reset=function(){return this.data.clear(),this.broadcastWatches(),Promise.resolve()},t.prototype.removeOptimistic=function(e){var t=this,n=this.optimistic.filter(function(t){return t.id!==e});this.optimistic=[],n.forEach(function(e){t.recordOptimisticTransaction(e.transaction,e.id)}),this.broadcastWatches()},t.prototype.performTransaction=function(e){var t=this.silenceBroadcast;this.silenceBroadcast=!0,e(this),t||(this.silenceBroadcast=!1),this.broadcastWatches()},t.prototype.recordOptimisticTransaction=function(e,t){var n=this;this.silenceBroadcast=!0;var r=D(this.extract(!0),function(t){var r=n.data;n.data=t,n.performTransaction(e),n.data=r});this.optimistic.push({id:t,transaction:e,data:r}),this.silenceBroadcast=!1,this.broadcastWatches()},t.prototype.transformDocument=function(e){return this.addTypename?Object(a.a)(e):e},t.prototype.readQuery=function(e,t){return void 0===t&&(t=!1),this.read({query:e.query,variables:e.variables,optimistic:t})},t.prototype.readFragment=function(e,t){return void 0===t&&(t=!1),this.read({query:this.transformDocument(Object(a.h)(e.fragment,e.fragmentName)),variables:e.variables,rootId:e.id,optimistic:t})},t.prototype.writeQuery=function(e){this.write({dataId:"ROOT_QUERY",result:e.data,query:this.transformDocument(e.query),variables:e.variables})},t.prototype.writeFragment=function(e){this.write({dataId:e.id,result:e.data,query:this.transformDocument(Object(a.h)(e.fragment,e.fragmentName)),variables:e.variables})},t.prototype.broadcastWatches=function(){var e=this;this.silenceBroadcast||this.watches.forEach(function(t){var n=e.diff({query:t.query,variables:t.variables,previousResult:t.previousResult&&t.previousResult(),optimistic:t.optimistic});t.callback(n)})},t}(o);n.d(t,"a",function(){return L}),n.d(t,!1,function(){return B}),n.d(t,!1,function(){return A}),n.d(t,!1,function(){return N}),n.d(t,!1,function(){return S}),n.d(t,!1,function(){return x}),n.d(t,!1,function(){return h}),n.d(t,!1,function(){return f}),n.d(t,!1,function(){return g}),n.d(t,!1,function(){return v}),n.d(t,!1,function(){return b}),n.d(t,!1,function(){return i}),n.d(t,!1,function(){return c}),n.d(t,!1,function(){return u}),n.d(t,!1,function(){return p}),n.d(t,!1,function(){return R}),n.d(t,!1,function(){return D})},2316:function(e,t,n){"use strict";var r,a=n(2275),o=n(2272);function s(e){return e<7}!function(e){e[e.loading=1]="loading",e[e.setVariables=2]="setVariables",e[e.fetchMore=3]="fetchMore",e[e.refetch=4]="refetch",e[e.poll=6]="poll",e[e.ready=7]="ready",e[e.error=8]="error"}(r||(r={}));var i=n(2276),c=n(2335),l=n.n(c),u=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),p=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return u(t,e),t.prototype[l.a]=function(){return this},t}(i.b),d=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}();var m,h=function(e){var t="";return Array.isArray(e.graphQLErrors)&&0!==e.graphQLErrors.length&&e.graphQLErrors.forEach(function(e){var n=e?e.message:"Error message not found.";t+="GraphQL error: "+n+"\n"}),e.networkError&&(t+="Network error: "+e.networkError.message+"\n"),t=t.replace(/\n$/,"")},f=function(e){function t(t){var n=t.graphQLErrors,r=t.networkError,a=t.errorMessage,o=t.extraInfo,s=e.call(this,a)||this;return s.graphQLErrors=n||[],s.networkError=r||null,s.message=a||h(s),s.extraInfo=o,s}return d(t,e),t}(Error);!function(e){e[e.normal=1]="normal",e[e.refetch=2]="refetch",e[e.poll=3]="poll"}(m||(m={}));var g=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),v=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},b=function(e){function t(t){var n=t.scheduler,r=t.options,a=t.shouldSubscribe,o=void 0===a||a,s=e.call(this,function(e){return s.onSubscribe(e)})||this;return s.isCurrentlyPolling=!1,s.isTornDown=!1,s.options=r,s.variables=r.variables||{},s.queryId=n.queryManager.generateQueryId(),s.shouldSubscribe=o,s.scheduler=n,s.queryManager=n.queryManager,s.observers=[],s.subscriptionHandles=[],s}return g(t,e),t.prototype.result=function(){var e=this;return new Promise(function(t,n){var r,a={next:function(n){t(n),e.observers.some(function(e){return e!==a})||e.queryManager.removeQuery(e.queryId),setTimeout(function(){r.unsubscribe()},0)},error:function(e){n(e)}};r=e.subscribe(a)})},t.prototype.currentResult=function(){if(this.isTornDown)return{data:this.lastError?{}:this.lastResult?this.lastResult.data:{},error:this.lastError,loading:!1,networkStatus:r.error};var e=this.queryManager.queryStore.get(this.queryId);if(function(e,t){return void 0===t&&(t="none"),e&&(e.graphQLErrors&&e.graphQLErrors.length>0&&"none"===t||e.networkError)}(e,this.options.errorPolicy))return{data:{},loading:!1,networkStatus:e.networkStatus,error:new f({graphQLErrors:e.graphQLErrors,networkError:e.networkError})};var t,n=this.queryManager.getCurrentQueryResult(this),a=n.data,o=n.partial,i=!e||e.networkStatus===r.loading,c="network-only"===this.options.fetchPolicy&&i||o&&"cache-only"!==this.options.fetchPolicy,l={data:a,loading:s(t=e?e.networkStatus:c?r.loading:r.ready),networkStatus:t};if(e&&e.graphQLErrors&&"all"===this.options.errorPolicy&&(l.errors=e.graphQLErrors),!o){this.lastResult=v({},l,{stale:!1})}return v({},l,{partial:o})},t.prototype.getLastResult=function(){return this.lastResult},t.prototype.getLastError=function(){return this.lastError},t.prototype.resetLastResults=function(){delete this.lastResult,delete this.lastError,this.isTornDown=!1},t.prototype.refetch=function(e){if("cache-only"===this.options.fetchPolicy)return Promise.reject(new Error("cache-only fetchPolicy option should not be used together with query refetch."));Object(o.q)(this.variables,e)||(this.variables=v({},this.variables,e)),Object(o.q)(this.options.variables,this.variables)||(this.options.variables=v({},this.options.variables,this.variables));var t=v({},this.options,{fetchPolicy:"network-only"});return this.queryManager.fetchQuery(this.queryId,t,m.refetch).then(function(e){return Object(o.x)(e)})},t.prototype.fetchMore=function(e){var t=this;if(!e.updateQuery)throw new Error("updateQuery option is required. This function defines how to update the query data with the new results.");return Promise.resolve().then(function(){var n,r=t.queryManager.generateQueryId();return(n=e.query?e:v({},t.options,e,{variables:v({},t.variables,e.variables)})).fetchPolicy="network-only",t.queryManager.fetchQuery(r,n,m.normal,t.queryId)}).then(function(n){return t.updateQuery(function(t,r){var a=r.variables;return e.updateQuery(t,{fetchMoreResult:n.data,variables:a})}),n})},t.prototype.subscribeToMore=function(e){var t=this,n=this.queryManager.startGraphQLSubscription({query:e.document,variables:e.variables}).subscribe({next:function(n){e.updateQuery&&t.updateQuery(function(t,r){var a=r.variables;return e.updateQuery(t,{subscriptionData:n,variables:a})})},error:function(t){e.onError?e.onError(t):console.error("Unhandled GraphQL subscription error",t)}});return this.subscriptionHandles.push(n),function(){var e=t.subscriptionHandles.indexOf(n);e>=0&&(t.subscriptionHandles.splice(e,1),n.unsubscribe())}},t.prototype.setOptions=function(e){var t=this.options;this.options=v({},this.options,e),e.pollInterval?this.startPolling(e.pollInterval):0===e.pollInterval&&this.stopPolling();var n="network-only"!==t.fetchPolicy&&"network-only"===e.fetchPolicy||"cache-only"===t.fetchPolicy&&"cache-only"!==e.fetchPolicy||"standby"===t.fetchPolicy&&"standby"!==e.fetchPolicy||!1;return this.setVariables(this.options.variables,n,e.fetchResults)},t.prototype.setVariables=function(e,t,n){void 0===t&&(t=!1),void 0===n&&(n=!0),this.isTornDown=!1;var r=v({},this.variables,e);return Object(o.q)(r,this.variables)&&!t?0!==this.observers.length&&n?this.result():new Promise(function(e){return e()}):(this.lastVariables=this.variables,this.variables=r,this.options.variables=r,0===this.observers.length?new Promise(function(e){return e()}):this.queryManager.fetchQuery(this.queryId,v({},this.options,{variables:this.variables})).then(function(e){return Object(o.x)(e)}))},t.prototype.updateQuery=function(e){var t=this.queryManager.getQueryWithPreviousResult(this.queryId),n=t.previousResult,r=t.variables,a=t.document,s=Object(o.C)(function(){return e(n,{variables:r})});s&&(this.queryManager.dataStore.markUpdateQueryResult(a,r,s),this.queryManager.broadcastQueries())},t.prototype.stopPolling=function(){this.isCurrentlyPolling&&(this.scheduler.stopPollingQuery(this.queryId),this.options.pollInterval=void 0,this.isCurrentlyPolling=!1)},t.prototype.startPolling=function(e){if("cache-first"===this.options.fetchPolicy||"cache-only"===this.options.fetchPolicy)throw new Error("Queries that specify the cache-first and cache-only fetchPolicies cannot also be polling queries.");this.isCurrentlyPolling&&(this.scheduler.stopPollingQuery(this.queryId),this.isCurrentlyPolling=!1),this.options.pollInterval=e,this.isCurrentlyPolling=!0,this.scheduler.startPollingQuery(this.options,this.queryId)},t.prototype.onSubscribe=function(e){var t=this;return e._subscription&&e._subscription._observer&&!e._subscription._observer.error&&(e._subscription._observer.error=function(e){console.error("Unhandled error",e.message,e.stack)}),this.observers.push(e),e.next&&this.lastResult&&e.next(this.lastResult),e.error&&this.lastError&&e.error(this.lastError),1===this.observers.length&&this.setUpQuery(),function(){t.observers=t.observers.filter(function(t){return t!==e}),0===t.observers.length&&t.tearDownQuery()}},t.prototype.setUpQuery=function(){var e=this;if(this.shouldSubscribe&&this.queryManager.addObservableQuery(this.queryId,this),this.options.pollInterval){if("cache-first"===this.options.fetchPolicy||"cache-only"===this.options.fetchPolicy)throw new Error("Queries that specify the cache-first and cache-only fetchPolicies cannot also be polling queries.");this.isCurrentlyPolling=!0,this.scheduler.startPollingQuery(this.options,this.queryId)}var t={next:function(t){e.lastResult=t,e.observers.forEach(function(e){return e.next&&e.next(t)})},error:function(t){e.lastError=t,e.observers.forEach(function(e){return e.error&&e.error(t)})}};this.queryManager.startQuery(this.queryId,this.options,this.queryManager.queryListenerForObserver(this.queryId,this.options,t))},t.prototype.tearDownQuery=function(){this.isTornDown=!0,this.isCurrentlyPolling&&(this.scheduler.stopPollingQuery(this.queryId),this.isCurrentlyPolling=!1),this.subscriptionHandles.forEach(function(e){return e.unsubscribe()}),this.subscriptionHandles=[],this.queryManager.removeObservableQuery(this.queryId),this.queryManager.stopQuery(this.queryId),this.observers=[]},t}(p),y=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),_=function(e){function t(){var t=null!==e&&e.apply(this,arguments)||this;return t.inFlightRequestObservables=new Map,t.subscribers=new Map,t}return y(t,e),t.prototype.request=function(e,t){var n=this;if(e.getContext().forceFetch)return t(e);var r=e.toKey(),a=function(e){return n.inFlightRequestObservables.delete(e),n.subscribers.get(e)};if(!this.inFlightRequestObservables.get(r)){var o,s=t(e),c=new i.b(function(e){var t=n.subscribers.get(r);return t||(t={next:[],error:[],complete:[]}),n.subscribers.set(r,{next:t.next.concat([e.next.bind(e)]),error:t.error.concat([e.error.bind(e)]),complete:t.complete.concat([e.complete.bind(e)])}),o||(o=s.subscribe({next:function(e){var t=a(r);n.subscribers.delete(r),t&&(t.next.forEach(function(t){return t(e)}),t.complete.forEach(function(e){return e()}))},error:function(e){var t=a(r);n.subscribers.delete(r),t&&t.error.forEach(function(t){return t(e)})}})),function(){o&&o.unsubscribe(),n.inFlightRequestObservables.delete(r)}});this.inFlightRequestObservables.set(r,c)}return this.inFlightRequestObservables.get(r)},t}(i.a),E=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},w=function(){function e(e){var t=e.queryManager,n=e.ssrMode;this.inFlightQueries={},this.registeredQueries={},this.intervalQueries={},this.pollingTimers={},this.ssrMode=!1,this.queryManager=t,this.ssrMode=n||!1}return e.prototype.checkInFlight=function(e){var t=this.queryManager.queryStore.get(e);return t&&t.networkStatus!==r.ready&&t.networkStatus!==r.error},e.prototype.fetchQuery=function(e,t,n){var r=this;return new Promise(function(a,o){r.queryManager.fetchQuery(e,t,n).then(function(e){a(e)}).catch(function(e){o(e)})})},e.prototype.startPollingQuery=function(e,t,n){if(!e.pollInterval)throw new Error("Attempted to start a polling query without a polling interval.");return this.ssrMode?t:(this.registeredQueries[t]=e,n&&this.queryManager.addQueryListener(t,n),this.addQueryOnInterval(t,e),t)},e.prototype.stopPollingQuery=function(e){delete this.registeredQueries[e]},e.prototype.fetchQueriesOnInterval=function(e){var t=this;this.intervalQueries[e]=this.intervalQueries[e].filter(function(n){if(!t.registeredQueries.hasOwnProperty(n)||t.registeredQueries[n].pollInterval!==e)return!1;if(t.checkInFlight(n))return!0;var r=t.registeredQueries[n],a=E({},r);return a.fetchPolicy="network-only",t.fetchQuery(n,a,m.poll).catch(function(){}),!0}),0===this.intervalQueries[e].length&&(clearInterval(this.pollingTimers[e]),delete this.intervalQueries[e])},e.prototype.addQueryOnInterval=function(e,t){var n=this,r=t.pollInterval;if(!r)throw new Error("A poll interval is required to start polling query with id '"+e+"'.");this.intervalQueries.hasOwnProperty(r.toString())&&this.intervalQueries[r].length>0?this.intervalQueries[r].push(e):(this.intervalQueries[r]=[e],this.pollingTimers[r]=setInterval(function(){n.fetchQueriesOnInterval(r)},r))},e.prototype.registerPollingQuery=function(e){if(!e.pollInterval)throw new Error("Attempted to register a non-polling query with the scheduler.");return new b({scheduler:this,options:e})},e}(),k=function(){function e(){this.store={}}return e.prototype.getStore=function(){return this.store},e.prototype.get=function(e){return this.store[e]},e.prototype.initMutation=function(e,t,n){this.store[e]={mutationString:t,variables:n||{},loading:!0,error:null}},e.prototype.markMutationError=function(e,t){this.store[e].loading=!1,this.store[e].error=t},e.prototype.markMutationResult=function(e){this.store[e].loading=!1,this.store[e].error=null},e.prototype.reset=function(){this.store={}},e}(),O=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},C=function(){function e(){this.store={}}return e.prototype.getStore=function(){return this.store},e.prototype.get=function(e){return this.store[e]},e.prototype.initQuery=function(e){var t=this.store[e.queryId];if(t&&t.queryString!==e.queryString)throw new Error("Internal Error: may not update existing query string in store");var n,a=!1,s=null;e.storePreviousVariables&&t&&t.networkStatus!==r.loading&&(Object(o.q)(t.variables,e.variables)||(a=!0,s=t.variables)),n=a?r.setVariables:e.isPoll?r.poll:e.isRefetch?r.refetch:r.loading;var i=[];t&&t.graphQLErrors&&(i=t.graphQLErrors),this.store[e.queryId]={queryString:e.queryString,document:e.document,variables:e.variables,previousVariables:s,networkError:null,graphQLErrors:i,networkStatus:n,metadata:e.metadata},"string"==typeof e.fetchMoreForQueryId&&(this.store[e.fetchMoreForQueryId].networkStatus=r.fetchMore)},e.prototype.markQueryResult=function(e,t,n){this.store[e]&&(this.store[e].networkError=null,this.store[e].graphQLErrors=t.errors&&t.errors.length?t.errors:[],this.store[e].previousVariables=null,this.store[e].networkStatus=r.ready,"string"==typeof n&&(this.store[n].networkStatus=r.ready))},e.prototype.markQueryError=function(e,t,n){this.store[e]&&(this.store[e].networkError=t,this.store[e].networkStatus=r.error,"string"==typeof n&&this.markQueryError(n,t,void 0))},e.prototype.markQueryResultClient=function(e,t){this.store[e]&&(this.store[e].networkError=null,this.store[e].previousVariables=null,this.store[e].networkStatus=t?r.ready:r.loading)},e.prototype.stopQuery=function(e){delete this.store[e]},e.prototype.reset=function(e){var t=this;this.store=Object.keys(this.store).filter(function(t){return e.indexOf(t)>-1}).reduce(function(e,n){return e[n]=O({},t.store[n],{networkStatus:r.loading}),e},{})},e}(),T=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},A={listeners:[],invalidated:!1,document:null,newData:null,lastRequestId:null,observableQuery:null,subscriptions:[]},N=function(){function e(e){var t=e.link,n=e.queryDeduplication,r=void 0!==n&&n,a=e.store,o=e.onBroadcast,s=void 0===o?function(){}:o,c=e.ssrMode,l=void 0!==c&&c;this.mutationStore=new k,this.queryStore=new C,this.idCounter=1,this.queries=new Map,this.fetchQueryPromises=new Map,this.queryIdsByName={},this.link=t,this.deduplicator=i.a.from([new _,t]),this.queryDeduplication=r,this.dataStore=a,this.onBroadcast=s,this.scheduler=new w({queryManager:this,ssrMode:l})}return e.prototype.mutate=function(e){var t=this,n=e.mutation,r=e.variables,s=e.optimisticResponse,c=e.updateQueries,l=e.refetchQueries,u=void 0===l?[]:l,p=e.update,d=e.errorPolicy,m=void 0===d?"none":d,h=e.context,g=void 0===h?{}:h;if(!n)throw new Error("mutation option is required. You must specify your GraphQL document in the mutation option.");var v=this.generateQueryId(),b=this.dataStore.getCache();n=b.transformDocument(n),r=Object(o.c)({},Object(o.e)(Object(o.j)(n)),r);var y=Object(a.print)(n),_={query:n,variables:r,operationName:Object(o.l)(n)||void 0,context:g};this.setQuery(v,function(){return{document:n}});var E=function(){var e={};return c&&Object.keys(c).forEach(function(n){return(t.queryIdsByName[n]||[]).forEach(function(r){e[r]={updater:c[n],query:t.queryStore.get(r)}})}),e};return this.mutationStore.initMutation(v,y,r),this.dataStore.markMutationInit({mutationId:v,document:n,variables:r||{},updateQueries:E(),update:p,optimisticResponse:s}),this.broadcastQueries(),new Promise(function(e,a){var o,c,l=T({context:{}},_,{query:b.transformForLink?b.transformForLink(_.query):_.query});l.context.cache=t.dataStore.getCache(),Object(i.c)(t.link,l).subscribe({next:function(e){e.errors&&"none"===m?c=new f({graphQLErrors:e.errors}):(t.mutationStore.markMutationResult(v),t.dataStore.markMutationResult({mutationId:v,result:e,document:n,variables:r||{},updateQueries:E(),update:p}),o=e)},error:function(e){t.mutationStore.markMutationError(v,e),t.dataStore.markMutationComplete({mutationId:v,optimisticResponse:s}),t.broadcastQueries(),t.setQuery(v,function(){return{document:void 0}}),a(new f({networkError:e}))},complete:function(){c&&t.mutationStore.markMutationError(v,c),t.dataStore.markMutationComplete({mutationId:v,optimisticResponse:s}),t.broadcastQueries(),c?a(c):("function"==typeof u&&(u=u(o)),u.forEach(function(e){"string"!=typeof e?t.query({query:e.query,variables:e.variables,fetchPolicy:"network-only"}):t.refetchQueryByName(e)}),t.setQuery(v,function(){return{document:void 0}}),"ignore"===m&&o&&o.errors&&delete o.errors,e(o))}})})},e.prototype.fetchQuery=function(e,t,n,r){var s,i=this,c=t.variables,l=void 0===c?{}:c,u=t.metadata,p=void 0===u?null:u,d=t.fetchPolicy,h=void 0===d?"cache-first":d,g=this.dataStore.getCache(),v=g.transformDocument(t.query),b="network-only"===h;if(n!==m.refetch&&"network-only"!==h){var y=this.dataStore.getCache().diff({query:v,variables:l,returnPartialData:!0,optimistic:!1}),_=y.complete,E=y.result;b=!_||"cache-and-network"===h,s=E}var w=b&&"cache-only"!==h&&"standby"!==h;Object(o.p)(["live"],v)&&(w=!0);var k=this.generateRequestId(),O=this.updateQueryWatch(e,v,t);if(this.setQuery(e,function(){return{document:v,lastRequestId:k,invalidated:!0,cancel:O}}),this.invalidate(!0,r),this.queryStore.initQuery({queryId:e,queryString:Object(a.print)(v),document:v,storePreviousVariables:w,variables:l,isPoll:n===m.poll,isRefetch:n===m.refetch,metadata:p,fetchMoreForQueryId:r}),this.broadcastQueries(),(!w||"cache-and-network"===h)&&(this.queryStore.markQueryResultClient(e,!w),this.invalidate(!0,e,r),this.broadcastQueries()),w){var C=this.fetchRequest({requestId:k,queryId:e,document:g.transformForLink?g.transformForLink(v):v,options:t,fetchMoreForQueryId:r}).catch(function(t){if(function(e){return e.hasOwnProperty("graphQLErrors")}(t))throw t;var n=i.getQuery(e).lastRequestId;throw k>=(n||1)&&(i.queryStore.markQueryError(e,t,r),i.invalidate(!0,e,r),i.broadcastQueries()),i.removeFetchQueryPromise(k),new f({networkError:t})});if("cache-and-network"!==h)return C;C.catch(function(){})}return Promise.resolve({data:s})},e.prototype.queryListenerForObserver=function(e,t,n){var r=this,a=!1;return function(i,c){if(r.invalidate(!1,e),i){var l=r.getQuery(e).observableQuery,u=l?l.options.fetchPolicy:t.fetchPolicy;if("standby"!==u){var p=l?l.options.errorPolicy:t.errorPolicy,d=l?l.getLastResult():null,m=l?l.getLastError():null,h=!c&&null!=i.previousVariables||"cache-only"===u||"cache-and-network"===u,g=Boolean(d&&i.networkStatus!==d.networkStatus),v=p&&(m&&m.graphQLErrors)!==i.graphQLErrors&&"none"!==p;if(!s(i.networkStatus)||g&&t.notifyOnNetworkStatusChange||h){if((!p||"none"===p)&&i.graphQLErrors&&i.graphQLErrors.length>0||i.networkError){var b=new f({graphQLErrors:i.graphQLErrors,networkError:i.networkError});if(a=!0,n.error)try{n.error(b)}catch(e){setTimeout(function(){throw e},0)}else setTimeout(function(){throw b},0),Object(o.v)()||console.info("An unhandled error was thrown because no error handler is registered for the query "+i.queryString);return}try{var y=void 0,_=void 0;if(c)r.setQuery(e,function(){return{newData:null}}),y=c.result,_=!c.complete&&!c.complete;else if(d&&d.data&&!v)y=d.data,_=!1;else{var E=r.getQuery(e).document,w=r.dataStore.getCache().diff({query:E,variables:i.previousVariables||i.variables,optimistic:!0});y=w.result,_=!w.complete}var k=void 0;if(k=_&&"cache-only"!==u?{data:d&&d.data,loading:s(i.networkStatus),networkStatus:i.networkStatus,stale:!0}:{data:y,loading:s(i.networkStatus),networkStatus:i.networkStatus,stale:!1},"all"===p&&i.graphQLErrors&&i.graphQLErrors.length>0&&(k.errors=i.graphQLErrors),n.next)if(!(d&&k&&d.networkStatus===k.networkStatus&&d.stale===k.stale&&d.data===k.data)||a)try{n.next(Object(o.x)(k))}catch(e){setTimeout(function(){throw e},0)}a=!1}catch(e){return a=!0,void(n.error&&n.error(new f({networkError:e})))}}}}}},e.prototype.watchQuery=function(e,t){if(void 0===t&&(t=!0),"standby"===e.fetchPolicy)throw new Error('client.watchQuery cannot be called with fetchPolicy set to "standby"');var n=Object(o.m)(e.query);if(n.variableDefinitions&&n.variableDefinitions.length){var r=Object(o.e)(n);e.variables=Object(o.c)({},r,e.variables)}void 0===e.notifyOnNetworkStatusChange&&(e.notifyOnNetworkStatusChange=!1);var a=T({},e);return new b({scheduler:this.scheduler,options:a,shouldSubscribe:t})},e.prototype.query=function(e){var t=this;if(!e.query)throw new Error("query option is required. You must specify your GraphQL document in the query option.");if("Document"!==e.query.kind)throw new Error('You must wrap the query string in a "gql" tag.');if(e.returnPartialData)throw new Error("returnPartialData option only supported on watchQuery.");if(e.pollInterval)throw new Error("pollInterval option only supported on watchQuery.");if(void 0!==e.notifyOnNetworkStatusChange)throw new Error('Cannot call "query" with "notifyOnNetworkStatusChange" option. Only "watchQuery" has that option.');e.notifyOnNetworkStatusChange=!1;var n=this.idCounter,r=new Promise(function(a,o){return t.addFetchQueryPromise(n,r,a,o),t.watchQuery(e,!1).result().then(function(e){t.removeFetchQueryPromise(n),a(e)}).catch(function(e){t.removeFetchQueryPromise(n),o(e)})});return r},e.prototype.generateQueryId=function(){var e=this.idCounter.toString();return this.idCounter++,e},e.prototype.stopQueryInStore=function(e){this.queryStore.stopQuery(e),this.invalidate(!0,e),this.broadcastQueries()},e.prototype.addQueryListener=function(e,t){this.setQuery(e,function(e){var n=e.listeners;return{listeners:(void 0===n?[]:n).concat([t]),invalidate:!1}})},e.prototype.updateQueryWatch=function(e,t,n){var r=this,a=this.getQuery(e).cancel;a&&a();return this.dataStore.getCache().watch({query:t,variables:n.variables,optimistic:!0,previousResult:function(){var t=null,n=r.getQuery(e).observableQuery;if(n){var a=n.getLastResult();a&&(t=a.data)}return t},callback:function(t){r.setQuery(e,function(){return{invalidated:!0,newData:t}})}})},e.prototype.addFetchQueryPromise=function(e,t,n,r){this.fetchQueryPromises.set(e.toString(),{promise:t,resolve:n,reject:r})},e.prototype.removeFetchQueryPromise=function(e){this.fetchQueryPromises.delete(e.toString())},e.prototype.addObservableQuery=function(e,t){this.setQuery(e,function(){return{observableQuery:t}});var n=Object(o.m)(t.options.query);if(n.name&&n.name.value){var r=n.name.value;this.queryIdsByName[r]=this.queryIdsByName[r]||[],this.queryIdsByName[r].push(t.queryId)}},e.prototype.removeObservableQuery=function(e){var t=this.getQuery(e),n=t.observableQuery,r=t.cancel;if(r&&r(),n){var a=Object(o.m)(n.options.query),s=a.name?a.name.value:null;this.setQuery(e,function(){return{observableQuery:null}}),s&&(this.queryIdsByName[s]=this.queryIdsByName[s].filter(function(e){return!(n.queryId===e)}))}},e.prototype.resetStore=function(){this.fetchQueryPromises.forEach(function(e){(0,e.reject)(new Error("Store reset while query was in flight."))});var e=[];this.queries.forEach(function(t,n){t.observableQuery&&e.push(n)}),this.queryStore.reset(e),this.mutationStore.reset();var t=this.dataStore.reset(),n=this.getObservableQueryPromises();return this.broadcastQueries(),t.then(function(){return Promise.all(n)})},e.prototype.getObservableQueryPromises=function(){var e=this,t=[];return this.queries.forEach(function(n,r){var a=n.observableQuery;if(a){var o=a.options.fetchPolicy;a.resetLastResults(),"cache-only"!==o&&"standby"!==o&&t.push(a.refetch()),e.setQuery(r,function(){return{newData:null}}),e.invalidate(!0,r)}}),t},e.prototype.reFetchObservableQueries=function(){var e=this.getObservableQueryPromises();return this.broadcastQueries(),Promise.all(e)},e.prototype.startQuery=function(e,t,n){return this.addQueryListener(e,n),this.fetchQuery(e,t).catch(function(){}),e},e.prototype.startGraphQLSubscription=function(e){var t,n=this,r=e.query,a=this.dataStore.getCache(),s=a.transformDocument(r),c=Object(o.c)({},Object(o.e)(Object(o.k)(r)),e.variables),l={query:s,variables:c,operationName:Object(o.l)(s)||void 0},u=[];return new p(function(e){if(u.push(e),1===u.length){var r={next:function(e){n.dataStore.markSubscriptionResult(e,s,c),n.broadcastQueries(),u.forEach(function(t){t.next&&t.next(e)})},error:function(e){u.forEach(function(t){t.error&&t.error(e)})}},o=T({},l,{query:a.transformForLink?a.transformForLink(l.query):l.query});t=Object(i.c)(n.link,o).subscribe(r)}return function(){0===(u=u.filter(function(t){return t!==e})).length&&t&&t.unsubscribe()}})},e.prototype.stopQuery=function(e){this.removeQuery(e),this.stopQueryInStore(e)},e.prototype.removeQuery=function(e){this.getQuery(e).subscriptions.forEach(function(e){return e.unsubscribe()}),this.queries.delete(e)},e.prototype.getCurrentQueryResult=function(e){var t=e.options,n=t.variables,r=t.query,a=e.getLastResult(),s=this.getQuery(e.queryId).newData;if(s)return Object(o.x)({data:s.result,partial:!1});try{var i=this.dataStore.getCache().read({query:r,variables:n,previousResult:a?a.data:void 0,optimistic:!0});return Object(o.x)({data:i,partial:!1})}catch(e){return Object(o.x)({data:{},partial:!0})}},e.prototype.getQueryWithPreviousResult=function(e){var t;if("string"==typeof e){var n=this.getQuery(e).observableQuery;if(!n)throw new Error("ObservableQuery with this id doesn't exist: "+e);t=n}else t=e;var r=t.options,a=r.variables,o=r.query;return{previousResult:this.getCurrentQueryResult(t).data,variables:a,document:o}},e.prototype.broadcastQueries=function(){var e=this;this.onBroadcast(),this.queries.forEach(function(t,n){t.invalidated&&t.listeners&&t.listeners.filter(function(e){return!!e}).forEach(function(r){r(e.queryStore.get(n),t.newData)})})},e.prototype.fetchRequest=function(e){var t,n,a=this,s=e.requestId,c=e.queryId,l=e.document,u=e.options,p=e.fetchMoreForQueryId,d=u.variables,m=u.context,h=u.errorPolicy,g=void 0===h?"none":h,v={query:l,variables:d,operationName:Object(o.l)(l)||void 0,context:m||{}};v.context.forceFetch=!this.queryDeduplication,v.context.cache=this.dataStore.getCache();var b=new Promise(function(e,o){a.addFetchQueryPromise(s,b,e,o);var u=Object(i.c)(a.deduplicator,v).subscribe({next:function(e){var r=a.getQuery(c).lastRequestId;if(s>=(r||1)){try{a.dataStore.markQueryResult(e,l,d,p,"ignore"===g)}catch(e){return void o(e)}a.queryStore.markQueryResult(c,e,p),a.invalidate(!0,c,p),a.broadcastQueries()}if(e.errors&&"none"===g)o(new f({graphQLErrors:e.errors}));else if("all"===g&&(n=e.errors),p)t=e.data;else try{t=a.dataStore.getCache().read({variables:d,query:l,optimistic:!1})}catch(e){}},error:function(e){a.removeFetchQueryPromise(s),a.setQuery(c,function(e){return{subscriptions:e.subscriptions.filter(function(e){return e!==u})}}),o(e)},complete:function(){a.removeFetchQueryPromise(s),a.setQuery(c,function(e){return{subscriptions:e.subscriptions.filter(function(e){return e!==u})}}),e({data:t,errors:n,loading:!1,networkStatus:r.ready,stale:!1})}});a.setQuery(c,function(e){return{subscriptions:e.subscriptions.concat([u])}})});return b},e.prototype.refetchQueryByName=function(e){var t=this,n=this.queryIdsByName[e];if(void 0!==n)return Promise.all(n.map(function(e){return t.getQuery(e).observableQuery}).filter(function(e){return!!e}).map(function(e){return e.refetch()}))},e.prototype.generateRequestId=function(){var e=this.idCounter;return this.idCounter++,e},e.prototype.getQuery=function(e){return this.queries.get(e)||T({},A)},e.prototype.setQuery=function(e,t){var n=this.getQuery(e),r=T({},n,t(n));this.queries.set(e,r)},e.prototype.invalidate=function(e,t,n){t&&this.setQuery(t,function(){return{invalidated:e}}),n&&this.setQuery(n,function(){return{invalidated:e}})},e}(),P=function(){function e(e){this.cache=e}return e.prototype.getCache=function(){return this.cache},e.prototype.markQueryResult=function(e,t,n,r,a){void 0===a&&(a=!1);var s=!Object(o.o)(e);a&&Object(o.o)(e)&&e.data&&(s=!0),!r&&s&&this.cache.write({result:e.data,dataId:"ROOT_QUERY",query:t,variables:n})},e.prototype.markSubscriptionResult=function(e,t,n){Object(o.o)(e)||this.cache.write({result:e.data,dataId:"ROOT_SUBSCRIPTION",query:t,variables:n})},e.prototype.markMutationInit=function(e){var t=this;if(e.optimisticResponse){var n;n="function"==typeof e.optimisticResponse?e.optimisticResponse(e.variables):e.optimisticResponse;this.cache.recordOptimisticTransaction(function(r){var a=t.cache;t.cache=r;try{t.markMutationResult({mutationId:e.mutationId,result:{data:n},document:e.document,variables:e.variables,updateQueries:e.updateQueries,update:e.update})}finally{t.cache=a}},e.mutationId)}},e.prototype.markMutationResult=function(e){var t=this;if(!Object(o.o)(e.result)){var n=[];n.push({result:e.result.data,dataId:"ROOT_MUTATION",query:e.document,variables:e.variables}),e.updateQueries&&Object.keys(e.updateQueries).filter(function(t){return e.updateQueries[t]}).forEach(function(r){var a=e.updateQueries[r],s=a.query,i=a.updater,c=t.cache.diff({query:s.document,variables:s.variables,returnPartialData:!0,optimistic:!1}),l=c.result;if(c.complete){var u=Object(o.C)(function(){return i(l,{mutationResult:e.result,queryName:Object(o.l)(s.document)||void 0,queryVariables:s.variables})});u&&n.push({result:u,dataId:"ROOT_QUERY",query:s.document,variables:s.variables})}}),this.cache.performTransaction(function(e){n.forEach(function(t){return e.write(t)})});var r=e.update;r&&this.cache.performTransaction(function(t){Object(o.C)(function(){return r(t,e.result)})})}},e.prototype.markMutationComplete=function(e){var t=e.mutationId;e.optimisticResponse&&this.cache.removeOptimistic(t)},e.prototype.markUpdateQueryResult=function(e,t,n){this.cache.write({result:n,dataId:"ROOT_QUERY",variables:t,query:e})},e.prototype.reset=function(){return this.cache.reset()},e}(),S=n(2332),x=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var a in t=arguments[n])Object.prototype.hasOwnProperty.call(t,a)&&(e[a]=t[a]);return e},j=!1,I=new i.a(function(e,t){return e.query=Object(o.y)(e.query),t(e)}),R=function(){function e(e){var t=this;this.defaultOptions={};var n=e.link,r=e.cache,a=e.ssrMode,s=void 0!==a&&a,i=e.ssrForceFetchDelay,c=void 0===i?0:i,l=e.connectToDevTools,u=e.queryDeduplication,p=void 0===u||u,d=e.defaultOptions;if(!n||!r)throw new Error("\n        In order to initialize Apollo Client, you must specify link & cache properties on the config object.\n        This is part of the required upgrade when migrating from Apollo Client 1.0 to Apollo Client 2.0.\n        For more information, please visit:\n          https://www.apollographql.com/docs/react/basics/setup.html\n        to help you get started.\n      ");this.link=I.concat(n),this.cache=r,this.store=new P(r),this.disableNetworkFetches=s||c>0,this.queryDeduplication=p,this.ssrMode=s,this.defaultOptions=d||{},c&&setTimeout(function(){return t.disableNetworkFetches=!1},c),this.watchQuery=this.watchQuery.bind(this),this.query=this.query.bind(this),this.mutate=this.mutate.bind(this),this.resetStore=this.resetStore.bind(this),this.reFetchObservableQueries=this.reFetchObservableQueries.bind(this);var m=!Object(o.v)()&&"undefined"!=typeof window&&!window.__APOLLO_CLIENT__;(void 0===l?m:l&&"undefined"!=typeof window)&&(window.__APOLLO_CLIENT__=this),j||Object(o.v)()||(j=!0,"undefined"!=typeof window&&window.document&&window.top===window.self&&void 0===window.__APOLLO_DEVTOOLS_GLOBAL_HOOK__&&navigator.userAgent.indexOf("Chrome")>-1&&console.debug("Download the Apollo DevTools for a better development experience: https://chrome.google.com/webstore/detail/apollo-client-developer-t/jdkknkkbebbapilgoeccciglkfbmbnfm")),this.version=S.version}return e.prototype.watchQuery=function(e){return this.initQueryManager(),this.defaultOptions.watchQuery&&(e=x({},this.defaultOptions.watchQuery,e)),this.disableNetworkFetches&&"network-only"===e.fetchPolicy&&(e=x({},e,{fetchPolicy:"cache-first"})),this.queryManager.watchQuery(e)},e.prototype.query=function(e){if(this.initQueryManager(),"cache-and-network"===e.fetchPolicy)throw new Error("cache-and-network fetchPolicy can only be used with watchQuery");return this.defaultOptions.query&&(e=x({},this.defaultOptions.query,e)),this.disableNetworkFetches&&"network-only"===e.fetchPolicy&&(e=x({},e,{fetchPolicy:"cache-first"})),this.queryManager.query(e)},e.prototype.mutate=function(e){return this.initQueryManager(),this.defaultOptions.mutate&&(e=x({},this.defaultOptions.mutate,e)),this.queryManager.mutate(e)},e.prototype.subscribe=function(e){return this.initQueryManager(),this.queryManager.startGraphQLSubscription(e)},e.prototype.readQuery=function(e){return this.initProxy().readQuery(e)},e.prototype.readFragment=function(e){return this.initProxy().readFragment(e)},e.prototype.writeQuery=function(e){var t=this.initProxy().writeQuery(e);return this.queryManager.broadcastQueries(),t},e.prototype.writeFragment=function(e){var t=this.initProxy().writeFragment(e);return this.queryManager.broadcastQueries(),t},e.prototype.__actionHookForDevTools=function(e){this.devToolsHookCb=e},e.prototype.__requestRaw=function(e){return Object(i.c)(this.link,e)},e.prototype.initQueryManager=function(){var e=this;this.queryManager||(this.queryManager=new N({link:this.link,store:this.store,queryDeduplication:this.queryDeduplication,ssrMode:this.ssrMode,onBroadcast:function(){e.devToolsHookCb&&e.devToolsHookCb({action:{},state:{queries:e.queryManager.queryStore.getStore(),mutations:e.queryManager.mutationStore.getStore()},dataWithOptimisticResults:e.cache.extract(!0)})}}))},e.prototype.resetStore=function(){return this.queryManager?this.queryManager.resetStore():Promise.resolve(null)},e.prototype.reFetchObservableQueries=function(){return this.queryManager?this.queryManager.reFetchObservableQueries():Promise.resolve(null)},e.prototype.extract=function(e){return this.initProxy().extract(e)},e.prototype.restore=function(e){return this.initProxy().restore(e)},e.prototype.initProxy=function(){return this.proxy||(this.initQueryManager(),this.proxy=this.cache),this.proxy},e}();n.d(t,!1,function(){return a.print}),n.d(t,!1,function(){return b}),n.d(t,!1,function(){return r}),n.d(t,!1,function(){return m}),n.d(t,!1,function(){return f}),n.d(t,"a",function(){return R})},2318:function(e,t,n){"use strict";var r=n(0),a=n(1),o=n.n(a),s=function(e){var t=e.isI18n,n=e.message,a=e.messageParams;return t?r.createElement(o.a,Object.assign({className:"has-error",component:"div",content:n},a)):r.createElement("div",{className:"has-error"},n)},i=function(e){var t=e.isI18n,n=e.message,a=e.messageParams;return t?r.createElement(o.a,Object.assign({className:"has-info",component:"div",content:n},a)):r.createElement("div",{className:"has-info"},n)},c=function(e){var t=e.children;return r.createElement("div",{className:"error-wrapper"},t)};t.a=function(e){var t=e.placeholder,n=e.isI18n,a=e.tips,o=e.muiltTips,l=a.filter(function(e){return e.isError});if(!l.length&&!t)return null;if(!l.length)return!0===t?r.createElement(c,null,r.createElement("div",null)):t?r.createElement(c,null,r.createElement(i,{isI18n:n,message:t,messageParams:{}})):null;var u=o?l:l.slice(0,1);return r.createElement(c,null,u.map(function(e){var t=e.name,n=e.isI18n,a=e.message,o=e.messageParams;return r.createElement(s,{key:t,isI18n:n,message:a,messageParams:o||{}})}))}},2319:function(e,t,n){"use strict";n.d(t,"a",function(){return i});var r=n(0),a=n(129),o=n(2279),s=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var i=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onClose=function(){n.setState({fadeOut:!0}),setTimeout(function(){o.b.closeModal(n.props.modalId)},300)},n.state={fadeOut:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["Component"]),s(t,[{key:"render",value:function(){var e=this.props.fade,t=this.state.fadeOut;return r.createElement("div",{className:Object(a.a)("overlay",{"fade-in":e,"fade-out":t})},r.createElement("div",{id:this.props.modalId,className:"modal with-shadow"},r.createElement("a",{href:"javascript:;",className:"close-button",onClick:this.onClose},"×"),this.props.children))}}]),t}();i.defaultProps={fade:!0}},2328:function(e,t,n){"use strict";var r=n(0),a=n(2),o=n(1),s=n.n(o),i=n(3),c=n(22),l=n(24),u=n(9),p=n.n(u),d=n(337),m=n(19),h=n(5),f=n(26),g=n.n(f),v=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function b(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function y(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function _(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var E=((w=function(e){function t(){return b(this,t),y(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _(t,r["Component"]),v(t,[{key:"render",value:function(){return 0!==this.props.assets.length&&this.props.value?r.createElement(d.a,{isAsset:!0,entries:this.props.assets.map(function(e){return e&&e.get("symbol")}).filter(function(e){return!!e}),values:this.props.assets.reduce(function(e,t){return t&&t.get("symbol")&&(e[t.get("symbol")]=t),e},{}),singleEntry:this.props.assets[0]?r.createElement(m.a,{asset:this.props.assets[0].get("id"),amount:0,hide_amount:!0}):null,value:"",onChange:this.props.onChange}):null}}]),t}()).propTypes={assets:c.a.ChainAssetsList,value:a.string,onChange:a.func},w);E=Object(l.a)(E);var w,k=function(e){function t(){return b(this,t),y(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return _(t,r["Component"]),v(t,[{key:"getAsset",value:function(){return this.props.asset}},{key:"getError",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props.assetInput,t=this.props.error;return t||!e||this.getNameType(e)||(t=p.a.translate("explorer.asset.invalid",{name:e})),t}},{key:"getNameType",value:function(e){return e?i.d.is_valid_symbol_error(e,!0)?null:"symbol":null}},{key:"onInputChanged",value:function(e){var t=e.target.value.trim().substr(0,16).toUpperCase();this.props.onChange&&t!==this.props.assetInput&&this.props.onChange(t)}},{key:"onKeyDown",value:function(e){13===e.keyCode&&(this.onFound(e),this.onAction(e))}},{key:"componentDidMount",value:function(){this.props.onFound&&this.props.asset&&this.props.onFound(this.props.asset)}},{key:"componentWillReceiveProps",value:function(e){this.props.onFound&&e.asset!==this.props.asset&&this.props.onFound(e.asset)}},{key:"onFound",value:function(e){e.preventDefault(),!this.props.onFound||this.getError()||this.props.disableActionButton||this.props.asset&&this.props.onFound(this.props.asset)}},{key:"onAssetSelect",value:function(e){e&&(this.props.onFound(e),this.props.onChange(e.get("symbol")))}},{key:"onAction",value:function(e){e.preventDefault(),!this.props.onAction||this.getError()||this.props.disableActionButton||this.props.asset&&this.props.onAction(this.props.asset)}},{key:"render",value:function(){var e=this.props,t=e.disabled,n=e.noLabel,a=this.getError(),o=void 0;t||(this.props.asset?o=this.props.asset.get("symbol"):!a&&this.props.assetInput&&(a=p.a.translate("explorer.asset.not_found",{name:this.props.assetInput})));var i=g()("button",{disabled:!this.props.asset||a||this.props.disableActionButton});return r.createElement("div",{className:this.props.className?this.props.className+" asset-selector":"asset-selector",style:this.props.style},r.createElement("div",{className:"header-area"},a||n?null:r.createElement("label",{className:"right-label"},"  ",r.createElement("span",null,o)),r.createElement(s.a,{component:"label",content:this.props.label})),r.createElement("div",{className:"input-area"},r.createElement("div",{className:"inline-label input-wrapper"},r.createElement("input",{style:this.props.inputStyle,disabled:this.props.disabled,type:"text",value:this.props.assetInput||"",placeholder:p.a.translate("explorer.assets.symbol"),ref:"user_input",onChange:this.onInputChanged.bind(this),onKeyDown:this.onKeyDown.bind(this),tabIndex:this.props.tabIndex}),r.createElement("div",{className:"form-label select floating-dropdown"},this.props.asset?r.createElement(E,{ref:this.props.refCallback,value:this.props.asset.get("symbol"),assets:h.List(this.props.assets),onChange:this.onAssetSelect.bind(this)}):null),this.props.children,this.props.onAction?r.createElement("button",{className:i,onClick:this.onAction.bind(this)},r.createElement(s.a,{content:this.props.action_label})):null)),r.createElement("div",{className:"error-area",style:{paddingBottom:"10px"}},r.createElement("span",{style:{wordBreak:"break-all"}},a)))}}]),t}();k.propTypes={label:a.string,error:a.string,placeholder:a.string,onChange:a.func,onFound:a.func,assetInput:a.string,asset:c.a.ChainAsset,tabIndex:a.number,disableActionButton:a.string},k.defaultProps={disabled:!1},t.a=Object(l.a)(k)},2329:function(e,t,n){"use strict";var r=n(41),a=n(5),o=n.n(a),s=n(13),i=n(2284),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var l=function(e){function t(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var e=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.assets=o.a.Map(),e.asset_symbol_to_id={},e.searchTerms={},e.lookupResults=[],e.assetsLoading=!1,e.bindListeners({onGetAssetList:i.a.getAssetList,onLookupAsset:i.a.lookupAsset}),e}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["a"]),c(t,[{key:"onGetAssetList",value:function(e){var t=this;if(!e)return!1;this.assetsLoading=e.loading,e.assets&&e.assets.forEach(function(n){for(var r=0;r<e.dynamic.length;r++)if(e.dynamic[r].id===n.dynamic_asset_data_id){n.dynamic=e.dynamic[r];break}if(n.bitasset_data_id){n.market_asset=!0;for(r=0;r<e.bitasset_data.length;r++)if(e.bitasset_data[r].id===n.bitasset_data_id){n.bitasset_data=e.bitasset_data[r];break}}else n.market_asset=!1;t.assets=t.assets.set(n.id,n),t.asset_symbol_to_id[n.symbol]=n.id})}},{key:"onLookupAsset",value:function(e){this.searchTerms[e.searchID]=e.symbol,this.lookupResults=e.assets}}]),t}();t.a=s.a.createStore(l,"AssetStore")},2332:function(e,t){t.version="2.1.0"},2333:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){var t,n=e.Symbol;"function"==typeof n?n.observable?t=n.observable:(t=n("observable"),n.observable=t):t="@@observable";return t}},2334:function(e,t,n){"use strict";(function(e,r){Object.defineProperty(t,"__esModule",{value:!0});var a,o=function(e){return e&&e.__esModule?e:{default:e}}(n(2333));a="undefined"!=typeof self?self:"undefined"!=typeof window?window:void 0!==e?e:r;var s=(0,o.default)(a);t.default=s}).call(this,n(52),n(178)(e))},2335:function(e,t,n){e.exports=n(2334)},2336:function(e,t,n){"use strict";(function(e){!function(e,t){function n(e){return"function"==typeof Symbol&&Boolean(Symbol[e])}function r(e){return n(e)?Symbol[e]:"@@"+e}function a(e,t){var n=e[t];if(null!=n){if("function"!=typeof n)throw new TypeError(n+" is not a function");return n}}function o(e){var t=e.constructor;return void 0!==t&&null===(t=t[r("species")])&&(t=void 0),void 0!==t?t:p}function s(e,t){Object.keys(t).forEach(function(n){var r=Object.getOwnPropertyDescriptor(t,n);r.enumerable=!1,Object.defineProperty(e,n,r)})}function i(e){var t=e._cleanup;t&&(e._cleanup=void 0,t())}function c(e){return void 0===e._observer}function l(e,t){if(Object(e)!==e)throw new TypeError("Observer must be an object");this._cleanup=void 0,this._observer=e;var n=a(e,"start");if(n&&n.call(e,this),!c(this)){e=new u(this);try{var r=t.call(void 0,e);if(null!=r){if("function"==typeof r.unsubscribe)r=function(e){return function(){e.unsubscribe()}}(r);else if("function"!=typeof r)throw new TypeError(r+" is not a function");this._cleanup=r}}catch(t){return void e.error(t)}c(this)&&i(this)}}function u(e){this._subscription=e}function p(e){if("function"!=typeof e)throw new TypeError("Observable initializer must be a function");this._subscriber=e}"function"!=typeof Symbol||Symbol.observable||(Symbol.observable=Symbol("observable")),s(l.prototype={},{get closed(){return c(this)},unsubscribe:function(){!function(e){c(e)||(e._observer=void 0,i(e))}(this)}}),s(u.prototype={},{get closed(){return c(this._subscription)},next:function(e){var t=this._subscription;if(!c(t)){var n=t._observer,r=a(n,"next");if(r)return r.call(n,e)}},error:function(e){var t=this._subscription;if(c(t))throw e;var n=t._observer;t._observer=void 0;try{var r=a(n,"error");if(!r)throw e;e=r.call(n,e)}catch(e){try{i(t)}finally{throw e}}return i(t),e},complete:function(e){var t=this._subscription;if(!c(t)){var n=t._observer;t._observer=void 0;try{var r=a(n,"complete");e=r?r.call(n,e):void 0}catch(e){try{i(t)}finally{throw e}}return i(t),e}}}),s(p.prototype,{subscribe:function(e){for(var t=[],n=1;n<arguments.length;++n)t.push(arguments[n]);return"function"==typeof e&&(e={next:e,error:t[0],complete:t[1]}),new l(e,this._subscriber)},forEach:function(e){var t=this;return new Promise(function(n,r){if("function"!=typeof e)return Promise.reject(new TypeError(e+" is not a function"));t.subscribe({_subscription:null,start:function(e){if(Object(e)!==e)throw new TypeError(e+" is not an object");this._subscription=e},next:function(t){var n=this._subscription;if(!n.closed)try{return e(t)}catch(e){r(e),n.unsubscribe()}},error:r,complete:n})})},map:function(e){var t=this;if("function"!=typeof e)throw new TypeError(e+" is not a function");var n=o(this);return new n(function(n){return t.subscribe({next:function(t){if(!n.closed){try{t=e(t)}catch(e){return n.error(e)}return n.next(t)}},error:function(e){return n.error(e)},complete:function(e){return n.complete(e)}})})},filter:function(e){var t=this;if("function"!=typeof e)throw new TypeError(e+" is not a function");var n=o(this);return new n(function(n){return t.subscribe({next:function(t){if(!n.closed){try{if(!e(t))return}catch(e){return n.error(e)}return n.next(t)}},error:function(e){return n.error(e)},complete:function(){return n.complete()}})})},reduce:function(e){var t=this;if("function"!=typeof e)throw new TypeError(e+" is not a function");var n=o(this),r=arguments.length>1,a=!1,s=arguments[1],i=s;return new n(function(n){return t.subscribe({next:function(t){if(!n.closed){var o=!a;if(a=!0,!o||r)try{i=e(i,t)}catch(e){return n.error(e)}else i=t}},error:function(e){n.error(e)},complete:function(){a||r?(n.next(i),n.complete()):n.error(new TypeError("Cannot reduce an empty sequence"))}})})},flatMap:function(e){var t=this;if("function"!=typeof e)throw new TypeError(e+" is not a function");var n=o(this);return new n(function(n){var r=!1,a=[],o=t.subscribe({next:function(t){if(e)try{t=e(t)}catch(e){return void n.error(e)}p.from(t).subscribe({_subscription:null,start:function(e){a.push(this._subscription=e)},next:function(e){n.next(e)},error:function(e){n.error(e)},complete:function(){var e=a.indexOf(this._subscription);e>=0&&a.splice(e,1),s()}})},error:function(e){return n.error(e)},complete:function(){r=!0,s()}});function s(){r&&0===a.length&&n.complete()}return function(){a.forEach(function(e){return e.unsubscribe()}),o.unsubscribe()}})}}),Object.defineProperty(p.prototype,r("observable"),{value:function(){return this},writable:!0,configurable:!0}),s(p,{from:function(e){var t="function"==typeof this?this:p;if(null==e)throw new TypeError(e+" is not an object");var o=a(e,r("observable"));if(o){var s=o.call(e);if(Object(s)!==s)throw new TypeError(s+" is not an object");return s.constructor===t?s:new t(function(e){return s.subscribe(e)})}if(n("iterator")&&(o=a(e,r("iterator"))))return new t(function(t){for(var n,r=o.call(e)[Symbol.iterator]();!(n=r.next()).done;){var a=n.value;if(t.next(a),t.closed)return}t.complete()});if(Array.isArray(e))return new t(function(t){for(var n=0;n<e.length;++n)if(t.next(e[n]),t.closed)return;t.complete()});throw new TypeError(e+" is not observable")},of:function(){for(var e=[],t=0;t<arguments.length;++t)e.push(arguments[t]);var n="function"==typeof this?this:p;return new n(function(t){for(var n=0;n<e.length;++n)if(t.next(e[n]),t.closed)return;t.complete()})}}),Object.defineProperty(p,r("species"),{get:function(){return this},configurable:!0}),Object.defineProperty(p,"observableSymbol",{value:r("observable")}),e.Observable=p}(t)}).call(this,n(178)(e))},2337:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.visit=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r,i=void 0,c=Array.isArray(e),l=[e],u=-1,p=[],d=void 0,m=void 0,h=void 0,f=[],g=[],v=e;do{var b=++u===l.length,y=b&&0!==p.length;if(b){if(m=0===g.length?void 0:f[f.length-1],d=h,h=g.pop(),y){if(c)d=d.slice();else{var _={};for(var E in d)d.hasOwnProperty(E)&&(_[E]=d[E]);d=_}for(var w=0,k=0;k<p.length;k++){var O=p[k][0],C=p[k][1];c&&(O-=w),c&&null===C?(d.splice(O,1),w++):d[O]=C}}u=i.index,l=i.keys,p=i.edits,c=i.inArray,i=i.prev}else{if(m=h?c?u:l[u]:void 0,null===(d=h?h[m]:v)||void 0===d)continue;h&&f.push(m)}var T=void 0;if(!Array.isArray(d)){if(!o(d))throw new Error("Invalid AST Node: "+JSON.stringify(d));var A=s(t,d.kind,b);if(A){if((T=A.call(t,d,m,h,f,g))===a)break;if(!1===T){if(!b){f.pop();continue}}else if(void 0!==T&&(p.push([m,T]),!b)){if(!o(T)){f.pop();continue}d=T}}}void 0===T&&y&&p.push([m,d]),b?f.pop():(i={inArray:c,index:u,keys:l,edits:p,prev:i},c=Array.isArray(d),l=c?d:n[d.kind]||[],u=-1,p=[],h&&g.push(h),h=d)}while(void 0!==i);0!==p.length&&(v=p[p.length-1][1]);return v},t.visitInParallel=function(e){var t=new Array(e.length);return{enter:function(n){for(var r=0;r<e.length;r++)if(!t[r]){var o=s(e[r],n.kind,!1);if(o){var i=o.apply(e[r],arguments);if(!1===i)t[r]=n;else if(i===a)t[r]=a;else if(void 0!==i)return i}}},leave:function(n){for(var r=0;r<e.length;r++)if(t[r])t[r]===n&&(t[r]=null);else{var o=s(e[r],n.kind,!0);if(o){var i=o.apply(e[r],arguments);if(i===a)t[r]=a;else if(void 0!==i&&!1!==i)return i}}}}},t.visitWithTypeInfo=function(e,t){return{enter:function(n){e.enter(n);var r=s(t,n.kind,!1);if(r){var a=r.apply(t,arguments);return void 0!==a&&(e.leave(n),o(a)&&e.enter(a)),a}},leave:function(n){var r=s(t,n.kind,!0),a=void 0;return r&&(a=r.apply(t,arguments)),e.leave(n),a}}},t.getVisitFn=s;var r=t.QueryDocumentKeys={Name:[],Document:["definitions"],OperationDefinition:["name","variableDefinitions","directives","selectionSet"],VariableDefinition:["variable","type","defaultValue"],Variable:["name"],SelectionSet:["selections"],Field:["alias","name","arguments","directives","selectionSet"],Argument:["name","value"],FragmentSpread:["name","directives"],InlineFragment:["typeCondition","directives","selectionSet"],FragmentDefinition:["name","variableDefinitions","typeCondition","directives","selectionSet"],IntValue:[],FloatValue:[],StringValue:[],BooleanValue:[],NullValue:[],EnumValue:[],ListValue:["values"],ObjectValue:["fields"],ObjectField:["name","value"],Directive:["name","arguments"],NamedType:["name"],ListType:["type"],NonNullType:["type"],SchemaDefinition:["directives","operationTypes"],OperationTypeDefinition:["type"],ScalarTypeDefinition:["description","name","directives"],ObjectTypeDefinition:["description","name","interfaces","directives","fields"],FieldDefinition:["description","name","arguments","type","directives"],InputValueDefinition:["description","name","type","defaultValue","directives"],InterfaceTypeDefinition:["description","name","directives","fields"],UnionTypeDefinition:["description","name","directives","types"],EnumTypeDefinition:["description","name","directives","values"],EnumValueDefinition:["description","name","directives"],InputObjectTypeDefinition:["description","name","directives","fields"],ScalarTypeExtension:["name","directives"],ObjectTypeExtension:["name","interfaces","directives","fields"],InterfaceTypeExtension:["name","directives","fields"],UnionTypeExtension:["name","directives","types"],EnumTypeExtension:["name","directives","values"],InputObjectTypeExtension:["name","directives","fields"],DirectiveDefinition:["description","name","arguments","locations"]},a=t.BREAK={};function o(e){return Boolean(e&&"string"==typeof e.kind)}function s(e,t,n){var r=e[t];if(r){if(!n&&"function"==typeof r)return r;var a=n?r.leave:r.enter;if("function"==typeof a)return a}else{var o=n?e.leave:e.enter;if(o){if("function"==typeof o)return o;var s=o[t];if("function"==typeof s)return s}}}},2338:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.DirectiveLocation={QUERY:"QUERY",MUTATION:"MUTATION",SUBSCRIPTION:"SUBSCRIPTION",FIELD:"FIELD",FRAGMENT_DEFINITION:"FRAGMENT_DEFINITION",FRAGMENT_SPREAD:"FRAGMENT_SPREAD",INLINE_FRAGMENT:"INLINE_FRAGMENT",SCHEMA:"SCHEMA",SCALAR:"SCALAR",OBJECT:"OBJECT",FIELD_DEFINITION:"FIELD_DEFINITION",ARGUMENT_DEFINITION:"ARGUMENT_DEFINITION",INTERFACE:"INTERFACE",UNION:"UNION",ENUM:"ENUM",ENUM_VALUE:"ENUM_VALUE",INPUT_OBJECT:"INPUT_OBJECT",INPUT_FIELD_DEFINITION:"INPUT_FIELD_DEFINITION"}},2339:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.NAME="Name",t.DOCUMENT="Document",t.OPERATION_DEFINITION="OperationDefinition",t.VARIABLE_DEFINITION="VariableDefinition",t.VARIABLE="Variable",t.SELECTION_SET="SelectionSet",t.FIELD="Field",t.ARGUMENT="Argument",t.FRAGMENT_SPREAD="FragmentSpread",t.INLINE_FRAGMENT="InlineFragment",t.FRAGMENT_DEFINITION="FragmentDefinition",t.INT="IntValue",t.FLOAT="FloatValue",t.STRING="StringValue",t.BOOLEAN="BooleanValue",t.NULL="NullValue",t.ENUM="EnumValue",t.LIST="ListValue",t.OBJECT="ObjectValue",t.OBJECT_FIELD="ObjectField",t.DIRECTIVE="Directive",t.NAMED_TYPE="NamedType",t.LIST_TYPE="ListType",t.NON_NULL_TYPE="NonNullType",t.SCHEMA_DEFINITION="SchemaDefinition",t.OPERATION_TYPE_DEFINITION="OperationTypeDefinition",t.SCALAR_TYPE_DEFINITION="ScalarTypeDefinition",t.OBJECT_TYPE_DEFINITION="ObjectTypeDefinition",t.FIELD_DEFINITION="FieldDefinition",t.INPUT_VALUE_DEFINITION="InputValueDefinition",t.INTERFACE_TYPE_DEFINITION="InterfaceTypeDefinition",t.UNION_TYPE_DEFINITION="UnionTypeDefinition",t.ENUM_TYPE_DEFINITION="EnumTypeDefinition",t.ENUM_VALUE_DEFINITION="EnumValueDefinition",t.INPUT_OBJECT_TYPE_DEFINITION="InputObjectTypeDefinition",t.SCALAR_TYPE_EXTENSION="ScalarTypeExtension",t.OBJECT_TYPE_EXTENSION="ObjectTypeExtension",t.INTERFACE_TYPE_EXTENSION="InterfaceTypeExtension",t.UNION_TYPE_EXTENSION="UnionTypeExtension",t.ENUM_TYPE_EXTENSION="EnumTypeExtension",t.INPUT_OBJECT_TYPE_EXTENSION="InputObjectTypeExtension",t.DIRECTIVE_DEFINITION="DirectiveDefinition"},2340:function(e,t,n){"use strict";function r(e){for(var t=0;t<e.length&&(" "===e[t]||"\t"===e[t]);)t++;return t}function a(e){return r(e)===e.length}Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){for(var t=e.split(/\r\n|[\n\r]/g),n=null,o=1;o<t.length;o++){var s=t[o],i=r(s);if(i<s.length&&(null===n||i<n)&&0===(n=i))break}if(n)for(var c=1;c<t.length;c++)t[c]=t[c].slice(n);for(;t.length>0&&a(t[0]);)t.shift();for(;t.length>0&&a(t[t.length-1]);)t.pop();return t.join("\n")}},2341:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.TokenKind=void 0,t.createLexer=function(e,t){var n=new S(i,0,0,0,0,null);return{source:e,options:t,lastToken:n,token:n,line:1,lineStart:0,advance:o,lookahead:s}},t.getTokenDesc=function(e){var t=e.value;return t?e.kind+' "'+t+'"':e.kind};var r=n(2304),a=function(e){return e&&e.__esModule?e:{default:e}}(n(2340));function o(){return this.lastToken=this.token,this.token=this.lookahead()}function s(){var e=this.token;if(e.kind!==c)do{e=e.next||(e.next=j(this,e))}while(e.kind===A);return e}var i="<SOF>",c="<EOF>",l="!",u="$",p="(",d=")",m="...",h=":",f="=",g="@",v="[",b="]",y="{",_="|",E="}",w="Name",k="Int",O="Float",C="String",T="BlockString",A="Comment";t.TokenKind={SOF:i,EOF:c,BANG:l,DOLLAR:u,PAREN_L:p,PAREN_R:d,SPREAD:m,COLON:h,EQUALS:f,AT:g,BRACKET_L:v,BRACKET_R:b,BRACE_L:y,PIPE:_,BRACE_R:E,NAME:w,INT:k,FLOAT:O,STRING:C,BLOCK_STRING:T,COMMENT:A};var N=String.prototype.charCodeAt,P=String.prototype.slice;function S(e,t,n,r,a,o,s){this.kind=e,this.start=t,this.end=n,this.line=r,this.column=a,this.value=s,this.prev=o,this.next=null}function x(e){return isNaN(e)?c:e<127?JSON.stringify(String.fromCharCode(e)):'"\\u'+("00"+e.toString(16).toUpperCase()).slice(-4)+'"'}function j(e,t){var n=e.source,o=n.body,s=o.length,i=function(e,t,n){var r=e.length,a=t;for(;a<r;){var o=N.call(e,a);if(9===o||32===o||44===o||65279===o)++a;else if(10===o)++a,++n.line,n.lineStart=a;else{if(13!==o)break;10===N.call(e,a+1)?a+=2:++a,++n.line,n.lineStart=a}}return a}(o,t.end,e),j=e.line,D=1+i-e.lineStart;if(i>=s)return new S(c,s,s,j,D,t);var M=N.call(o,i);if(M<32&&9!==M&&10!==M&&13!==M)throw(0,r.syntaxError)(n,i,"Cannot contain the invalid character "+x(M)+".");switch(M){case 33:return new S(l,i,i+1,j,D,t);case 35:return function(e,t,n,r,a){var o=e.body,s=void 0,i=t;do{s=N.call(o,++i)}while(null!==s&&(s>31||9===s));return new S(A,t,i,n,r,a,P.call(o,t+1,i))}(n,i,j,D,t);case 36:return new S(u,i,i+1,j,D,t);case 40:return new S(p,i,i+1,j,D,t);case 41:return new S(d,i,i+1,j,D,t);case 46:if(46===N.call(o,i+1)&&46===N.call(o,i+2))return new S(m,i,i+3,j,D,t);break;case 58:return new S(h,i,i+1,j,D,t);case 61:return new S(f,i,i+1,j,D,t);case 64:return new S(g,i,i+1,j,D,t);case 91:return new S(v,i,i+1,j,D,t);case 93:return new S(b,i,i+1,j,D,t);case 123:return new S(y,i,i+1,j,D,t);case 124:return new S(_,i,i+1,j,D,t);case 125:return new S(E,i,i+1,j,D,t);case 65:case 66:case 67:case 68:case 69:case 70:case 71:case 72:case 73:case 74:case 75:case 76:case 77:case 78:case 79:case 80:case 81:case 82:case 83:case 84:case 85:case 86:case 87:case 88:case 89:case 90:case 95:case 97:case 98:case 99:case 100:case 101:case 102:case 103:case 104:case 105:case 106:case 107:case 108:case 109:case 110:case 111:case 112:case 113:case 114:case 115:case 116:case 117:case 118:case 119:case 120:case 121:case 122:return function(e,t,n,r,a){var o=e.body,s=o.length,i=t+1,c=0;for(;i!==s&&null!==(c=N.call(o,i))&&(95===c||c>=48&&c<=57||c>=65&&c<=90||c>=97&&c<=122);)++i;return new S(w,t,i,n,r,a,P.call(o,t,i))}(n,i,j,D,t);case 45:case 48:case 49:case 50:case 51:case 52:case 53:case 54:case 55:case 56:case 57:return function(e,t,n,a,o,s){var i=e.body,c=n,l=t,u=!1;45===c&&(c=N.call(i,++l));if(48===c){if((c=N.call(i,++l))>=48&&c<=57)throw(0,r.syntaxError)(e,l,"Invalid number, unexpected digit after 0: "+x(c)+".")}else l=I(e,l,c),c=N.call(i,l);46===c&&(u=!0,c=N.call(i,++l),l=I(e,l,c),c=N.call(i,l));69!==c&&101!==c||(u=!0,43!==(c=N.call(i,++l))&&45!==c||(c=N.call(i,++l)),l=I(e,l,c));return new S(u?O:k,t,l,a,o,s,P.call(i,t,l))}(n,i,M,j,D,t);case 34:return 34===N.call(o,i+1)&&34===N.call(o,i+2)?function(e,t,n,o,s){var i=e.body,c=t+3,l=c,u=0,p="";for(;c<i.length&&null!==(u=N.call(i,c));){if(34===u&&34===N.call(i,c+1)&&34===N.call(i,c+2))return p+=P.call(i,l,c),new S(T,t,c+3,n,o,s,(0,a.default)(p));if(u<32&&9!==u&&10!==u&&13!==u)throw(0,r.syntaxError)(e,c,"Invalid character within String: "+x(u)+".");92===u&&34===N.call(i,c+1)&&34===N.call(i,c+2)&&34===N.call(i,c+3)?(p+=P.call(i,l,c)+'"""',l=c+=4):++c}throw(0,r.syntaxError)(e,c,"Unterminated string.")}(n,i,j,D,t):function(e,t,n,a,o){var s=e.body,i=t+1,c=i,l=0,u="";for(;i<s.length&&null!==(l=N.call(s,i))&&10!==l&&13!==l;){if(34===l)return u+=P.call(s,c,i),new S(C,t,i+1,n,a,o,u);if(l<32&&9!==l)throw(0,r.syntaxError)(e,i,"Invalid character within String: "+x(l)+".");if(++i,92===l){switch(u+=P.call(s,c,i-1),l=N.call(s,i)){case 34:u+='"';break;case 47:u+="/";break;case 92:u+="\\";break;case 98:u+="\b";break;case 102:u+="\f";break;case 110:u+="\n";break;case 114:u+="\r";break;case 116:u+="\t";break;case 117:var p=R(N.call(s,i+1),N.call(s,i+2),N.call(s,i+3),N.call(s,i+4));if(p<0)throw(0,r.syntaxError)(e,i,"Invalid character escape sequence: \\u"+s.slice(i+1,i+5)+".");u+=String.fromCharCode(p),i+=4;break;default:throw(0,r.syntaxError)(e,i,"Invalid character escape sequence: \\"+String.fromCharCode(l)+".")}c=++i}}throw(0,r.syntaxError)(e,i,"Unterminated string.")}(n,i,j,D,t)}throw(0,r.syntaxError)(n,i,function(e){if(39===e)return"Unexpected single quote character ('), did you mean to use a double quote (\")?";return"Cannot parse the unexpected character "+x(e)+"."}(M))}function I(e,t,n){var a=e.body,o=t,s=n;if(s>=48&&s<=57){do{s=N.call(a,++o)}while(s>=48&&s<=57);return o}throw(0,r.syntaxError)(e,o,"Invalid number, expected digit but got: "+x(s)+".")}function R(e,t,n,r){return D(e)<<12|D(t)<<8|D(n)<<4|D(r)}function D(e){return e>=48&&e<=57?e-48:e>=65&&e<=70?e-55:e>=97&&e<=102?e-87:-1}S.prototype.toJSON=S.prototype.inspect=function(){return{kind:this.kind,value:this.value,line:this.line,column:this.column}}},2342:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};t.formatError=function(e){return e||(0,a.default)(0,"Received null or undefined error."),r({},e.extensions,{message:e.message||"An unknown error occurred.",locations:e.locations,path:e.path})};var a=function(e){return e&&e.__esModule?e:{default:e}}(n(2305))},2343:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.locatedError=function(e,t,n){if(e&&Array.isArray(e.path))return e;return new r.GraphQLError(e&&e.message,e&&e.nodes||t,e&&e.source,e&&e.positions,n,e)};var r=n(2289)},2344:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.syntaxError=function(e,t,n){return new r.GraphQLError("Syntax Error: "+n,void 0,e,[t])};var r=n(2289)},2345:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.Source=void 0;var r=function(e){return e&&e.__esModule?e:{default:e}}(n(2305));t.Source=function e(t,n,a){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.body=t,this.name=n||"GraphQL request",this.locationOffset=a||{line:1,column:1},this.locationOffset.line>0||(0,r.default)(0,"line in locationOffset is 1-indexed and must be positive"),this.locationOffset.column>0||(0,r.default)(0,"column in locationOffset is 1-indexed and must be positive")}},2346:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parse=function(e,t){var n="string"==typeof e?new r.Source(e):e;if(!(n instanceof r.Source))throw new TypeError("Must provide Source. Received: "+String(n));return function(e){var t=e.token;J(e,o.TokenKind.SOF);var n=[];do{n.push(l(e))}while(!H(e,o.TokenKind.EOF));return{kind:s.DOCUMENT,definitions:n,loc:W(e,t)}}((0,o.createLexer)(n,t||{}))},t.parseValue=function(e,t){var n="string"==typeof e?new r.Source(e):e,a=(0,o.createLexer)(n,t||{});J(a,o.TokenKind.SOF);var s=w(a,!1);return J(a,o.TokenKind.EOF),s},t.parseType=function(e,t){var n="string"==typeof e?new r.Source(e):e,a=(0,o.createLexer)(n,t||{});J(a,o.TokenKind.SOF);var s=P(a);return J(a,o.TokenKind.EOF),s},t.parseConstValue=O,t.parseTypeReference=P,t.parseNamedType=S;var r=n(2345),a=n(2304),o=n(2341),s=n(2339),i=n(2338);function c(e){var t=J(e,o.TokenKind.NAME);return{kind:s.NAME,value:t.value,loc:W(e,t)}}function l(e){if(G(e,o.TokenKind.NAME))switch(e.token.value){case"query":case"mutation":case"subscription":case"fragment":return u(e);case"schema":case"scalar":case"type":case"interface":case"union":case"enum":case"input":case"extend":case"directive":return x(e)}else{if(G(e,o.TokenKind.BRACE_L))return u(e);if(j(e))return x(e)}throw X(e)}function u(e){if(G(e,o.TokenKind.NAME))switch(e.token.value){case"query":case"mutation":case"subscription":return p(e);case"fragment":return function(e){var t=e.token;if(Y(e,"fragment"),e.options.experimentalFragmentVariables)return{kind:s.FRAGMENT_DEFINITION,name:E(e),variableDefinitions:m(e),typeCondition:(Y(e,"on"),S(e)),directives:A(e,!1),selectionSet:g(e),loc:W(e,t)};return{kind:s.FRAGMENT_DEFINITION,name:E(e),typeCondition:(Y(e,"on"),S(e)),directives:A(e,!1),selectionSet:g(e),loc:W(e,t)}}(e)}else if(G(e,o.TokenKind.BRACE_L))return p(e);throw X(e)}function p(e){var t=e.token;if(G(e,o.TokenKind.BRACE_L))return{kind:s.OPERATION_DEFINITION,operation:"query",name:void 0,variableDefinitions:[],directives:[],selectionSet:g(e),loc:W(e,t)};var n=d(e),r=void 0;return G(e,o.TokenKind.NAME)&&(r=c(e)),{kind:s.OPERATION_DEFINITION,operation:n,name:r,variableDefinitions:m(e),directives:A(e,!1),selectionSet:g(e),loc:W(e,t)}}function d(e){var t=J(e,o.TokenKind.NAME);switch(t.value){case"query":return"query";case"mutation":return"mutation";case"subscription":return"subscription"}throw X(e,t)}function m(e){return G(e,o.TokenKind.PAREN_L)?$(e,o.TokenKind.PAREN_L,h,o.TokenKind.PAREN_R):[]}function h(e){var t=e.token;return{kind:s.VARIABLE_DEFINITION,variable:f(e),type:(J(e,o.TokenKind.COLON),P(e)),defaultValue:H(e,o.TokenKind.EQUALS)?w(e,!0):void 0,loc:W(e,t)}}function f(e){var t=e.token;return J(e,o.TokenKind.DOLLAR),{kind:s.VARIABLE,name:c(e),loc:W(e,t)}}function g(e){var t=e.token;return{kind:s.SELECTION_SET,selections:$(e,o.TokenKind.BRACE_L,v,o.TokenKind.BRACE_R),loc:W(e,t)}}function v(e){return G(e,o.TokenKind.SPREAD)?function(e){var t=e.token;if(J(e,o.TokenKind.SPREAD),G(e,o.TokenKind.NAME)&&"on"!==e.token.value)return{kind:s.FRAGMENT_SPREAD,name:E(e),directives:A(e,!1),loc:W(e,t)};var n=void 0;"on"===e.token.value&&(e.advance(),n=S(e));return{kind:s.INLINE_FRAGMENT,typeCondition:n,directives:A(e,!1),selectionSet:g(e),loc:W(e,t)}}(e):function(e){var t=e.token,n=c(e),r=void 0,a=void 0;H(e,o.TokenKind.COLON)?(r=n,a=c(e)):a=n;return{kind:s.FIELD,alias:r,name:a,arguments:b(e,!1),directives:A(e,!1),selectionSet:G(e,o.TokenKind.BRACE_L)?g(e):void 0,loc:W(e,t)}}(e)}function b(e,t){var n=t?_:y;return G(e,o.TokenKind.PAREN_L)?$(e,o.TokenKind.PAREN_L,n,o.TokenKind.PAREN_R):[]}function y(e){var t=e.token;return{kind:s.ARGUMENT,name:c(e),value:(J(e,o.TokenKind.COLON),w(e,!1)),loc:W(e,t)}}function _(e){var t=e.token;return{kind:s.ARGUMENT,name:c(e),value:(J(e,o.TokenKind.COLON),O(e)),loc:W(e,t)}}function E(e){if("on"===e.token.value)throw X(e);return c(e)}function w(e,t){var n=e.token;switch(n.kind){case o.TokenKind.BRACKET_L:return function(e,t){var n=e.token,r=t?O:C;return{kind:s.LIST,values:function(e,t,n,r){J(e,t);var a=[];for(;!H(e,r);)a.push(n(e));return a}(e,o.TokenKind.BRACKET_L,r,o.TokenKind.BRACKET_R),loc:W(e,n)}}(e,t);case o.TokenKind.BRACE_L:return function(e,t){var n=e.token;J(e,o.TokenKind.BRACE_L);var r=[];for(;!H(e,o.TokenKind.BRACE_R);)r.push(T(e,t));return{kind:s.OBJECT,fields:r,loc:W(e,n)}}(e,t);case o.TokenKind.INT:return e.advance(),{kind:s.INT,value:n.value,loc:W(e,n)};case o.TokenKind.FLOAT:return e.advance(),{kind:s.FLOAT,value:n.value,loc:W(e,n)};case o.TokenKind.STRING:case o.TokenKind.BLOCK_STRING:return k(e);case o.TokenKind.NAME:return"true"===n.value||"false"===n.value?(e.advance(),{kind:s.BOOLEAN,value:"true"===n.value,loc:W(e,n)}):"null"===n.value?(e.advance(),{kind:s.NULL,loc:W(e,n)}):(e.advance(),{kind:s.ENUM,value:n.value,loc:W(e,n)});case o.TokenKind.DOLLAR:if(!t)return f(e)}throw X(e)}function k(e){var t=e.token;return e.advance(),{kind:s.STRING,value:t.value,block:t.kind===o.TokenKind.BLOCK_STRING,loc:W(e,t)}}function O(e){return w(e,!0)}function C(e){return w(e,!1)}function T(e,t){var n=e.token;return{kind:s.OBJECT_FIELD,name:c(e),value:(J(e,o.TokenKind.COLON),w(e,t)),loc:W(e,n)}}function A(e,t){for(var n=[];G(e,o.TokenKind.AT);)n.push(N(e,t));return n}function N(e,t){var n=e.token;return J(e,o.TokenKind.AT),{kind:s.DIRECTIVE,name:c(e),arguments:b(e,t),loc:W(e,n)}}function P(e){var t=e.token,n=void 0;return H(e,o.TokenKind.BRACKET_L)?(n=P(e),J(e,o.TokenKind.BRACKET_R),n={kind:s.LIST_TYPE,type:n,loc:W(e,t)}):n=S(e),H(e,o.TokenKind.BANG)?{kind:s.NON_NULL_TYPE,type:n,loc:W(e,t)}:n}function S(e){var t=e.token;return{kind:s.NAMED_TYPE,name:c(e),loc:W(e,t)}}function x(e){var t=j(e)?e.lookahead():e.token;if(t.kind===o.TokenKind.NAME)switch(t.value){case"schema":return function(e){var t=e.token;Y(e,"schema");var n=A(e,!0),r=$(e,o.TokenKind.BRACE_L,R,o.TokenKind.BRACE_R);return{kind:s.SCHEMA_DEFINITION,directives:n,operationTypes:r,loc:W(e,t)}}(e);case"scalar":return function(e){var t=e.token,n=I(e);Y(e,"scalar");var r=c(e),a=A(e,!0);return{kind:s.SCALAR_TYPE_DEFINITION,description:n,name:r,directives:a,loc:W(e,t)}}(e);case"type":return function(e){var t=e.token,n=I(e);Y(e,"type");var r=c(e),a=D(e),o=A(e,!0),i=M(e);return{kind:s.OBJECT_TYPE_DEFINITION,description:n,name:r,interfaces:a,directives:o,fields:i,loc:W(e,t)}}(e);case"interface":return function(e){var t=e.token,n=I(e);Y(e,"interface");var r=c(e),a=A(e,!0),o=M(e);return{kind:s.INTERFACE_TYPE_DEFINITION,description:n,name:r,directives:a,fields:o,loc:W(e,t)}}(e);case"union":return function(e){var t=e.token,n=I(e);Y(e,"union");var r=c(e),a=A(e,!0),o=L(e);return{kind:s.UNION_TYPE_DEFINITION,description:n,name:r,directives:a,types:o,loc:W(e,t)}}(e);case"enum":return function(e){var t=e.token,n=I(e);Y(e,"enum");var r=c(e),a=A(e,!0),o=Q(e);return{kind:s.ENUM_TYPE_DEFINITION,description:n,name:r,directives:a,values:o,loc:W(e,t)}}(e);case"input":return function(e){var t=e.token,n=I(e);Y(e,"input");var r=c(e),a=A(e,!0),o=K(e);return{kind:s.INPUT_OBJECT_TYPE_DEFINITION,description:n,name:r,directives:a,fields:o,loc:W(e,t)}}(e);case"extend":return function(e){var t=e.lookahead();if(t.kind===o.TokenKind.NAME)switch(t.value){case"scalar":return function(e){var t=e.token;Y(e,"extend"),Y(e,"scalar");var n=c(e),r=A(e,!0);if(0===r.length)throw X(e);return{kind:s.SCALAR_TYPE_EXTENSION,name:n,directives:r,loc:W(e,t)}}(e);case"type":return function(e){var t=e.token;Y(e,"extend"),Y(e,"type");var n=c(e),r=D(e),a=A(e,!0),o=M(e);if(0===r.length&&0===a.length&&0===o.length)throw X(e);return{kind:s.OBJECT_TYPE_EXTENSION,name:n,interfaces:r,directives:a,fields:o,loc:W(e,t)}}(e);case"interface":return function(e){var t=e.token;Y(e,"extend"),Y(e,"interface");var n=c(e),r=A(e,!0),a=M(e);if(0===r.length&&0===a.length)throw X(e);return{kind:s.INTERFACE_TYPE_EXTENSION,name:n,directives:r,fields:a,loc:W(e,t)}}(e);case"union":return function(e){var t=e.token;Y(e,"extend"),Y(e,"union");var n=c(e),r=A(e,!0),a=L(e);if(0===r.length&&0===a.length)throw X(e);return{kind:s.UNION_TYPE_EXTENSION,name:n,directives:r,types:a,loc:W(e,t)}}(e);case"enum":return function(e){var t=e.token;Y(e,"extend"),Y(e,"enum");var n=c(e),r=A(e,!0),a=Q(e);if(0===r.length&&0===a.length)throw X(e);return{kind:s.ENUM_TYPE_EXTENSION,name:n,directives:r,values:a,loc:W(e,t)}}(e);case"input":return function(e){var t=e.token;Y(e,"extend"),Y(e,"input");var n=c(e),r=A(e,!0),a=K(e);if(0===r.length&&0===a.length)throw X(e);return{kind:s.INPUT_OBJECT_TYPE_EXTENSION,name:n,directives:r,fields:a,loc:W(e,t)}}(e)}throw X(e,t)}(e);case"directive":return function(e){var t=e.token,n=I(e);Y(e,"directive"),J(e,o.TokenKind.AT);var r=c(e),a=q(e);Y(e,"on");var i=function(e){H(e,o.TokenKind.PIPE);var t=[];do{t.push(V(e))}while(H(e,o.TokenKind.PIPE));return t}(e);return{kind:s.DIRECTIVE_DEFINITION,description:n,name:r,arguments:a,locations:i,loc:W(e,t)}}(e)}throw X(e,t)}function j(e){return G(e,o.TokenKind.STRING)||G(e,o.TokenKind.BLOCK_STRING)}function I(e){if(j(e))return k(e)}function R(e){var t=e.token,n=d(e);J(e,o.TokenKind.COLON);var r=S(e);return{kind:s.OPERATION_TYPE_DEFINITION,operation:n,type:r,loc:W(e,t)}}function D(e){var t=[];if("implements"===e.token.value){e.advance();do{t.push(S(e))}while(G(e,o.TokenKind.NAME))}return t}function M(e){return G(e,o.TokenKind.BRACE_L)?$(e,o.TokenKind.BRACE_L,F,o.TokenKind.BRACE_R):[]}function F(e){var t=e.token,n=I(e),r=c(e),a=q(e);J(e,o.TokenKind.COLON);var i=P(e),l=A(e,!0);return{kind:s.FIELD_DEFINITION,description:n,name:r,arguments:a,type:i,directives:l,loc:W(e,t)}}function q(e){return G(e,o.TokenKind.PAREN_L)?$(e,o.TokenKind.PAREN_L,B,o.TokenKind.PAREN_R):[]}function B(e){var t=e.token,n=I(e),r=c(e);J(e,o.TokenKind.COLON);var a=P(e),i=void 0;H(e,o.TokenKind.EQUALS)&&(i=O(e));var l=A(e,!0);return{kind:s.INPUT_VALUE_DEFINITION,description:n,name:r,type:a,defaultValue:i,directives:l,loc:W(e,t)}}function L(e){var t=[];if(H(e,o.TokenKind.EQUALS)){H(e,o.TokenKind.PIPE);do{t.push(S(e))}while(H(e,o.TokenKind.PIPE))}return t}function Q(e){return G(e,o.TokenKind.BRACE_L)?$(e,o.TokenKind.BRACE_L,U,o.TokenKind.BRACE_R):[]}function U(e){var t=e.token,n=I(e),r=c(e),a=A(e,!0);return{kind:s.ENUM_VALUE_DEFINITION,description:n,name:r,directives:a,loc:W(e,t)}}function K(e){return G(e,o.TokenKind.BRACE_L)?$(e,o.TokenKind.BRACE_L,B,o.TokenKind.BRACE_R):[]}function V(e){var t=e.token,n=c(e);if(i.DirectiveLocation.hasOwnProperty(n.value))return n;throw X(e,t)}function W(e,t){if(!e.options.noLocation)return new z(t,e.lastToken,e.source)}function z(e,t,n){this.start=e.start,this.end=t.end,this.startToken=e,this.endToken=t,this.source=n}function G(e,t){return e.token.kind===t}function H(e,t){var n=e.token.kind===t;return n&&e.advance(),n}function J(e,t){var n=e.token;if(n.kind===t)return e.advance(),n;throw(0,a.syntaxError)(e.source,n.start,"Expected "+t+", found "+(0,o.getTokenDesc)(n))}function Y(e,t){var n=e.token;if(n.kind===o.TokenKind.NAME&&n.value===t)return e.advance(),n;throw(0,a.syntaxError)(e.source,n.start,'Expected "'+t+'", found '+(0,o.getTokenDesc)(n))}function X(e,t){var n=t||e.token;return(0,a.syntaxError)(e.source,n.start,"Unexpected "+(0,o.getTokenDesc)(n))}function $(e,t,n,r){J(e,t);for(var a=[n(e)];!H(e,r);)a.push(n(e));return a}z.prototype.toJSON=z.prototype.inspect=function(){return{start:this.start,end:this.end}}},2347:function(e,t,n){var r=n(2346).parse;function a(e){return e.replace(/[\s,]+/g," ").trim()}var o={},s={};function i(e){return a(e.source.body.substring(e.start,e.end))}var c=!0;function l(e){var t=a(e);if(o[t])return o[t];var n=r(e);if(!n||"Document"!==n.kind)throw new Error("Not a valid GraphQL document.");return n=function e(t,n){var r=Object.prototype.toString.call(t);if("[object Array]"===r)return t.map(function(t){return e(t,n)});if("[object Object]"!==r)throw new Error("Unexpected input.");n&&t.loc&&delete t.loc,t.loc&&(delete t.loc.startToken,delete t.loc.endToken);var a,o,s,i=Object.keys(t);for(a in i)i.hasOwnProperty(a)&&(o=t[i[a]],"[object Object]"!==(s=Object.prototype.toString.call(o))&&"[object Array]"!==s||(t[i[a]]=e(o,!0)));return t}(n=function(e){for(var t={},n=[],r=0;r<e.definitions.length;r++){var a=e.definitions[r];if("FragmentDefinition"===a.kind){var o=a.name.value,l=i(a.loc);s.hasOwnProperty(o)&&!s[o][l]?(c&&console.warn("Warning: fragment with name "+o+" already exists.\ngraphql-tag enforces all fragment names across your application to be unique; read more about\nthis in the docs: http://dev.apollodata.com/core/fragments.html#unique-names"),s[o][l]=!0):s.hasOwnProperty(o)||(s[o]={},s[o][l]=!0),t[l]||(t[l]=!0,n.push(a))}else n.push(a)}return e.definitions=n,e}(n),!1),o[t]=n,n}function u(){for(var e=Array.prototype.slice.call(arguments),t=e[0],n="string"==typeof t?t:t[0],r=1;r<e.length;r++)e[r]&&e[r].kind&&"Document"===e[r].kind?n+=e[r].loc.source.body:n+=e[r],n+=t[r];return l(n)}u.default=u,u.resetCaches=function(){o={},s={}},u.disableFragmentWarnings=function(){c=!1},e.exports=u},2349:function(e,t,n){"use strict";var r=n(0),a=n(2),o=n(30),s=n(39),i=n.n(s),c=n(124),l=n(92),u=n(1),p=n.n(u),d=n(22),m=n(24),h=n(19),f=n(8),g=n(26),v=n.n(g),b=n(2277),y=n(335),_=n(153),E=n(11),w=n(85),k=n(9),O=n.n(k),C=n(336),T=n(5),A=n.n(T),N=n(3),P=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function S(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function x(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function j(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var I=function(e){function t(e){S(this,t);var n=x(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.state=n._initialState(e),n}return j(t,r["Component"]),P(t,[{key:"_initialState",value:function(e){var t=e?this._getCurrentPosition(e):{};if(t.collateral){var n=f.a.get_asset_amount(t.debt,e.quote_asset),r=f.a.get_asset_amount(t.collateral,e.backing_asset);return{short_amount:n?n.toString():null,collateral:r?r.toString():null,collateral_ratio:this._getCollateralRatio(n,r),errors:this._getInitialErrors(),isValid:!1,original_position:{debt:n,collateral:r}}}return{short_amount:0,collateral:0,collateral_ratio:this._getInitialCollateralRatio(e),errors:this._getInitialErrors(),isValid:!1,original_position:{debt:0,collateral:0}}}},{key:"componentDidMount",value:function(){var e=this._initialState(this.props);this.setState(e),this._setUpdatedPosition(e)}},{key:"shouldComponentUpdate",value:function(e,t){return!(f.a.are_equal_shallow(t,this.state)&&A.a.is(e.quote_asset,this.props.quote_asset)&&!e.backing_asset.get("symbol")!==this.props.backing_asset.get("symbol")&&A.a.is(e.account,this.props.account)&&A.a.is(e.call_orders,this.props.call_orders))}},{key:"componentWillReceiveProps",value:function(e){e.account===this.props.account&&e.hasCallOrders===this.props.hasCallOrders&&e.quote_asset.get("id")===this.props.quote_asset.get("id")||this.setState(this._initialState(e))}},{key:"_getInitialErrors",value:function(){return{collateral_balance:null,ratio_too_high:null}}},{key:"confirmClicked",value:function(e){e.preventDefault(),i.a.publish(this.props.modalId,"close")}},{key:"_onBorrowChange",value:function(e){var t=this._getFeedPrice(),n=e.amount.replace(/,/g,""),r={short_amount:n,collateral:(this.state.collateral_ratio*(n/t)).toFixed(this.props.backing_asset.get("precision")),collateral_ratio:this.state.collateral_ratio};this.setState(r),this._validateFields(r),this._setUpdatedPosition(r)}},{key:"_onCollateralChange",value:function(e){var t=e.amount.replace(/,/g,""),n=this._getFeedPrice(),r=t/(this.state.short_amount/n),a=this._isPredictionMarket(this.props)?{short_amount:t,collateral:t,collateral_ratio:1}:{short_amount:this.state.short_amount,collateral:t,collateral_ratio:Object(o.isFinite)(r)?r:this._getInitialCollateralRatio(this.props)};this.setState(a),this._validateFields(a),this._setUpdatedPosition(a)}},{key:"_onRatioChange",value:function(e){var t=this._getFeedPrice(),n=e.target.value,r={short_amount:this.state.short_amount,collateral:(this.state.short_amount/t*n).toFixed(this.props.backing_asset.get("precision")),collateral_ratio:n};this.setState(r),this._validateFields(r),this._setUpdatedPosition(r)}},{key:"_setUpdatedPosition",value:function(e){this.setState({newPosition:parseFloat(e.short_amount)/parseFloat(e.collateral)})}},{key:"_validateFields",value:function(e){var t=this._getInitialErrors(),n=this.state.original_position,r=this.props.backing_balance?this.props.backing_balance.toJS():{balance:0};parseFloat(e.collateral)-n.collateral>f.a.get_asset_amount(r.balance,this.props.backing_asset.toJS())&&(t.collateral_balance=O.a.translate("borrow.errors.collateral"));var a=e.short_amount>=0&&e.collateral>=0&&(e.short_amount!=n.debt||e.collateral!=n.collateral),o=this.props.quote_asset.getIn(["bitasset","current_feed","maintenance_collateral_ratio"])/1e3;parseFloat(e.collateral_ratio)<(this._isPredictionMarket(this.props)?1:o)?(t.below_maintenance=O.a.translate("borrow.errors.below",{mr:o}),a=!1):parseFloat(e.collateral_ratio)<(this._isPredictionMarket(this.props)?1:o+.5)&&(t.close_maintenance=O.a.translate("borrow.errors.close",{mr:o}),a=!0),this.setState({errors:t,isValid:a})}},{key:"_onSubmit",value:function(e){e.preventDefault();var t=f.a.get_asset_precision(this.props.quote_asset.get("precision")),n=f.a.get_asset_precision(this.props.backing_asset.get("precision")),r=this._getCurrentPosition(this.props),a=_.a.new_transaction();a.add_type_operation("call_order_update",{fee:{amount:0,asset_id:0},funding_account:this.props.account.get("id"),delta_collateral:{amount:parseInt(this.state.collateral*n-r.collateral,10),asset_id:this.props.backing_asset.get("id")},delta_debt:{amount:parseInt(this.state.short_amount*t-r.debt,10),asset_id:this.props.quote_asset.get("id")}}),E.a.process_transaction(a,null,!0).catch(function(e){}),i.a.publish(this.props.modalId,"close")}},{key:"_getCurrentPosition",value:function(e){var t={collateral:null,debt:null};if(e&&e.hasCallOrders&&e.call_orders)for(var n in e.call_orders)e.call_orders.hasOwnProperty(n)&&e.call_orders[n]&&e.quote_asset.get("id")===e.call_orders[n].getIn(["call_price","quote","asset_id"])&&(t=e.call_orders[n].toJS());return t}},{key:"_getFeedPrice",value:function(){return this.props?this._isPredictionMarket(this.props)?1:1/f.a.get_asset_price(this.props.quote_asset.getIn(["bitasset","current_feed","settlement_price","quote","amount"]),this.props.backing_asset,this.props.quote_asset.getIn(["bitasset","current_feed","settlement_price","base","amount"]),this.props.quote_asset):1}},{key:"_getInitialCollateralRatio",value:function(e){return this._isPredictionMarket(e)?1:0}},{key:"_getCollateralRatio",value:function(e,t){return t/(e/this._getFeedPrice())}},{key:"_isPredictionMarket",value:function(e){return e.quote_asset.getIn(["bitasset","is_prediction_market"])}},{key:"render",value:function(){var e=this,t=this.props,n=t.quote_asset,a=t.bitasset_balance,o=t.backing_asset,s=t.backing_balance,i=this.state,c=i.short_amount,u=i.collateral,d=i.collateral_ratio,m=i.errors,g=i.isValid,_=f.a.get_asset_precision(this.props.quote_asset.get("precision")),E=f.a.get_asset_precision(this.props.backing_asset.get("precision"));d&&!isNaN(d)&&d>0&&d<1e3||(d=0),a=a?a.toJS():{balance:0,id:null},s=s?s.toJS():{balance:0,id:null};var k=v()("form-group",{"has-error":m.collateral_balance}),O=v()("form-group",{"has-error":m.below_maintenance},{"has-warning":m.close_maintenance}),T=v()("button",{disabled:m.collateral_balance||!g},{success:g}),A=this._getCurrentPosition(this.props),P=s.id?N.b.getObject(s.id):null,S=(P?P.get("balance"):0)-parseInt(this.state.collateral*E-A.collateral,10),x=r.createElement("span",null,r.createElement(p.a,{component:"span",content:"transfer.available"}),":"," ",a.id?r.createElement(y.a,{balance:a.id}):r.createElement(h.a,{amount:0,asset:n.get("id")})),j=r.createElement("span",null,r.createElement(p.a,{component:"span",content:"transfer.available"}),":"," ",s.id?r.createElement(h.a,{amount:S,asset:o.get("id")}):r.createElement(h.a,{amount:0,asset:o.get("id")})),I=this._getFeedPrice(),R=this.props.quote_asset.getIn(["bitasset","current_feed","maintenance_collateral_ratio"])/1e3,D=(this.props.quote_asset.getIn(["bitasset","current_feed","maximum_short_squeeze_ratio"]),this._isPredictionMarket(this.props));return!D&&isNaN(I)?r.createElement("div",null,r.createElement("form",{className:"grid-container text-center no-overflow",noValidate:!0},r.createElement(p.a,{component:"h3",content:"borrow.no_valid",asset_symbol:n.get("symbol")})),r.createElement("div",{className:"grid-content button-group text-center no-overflow"},r.createElement(l.a,{close:this.props.modalId},r.createElement("div",{className:" button warning"},r.createElement(p.a,{content:"account.perm.cancel"}))))):r.createElement("div",null,r.createElement("form",{className:"grid-container small-10 small-offset-1 no-overflow",noValidate:!0},r.createElement(p.a,{component:"h3",content:"borrow.title",asset_symbol:n.get("symbol")}),r.createElement("div",{style:{textAlign:"left"}},this.props.hide_help?null:r.createElement(C.a,{path:"components/"+(D?"BorrowModalPrediction":"BorrowModal"),debt:n.get("symbol"),collateral:o.get("symbol"),borrower:this.props.account.get("name"),mr:R}),D?null:r.createElement("div",{style:{paddingBottom:"1rem"}},r.createElement("div",{className:"borrow-price-feeds"},r.createElement("span",{className:"borrow-price-label"},r.createElement(p.a,{content:"transaction.feed_price"}),": "),r.createElement(w.a,{noPopOver:!0,quote_amount:n.getIn(["bitasset","current_feed","settlement_price","base","amount"]),quote_asset:n.getIn(["bitasset","current_feed","settlement_price","base","asset_id"]),base_asset:n.getIn(["bitasset","current_feed","settlement_price","quote","asset_id"]),base_amount:n.getIn(["bitasset","current_feed","settlement_price","quote","amount"])})),r.createElement("b",null),r.createElement("div",{className:"borrow-price-final "+(m.below_maintenance?"has-error":m.close_maintenance?"has-warning":"")},r.createElement("span",{className:"borrow-price-label"},r.createElement(p.a,{content:"exchange.your_price"}),": "),this.state.newPosition?r.createElement(w.a,{noPopOver:!0,quote_amount:R*this.state.short_amount*_,quote_asset:n.get("id"),base_asset:o.get("id"),base_amount:this.state.collateral*E}):null)),r.createElement("div",{className:"form-group"},r.createElement(b.a,{label:"transaction.borrow_amount",amount:c.toString(),onChange:this._onBorrowChange.bind(this),asset:n.get("id"),assets:[n.get("id")],display_balance:x,placeholder:"0.0",tabIndex:1})),r.createElement("div",{className:k},r.createElement(b.a,{label:"transaction.collateral",amount:u.toString(),onChange:this._onCollateralChange.bind(this),asset:o.get("id"),assets:[o.get("id")],display_balance:j,placeholder:"0.0",tabIndex:1}),m.collateral_balance?r.createElement("div",{style:{paddingTop:"0.5rem"}},m.collateral_balance):null),D?null:r.createElement("div",{className:O},r.createElement(p.a,{component:"label",content:"borrow.coll_ratio"}),r.createElement("input",{min:"0",max:"6",step:"0.05",onChange:this._onRatioChange.bind(this),value:d,type:"range",disabled:!c}),r.createElement("div",{className:"inline-block"},f.a.format_number(d,2)),m.below_maintenance||m.close_maintenance?r.createElement("div",{style:{maxWidth:"calc(100% - 50px)"},className:"float-right"},m.below_maintenance,m.close_maintenance):null),r.createElement("div",{className:"no-padding grid-content button-group no-overflow"},r.createElement("div",{onClick:this._onSubmit.bind(this),href:!0,className:T},r.createElement(p.a,{content:"borrow.adjust"})),r.createElement("div",{onClick:function(t){t.preventDefault(),e.setState(e._initialState(e.props))},href:!0,className:"button info"},r.createElement(p.a,{content:"wallet.reset"}))))))}}]),t}();I.propTypes={quote_asset:d.a.ChainAsset.isRequired,bitasset_balance:d.a.ChainObject,backing_asset:d.a.ChainAsset.isRequired,backing_balance:d.a.ChainObject,call_orders:d.a.ChainObjectsList,hasCallOrders:a.bool},I=Object(m.a)(I,{keep_updating:!0});var R=function(e){function t(){S(this,t);var e=x(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.state={smallScreen:!1},e}return j(t,r["Component"]),P(t,[{key:"show",value:function(){var e="borrow_modal_"+this.props.quote_asset;i.a.publish(e,"open")}},{key:"componentWillMount",value:function(){this.setState({smallScreen:window.innerHeight<=800})}},{key:"render",value:function(){var e=this.props,t=e.quote_asset,n=e.backing_asset,a=e.account,o="borrow_modal_"+t,s=a.get("balances").toJS(),i=void 0,l=void 0;if(s)for(var u in s)u===n&&(i=s[u]),u===t&&(l=s[u]);return r.createElement(c.a,{id:o,overlay:!0,ref:o},r.createElement("div",{className:"grid-block vertical"},r.createElement(I,{quote_asset:t,call_orders:a.get("call_orders"),hasCallOrders:a.get("call_orders")&&a.get("call_orders").size>0,modalId:o,bitasset_balance:l,backing_balance:i,backing_asset:n,hide_help:this.state.smallScreen,account:a})))}}]),t}();t.a=R},2352:function(e,t,n){"use strict";var r=n(0),a=n(2),o=n(16),s=n(3),i=n(2292),c=n(2308),l=n(2278),u=n(24),p=n(335),d=n(2277),m=n(22),h=n(1),f=n.n(h),g=n(2318),v=n(9),b=n.n(v),y=n(8),_=n(177),E=n(339),w=n(30),k=n(2319),O=n(67),C=n(271),T=function(e,t){return Math.floor(parseFloat(e)*Math.pow(10,t))},A=n(35),N=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var P=function(e,t,n,r){return new(n||(n=Promise))(function(a,o){function s(e){try{c(r.next(e))}catch(e){o(e)}}function i(e){try{c(r.throw(e))}catch(e){o(e)}}function c(e){e.done?a(e.value):new n(function(t){t(e.value)}).then(s,i)}c((r=r.apply(e,t||[])).next())})},S=Object(_.a)("WithdrawModal"),x=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.onWithdrawAmountChange=function(e){var t,r=e.amount,a=void 0,o=void 0;try{a="EOS"===n.props.withdrawInfo.type?4:n.props.withdrawInfo.precision||n.props.asset.get("precision")}catch(e){a=4}o=new C.BigNumber(1).dividedBy(Math.pow(10,a)),t=-1!==new C.BigNumber(r||1).dividedBy(o).toString().indexOf("."),n.setState({withdraw_amount:r,eosPrecisionError:t,outerPrecision:o.toString()})},n.onMemoToggleChange=function(e){var t=e.target.checked,r=(n.state.withdraw_address,void 0);n.setState({withMemo:t,memoContent:""}),t?(r={target:{value:n.state.withdraw_address}},n.onWithdrawOriginAddrChange(r)):(r={target:{value:n.state.withdraw_address_origin}},n.onWithdrawAddressChanged(r))},n.onWithdrawMemoChange=function(e){if(n.state.withMemo){var t=e.target.value;n.setState({memoContent:t});var r={target:{value:t?n.state.withdraw_address_origin+"["+t+"]":n.state.withdraw_address_origin}};n.onWithdrawAddressChanged(r)}},n.onWithdrawOriginAddrChange=function(e){var t=e.target.value;n.setState({withdraw_address_origin:t});var r={target:{value:n.state.withMemo&&n.state.memoContent?t+"["+n.state.memoContent+"]":t}};n.onWithdrawAddressChanged(r)},n._validateAddress=function(e){return P(n,void 0,void 0,regeneratorRuntime.mark(function t(){var n,r;return regeneratorRuntime.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return n=void 0,t.prev=1,t.next=4,Object(c.e)(e,this.props.account.get("name"),this.props.withdrawInfo.type);case 4:r=t.sent,S("Verify Res: ",r),n=r.valid,t.next=12;break;case 9:return t.prev=9,t.t0=t.catch(1),t.abrupt("return",this.setState({withdraw_address_loading:!1,withdraw_address_valid:!1,withdraw_address_error:!0}));case 12:this.setState({withdraw_address_loading:!1,withdraw_address_error:!1,withdraw_address_valid:n}),S("Valid: ",n);case 14:case"end":return t.stop()}},t,this,[[1,9]])}))},n.validateAddress=Object(w.debounce)(n._validateAddress,250),n.onSubmit=function(){var e=n.state.useCybAsFee,t=n.props.asset.get("precision"),r=T(n.state.withdraw_amount,t);T(n.props.withdrawInfo.fee,t);O.a.transfer(n.props.account.get("id"),n.props.withdrawInfo.gatewayAccount,r,n.props.asset.get("id"),n._withdrawMemo(),null,e?"1.3.0":n.props.asset.get("id")).catch(function(e){A.a.error(b.a.translate("modal.withdraw.lack_memo"))})},n._withdrawMemo=function(){return"withdraw:"+l.a+":"+n.props.withdrawInfo.type+":"+n.state.withdraw_address},n.invalid_address_message=r.createElement("div",{className:"has-error",style:{paddingTop:10}},r.createElement(f.a,{content:"gateway.valid_address",coin_type:n.props.withdrawInfo.type})),n.invalid_gateway_message=r.createElement("div",{className:"has-error",style:{paddingTop:10}},r.createElement(f.a,{content:"gateway.valid_service"})),n.state={withdraw_amount:0,withdraw_address:"",fadeOut:!1,fee_asset_id:"1.3.0",feeAmount:null,from_account:e.account,feeStatus:{},memo:null,hasPoolBalance:null,hasBalance:null,balanceError:null,error:!1,useCybAsFee:!0,eosPrecisionError:!1,withdraw_address_loading:!1,withdraw_address_valid:!1,outerPrecision:2,withMemo:!1,withdraw_address_origin:"",memoContent:""},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["Component"]),N(t,[{key:"onWithdrawAddressChanged",value:function(e){this.setState({withdraw_address:e.target.value,withdraw_address_loading:!0,withdraw_address_valid:!1}),this.validateAddress(e.target.value)}},{key:"componentWillMount",value:function(){}},{key:"componentDidUpdate",value:function(e){this.props.withdrawInfo&&e.withdraw&&this.props.withdrawInfo.type!=e.withdrawInfo.type&&this.setState({withMemo:!1})}},{key:"onFeeChanged",value:function(e){var t=e.asset;this.setState({fee_asset_id:t.get("id")},this._updateFee)}},{key:"_updateFee",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state,n=t.fee_asset_id,r=t.from_account,a=this._getAvailableAssets(t).fee_asset_types;if(1===a.length&&a[0]!==n&&(n=a[0]),S("UpdateFee: ",t),!r)return null;Object(E.b)({accountID:r.get("id"),feeID:n,options:["price_per_kbyte"],data:{type:"memo",content:this.props.receive_asset_symbol+":"+t.withdraw_address+(t.memo?":"+t.memo:"")}}).then(function(t){var n=t.fee,r=t.hasBalance,a=t.hasPoolBalance;e.setState({feeAmount:n,hasBalance:r,hasPoolBalance:a,error:!r||!a},e._checkBalance)})}},{key:"_getAvailableAssets",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state,t=e.from_account,n=e.feeStatus;var r=[];if(!t||!t.get("balances"))return{fee_asset_types:r};var a=e.from_account.get("balances").toJS();for(var o in r=Object.keys(a).sort(y.a.sortID),a){var i=s.b.getObject(o),c=s.b.getObject(a[o]);c&&0===c.get("balance")&&-1!==r.indexOf(o)&&r.splice(r.indexOf(o),1),i&&("1.3.0"===i.get("id")||y.a.isValidPrice(i.getIn(["options","core_exchange_rate"]))||r.splice(r.indexOf(o),1))}return{fee_asset_types:r=r.filter(function(e){return function(e){return void 0===n[e]||n[e]&&n[e].hasPoolBalance}(e)&&function(e){return void 0===n[e]||n[e]&&n[e].hasBalance}(e)})}}},{key:"_checkFeeStatus",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.state,n=t.from_account;if(n){var r=this._getAvailableAssets(t).fee_asset_types,a={},o=[];r.forEach(function(r){o.push(Object(E.b)({accountID:n.get("id"),feeID:r,options:["price_per_kbyte"],data:{type:"memo",content:"withdraw:"+l.a+":"+e.props.asset+":"+t.withdraw_address+(t.memo?":"+t.memo:"")}}))}),Promise.all(o).then(function(n){r.forEach(function(e,t){a[e]=n[t]}),y.a.are_equal_shallow(t.feeStatus,a)||e.setState({feeStatus:a}),e._checkBalance()}).catch(function(e){console.error(e)})}}},{key:"setNestedRef",value:function(e){this.nestedRef=e}},{key:"onFeeCheckboxChange",value:function(e){var t=e.target.checked;this.setState({useCybAsFee:t})}},{key:"_checkBalance",value:function(){var e=this.state,t=e.feeAmount,n=e.withdraw_amount,r=this.props.asset,a=this.props.account.get("balances").toJS()[this.props.asset.get("id")];if(a&&t){var o=Object(E.a)(n,r,t,a);if(null!==o)return this.setState({balanceError:!o}),o}}},{key:"render",value:function(){var e=this.props,t=(e.asset,e.withdrawInfo),n=e.modalId,a=this.state,o=a.withdraw_amount,s=a.withdraw_address,i=a.withdraw_address_valid,c=a.withdraw_address_loading,l=a.withdraw_address_error,u=a.useCybAsFee,m=a.eosPrecisionError,h=(a.memo,a.withdraw_address_origin),v=a.withMemo,b=a.memoContent,_=null,E=this.props.account.get("balances").toJS();if(Object.keys(E).length>0){var w=this.props.asset.get("id");_=w?r.createElement("span",null,r.createElement(f.a,{component:"span",content:"transfer.available"}),":",r.createElement(p.a,{balance:E[w]})):"No funds"}else _="No funds";var O=this._getAvailableAssets().fee_asset_types,C=s&&!c&&l,T=s&&!c&&!i&&!l,A=Number(o)>=t.minValue,N=!s||c||T||C||m||!A,P=y.a.replaceName(this.props.asset.get("symbol")).name,S=-1!==P.indexOf("EOS");return r.createElement(k.a,{modalId:n},r.createElement("div",{className:"content-block"},r.createElement("h3",null,r.createElement(f.a,{content:"gateway.withdraw"})," "+P,"(",this.props.receive_asset_symbol,")")),r.createElement("div",{className:"content-block"},r.createElement("p",null,r.createElement(f.a,{unsafe:!0,content:"gateway.withdraw_funds",type:this.props.receive_asset_symbol,asset:P}))),r.createElement("div",{className:"content-block"},r.createElement(d.a,{label:"modal.withdraw.amount",amount:this.state.withdraw_amount,asset:this.props.asset.get("id"),assets:[this.props.asset.get("id")],placeholder:"0.0",onChange:this.onWithdrawAmountChange.bind(this),display_balance:_}),r.createElement(g.a,{isI18n:!0,tips:[{name:"withdraw-amount",isError:!A&&0!=Number(o),isI18n:!0,message:"gateway.low_limit",messageParams:{symbol:this.props.withdrawInfo.type,amount:this.props.withdrawInfo.minValue}},{name:"withdraw-precision",isError:m,isI18n:!0,message:"gateway.precision_error",messageParams:{symbol:this.props.withdrawInfo.type,amount:this.state.outerPrecision}}],muiltTips:!1})),this.state.feeAmount?r.createElement("div",{className:"content-block gate_fee"},r.createElement(d.a,{refCallback:this.setNestedRef.bind(this),label:"transfer.fee",disabled:!0,amount:this.state.feeAmount.getAmount({real:!0}),onChange:this.onFeeChanged.bind(this),asset:this.state.feeAmount.asset_id,assets:O}),this.state.hasBalance?null:r.createElement("p",{className:"has-error no-margin",style:{paddingTop:10}},r.createElement(f.a,{content:"transfer.errors.noFeeBalance"})),this.state.hasPoolBalance?null:r.createElement("p",{className:"has-error no-margin",style:{paddingTop:10}},r.createElement(f.a,{content:"transfer.errors.noPoolBalance"}))):null,this.props.withdrawInfo.fee?r.createElement("div",{className:"amount-selector right-selector",style:{paddingBottom:20}},r.createElement("label",{className:"left-label"},r.createElement(f.a,{content:"gateway.fee"})),r.createElement("div",{className:"inline-label input-wrapper"},r.createElement("input",{type:"text",disabled:!0,value:this.props.withdrawInfo.fee}),r.createElement("div",{className:"form-label select floating-dropdown"},r.createElement("div",{className:"dropdown-wrapper inactive"},r.createElement("div",null,t.type))))):null,r.createElement("div",{className:"content-block"},r.createElement("div",{className:"inline-label use-cyb"},r.createElement(f.a,{className:"left-label",component:"lebel",content:"modal.withdraw.cyb_fee"}),r.createElement("div",{className:"switch"},r.createElement("input",{id:"useCybAsFee",type:"checkbox",value:u,defaultChecked:!0,onChange:this.onFeeCheckboxChange.bind(this)}),r.createElement("label",{htmlFor:"useCybAsFee"})))),S&&r.createElement("div",{className:"content-block"},r.createElement("div",{className:"inline-label use-cyb"},r.createElement(f.a,{className:"left-label",component:"lebel",content:"modal.withdraw.with_memo"}),r.createElement("div",{className:"switch"},r.createElement("input",{id:"withMemo",type:"checkbox",value:v,defaultChecked:!1,onChange:this.onMemoToggleChange}),r.createElement("label",{htmlFor:"withMemo"})))),r.createElement("div",{className:"content-block"},r.createElement("label",{className:"left-label"},S?r.createElement(f.a,{component:"span",content:"modal.withdraw.to_eos"}):r.createElement(f.a,{component:"span",content:"modal.withdraw.address"})),r.createElement("div",{className:"blocktrades-select-dropdown"},r.createElement("div",{className:"inline-label"},r.createElement("input",{type:"text",value:v?h:s,onChange:v?this.onWithdrawOriginAddrChange.bind(this):this.onWithdrawAddressChanged.bind(this),autoComplete:"off"}))),v&&r.createElement("div",{style:{marginTop:10}},r.createElement("label",{className:"left-label"},r.createElement(f.a,{component:"span",content:"gateway.withdraw_memo"})),r.createElement("div",{className:"blocktrades-select-dropdown"},r.createElement("div",{className:"inline-label"},r.createElement("input",{type:"text",value:b,onChange:this.onWithdrawMemoChange.bind(this),autoComplete:"off"})))),r.createElement(g.a,{isI18n:!0,placeholder:!0,tips:[{name:"withdraw-address",isError:-1!==s.indexOf(" "),isI18n:!0,message:"gateway.space_in_memo"},{name:"withdraw-address",isError:T,isI18n:!0,message:"gateway.valid_address",messageParams:{coin_type:this.props.withdrawInfo.type}},{name:"withdraw-gateway",isError:C,isI18n:!0,message:"gateway.valid_service"},{name:"withdraw-gateway",isError:c,isI18n:!0,message:"gateway.loading"}],muiltTips:!1})),r.createElement("div",{className:"button-group"},r.createElement(f.a,{content:"modal.withdraw.submit",onClick:this.onSubmit,className:"button"+(N?" disabled":"")})))}}]),t}();x.propTypes={account:m.a.ChainAccount.isRequired,issuer:m.a.ChainAccount.isRequired,asset:m.a.ChainAsset.isRequired,receive_asset_name:a.string,receive_asset_symbol:a.string,memo_prefix:a.string};var j=Object(u.a)(x,{keep_updating:!0,show_loader:!0});j=Object(o.connect)(j,{listenTo:function(){return[i.b]},getProps:function(e){var t=e.modalId,n=i.b.getState().withdrawInfo;return{open:i.b.getState().modals.get(t),withdrawInfo:n,receive_asset_symbol:n.type,asset:i.b.getState().withdrawInfo.asset}}});t.a=j},2353:function(e,t,n){"use strict";var r=n(0),a=n(16),o=n(2292),s=n(2279),i=n(24),c=n(22),l=n(37),u=n(1),p=n.n(u),d=n(343),m=n(9),h=n.n(m),f=n(8),g=n(31),v=n(2306),b=n.n(v),y=n(2319),_=function(e){var t=e.currentBalance,n=e.asset,a=f.a.replaceName(n.get("symbol"),!!n.get("bitasset")).name,o=r.createElement("span",{style:{border:"2px solid black",borderLeft:"none"},className:"form-label"},a);return r.createElement("div",{className:"SimpleTrade__withdraw-row",style:{fontSize:"1rem"}},r.createElement("label",{style:{fontSize:"1rem"}},h.a.translate("gateway.balance_asset",{asset:a}),":",r.createElement("span",{className:"inline-label"},r.createElement("input",{disabled:!0,style:{color:"white",border:"2px solid black",padding:10,width:"100%"},value:t&&t.getAmount?t.getAmount({real:!0}):0}),o)))},E=n(7),w=function(e){return r.createElement("img",Object.assign({style:{width:108,height:108,margin:"0 2em"},src:n(2357)("./"+e.symbol.toUpperCase()+".png"),alt:""},e))},k=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var O=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.getNewAddress=function(){var e=n.props.depositInfo;s.b.updateDepositAddress(e.accountName,e.type,!0)},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["Component"]),k(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.asset,a=t.depositInfo,o=t.modalId,s=t.type,i=this.props.balances.find(function(t){return t&&t.get&&t.get("asset_type")===e.props.asset.get("id")}),c=new l.a({asset_id:n.get("id"),precision:n.get("precision"),amount:i?i.get("balance"):0}),u=s,m=void 0,v=void 0,k=/^(.+)\[(.+)\]$/,O=void 0,C=void 0;a.meta&&a.meta.options&&(O=a.meta.options.name,C=a.meta.options.contractAddress),k.test(a.address)?(v=a.address.match(k)[1],m=a.address.match(k)[2]):m=a.address;var T="EOS"===s;return r.createElement(y.a,{modalId:o},r.createElement("h3",null,r.createElement(p.a,{content:"gateway.deposit"})," ",f.a.replaceName(n.get("symbol"),!1).name,"(",u,")"),r.createElement("div",{className:"deposit-info flex-wrapper"},r.createElement("div",{className:"asset-section flex-wrapper-main"},r.createElement("ul",{className:"deposit-info-asset no-margin"},O&&r.createElement("li",null,r.createElement(p.a,{content:"gateway.project_name",className:"with-colon"}),r.createElement("strong",null,O)),C&&r.createElement("li",null,r.createElement(p.a,{content:"gateway.contract_address",className:"with-colon"}),r.createElement("a",{href:a.meta.contractExplorer,target:"_blank",rel:"noopener noreferrer"},r.createElement("strong",null,C)))),r.createElement("hr",null),r.createElement("p",{className:"deposit-info-common"},r.createElement(p.a,{unsafe:!0,content:"gateway.add_funds",type:u,account:a.accountName}))),r.createElement(w,{symbol:u})),i&&r.createElement(_,{currentBalance:c,asset:n}),r.createElement("div",{className:"SimpleTrade__withdraw-row"},T?r.createElement(p.a,{component:"p",style:{fontSize:"bold"},content:"gateway.deposit_eos",account:v}):[r.createElement("p",{style:{marginBottom:10},"data-place":"right",key:"deposit_tip","data-tip":h.a.translate("tooltip.deposit_tip",{asset:u})},r.createElement("span",{className:"help-tooltip"},h.a.translate("gateway.deposit_to",{asset:u}))),r.createElement("section",{key:"deposit_qr_code",className:"text-center"},r.createElement("div",{className:"wrapper",style:{padding:"8px",background:"white",display:"inline-block"}},r.createElement(b.a,{level:"L",size:140,value:m})))],a?r.createElement("label",null,r.createElement("span",{className:"inline-label"},r.createElement("input",{id:"depositAddress",readOnly:!0,type:"text",value:m}),r.createElement(d.a,{text:m}))):r.createElement(g.a,{type:"three-bounce"}),r.createElement("div",{className:"SimpleTrade__withdraw-row"},r.createElement("p",null,"Current address is generated"," ",E(a.createAt).fromNow())),r.createElement("div",{className:"button-group SimpleTrade__withdraw-row"},r.createElement("button",{className:"button",onClick:this.getNewAddress,type:"submit"},T?r.createElement(p.a,{content:"gateway.generate_new_eos"}):r.createElement(p.a,{content:"gateway.generate_new"})))))}}]),t}();O.propTypes={asset:c.a.ChainAsset.isRequired,balances:c.a.ChainObjectsList};var C=Object(i.a)(O,{keep_updating:!0,show_loader:!0});C=Object(a.connect)(C,{listenTo:function(){return[o.b]},getProps:function(e){var t=e.modalId;return{open:o.b.getState().modals.get(t),depositInfo:o.b.getState().depositInfo,type:o.b.getState().depositInfo.type,asset:o.b.getState().depositInfo.asset}}});t.a=C},2354:function(e,t,n){"use strict";var r=n(0),a=n.n(r),o=n(26),s=n.n(o),i=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function c(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}var l={get:function(e,t,n){if(!t)return e;var r=p(t),a=void 0;try{a=r.reduce(function(e,t){return e[t]},e)}catch(e){}return void 0!==a?a:n},set:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1],n=arguments[2],r=p(t),a=void 0,o=e;for(;(a=r.shift())&&r.length;)o[a]||(o[a]={}),o=o[a];return o[a]=n,e},takeRight:function(e,t){var n=t>e.length?0:e.length-t;return e.slice(n)},last:function(e){return e[e.length-1]},orderBy:function(e,t,n,r){return e.sort(function(e,a){for(var o=0;o<t.length;o+=1){var s=t[o],i=!1===n[o]||"desc"===n[o],c=s(e,a);if(c)return i?-c:c}return n[0]?e[r]-a[r]:a[r]-e[r]})},range:function(e){for(var t=[],n=0;n<e;n+=1)t.push(e);return t},remove:function(e,t){return e.filter(function(n,r){var a=t(n);return!!a&&(e.splice(r,1),!0)})},clone:function(e){try{return JSON.parse(JSON.stringify(e,function(e,t){return"function"==typeof t?t.toString():t}))}catch(t){return e}},getFirstDefined:function(){for(var e=0;e<arguments.length;e+=1)if(void 0!==(arguments.length<=e?void 0:arguments[e]))return arguments.length<=e?void 0:arguments[e]},sum:function(e){return e.reduce(function(e,t){return e+t},0)},makeTemplateComponent:function(e,t){if(!t)throw new Error("No displayName found for template component:",e);var n=function(t){var n=t.children,r=t.className,o=c(t,["children","className"]);return a.a.createElement("div",i({className:s()(e,r)},o),n)};return n.displayName=t,n},groupBy:function(e,t){return e.reduce(function(e,n,r){var a="function"==typeof t?t(n,r):n[t];return e[a]=u(e[a])?e[a]:[],e[a].push(n),e},{})},isArray:u,splitProps:function(e){var t=e.className,n=e.style,r=c(e,["className","style"]);return{className:t,style:n,rest:r||{}}},compactObject:function(e){var t={};e&&Object.keys(e).map(function(n){return Object.prototype.hasOwnProperty.call(e,n)&&void 0!==e[n]&&void 0!==e[n]&&(t[n]=e[n]),!0});return t},isSortingDesc:function(e){return!("desc"!==e.sort&&!0!==e.desc&&!1!==e.asc)},normalizeComponent:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e;return"function"==typeof e?Object.getPrototypeOf(e).isReactComponent?a.a.createElement(e,t):e(t):n},asPx:function(e){return e=Number(e),Number.isNaN(e)?null:e+"px"}};function u(e){return Array.isArray(e)}function p(e){return function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(u(t))for(var r=0;r<t.length;r+=1)e(t[r],n);else n.push(t);return n}(e).join(".").replace(/\[/g,".").replace(/\]/g,"").split(".")}var d=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var m=function(e){return function(t){function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,e),d(n,[{key:"componentWillMount",value:function(){this.setStateWithData(this.getDataModel(this.getResolvedState(),!0))}},{key:"componentDidMount",value:function(){this.fireFetchData()}},{key:"componentWillReceiveProps",value:function(e,t){var n=this.getResolvedState(),r=this.getResolvedState(e,t);["sorted","filtered","resized","expanded"].forEach(function(e){var t="default"+(e.charAt(0).toUpperCase()+e.slice(1));JSON.stringify(n[t])!==JSON.stringify(r[t])&&(r[e]=r[t])});["sortable","filterable","resizable"].forEach(function(e){if(n[e]!==r[e]){var t=e.replace("able","")+"ed",a="default"+(t.charAt(0).toUpperCase()+t.slice(1));r[t]=r[a]}}),n.data===r.data&&n.columns===r.columns&&n.pivotBy===r.pivotBy&&n.sorted===r.sorted&&n.filtered===r.filtered||this.setStateWithData(this.getDataModel(r,n.data!==r.data))}},{key:"setStateWithData",value:function(e,t){var n=this,r=this.getResolvedState(),a=this.getResolvedState({},e),o=a.freezeWhenExpanded;if(a.frozen=!1,o)for(var s=Object.keys(a.expanded),i=0;i<s.length;i+=1)if(a.expanded[s[i]]){a.frozen=!0;break}return(r.frozen&&!a.frozen||r.sorted!==a.sorted||r.filtered!==a.filtered||r.showFilters!==a.showFilters||!a.frozen&&r.resolvedData!==a.resolvedData)&&((r.sorted!==a.sorted&&this.props.collapseOnSortingChange||r.filtered!==a.filtered||r.showFilters!==a.showFilters||r.sortedData&&!a.frozen&&r.resolvedData!==a.resolvedData&&this.props.collapseOnDataChange)&&(a.expanded={}),Object.assign(a,this.getSortedData(a))),r.filtered!==a.filtered&&(a.page=0),a.sortedData&&(a.pages=a.manual?a.pages:Math.ceil(a.sortedData.length/a.pageSize),a.page=Math.max(a.page>=a.pages?a.pages-1:a.page,0)),this.setState(a,function(){t&&t(),r.page===a.page&&r.pageSize===a.pageSize&&r.sorted===a.sorted&&r.filtered===a.filtered||n.fireFetchData()})}}]),n}()},h=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var s,i=e[Symbol.iterator]();!(r=(s=i.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{!r&&i.return&&i.return()}finally{if(a)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),f=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},g=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function v(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}var y=function(e){return function(t){function n(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,e),g(n,[{key:"getResolvedState",value:function(e,t){return f({},l.compactObject(this.state),l.compactObject(this.props),l.compactObject(t),l.compactObject(e))}},{key:"getDataModel",value:function(e,t){var n=this,r=e.columns,o=e.pivotBy,s=void 0===o?[]:o,i=e.data,c=e.resolveData,u=e.pivotIDKey,p=e.pivotValKey,d=e.subRowsKey,m=e.aggregatedKey,g=e.nestingLevelKey,y=e.originalKey,_=e.indexKey,E=e.groupedByPivotKey,w=e.SubComponent,k=!1;r.forEach(function(e){e.columns&&(k=!0)});var O=[].concat(b(r)),C=r.find(function(e){return e.expander||e.columns&&e.columns.some(function(e){return e.expander})});C&&!C.expander&&(C=C.columns.find(function(e){return e.expander})),w&&!C&&(O=[C={expander:!0}].concat(b(O)));var T=[],A=function(e,t){var r=function(e,t){var r=void 0;if((r=e.expander?f({},n.props.column,n.props.expanderDefaults,e):f({},n.props.column,e)).maxWidth<r.minWidth&&(r.minWidth=r.maxWidth),t&&(r.parentColumn=t),"string"==typeof r.accessor){r.id=r.id||r.accessor;var a=r.accessor;return r.accessor=function(e){return l.get(e,a)},r}if(r.accessor&&!r.id)throw console.warn(r),new Error("A column id is required if using a non-string accessor for column above.");return r.accessor||(r.accessor=function(){}),r}(e,t);return T.push(r),r},N=O.map(function(e){return e.columns?f({},e,{columns:e.columns.map(function(t){return A(t,e)})}):A(e)}).slice(),P=[],S=(N=(N=N.map(function(e){if(e.columns){var t=e.columns.filter(function(e){return!(s.indexOf(e.id)>-1)&&l.getFirstDefined(e.show,!0)});return f({},e,{columns:t})}return e})).filter(function(e){return e.columns?e.columns.length:!(s.indexOf(e.id)>-1)&&l.getFirstDefined(e.show,!0)})).findIndex(function(e){return e.pivot});if(s.length){var x=[];s.forEach(function(e){var t=T.find(function(t){return t.id===e});t&&x.push(t)});var j=x.reduce(function(e,t){return e&&e===t.parentColumn&&t.parentColumn},x[0].parentColumn),I=k&&j.Header,R={Header:I=I||function(){return a.a.createElement("strong",null,"Pivoted")},columns:x.map(function(e){return f({},n.props.pivotDefaults,e,{pivoted:!0})})};S>=0?(R=f({},N[S],R),N.splice(S,1,R)):N.unshift(R)}var D=[],M=[],F=function(e,t){D.push(f({},n.props.column,t,{columns:e})),M=[]};N.forEach(function(e){if(e.columns)return P=P.concat(e.columns),M.length>0&&F(M),void F(e.columns,e);P.push(e),M.push(e)}),k&&M.length>0&&F(M);var q=this.resolvedData;this.resolvedData&&!t||(q=c(i),this.resolvedData=q),q=q.map(function(e,t){return function e(t,n){var r,a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,o=(v(r={},y,t),v(r,_,n),v(r,d,t[d]),v(r,g,a),r);return T.forEach(function(e){e.expander||(o[e.id]=e.accessor(t))}),o[d]&&(o[d]=o[d].map(function(t,n){return e(t,n,a+1)})),o}(e,t)});var B=P.filter(function(e){return!e.expander&&e.aggregate});if(s.length){q=function e(t,n){var r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;if(r===n.length)return t;var a=Object.entries(l.groupBy(t,n[r])).map(function(e){var t,a=h(e,2),o=a[0],s=a[1];return v(t={},u,n[r]),v(t,p,o),v(t,n[r],o),v(t,d,s),v(t,g,r),v(t,E,!0),t});return a=a.map(function(t){var a,o=e(t[d],n,r+1);return f({},t,(v(a={},d,o),v(a,m,!0),a),function(e){var t={};return B.forEach(function(n){var r=e.map(function(e){return e[n.id]});t[n.id]=n.aggregate(r,e)}),t}(o))})}(q,s)}return f({},e,{resolvedData:q,allVisibleColumns:P,headerGroups:D,allDecoratedColumns:T,hasHeaderGroups:k})}},{key:"getSortedData",value:function(e){var t=e.manual,n=e.sorted,r=e.filtered,a=e.defaultFilterMethod,o=e.resolvedData,s=e.allVisibleColumns,i={};return e.allDecoratedColumns.filter(function(e){return e.sortMethod}).forEach(function(e){i[e.id]=e.sortMethod}),{sortedData:t?o:this.sortData(this.filterData(o,r,a,s),n,i)}}},{key:"fireFetchData",value:function(){this.props.onFetchData(this.getResolvedState(),this)}},{key:"getPropOrState",value:function(e){return l.getFirstDefined(this.props[e],this.state[e])}},{key:"getStateOrProp",value:function(e){return l.getFirstDefined(this.state[e],this.props[e])}},{key:"filterData",value:function(e,t,n,r){var a=this,o=e;return t.length&&(o=(o=t.reduce(function(e,t){var a=r.find(function(e){return e.id===t.id});if(!a||!1===a.filterable)return e;var o=a.filterMethod||n;return a.filterAll?o(t,e,a):e.filter(function(e){return o(t,e,a)})},o)).map(function(e){return e[a.props.subRowsKey]?f({},e,v({},a.props.subRowsKey,a.filterData(e[a.props.subRowsKey],t,n,r))):e}).filter(function(e){return!e[a.props.subRowsKey]||e[a.props.subRowsKey].length>0})),o}},{key:"sortData",value:function(e,t){var n=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t.length)return e;var a=(this.props.orderByMethod||l.orderBy)(e,t.map(function(e){return r[e.id]?function(t,n){return r[e.id](t[e.id],n[e.id],e.desc)}:function(t,r){return n.props.defaultSortMethod(t[e.id],r[e.id],e.desc)}}),t.map(function(e){return!e.desc}),this.props.indexKey);return a.forEach(function(e){e[n.props.subRowsKey]&&(e[n.props.subRowsKey]=n.sortData(e[n.props.subRowsKey],t,r))}),a}},{key:"getMinRows",value:function(){return l.getFirstDefined(this.props.minRows,this.getStateOrProp("pageSize"))}},{key:"onPageChange",value:function(e){var t=this.props,n=t.onPageChange,r=t.collapseOnPageChange,a={page:e};r&&(a.expanded={}),this.setStateWithData(a,function(){return n&&n(e)})}},{key:"onPageSizeChange",value:function(e){var t=this.props.onPageSizeChange,n=this.getResolvedState(),r=n.pageSize*n.page,a=Math.floor(r/e);this.setStateWithData({pageSize:e,page:a},function(){return t&&t(e,a)})}},{key:"sortColumn",value:function(e,t){var n=this.getResolvedState(),r=n.sorted,a=n.skipNextSort,o=n.defaultSortDesc,s=Object.prototype.hasOwnProperty.call(e,"defaultSortDesc")?e.defaultSortDesc:o,i=!s;if(a)this.setStateWithData({skipNextSort:!1});else{var c=this.props.onSortedChange,u=l.clone(r||[]).map(function(e){return e.desc=l.isSortingDesc(e),e});if(l.isArray(e)){var p=u.findIndex(function(t){return t.id===e[0].id});if(p>-1)u[p].desc===i?t?u.splice(p,e.length):e.forEach(function(e,t){u[p+t].desc=s}):e.forEach(function(e,t){u[p+t].desc=i}),t||(u=u.slice(p,e.length));else u=t?u.concat(e.map(function(e){return{id:e.id,desc:s}})):e.map(function(e){return{id:e.id,desc:s}})}else{var d=u.findIndex(function(t){return t.id===e.id});if(d>-1){var m=u[d];m.desc===i?t?u.splice(d,1):(m.desc=s,u=[m]):(m.desc=i,t||(u=[m]))}else t?u.push({id:e.id,desc:s}):u=[{id:e.id,desc:s}]}this.setStateWithData({page:!r.length&&u.length||!t?0:this.state.page,sorted:u},function(){return c&&c(u,e,t)})}}},{key:"filterColumn",value:function(e,t){var n=this.getResolvedState().filtered,r=this.props.onFilteredChange,a=(n||[]).filter(function(t){return t.id!==e.id});""!==t&&a.push({id:e.id,value:t}),this.setStateWithData({filtered:a},function(){return r&&r(a,e,t)})}},{key:"resizeColumnStart",value:function(e,t,n){var r=this;e.stopPropagation();var a=e.target.parentElement.getBoundingClientRect().width,o=void 0;o=n?e.changedTouches[0].pageX:e.pageX,this.trapEvents=!0,this.setStateWithData({currentlyResizing:{id:t.id,startX:o,parentWidth:a}},function(){n?(document.addEventListener("touchmove",r.resizeColumnMoving),document.addEventListener("touchcancel",r.resizeColumnEnd),document.addEventListener("touchend",r.resizeColumnEnd)):(document.addEventListener("mousemove",r.resizeColumnMoving),document.addEventListener("mouseup",r.resizeColumnEnd),document.addEventListener("mouseleave",r.resizeColumnEnd))})}},{key:"resizeColumnMoving",value:function(e){e.stopPropagation();var t=this.props.onResizedChange,n=this.getResolvedState(),r=n.resized,a=n.currentlyResizing,o=r.filter(function(e){return e.id!==a.id}),s=void 0;"touchmove"===e.type?s=e.changedTouches[0].pageX:"mousemove"===e.type&&(s=e.pageX);var i=Math.max(a.parentWidth+s-a.startX,11);o.push({id:a.id,value:i}),this.setStateWithData({resized:o},function(){return t&&t(o,e)})}},{key:"resizeColumnEnd",value:function(e){e.stopPropagation();var t="touchend"===e.type||"touchcancel"===e.type;t&&(document.removeEventListener("touchmove",this.resizeColumnMoving),document.removeEventListener("touchcancel",this.resizeColumnEnd),document.removeEventListener("touchend",this.resizeColumnEnd)),document.removeEventListener("mousemove",this.resizeColumnMoving),document.removeEventListener("mouseup",this.resizeColumnEnd),document.removeEventListener("mouseleave",this.resizeColumnEnd),t||this.setStateWithData({skipNextSort:!0,currentlyResizing:!1})}}]),n}()},_=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),E=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};var w=function(e){return a.a.createElement("button",E({type:"button"},e,{className:"-btn"}),e.children)},k=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.getSafePage=n.getSafePage.bind(n),n.changePage=n.changePage.bind(n),n.applyPage=n.applyPage.bind(n),n.state={page:e.page},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["Component"]),_(t,[{key:"componentWillReceiveProps",value:function(e){this.setState({page:e.page})}},{key:"getSafePage",value:function(e){return Number.isNaN(e)&&(e=this.props.page),Math.min(Math.max(e,0),this.props.pages-1)}},{key:"changePage",value:function(e){e=this.getSafePage(e),this.setState({page:e}),this.props.page!==e&&this.props.onPageChange(e)}},{key:"applyPage",value:function(e){e&&e.preventDefault();var t=this.state.page;this.changePage(""===t?this.props.page:t)}},{key:"render",value:function(){var e=this,t=this.props,n=t.pages,r=t.page,o=t.showPageSizeOptions,i=t.pageSizeOptions,c=t.pageSize,l=t.showPageJump,u=t.canPrevious,p=t.canNext,d=t.onPageSizeChange,m=t.className,h=t.PreviousComponent,f=void 0===h?w:h,g=t.NextComponent,v=void 0===g?w:g;return a.a.createElement("div",{className:s()(m,"-pagination"),style:this.props.style},a.a.createElement("div",{className:"-previous"},a.a.createElement(f,{onClick:function(){u&&e.changePage(r-1)},disabled:!u},this.props.previousText)),a.a.createElement("div",{className:"-center"},a.a.createElement("span",{className:"-pageInfo"},this.props.pageText," ",l?a.a.createElement("div",{className:"-pageJump"},a.a.createElement("input",{type:""===this.state.page?"text":"number",onChange:function(t){var n=t.target.value,r=n-1;if(""===n)return e.setState({page:n});e.setState({page:e.getSafePage(r)})},value:""===this.state.page?"":this.state.page+1,onBlur:this.applyPage,onKeyPress:function(t){13!==t.which&&13!==t.keyCode||e.applyPage()}})):a.a.createElement("span",{className:"-currentPage"},r+1)," ",this.props.ofText," ",a.a.createElement("span",{className:"-totalPages"},n||1)),o&&a.a.createElement("span",{className:"select-wrap -pageSizeOptions"},a.a.createElement("select",{onChange:function(e){return d(Number(e.target.value))},value:c},i.map(function(t,n){return a.a.createElement("option",{key:n,value:t},t," ",e.props.rowsText)})))),a.a.createElement("div",{className:"-next"},a.a.createElement(v,{onClick:function(){p&&e.changePage(r+1)},disabled:!p},this.props.nextText)))}}]),t}(),O=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function C(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}var T=function(){return{}},A={data:[],resolveData:function(e){return e},loading:!1,showPagination:!0,showPaginationTop:!1,showPaginationBottom:!0,showPageSizeOptions:!0,pageSizeOptions:[5,10,20,25,50,100],defaultPageSize:20,showPageJump:!0,collapseOnSortingChange:!0,collapseOnPageChange:!0,collapseOnDataChange:!0,freezeWhenExpanded:!1,sortable:!0,multiSort:!0,resizable:!0,filterable:!1,defaultSortDesc:!1,defaultSorted:[],defaultFiltered:[],defaultResized:[],defaultExpanded:{},defaultFilterMethod:function(e,t,n){var r=e.pivotId||e.id;return void 0===t[r]||String(t[r]).startsWith(e.value)},defaultSortMethod:function(e,t,n){return e=null===e||void 0===e?"":e,t=null===t||void 0===t?"":t,(e="string"==typeof e?e.toLowerCase():e)>(t="string"==typeof t?t.toLowerCase():t)?1:e<t?-1:0},onPageChange:void 0,onPageSizeChange:void 0,onSortedChange:void 0,onFilteredChange:void 0,onResizedChange:void 0,onExpandedChange:void 0,pivotBy:void 0,pivotValKey:"_pivotVal",pivotIDKey:"_pivotID",subRowsKey:"_subRows",aggregatedKey:"_aggregated",nestingLevelKey:"_nestingLevel",originalKey:"_original",indexKey:"_index",groupedByPivotKey:"_groupedByPivot",onFetchData:function(){return null},className:"",style:{},getProps:T,getTableProps:T,getTheadGroupProps:T,getTheadGroupTrProps:T,getTheadGroupThProps:T,getTheadProps:T,getTheadTrProps:T,getTheadThProps:T,getTheadFilterProps:T,getTheadFilterTrProps:T,getTheadFilterThProps:T,getTbodyProps:T,getTrGroupProps:T,getTrProps:T,getTdProps:T,getTfootProps:T,getTfootTrProps:T,getTfootTdProps:T,getPaginationProps:T,getLoadingProps:T,getNoDataProps:T,getResizerProps:T,column:{Cell:void 0,Header:void 0,Footer:void 0,Aggregated:void 0,Pivot:void 0,PivotValue:void 0,Expander:void 0,Filter:void 0,sortable:void 0,resizable:void 0,filterable:void 0,show:!0,minWidth:100,className:"",style:{},getProps:T,aggregate:void 0,headerClassName:"",headerStyle:{},getHeaderProps:T,footerClassName:"",footerStyle:{},getFooterProps:T,filterMethod:void 0,filterAll:!1,sortMethod:void 0},expanderDefaults:{sortable:!1,resizable:!1,filterable:!1,width:35},pivotDefaults:{},previousText:"Previous",nextText:"Next",loadingText:"Loading...",noDataText:"No rows found",pageText:"Page",ofText:"of",rowsText:"rows",TableComponent:function(e){var t=e.children,n=e.className,r=C(e,["children","className"]);return a.a.createElement("div",O({className:s()("rt-table",n),role:"grid"},r),t)},TheadComponent:l.makeTemplateComponent("rt-thead","Thead"),TbodyComponent:l.makeTemplateComponent("rt-tbody","Tbody"),TrGroupComponent:function(e){var t=e.children,n=e.className,r=C(e,["children","className"]);return a.a.createElement("div",O({className:s()("rt-tr-group",n),role:"rowgroup"},r),t)},TrComponent:function(e){var t=e.children,n=e.className,r=C(e,["children","className"]);return a.a.createElement("div",O({className:s()("rt-tr",n),role:"row"},r),t)},ThComponent:function(e){var t=e.toggleSort,n=e.className,r=e.children,o=C(e,["toggleSort","className","children"]);return a.a.createElement("div",O({className:s()("rt-th",n),onClick:function(e){return t&&t(e)},role:"columnheader",tabIndex:"-1"},o),r)},TdComponent:function(e){e.toggleSort;var t=e.className,n=e.children,r=C(e,["toggleSort","className","children"]);return a.a.createElement("div",O({className:s()("rt-td",t),role:"gridcell"},r),n)},TfootComponent:l.makeTemplateComponent("rt-tfoot","Tfoot"),FilterComponent:function(e){var t=e.filter,n=e.onChange;return a.a.createElement("input",{type:"text",style:{width:"100%"},value:t?t.value:"",onChange:function(e){return n(e.target.value)}})},ExpanderComponent:function(e){var t=e.isExpanded;return a.a.createElement("div",{className:s()("rt-expander",t&&"-open")},"•")},PivotValueComponent:function(e){var t=e.subRows,n=e.value;return a.a.createElement("span",null,n," ",t&&"("+t.length+")")},AggregatedComponent:function(e){var t=e.subRows,n=e.column,r=t.filter(function(e){return void 0!==e[n.id]}).map(function(e,r){return a.a.createElement("span",{key:r},e[n.id],r<t.length-1?", ":"")});return a.a.createElement("span",null,r)},PivotComponent:void 0,PaginationComponent:k,PreviousComponent:void 0,NextComponent:void 0,LoadingComponent:function(e){var t=e.className,n=e.loading,r=e.loadingText,o=C(e,["className","loading","loadingText"]);return a.a.createElement("div",O({className:s()("-loading",{"-active":n},t)},o),a.a.createElement("div",{className:"-loading-inner"},r))},NoDataComponent:l.makeTemplateComponent("rt-noData","NoData"),ResizerComponent:l.makeTemplateComponent("rt-resizer","Resizer"),PadRowComponent:function(){return a.a.createElement("span",null," ")}},N=n(2),P=n.n(N),S={data:P.a.any,loading:P.a.bool,showPagination:P.a.bool,showPaginationTop:P.a.bool,showPaginationBottom:P.a.bool,showPageSizeOptions:P.a.bool,pageSizeOptions:P.a.array,defaultPageSize:P.a.number,showPageJump:P.a.bool,collapseOnSortingChange:P.a.bool,collapseOnPageChange:P.a.bool,collapseOnDataChange:P.a.bool,freezeWhenExpanded:P.a.bool,sortable:P.a.bool,resizable:P.a.bool,filterable:P.a.bool,defaultSortDesc:P.a.bool,defaultSorted:P.a.array,defaultFiltered:P.a.array,defaultResized:P.a.array,defaultExpanded:P.a.object,defaultFilterMethod:P.a.func,defaultSortMethod:P.a.func,onPageChange:P.a.func,onPageSizeChange:P.a.func,onSortedChange:P.a.func,onFilteredChange:P.a.func,onResizedChange:P.a.func,onExpandedChange:P.a.func,pivotBy:P.a.array,pivotValKey:P.a.string,pivotIDKey:P.a.string,subRowsKey:P.a.string,aggregatedKey:P.a.string,nestingLevelKey:P.a.string,originalKey:P.a.string,indexKey:P.a.string,groupedByPivotKey:P.a.string,onFetchData:P.a.func,className:P.a.string,style:P.a.object,getProps:P.a.func,getTableProps:P.a.func,getTheadGroupProps:P.a.func,getTheadGroupTrProps:P.a.func,getTheadGroupThProps:P.a.func,getTheadProps:P.a.func,getTheadTrProps:P.a.func,getTheadThProps:P.a.func,getTheadFilterProps:P.a.func,getTheadFilterTrProps:P.a.func,getTheadFilterThProps:P.a.func,getTbodyProps:P.a.func,getTrGroupProps:P.a.func,getTrProps:P.a.func,getTdProps:P.a.func,getTfootProps:P.a.func,getTfootTrProps:P.a.func,getTfootTdProps:P.a.func,getPaginationProps:P.a.func,getLoadingProps:P.a.func,getNoDataProps:P.a.func,getResizerProps:P.a.func,columns:P.a.arrayOf(P.a.shape({Cell:P.a.oneOfType([P.a.element,P.a.string,P.a.func]),Header:P.a.oneOfType([P.a.element,P.a.string,P.a.func]),Footer:P.a.oneOfType([P.a.element,P.a.string,P.a.func]),Aggregated:P.a.oneOfType([P.a.element,P.a.string,P.a.func]),Pivot:P.a.oneOfType([P.a.element,P.a.string,P.a.func]),PivotValue:P.a.oneOfType([P.a.element,P.a.string,P.a.func]),Expander:P.a.oneOfType([P.a.element,P.a.string,P.a.func]),Filter:P.a.oneOfType([P.a.element,P.a.func]),sortable:P.a.bool,resizable:P.a.bool,filterable:P.a.bool,show:P.a.bool,minWidth:P.a.number,className:P.a.string,style:P.a.object,getProps:P.a.func,aggregate:P.a.func,headerClassName:P.a.string,headerStyle:P.a.object,getHeaderProps:P.a.func,footerClassName:P.a.string,footerStyle:P.a.object,getFooterProps:P.a.object,filterMethod:P.a.func,filterAll:P.a.bool,sortMethod:P.a.func})),expanderDefaults:P.a.shape({sortable:P.a.bool,resizable:P.a.bool,filterable:P.a.bool,width:P.a.number}),pivotDefaults:P.a.object,previousText:P.a.node,nextText:P.a.node,loadingText:P.a.node,noDataText:P.a.node,pageText:P.a.node,ofText:P.a.node,rowsText:P.a.node,TableComponent:P.a.oneOfType([P.a.func,P.a.element]),TheadComponent:P.a.oneOfType([P.a.func,P.a.element]),TbodyComponent:P.a.oneOfType([P.a.func,P.a.element]),TrGroupComponent:P.a.oneOfType([P.a.func,P.a.element]),TrComponent:P.a.oneOfType([P.a.func,P.a.element]),ThComponent:P.a.oneOfType([P.a.func,P.a.element]),TdComponent:P.a.oneOfType([P.a.func,P.a.element]),TfootComponent:P.a.oneOfType([P.a.func,P.a.element]),FilterComponent:P.a.oneOfType([P.a.func,P.a.element]),ExpanderComponent:P.a.oneOfType([P.a.func,P.a.element]),PivotValueComponent:P.a.oneOfType([P.a.func,P.a.element]),AggregatedComponent:P.a.oneOfType([P.a.func,P.a.element]),PivotComponent:P.a.oneOfType([P.a.func,P.a.element]),PaginationComponent:P.a.oneOfType([P.a.func,P.a.element]),PreviousComponent:P.a.oneOfType([P.a.func,P.a.element]),NextComponent:P.a.oneOfType([P.a.func,P.a.element]),LoadingComponent:P.a.oneOfType([P.a.func,P.a.element]),NoDataComponent:P.a.oneOfType([P.a.func,P.a.element]),ResizerComponent:P.a.oneOfType([P.a.func,P.a.element]),PadRowComponent:P.a.oneOfType([P.a.func,P.a.element])},x=function(){return function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return function(e,t){var n=[],r=!0,a=!1,o=void 0;try{for(var s,i=e[Symbol.iterator]();!(r=(s=i.next()).done)&&(n.push(s.value),!t||n.length!==t);r=!0);}catch(e){a=!0,o=e}finally{try{!r&&i.return&&i.return()}finally{if(a)throw o}}return n}(e,t);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),j=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},I=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var R=function(e){function t(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);var n=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.getResolvedState=n.getResolvedState.bind(n),n.getDataModel=n.getDataModel.bind(n),n.getSortedData=n.getSortedData.bind(n),n.fireFetchData=n.fireFetchData.bind(n),n.getPropOrState=n.getPropOrState.bind(n),n.getStateOrProp=n.getStateOrProp.bind(n),n.filterData=n.filterData.bind(n),n.sortData=n.sortData.bind(n),n.getMinRows=n.getMinRows.bind(n),n.onPageChange=n.onPageChange.bind(n),n.onPageSizeChange=n.onPageSizeChange.bind(n),n.sortColumn=n.sortColumn.bind(n),n.filterColumn=n.filterColumn.bind(n),n.resizeColumnStart=n.resizeColumnStart.bind(n),n.resizeColumnEnd=n.resizeColumnEnd.bind(n),n.resizeColumnMoving=n.resizeColumnMoving.bind(n),n.state={page:0,pageSize:e.defaultPageSize,sorted:e.defaultSorted,expanded:e.defaultExpanded,filtered:e.defaultFiltered,resized:e.defaultResized,currentlyResizing:!1,skipNextSort:!1},n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,y(m(r["Component"]))),I(t,[{key:"render",value:function(){var e=this,t=this.getResolvedState(),n=t.children,r=t.className,o=t.style,i=t.getProps,c=t.getTableProps,u=t.getTheadGroupProps,p=t.getTheadGroupTrProps,d=t.getTheadGroupThProps,m=t.getTheadProps,h=t.getTheadTrProps,f=t.getTheadThProps,g=t.getTheadFilterProps,v=t.getTheadFilterTrProps,b=t.getTheadFilterThProps,y=t.getTbodyProps,_=t.getTrGroupProps,E=t.getTrProps,w=t.getTdProps,k=t.getTfootProps,O=t.getTfootTrProps,C=t.getTfootTdProps,T=t.getPaginationProps,N=t.getLoadingProps,P=t.getNoDataProps,S=t.getResizerProps,I=t.showPagination,R=t.showPaginationTop,D=t.showPaginationBottom,M=t.manual,F=t.loadingText,q=t.noDataText,B=t.sortable,L=t.multiSort,Q=t.resizable,U=t.filterable,K=t.pivotIDKey,V=t.pivotValKey,W=t.pivotBy,z=t.subRowsKey,G=t.aggregatedKey,H=t.originalKey,J=t.indexKey,Y=t.groupedByPivotKey,X=t.loading,$=t.pageSize,Z=t.page,ee=t.sorted,te=t.filtered,ne=t.resized,re=t.expanded,ae=t.pages,oe=t.onExpandedChange,se=t.TableComponent,ie=t.TheadComponent,ce=t.TbodyComponent,le=t.TrGroupComponent,ue=t.TrComponent,pe=t.ThComponent,de=t.TdComponent,me=t.TfootComponent,he=t.PaginationComponent,fe=t.LoadingComponent,ge=t.SubComponent,ve=t.NoDataComponent,be=t.ResizerComponent,ye=t.ExpanderComponent,_e=t.PivotValueComponent,Ee=t.PivotComponent,we=t.AggregatedComponent,ke=t.FilterComponent,Oe=t.PadRowComponent,Ce=t.resolvedData,Te=t.allVisibleColumns,Ae=t.headerGroups,Ne=t.hasHeaderGroups,Pe=t.sortedData,Se=t.currentlyResizing,xe=$*Z,je=xe+$,Ie=M?Ce:Pe.slice(xe,je),Re=this.getMinRows(),De=l.range(Math.max(Re-Ie.length,0)),Me=Te.some(function(e){return e.Footer}),Fe=U||Te.some(function(e){return e.filterable}),qe=function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:-1;return[t.map(function(t,a){var o=j({},t,{_viewIndex:r+=1}),s=n.concat([a]);if(o[z]&&l.get(re,s)){var i=e(o[z],s,r),c=x(i,2);o[z]=c[0],r=c[1]}return o}),r]}(Ie),Be=x(qe,1);Ie=Be[0];var Le=Z>0,Qe=Z+1<ae,Ue=l.sum(Te.map(function(e){var t=ne.find(function(t){return t.id===e.id})||{};return l.getFirstDefined(t.value,e.width,e.minWidth)})),Ke=-1,Ve=j({},t,{startRow:xe,endRow:je,pageRows:Ie,minRows:Re,padRows:De,hasColumnFooter:Me,canPrevious:Le,canNext:Qe,rowMinWidth:Ue}),We=l.splitProps(i(Ve,void 0,void 0,this)),ze=l.splitProps(c(Ve,void 0,void 0,this)),Ge=l.splitProps(y(Ve,void 0,void 0,this)),He=N(Ve,void 0,void 0,this),Je=P(Ve,void 0,void 0,this),Ye=function(t,n){var r=function(e){return(ne.find(function(t){return t.id===e.id})||{}).value},o=l.sum(t.columns.map(function(e){return e.width||r(e)?0:e.minWidth})),i=l.sum(t.columns.map(function(e){return l.getFirstDefined(r(e),e.width,e.minWidth)})),c=l.sum(t.columns.map(function(e){return l.getFirstDefined(r(e),e.width,e.maxWidth)})),u=l.splitProps(d(Ve,void 0,t,e)),p=l.splitProps(t.getHeaderProps(Ve,void 0,t,e)),m=[t.headerClassName,u.className,p.className],h=j({},t.headerStyle,u.style,p.style),f=j({},u.rest,p.rest),g={flex:o+" 0 auto",width:l.asPx(i),maxWidth:l.asPx(c)};return a.a.createElement(pe,j({key:n+"-"+t.id,className:s()(m),style:j({},h,g)},f),l.normalizeComponent(t.Header,{data:Pe,column:t}))},Xe=function(t,n){var r=ne.find(function(e){return e.id===t.id})||{},o=ee.find(function(e){return e.id===t.id}),i="function"==typeof t.show?t.show():t.show,c=l.getFirstDefined(r.value,t.width,t.minWidth),u=l.getFirstDefined(r.value,t.width,t.maxWidth),p=l.splitProps(f(Ve,void 0,t,e)),d=l.splitProps(t.getHeaderProps(Ve,void 0,t,e)),m=[t.headerClassName,p.className,d.className],h=j({},t.headerStyle,p.style,d.style),g=j({},p.rest,d.rest),v=l.getFirstDefined(t.resizable,Q,!1),b=v?a.a.createElement(be,j({onMouseDown:function(n){return e.resizeColumnStart(n,t,!1)},onTouchStart:function(n){return e.resizeColumnStart(n,t,!0)}},S("finalState",void 0,t,e))):null,y=l.getFirstDefined(t.sortable,B,!1);return a.a.createElement(pe,j({key:n+"-"+t.id,className:s()(m,v&&"rt-resizable-header",o?o.desc?"-sort-desc":"-sort-asc":"",y&&"-cursor-pointer",!i&&"-hidden",W&&W.slice(0,-1).includes(t.id)&&"rt-header-pivot"),style:j({},h,{flex:c+" 0 auto",width:l.asPx(c),maxWidth:l.asPx(u)}),toggleSort:function(n){y&&e.sortColumn(t,!!L&&n.shiftKey)}},g),a.a.createElement("div",{className:s()(v&&"rt-resizable-header-content")},l.normalizeComponent(t.Header,{data:Pe,column:t})),b)},$e=function(t,n){var r=ne.find(function(e){return e.id===t.id})||{},o=l.getFirstDefined(r.value,t.width,t.minWidth),i=l.getFirstDefined(r.value,t.width,t.maxWidth),c=l.splitProps(b(Ve,void 0,t,e)),u=l.splitProps(t.getHeaderProps(Ve,void 0,t,e)),p=[t.headerClassName,c.className,u.className],d=j({},t.headerStyle,c.style,u.style),m=j({},c.rest,u.rest),h=te.find(function(e){return e.id===t.id}),f=t.Filter||ke,g=l.getFirstDefined(t.filterable,U,!1);return a.a.createElement(pe,j({key:n+"-"+t.id,className:s()(p),style:j({},d,{flex:o+" 0 auto",width:l.asPx(o),maxWidth:l.asPx(i)})},m),g?l.normalizeComponent(f,{column:t,filter:h,onChange:function(n){return e.filterColumn(t,n)}},A.column.Filter):null)},Ze=function(t,n){var r=ne.find(function(e){return e.id===t.id})||{},o="function"==typeof t.show?t.show():t.show,i=l.getFirstDefined(r.value,t.width,t.minWidth),c=i,u=l.getFirstDefined(r.value,t.width,t.maxWidth),p=l.splitProps(w(Ve,void 0,t,e)),d=l.splitProps(t.getProps(Ve,void 0,t,e)),m=[p.className,t.className,d.className],h=j({},p.style,t.style,d.style);return a.a.createElement(de,j({key:n+"-"+t.id,className:s()(m,!o&&"hidden"),style:j({},h,{flex:c+" 0 auto",width:l.asPx(i),maxWidth:l.asPx(u)})},p.rest),l.normalizeComponent(Oe))},et=function(t,n){var r=_(Ve,void 0,void 0,e),o=l.splitProps(E(Ve,void 0,void 0,e));return a.a.createElement(le,j({key:n},r),a.a.createElement(ue,{className:s()("-padRow",(Ie.length+n)%2?"-even":"-odd",o.className),style:o.style||{}},Te.map(Ze)))},tt=function(t,n){var r=ne.find(function(e){return e.id===t.id})||{},o="function"==typeof t.show?t.show():t.show,i=l.getFirstDefined(r.value,t.width,t.minWidth),c=l.getFirstDefined(r.value,t.width,t.maxWidth),u=l.splitProps(C(Ve,void 0,void 0,e)),p=l.splitProps(t.getProps(Ve,void 0,t,e)),d=l.splitProps(t.getFooterProps(Ve,void 0,t,e)),m=[u.className,t.className,p.className,d.className],h=j({},u.style,t.style,p.style,d.style);return a.a.createElement(de,j({key:n+"-"+t.id,className:s()(m,!o&&"hidden"),style:j({},h,{flex:i+" 0 auto",width:l.asPx(i),maxWidth:l.asPx(c)})},p.rest,u.rest,d.rest),l.normalizeComponent(t.Footer,{data:Pe,column:t}))},nt=function(){var n=function(){var n=l.splitProps(T(Ve,void 0,void 0,e));return a.a.createElement(he,j({},t,{pages:ae,canPrevious:Le,canNext:Qe,onPageChange:e.onPageChange,onPageSizeChange:e.onPageSizeChange,className:n.className,style:n.style},n.rest))}();return a.a.createElement("div",j({className:s()("ReactTable",r,We.className),style:j({},o,We.style)},We.rest),I&&R?a.a.createElement("div",{className:"pagination-top"},n):null,a.a.createElement(se,j({className:s()(ze.className,Se?"rt-resizing":""),style:ze.style},ze.rest),Ne?function(){var t=l.splitProps(u(Ve,void 0,void 0,e)),n=l.splitProps(p(Ve,void 0,void 0,e));return a.a.createElement(ie,j({className:s()("-headerGroups",t.className),style:j({},t.style,{minWidth:Ue+"px"})},t.rest),a.a.createElement(ue,j({className:n.className,style:n.style},n.rest),Ae.map(Ye)))}():null,function(){var t=l.splitProps(m(Ve,void 0,void 0,e)),n=l.splitProps(h(Ve,void 0,void 0,e));return a.a.createElement(ie,j({className:s()("-header",t.className),style:j({},t.style,{minWidth:Ue+"px"})},t.rest),a.a.createElement(ue,j({className:n.className,style:n.style},n.rest),Te.map(Xe)))}(),Fe?function(){var t=l.splitProps(g(Ve,void 0,void 0,e)),n=l.splitProps(v(Ve,void 0,void 0,e));return a.a.createElement(ie,j({className:s()("-filters",t.className),style:j({},t.style,{minWidth:Ue+"px"})},t.rest),a.a.createElement(ue,j({className:n.className,style:n.style},n.rest),Te.map($e)))}():null,a.a.createElement(ce,j({className:s()(Ge.className),style:j({},Ge.style,{minWidth:Ue+"px"})},Ge.rest),Ie.map(function(t,n){return function t(n,r){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],i={original:n[H],row:n,index:n[J],viewIndex:Ke+=1,pageSize:$,page:Z,level:o.length,nestingPath:o.concat([r]),aggregated:n[G],groupedByPivot:n[Y],subRows:n[z]},c=l.get(re,i.nestingPath),u=_(Ve,i,void 0,e),p=l.splitProps(E(Ve,i,void 0,e));return a.a.createElement(le,j({key:i.nestingPath.join("_")},u),a.a.createElement(ue,j({className:s()(p.className,n._viewIndex%2?"-even":"-odd"),style:p.style},p.rest),Te.map(function(t,r){var o=ne.find(function(e){return e.id===t.id})||{},u="function"==typeof t.show?t.show():t.show,p=l.getFirstDefined(o.value,t.width,t.minWidth),d=l.getFirstDefined(o.value,t.width,t.maxWidth),m=l.splitProps(w(Ve,i,t,e)),h=l.splitProps(t.getProps(Ve,i,t,e)),f=[m.className,t.className,h.className],g=j({},m.style,t.style,h.style),v=j({},i,{isExpanded:c,column:j({},t),value:i.row[t.id],pivoted:t.pivoted,expander:t.expander,resized:ne,show:u,width:p,maxWidth:d,tdProps:m,columnProps:h,classes:f,styles:g}),b=v.value,y=void 0,_=void 0,E=void 0,k=l.normalizeComponent(t.Cell,v,b),O=t.Aggregated||(t.aggregate?t.Cell:we),C=t.Expander||ye,T=t.PivotValue||_e,A=Ee||function(e){return a.a.createElement("div",null,a.a.createElement(C,e),a.a.createElement(T,e))},N=t.Pivot||A;(v.pivoted||v.expander)&&(v.expandable=!0,y=!0,!v.pivoted||v.subRows||ge||(v.expandable=!1)),v.pivoted?(_=i.row[K]===t.id&&v.subRows,E=W.indexOf(t.id)>W.indexOf(i.row[K])&&v.subRows,k=_?l.normalizeComponent(N,j({},v,{value:n[V]}),n[V]):E?l.normalizeComponent(O,v,b):null):v.aggregated&&(k=l.normalizeComponent(O,v,b)),v.expander&&(k=l.normalizeComponent(C,v,n[V]),W&&(v.groupedByPivot&&(k=null),v.subRows||ge||(k=null)));var P=y?function(t){var n=l.clone(re);return n=c?l.set(n,v.nestingPath,!1):l.set(n,v.nestingPath,{}),e.setStateWithData({expanded:n},function(){return oe&&oe(n,v.nestingPath,t)})}:function(){},S={onClick:P};return m.rest.onClick&&(S.onClick=function(e){m.rest.onClick(e,function(){return P(e)})}),h.rest.onClick&&(S.onClick=function(e){h.rest.onClick(e,function(){return P(e)})}),a.a.createElement(de,j({key:r+"-"+t.id,className:s()(f,!u&&"hidden",v.expandable&&"rt-expandable",(_||E)&&"rt-pivot"),style:j({},g,{flex:p+" 0 auto",width:l.asPx(p),maxWidth:l.asPx(d)})},m.rest,h.rest,S),k)})),i.subRows&&c&&i.subRows.map(function(e,n){return t(e,n,i.nestingPath)}),ge&&!i.subRows&&c&&ge(i))}(t,n)}),De.map(et)),Me?function(){var t=k(Ve,void 0,void 0,e),n=l.splitProps(O(Ve,void 0,void 0,e));return a.a.createElement(me,j({className:t.className,style:j({},t.style,{minWidth:Ue+"px"})},t.rest),a.a.createElement(ue,j({className:s()(n.className),style:n.style},n.rest),Te.map(tt)))}():null),I&&D?a.a.createElement("div",{className:"pagination-bottom"},n):null,!Ie.length&&a.a.createElement(ve,Je,l.normalizeComponent(q)),a.a.createElement(fe,j({loading:X,loadingText:F},He)))};return n?n(Ve,nt,this):nt()}}]),t}();R.propTypes=S,R.defaultProps=A;t.a=R},2357:function(e,t,n){var r={"./18T.png":2241,"./1ST.png":2240,"./58B.png":2239,"./AAC.png":2238,"./AAT.png":2237,"./ABAO.png":2236,"./ABT.png":2235,"./ACAT.png":2234,"./ACE.png":2233,"./ACT.png":2232,"./ADA.png":2231,"./ADD.png":2230,"./ADX.png":2229,"./AE.png":2228,"./AGI.png":2227,"./AID.png":2226,"./AIDOC.png":2225,"./AION.png":2224,"./AISI.png":2223,"./AIT.png":2222,"./AIX.png":2221,"./AMB.png":2220,"./AMM.png":2219,"./AMP.png":2218,"./ANT.png":2217,"./APPC.png":2216,"./ARDR.png":2215,"./ARK.png":2214,"./ARN.png":2213,"./ARP.png":2212,"./AST.png":2211,"./AT.png":2210,"./ATM.png":2209,"./ATMI.png":2208,"./ATN.png":2207,"./AUTO.png":2206,"./AVH.png":2205,"./AVT.png":2204,"./BAIC.png":2203,"./BANCA.png":2202,"./BASH.png":2201,"./BAT.png":2200,"./BBC.png":2199,"./BBN.png":2198,"./BC.png":2197,"./BCAT.png":2196,"./BCD.png":2195,"./BCDN.png":2194,"./BCH.png":2193,"./BCN.png":2192,"./BCPT.png":2191,"./BCV.png":2190,"./BCX.png":2189,"./BDB.png":2188,"./BDC.png":2187,"./BDG.png":2186,"./BDS.png":2185,"./BEC.png":2184,"./BFDT.png":2183,"./BFT.png":2182,"./BHC.png":2181,"./BIFI.png":2180,"./BIG.png":2179,"./BIT.png":2178,"./BITCNY.png":2177,"./BITE.png":2176,"./BIX.png":2175,"./BKBT.png":2174,"./BKK.png":2173,"./BKX.png":2172,"./BLK.png":2171,"./BLZ.png":2170,"./BMB.png":2169,"./BMX.png":2168,"./BNB.png":2167,"./BNK.png":2166,"./BNT.png":2165,"./BNTY.png":2164,"./BOE.png":2163,"./BOS.png":2162,"./BOT.png":2161,"./BOX.png":2160,"./BQT.png":2159,"./BRD.png":2158,"./BT.png":2157,"./BTC.png":2156,"./BTCD.png":2155,"./BTG.png":2154,"./BTH.png":2153,"./BTM.png":2152,"./BTMC.png":2151,"./BTN.png":2150,"./BTO.png":2149,"./BTP.png":2148,"./BTS.png":2147,"./BTX.png":2146,"./BTY.png":2145,"./BU.png":2144,"./BURST.png":2143,"./BUT.png":2142,"./BWT.png":2141,"./BYC.png":2140,"./BZNT.png":2139,"./CAF.png":2138,"./CAG.png":2137,"./CAI.png":2136,"./CAN.png":2135,"./CANDY.png":2134,"./CAPP.png":2133,"./CAR.png":2132,"./CARD.png":2131,"./CAT.png":2130,"./CCT.png":2129,"./CDC.png":2128,"./CDT.png":2127,"./CEO.png":2126,"./CET.png":2125,"./CFUN.png":2124,"./CHAT.png":2123,"./CIC.png":2122,"./CIT.png":2121,"./CLOAK.png":2120,"./CMS.png":2119,"./CMT.png":2118,"./CND.png":2117,"./CNET.png":2116,"./CNN.png":2115,"./CNX.png":2114,"./COB.png":2113,"./COFI.png":2112,"./CONI.png":2111,"./COO.png":2110,"./COSS.png":2109,"./CP.png":2108,"./CPC.png":2107,"./CPS.png":2106,"./CPX.png":2105,"./CRE.png":2104,"./CREDO.png":2103,"./CRPT.png":2102,"./CS.png":2101,"./CSM.png":2100,"./CTE.png":2099,"./CTR.png":2098,"./CTXC.png":2097,"./CVC.png":2096,"./CVT.png":2095,"./CWV.png":2094,"./CYB.png":2093,"./CZR.png":2092,"./DACC.png":2091,"./DADI.png":2090,"./DAI.png":2089,"./DASH.png":2088,"./DAT.png":2087,"./DATA.png":2086,"./DATX.png":2085,"./DAX.png":2084,"./DBC.png":2083,"./DCC.png":2082,"./DCN.png":2081,"./DCR.png":2080,"./DCT.png":2079,"./DDC.png":2078,"./DDD.png":2077,"./DDM.png":2076,"./DEL.png":2075,"./DENT.png":2074,"./DEW.png":2073,"./DFN.png":2072,"./DFT.png":2071,"./DGB.png":2070,"./DGD.png":2069,"./DIME.png":2068,"./DLT.png":2067,"./DNA.png":2066,"./DNT.png":2065,"./DOCK.png":2064,"./DOGE.png":2063,"./DPY.png":2062,"./DRGN.png":2061,"./DSCB.png":2060,"./DT.png":2059,"./DTA.png":2058,"./EAC.png":2057,"./ECC.png":2056,"./ECN.png":2055,"./ECT.png":2054,"./EDG.png":2053,"./EDO.png":2052,"./EDR.png":2051,"./EDT.png":2050,"./EDU.png":2049,"./EES.png":2048,"./EET.png":2047,"./EGCC.png":2046,"./EGT.png":2045,"./EIF.png":2044,"./EKO.png":2043,"./EKT.png":2042,"./ELA.png":2041,"./ELF.png":2040,"./EMC.png":2039,"./ENG.png":2038,"./ENJ.png":2037,"./ENSA.png":2036,"./ENT.png":2035,"./ENU.png":2034,"./EON.png":2033,"./EOP.png":2032,"./EOS.png":2031,"./EOSDAC.png":2030,"./EOSRAM.png":2029,"./EPC.png":2028,"./ESS.png":2027,"./ETC.png":2026,"./ETF.png":2025,"./ETH.M.png":2024,"./ETH.png":2023,"./ETHOS.png":2022,"./ETN.png":2021,"./ETP.png":2020,"./ETZ.png":2019,"./EVX.png":2018,"./EXRN.png":2017,"./EXT.png":2016,"./FAB.png":2015,"./FAIR.png":2014,"./FCANDY.png":2013,"./FCT.png":2012,"./FDZ.png":2011,"./FGC.png":2010,"./FI.png":2009,"./FIL12.png":2008,"./FIL36.png":2007,"./FIL6.png":2006,"./FLP.png":2005,"./FNKOS.png":2004,"./FOTA.png":2003,"./FRD.png":2002,"./FSN.png":2001,"./FT.png":2e3,"./FTC.png":1999,"./FTI.png":1998,"./FTO.png":1997,"./FUEL.png":1996,"./FUN.png":1995,"./GAME.png":1994,"./GARD.png":1993,"./GAS.png":1992,"./GAT.png":1991,"./GBYTE.png":1990,"./GCS.png":1989,"./GCT.png":1988,"./GEC.png":1987,"./GEM.png":1986,"./GEN.png":1985,"./GNO.png":1984,"./GNT.png":1983,"./GNX.png":1982,"./GO.png":1981,"./GOD.png":1980,"./GOOC.png":1979,"./GOT.png":1978,"./GRAM.png":1977,"./GRS.png":1976,"./GSC.png":1975,"./GSE.png":1974,"./GST.png":1973,"./GTC.png":1972,"./GTO.png":1971,"./GUS.png":1970,"./GVE.png":1969,"./GVT.png":1968,"./GXS.png":1967,"./HAND.png":1966,"./HBT.png":1965,"./HCC.png":1964,"./HDA.png":1963,"./HEC.png":1962,"./HER.png":1961,"./HGT.png":1960,"./HIT.png":1959,"./HLC.png":1958,"./HMC.png":1957,"./HOLD.png":1956,"./HOT.png":1955,"./HOTC.png":1954,"./HPB.png":1953,"./HPY.png":1952,"./HSC.png":1951,"./HSR.png":1950,"./HT.png":1949,"./HTB.png":1948,"./HYB.png":1947,"./ICN.png":1946,"./ICO.png":1945,"./ICST.png":1944,"./ICX.png":1943,"./IDT.png":1942,"./IFC.png":1941,"./IGNIS.png":1940,"./IHT.png":1939,"./IIC.png":1938,"./IMT.png":1937,"./INC.png":1936,"./IND.png":1935,"./INF.png":1934,"./INK.png":1933,"./INS.png":1932,"./INSUR.png":1931,"./INT.png":1930,"./IOST.png":1929,"./IOTX.png":1928,"./IOV.png":1927,"./IPC.png":1926,"./IPT.png":1925,"./IQ.png":1924,"./ITC.png":1923,"./J8T.png":1922,"./JEX.png":1921,"./JNT.png":1920,"./JRC.png":1919,"./KAN.png":1918,"./KCASH.png":1917,"./KCS.png":1916,"./KEY.png":1915,"./KICK.png":1914,"./KIN.png":1913,"./KK.png":1912,"./KMC.png":1911,"./KMD.png":1910,"./KNC.png":1909,"./KNT.png":1908,"./LA.png":1907,"./LBA.png":1906,"./LBC.png":1905,"./LBTC.png":1904,"./LEDU.png":1903,"./LEEK.png":1902,"./LEMO.png":1901,"./LEND.png":1900,"./LET.png":1899,"./LFT.png":1898,"./LIFE.png":1897,"./LIGHT.png":1896,"./LINK.png":1895,"./LLT.png":1894,"./LMC.png":1893,"./LOOM.png":1892,"./LRC.png":1891,"./LRN.png":1890,"./LSK.png":1889,"./LTC.png":1888,"./LTS.png":1887,"./LUC.png":1886,"./LUN.png":1885,"./LXT.png":1884,"./LYM.png":1883,"./MAG.png":1882,"./MAID.png":1881,"./MAN.png":1880,"./MANA.png":1879,"./MCC.png":1878,"./MCO.png":1877,"./MDA.png":1876,"./MDS.png":1875,"./MDT.png":1874,"./MED.png":1873,"./MEET.ONE.png":1872,"./MEET.png":1871,"./MEX.png":1870,"./MFT.png":1869,"./MGC.png":1868,"./MGD.png":1867,"./MGO.png":1866,"./MIOTA.png":1865,"./MITH.png":1864,"./MKR.png":1863,"./MOAC.png":1862,"./MOBI.png":1861,"./MOD.png":1860,"./MOF.png":1859,"./MONA.png":1858,"./MOON.png":1857,"./MOT.png":1856,"./MST.png":1855,"./MT.png":1854,"./MTC.png":1853,"./MTH.png":1852,"./MTL.png":1851,"./MTN.png":1850,"./MTX.png":1849,"./MUSK.png":1848,"./MVC.png":1847,"./MVP.png":1846,"./MXM.png":1845,"./MYST.png":1844,"./NANO.png":1843,"./NAS.png":1842,"./NAV.png":1841,"./NBAI.png":1840,"./NCASH.png":1839,"./NCT.png":1838,"./NEAL.png":1837,"./NEBL.png":1836,"./NEO.png":1835,"./NEXO.png":1834,"./NGC.png":1833,"./NKC.png":1832,"./NKN.png":1831,"./NPC.png":1830,"./NPW.png":1829,"./NPXS.png":1828,"./NTK.png":1827,"./NULS.png":1826,"./NXCT.png":1825,"./NXS.png":1824,"./NXT.png":1823,"./OAX.png":1822,"./OC.png":1821,"./OCN.png":1820,"./OCT.png":1819,"./OCX.png":1818,"./OF.png":1817,"./OK.png":1816,"./OKB.png":1815,"./OLT.png":1814,"./OMG.png":1813,"./OMX.png":1812,"./ONE.png":1811,"./ONION.png":1810,"./ONT.png":1809,"./OPEN.png":1808,"./ORS.png":1807,"./OSCH.png":1806,"./OST.png":1805,"./OTB.png":1804,"./PAI.png":1803,"./PART.png":1802,"./PASC.png":1801,"./PAY.png":1800,"./PC.png":1799,"./PCH.png":1798,"./PDX.png":1797,"./PGD.png":1796,"./PIVX.png":1795,"./PIX.png":1794,"./PMD.png":1793,"./PNT.png":1792,"./POA.png":1791,"./POE.png":1790,"./POLY.png":1789,"./PORTAL.png":1788,"./POWR.png":1787,"./PPC.png":1786,"./PPP.png":1785,"./PPS.png":1784,"./PPT.png":1783,"./PRA.png":1782,"./PRO.png":1781,"./PRS.png":1780,"./PST.png":1779,"./PTOY.png":1778,"./PUT.png":1777,"./PXC.png":1776,"./QASH.png":1775,"./QBT.png":1774,"./QKC.png":1773,"./QLC.png":1772,"./QRK.png":1771,"./QSP.png":1770,"./QTUM.png":1769,"./QUBE.png":1768,"./QUN.png":1767,"./RATING.png":1766,"./RCN.png":1765,"./RCT.png":1764,"./RDD.png":1763,"./RDN.png":1762,"./READ.png":1761,"./REAL.png":1760,"./RED.png":1759,"./REM.png":1758,"./REN.png":1757,"./REP.png":1756,"./REQ.png":1755,"./RFR.png":1754,"./RHOC.png":1753,"./RISE.png":1752,"./RISK.png":1751,"./RLC.png":1750,"./RMESH.png":1749,"./RNT.png":1748,"./RNTB.png":1747,"./RPX.png":1746,"./RUFF.png":1745,"./RVN.png":1744,"./RVT.png":1743,"./SAFE.png":1742,"./SALT.png":1741,"./SAN.png":1740,"./SBTC.png":1739,"./SC.png":1738,"./SCL.png":1737,"./SDA.png":1736,"./SDD.png":1735,"./SDZ.png":1734,"./SEC.png":1733,"./SEELE.png":1732,"./SEER.png":1731,"./SEN.png":1730,"./SENC.png":1729,"./SER.png":1728,"./SEXC.png":1727,"./SGCC.png":1726,"./SHE.png":1725,"./SHOW.png":1724,"./SIC.png":1723,"./SIGMA.png":1722,"./SKM.png":1721,"./SKY.png":1720,"./SMART.png":1719,"./SMT.png":1718,"./SNC.png":1717,"./SNGLS.png":1716,"./SNM.png":1715,"./SNOV.png":1714,"./SNT.png":1713,"./SOAR.png":1712,"./SOC.png":1711,"./SOP.png":1710,"./SOUL.png":1709,"./SPC.png":1708,"./SPF.png":1707,"./SPHTX.png":1706,"./SRN.png":1705,"./SSC.png":1704,"./SSP.png":1703,"./SSS.png":1702,"./STAR.png":1701,"./STC.png":1700,"./STEEM.png":1699,"./STK.png":1698,"./STORJ.png":1697,"./STORM.png":1696,"./STRAT.png":1695,"./STX.png":1694,"./SUB.png":1693,"./SWFTC.png":1692,"./SWT.png":1691,"./SWTC.png":1690,"./SWTH.png":1689,"./SYS.png":1688,"./TAC.png":1687,"./TAU.png":1686,"./TCASH.png":1685,"./TCH.png":1684,"./TCT.png":1683,"./TEL.png":1682,"./THETA.png":1681,"./TIO.png":1680,"./TIPS.png":1679,"./TKY.png":1678,"./TMT.png":1677,"./TNB.png":1676,"./TNC.png":1675,"./TNT.png":1674,"./TOMO.png":1673,"./TOP.png":1672,"./TOPC.png":1671,"./TOS.png":1670,"./TRA.png":1669,"./TRCT.png":1668,"./TRIG.png":1667,"./TRIO.png":1666,"./TRST.png":1665,"./TRUE.png":1664,"./TRX.png":1663,"./TSL.png":1662,"./TTT.png":1661,"./TUSD.png":1660,"./TV.png":1659,"./UBQ.png":1658,"./UBTC.png":1657,"./UC.png":1656,"./UCT.png":1655,"./UGC.png":1654,"./UIP.png":1653,"./UKG.png":1652,"./UPP.png":1651,"./USDT.png":1650,"./UT.png":1649,"./UTK.png":1648,"./UUU.png":1647,"./VCT.png":1646,"./VEE.png":1645,"./VET.png":1644,"./VIA.png":1643,"./VIB.png":1642,"./VIBE.png":1641,"./VITE.png":1640,"./VIU.png":1639,"./VLC.png":1638,"./VNS.png":1637,"./VNT.png":1636,"./VRC.png":1635,"./VTC.png":1634,"./WAB.png":1633,"./WABI.png":1632,"./WAC.png":1631,"./WAN.png":1630,"./WAVES.png":1629,"./WAX.png":1628,"./WDC.png":1627,"./WGR.png":1626,"./WICC.png":1625,"./WIN.png":1624,"./WINGS.png":1623,"./WPR.png":1622,"./WRC.png":1621,"./WTC.png":1620,"./WWB.png":1619,"./XAS.png":1618,"./XDAG.png":1617,"./XDN.png":1616,"./XEL.png":1615,"./XEM.png":1614,"./XIN.png":1613,"./XLM.png":1612,"./XMC.png":1611,"./XMR.png":1610,"./XMX.png":1609,"./XNN.png":1608,"./XP.png":1607,"./XPM.png":1606,"./XPX.png":1605,"./XRP.png":1604,"./XTZ.png":1603,"./XUC.png":1602,"./XVG.png":1601,"./XWC.png":1600,"./XZC.png":1599,"./YCC.png":1598,"./YEE.png":1597,"./YOU.png":1596,"./YOYOW.png":1595,"./ZB.png":1594,"./ZCC.png":1593,"./ZCL.png":1592,"./ZCN.png":1591,"./ZCO.png":1590,"./ZEC.png":1589,"./ZEN.png":1588,"./ZGC.png":1587,"./ZIB.png":1586,"./ZIL.png":1585,"./ZIP.png":1584,"./ZJLT.png":1583,"./ZLA.png":1582,"./ZPT.png":1581,"./ZRX.png":1580,"./ZSC.png":1579,"./ZXC.png":1578,"./undefined.png":1577};function a(e){var t=o(e);return n(t)}function o(e){var t=r[e];if(!(t+1)){var n=new Error("Cannot find module '"+e+"'");throw n.code="MODULE_NOT_FOUND",n}return t}a.keys=function(){return Object.keys(r)},a.resolve=o,e.exports=a,a.id=2357},2358:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var r=n(0),a=n(26),o=n.n(a),s=n(2354),i=n(9),c=n.n(i),l=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var u=function(e){function t(){return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r["Component"]),l(t,[{key:"render",value:function(){return r.createElement(s.a,Object.assign({previousText:c.a.translate("table.previousText"),nextText:c.a.translate("table.nextText"),loadingText:c.a.translate("table.loadingText"),pageText:c.a.translate("table.pageText"),ofText:c.a.translate("table.ofText")+" ",rowsText:c.a.translate("table.rowsText"),defaultPageSize:10},this.props,{data:this.props.data,columns:this.props.columns,className:o()("-striped -highlight",this.props.className)}))}}]),t}()},2359:function(e,t,n){"use strict";var r=n(0),a=n(69),o=n.n(a),s=n(7),i=n(9);t.a=function(e){var t=e.dateTime,n=e.id;return r.createElement("span",{className:"datetime",style:{cursor:"help"},"data-place":"top","data-offset":"{ 'left': -50 }","data-effect":"solid","data-tip":!0,"data-for":n},t,r.createElement(o.a,{id:n},i.translate("eto.local_time")+": "+s.utc(t).toDate().toString()))}},2372:function(e,t,n){"use strict";n.d(t,"b",function(){return O}),n.d(t,"c",function(){return k}),n.d(t,"a",function(){return C});var r=n(0),a=n(2),o=n(1109),s=n(64),i=n(8),c=n(1),l=n.n(c),u=n(2312),p=n(2288),d=n(80),m=n(51),h=n(3),f=n(37),g=n(2301),v=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();function b(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function E(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}var w={textAlign:"right"},k=function(e){function t(){return y(this,t),_(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return E(t,r["Component"]),v(t,[{key:"render",value:function(){var e=this.props,t=e.baseSymbol,n=e.quoteSymbol,a=e.dashboard,o=e.isMyAccount,s=e.settings,i=s?s.get("unit"):"1.3.0";return a?r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",null,r.createElement(l.a,{content:"account.cyb_market"})),r.createElement("th",{style:w},r.createElement(l.a,{content:"exchange.price"})),r.createElement("th",{style:w},r.createElement(l.a,{content:"account.qty"})),r.createElement("th",{style:w},r.createElement(l.a,{content:"exchange.total"})),r.createElement("th",{style:w},r.createElement(l.a,{content:"exchange.order_value"})," (",r.createElement(d.a,{name:i}),")"),r.createElement("th",null,r.createElement(l.a,{content:"account.trade"})),o?r.createElement("th",null,r.createElement(l.a,{content:"wallet.cancel"})):null)):r.createElement("thead",null,r.createElement("tr",null,r.createElement("th",{className:"text-right"},r.createElement(l.a,{className:"header-sub-title",content:"exchange.price"})),r.createElement("th",{className:"text-right"},t?r.createElement("span",{className:"header-sub-title"},r.createElement(d.a,{dataPlace:"top",name:n})):null),r.createElement("th",{className:"text-right"},t?r.createElement("span",{className:"header-sub-title"},r.createElement(d.a,{dataPlace:"top",name:t})):null),r.createElement("th",{className:"text-right",style:{width:"28%"}},r.createElement(l.a,{className:"header-sub-title",content:"transaction.expiration"})),r.createElement("th",{style:{whiteSpace:"nowrap"}},r.createElement(l.a,{content:"wallet.cancel"}))))}}]),t}();k.defaultProps={quoteSymbol:null,baseSymbol:null};var O=function(e){function t(){return y(this,t),_(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return E(t,r["Component"]),v(t,[{key:"shouldComponentUpdate",value:function(e){return e.order.for_sale!==this.props.order.for_sale||e.order.id!==this.props.order.id||e.isMyAccount!==this.props.isMyAccount||e.quote!==this.props.quote||e.base!==this.props.base||e.order.market_base!==this.props.order.market_base}},{key:"render",value:function(){var e=this.props,t=e.base,n=e.quote,a=e.order,c=e.showSymbols,l=e.dashboard,p=e.isMyAccount,h=e.settings,f=a.isBid(),v=a.isCall(),b=(v?"orderHistoryCall":f?"orderHistoryBid":"orderHistoryAsk")+" text-right",y=c?r.createElement("span",null," "+t.get("symbol")+"/"+n.get("symbol")):null,_=c?" "+t.get("symbol"):null,E=c?" "+n.get("symbol"):null,k=h?h.get("unit"):"1.3.0";return l?r.createElement("tr",{key:a.id},r.createElement("td",{style:{textAlign:"center",paddingLeft:0,borderRight:"none"}},r.createElement(o.a,{to:"/asset/"+n.get("symbol")},r.createElement(d.a,{noTip:!0,name:n.get("symbol")})),"/",r.createElement(o.a,{to:"/asset/"+t.get("symbol")},r.createElement(d.a,{noTip:!0,name:t.get("symbol")}))),r.createElement("td",{className:b,style:w},r.createElement(u.a,{price:a.getPrice(),base:t,quote:n}),y),r.createElement("td",{style:w},i.a.format_number(a[f?"amountToReceive":"amountForSale"]().getAmount({real:!0}),n.get("precision"))," ",E),r.createElement("td",{style:w},i.a.format_number(a[f?"amountForSale":"amountToReceive"]().getAmount({real:!0}),t.get("precision"))," ",_),r.createElement("td",{className:"text-right"},r.createElement(g.b,{hide_asset:!0,amount:a.amountForSale().getAmount(),fromAsset:a.amountForSale().asset_id,noDecimals:!0,toAsset:k})),r.createElement("td",null,r.createElement(o.a,{to:"/market/"+n.get("symbol")+"_"+t.get("symbol")},r.createElement(m.a,{name:"trade",className:"icon-14px"}))),p?r.createElement("td",{className:"text-center",style:{padding:"2px 5px"}},v?null:r.createElement("a",{style:{marginRight:0},className:"order-cancel",onClick:this.props.onCancel},r.createElement(m.a,{name:"cross-circle",className:"icon-14px"}))):null):r.createElement("tr",{key:a.id},r.createElement("td",{className:b,style:{paddingLeft:10}},r.createElement(u.a,{price:a.getPrice(),base:t,quote:n}),y),r.createElement("td",{className:"text-right"},i.a.format_number(a[f?"amountToReceive":"amountForSale"]().getAmount({real:!0}),n.get("precision"))," ",E),r.createElement("td",{className:"text-right"},i.a.format_number(a[f?"amountForSale":"amountToReceive"]().getAmount({real:!0}),t.get("precision"))," ",_),r.createElement("td",{className:"text-right",style:{width:"28%"}},v?null:r.createElement(s.a,{value:a.expiration,format:"short"})),r.createElement("td",{className:"text-center",style:{padding:"2px 5px"}},v?null:r.createElement("a",{style:{marginRight:0},className:"order-cancel",onClick:this.props.onCancel},r.createElement(m.a,{name:"cross-circle",className:"icon-14px"}))))}}]),t}();O.defaultProps={showSymbols:!1};var C=function(e){function t(e){y(this,t);var n=_(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n._getOrders=n._getOrders.bind(n),n}return E(t,r["Component"]),v(t,[{key:"componentDidMount",value:function(){}},{key:"componentDidUpdate",value:function(){}},{key:"_getOrders",value:function(){var e,t=this,n=this.props,r=n.currentAccount,a=n.base,o=n.quote,s=r.get("orders"),i=r.get("call_orders"),c=a.get("id"),l=o.get("id"),u=(b(e={},a.get("id"),{precision:a.get("precision")}),b(e,o.get("id"),{precision:o.get("precision")}),e),p=s.toArray().map(function(e){var t=h.b.getObject(e);if(!t)return null;var n=t.getIn(["sell_price","base","asset_id"]),r=t.getIn(["sell_price","quote","asset_id"]);return n===c&&r===l||n===l&&r===c?new f.d(t.toJS(),u,o.get("id")):void 0}).filter(function(e){return!!e}),d=i.toArray().map(function(e){var n=h.b.getObject(e);if(!n)return null;var r=n.getIn(["call_price","base","asset_id"]),a=n.getIn(["call_price","quote","asset_id"]);return r===c&&a===l||r===l&&a===c?t.props.feedPrice?new f.b(n.toJS(),u,o.get("id"),t.props.feedPrice):null:void 0}).filter(function(e){return!!e}).filter(function(e){return e.isMarginCalled()});return p.concat(d)}},{key:"render",value:function(){var e=this,t=this.props,n=t.base,a=t.quote,o=t.quoteSymbol,s=t.baseSymbol;if(!n||!a)return null;var i=this._getOrders(),c=r.createElement("tr",null,r.createElement("td",{style:{textAlign:"center"},colSpan:5},r.createElement(l.a,{content:"account.no_orders"}))),u=i.filter(function(e){return e.isBid()}).sort(function(e,t){return t.getPrice()-e.getPrice()}).map(function(t){var o=t.getPrice();return r.createElement(O,{price:o,key:t.id,order:t,base:n,quote:a,onCancel:e.props.onCancel.bind(e,t.id)})}),d=i.filter(function(e){return!e.isBid()}).sort(function(e,t){return e.getPrice()-t.getPrice()}).map(function(t){var o=t.getPrice();return r.createElement(O,{price:o,key:t.id,order:t,base:n,quote:a,onCancel:e.props.onCancel.bind(e,t.id)})}),m=[];return d.length&&(m=m.concat(d)),u.length&&(m=m.concat(u)),m.sort(function(e,t){return e.props.price-t.props.price}),r.createElement(r.Fragment,null,r.createElement("div",{className:"exchange-content-header"},r.createElement(l.a,{content:"exchange.my_orders"})),r.createElement("table",{className:"table order-table table-hover"},r.createElement(k,{type:"sell",baseSymbol:s,quoteSymbol:o})),r.createElement("div",{className:"grid-block no-padding market-right-padding _scroll-bar",ref:"asks",style:{overflow:"auto",maxHeight:720}},r.createElement("table",{style:{paddingBottom:5},className:"table order-table table-hover"},r.createElement(p.a,{component:"tbody",transitionName:"newrow"},m.length?m:c))))}}]),t}();C.defaultProps={base:{},quote:{},orders:{},quoteSymbol:"",baseSymbol:""},C.propTypes={base:a.object.isRequired,quote:a.object.isRequired,orders:a.object.isRequired,quoteSymbol:a.string.isRequired,baseSymbol:a.string.isRequired}},2376:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var a=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.cache={}}return r(e,[{key:"get",value:function(e){return this.cache[e]}},{key:"set",value:function(e,t){var n=this;this.cache[e]=t,t.then(function(t){t.error&&n.remove(e)})}},{key:"remove",value:function(e){delete this.cache[e]}},{key:"clear",value:function(){this.cache={}}}]),e}();t.default=a},2377:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.parseBody=void 0;!function(e){e&&e.__esModule}(n(0));t.parseBody=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=e.headers.get("Content-Type");if(null===n)return Promise.resolve(null);var r=n.split(";")[0].trim();return r in t?t[r](e):"application/json"===r||"text/json"===r||/\+json$/.test(r)?"json"in t?t.json(e):e.json():"text/html"===r?"html"in t?t.html(e):e.text():"application/xml"===r||"text/xml"===r||/\+xml$/.test(r)?"xml"in t?t.xml(e):e.text():"other"in t?t.other(e):e.arrayBuffer()}},2418:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},a="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),s=n(0),i=u(s),c=n(2377),l=u(n(2376));function u(e){return e&&e.__esModule?e:{default:e}}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function d(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var m=i.default.createContext({}),h=function(e){function t(){var e,n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),s=0;s<a;s++)o[s]=arguments[s];return n=r=d(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(o))),r.state={request:{url:r.props.url,options:r.props.options},fetch:r.fetch.bind(r),clearData:r.clearData.bind(r),loading:null},r.cache=null,r.promises=[],d(r,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,s.Component),o(t,[{key:"getOptions",value:function(e){return"function"==typeof e?e():e}},{key:"setCache",value:function(e){this.cache=!0===this.props.cache?new l.default:"object"===a(this.props.cache)?this.props.cache:null}},{key:"componentDidMount",value:function(){var e=this.props,t=e.url,n=e.options,r=e.manual,a=e.onChange,o=e.cache;this.mounted=!0,this.setCache(o),"function"==typeof a&&a(this.state),t&&!r&&this.fetch(t,n)}},{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.url,r=t.options,a=t.manual,o=t.cache;n===e.url||a||this.fetch(n,r),o!==e.cache&&this.setCache(o)}},{key:"componentWillUnmount",value:function(){this.mounted=!1}},{key:"fetch",value:function(e,t,n){var r=this,o=this.props,s=o.as;o.cache;null==e&&(e=this.props.url);var i={url:e,options:t=this.getOptions(t||this.props.options)};if(!this.cache||!this.cache.get(e)){this.update({request:i,loading:!0},null,n);var l=this.props.fetchFunction(e,t).then(function(e){return("function"==typeof s?s(e):"object"===(void 0===s?"undefined":a(s))?(0,c.parseBody)(e,s):"auto"===s?(0,c.parseBody)(e):e[s]()).then(function(t){return{response:e,data:t}}).catch(function(t){return{response:e,data:t}})}).then(function(e){var t,a=e.response,o=e.data,s=(p(t={request:i,loading:!1},a.ok?"error":"data",void 0),p(t,a.ok?"data":"error",o),p(t,"response",a),t);return r.update(s,l,n),s}).catch(function(e){var t={request:i,data:void 0,error:e,loading:!1};throw r.update(t,l,n),e});return this.promises.push(l),this.cache&&this.cache.set(e,l),l}var u=this.cache.get(e);u.then(function(e){return r.update(e,u,n)}),this.promises.push(u)}},{key:"clearData",value:function(){this.setState({data:void 0})}},{key:"update",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(t){var a=this.promises.indexOf(t);if(-1===a)return;this.promises.splice(0,a+1)}var o=this.props,s=o.onChange,i=o.onDataChange,c=void 0;e.data&&e.data!==this.state.data&&"function"==typeof i&&(c=i(e.data,n.ignorePreviousData?void 0:this.state.data)),"function"==typeof s&&s(r({},this.state,e,void 0!==c&&{data:c})),this.mounted&&this.setState(r({},e,void 0!==c&&{data:c}))}},{key:"render",value:function(){var e=this.props.children;return i.default.createElement(m.Provider,{value:this.state},"function"==typeof e?i.default.createElement(m.Consumer,null,e):e)}}]),t}();h.defaultProps={as:"auto",fetchFunction:function(e,t){return fetch(e,t)}},h.Consumer=m.Consumer,t.default=h},2419:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n(2418);Object.defineProperty(t,"default",{enumerable:!0,get:function(){return s(r).default}});var a=n(2376);Object.defineProperty(t,"SimpleCache",{enumerable:!0,get:function(){return s(a).default}});var o=n(2377);function s(e){return e&&e.__esModule?e:{default:e}}Object.defineProperty(t,"parseBody",{enumerable:!0,get:function(){return o.parseBody}})},2420:function(e,t,n){"use strict";(function(e){var r=n(0),a=(n(2),n(1)),o=n.n(a),s=n(22),i=n(24),c=n(8),l=n(9),u=n.n(l),p=n(2284),d=n(338),m=n(2277),h=n(177),f=n(2314),g=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();var v=function(t){function n(e){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,n);var t=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}(this,(n.__proto__||Object.getPrototypeOf(n)).call(this,e)),r=t.props.asset.options,a=Object(h.d)(r,"vesting_period")||void 0;return t.state={amount:e.amount,to:e.to,to_id:null,memo:void 0,vestingPeriod:a},t}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(n,r["Component"]),g(n,[{key:"onAmountChanged",value:function(e){var t=e.amount;e.asset;this.setState({amount:t})}},{key:"onToAccountChanged",value:function(e){var t=e?{to:e.get("name"),to_id:e.get("id")}:{to_id:null};this.setState(t)}},{key:"onToChanged",value:function(e){this.setState({to:e,to_id:null})}},{key:"onPeriodChange",value:function(e){this.setState({vestingPeriod:e})}},{key:"onSubmit",value:function(){var t=this.props.asset_to_issue,n=c.a.get_asset_precision(t.get("precision")),r=this.state.amount.replace(/,/g,"");r*=n;var a=this.props.asset.options,o=Object(h.d)(a,"vesting_period");p.a.issueAsset(this.state.to_id,t.get("issuer"),t.get("id"),r,this.state.memo?new e(this.state.memo,"utf-8"):this.state.memo,o&&this.state.vestingPeriod),this.setState({amount:null,to_id:null,memo:null})}},{key:"onMemoChanged",value:function(e){this.setState({memo:e.target.value})}},{key:"render",value:function(){var e=this.props.asset_to_issue.get("id"),t=1,n=this.props.asset.options,a=Object(h.d)(n,"vesting_period");return r.createElement("form",{className:"grid-block vertical full-width-content"},r.createElement("div",{className:"grid-container ",style:{paddingTop:"2rem"}},r.createElement("div",{className:"content-block"},r.createElement(d.a,{label:"modal.issue.to",accountName:this.state.to,onAccountChanged:this.onToAccountChanged.bind(this),onChange:this.onToChanged.bind(this),account:this.state.to,tabIndex:t++})),r.createElement("div",{className:"content-block"},r.createElement(m.a,{label:"modal.issue.amount",amount:this.state.amount,onChange:this.onAmountChanged.bind(this),asset:e,assets:[e],tabIndex:t++})),a&&r.createElement("div",{className:"content-block"},r.createElement("label",{htmlFor:"issueVesting"},r.createElement(o.a,{component:"span",content:"account.user_issued_assets.vesting_period"})),r.createElement(f.a,{className:"period-horizontal",defaultPeriod:this.state.vestingPeriod||a,name:"issue",tabIndex:t+=2,onPeriodChange:this.onPeriodChange.bind(this)})),r.createElement("div",{className:"content-block"},r.createElement("label",null,r.createElement(o.a,{component:"span",content:"transfer.memo"})," (",r.createElement(o.a,{content:"transfer.optional"}),")"),r.createElement("textarea",{rows:"1",value:this.state.memo,tabIndex:t++,onChange:this.onMemoChanged.bind(this)})),r.createElement("div",{className:"content-block button-group"},r.createElement("input",{type:"submit",className:"button success",onClick:this.onSubmit.bind(this,this.state.to,this.state.amount),value:u.a.translate("modal.issue.submit"),tabIndex:t++}),r.createElement("div",{className:"button",onClick:this.props.onClose,tabIndex:t++},u.a.translate("cancel")))))}}]),n}();v.propTypes={asset_to_issue:s.a.ChainAsset.isRequired},t.a=Object(i.a)(v)}).call(this,n(20).Buffer)}}]);